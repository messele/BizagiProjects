$.bizagi||($.bizagi={processviewer:{}}),$.bizagi.processviewer={configuration:{constants:{ELEMENT_TYPE:{PROCESS:"Process",LANE:"Lane",MILESTONES:"Milestone",TEXTANNOTATION:"TextAnnotation",ASSOCIATION:"Association",SEQUENCEFLOW:"SequenceFlow"},CONDITION_TYPE:{SUBPROCESSEXP:"SubprocessException",CANCELLATION:"Cancellation",NORMAL:"Normal",RELATION:"Relation",COMPENSATION:"Compensation"},PROPERTIES:{WAYPOINTS:"waypoints",BOUNDS:"bounds"},LANESETS:"laneSets",LANES:"lanes",BPMNLABELSTYLES:"bpmnLabelStyles"},validTypeDefinitions:["artifacts","flowElements","laneSets","milestones"]},design:{markers:{normal:{type:"path",properties:{d:"M0.616,9.401  l2.05-4.4l-2.05-4.399l8.8,4.433L0.616,9.401",class:"normal"}},highlighted:{type:"path",properties:{d:"M0.616,9.401  l2.05-4.4l-2.05-4.399l8.8,4.433L0.616,9.401",class:"highlighted"}},selected:{type:"path",properties:{d:"M0.616,9.401  l2.05-4.4l-2.05-4.399l8.8,4.433L0.616,9.401",class:"highlighted"}},association:{type:"path",properties:{d:"M0.595,0.598  l8.8,4.132l-8.8,4.667",class:"association"}}}}},function(t){t.widget("ui.processviewer",{constants:t.bizagi.processviewer.configuration.constants,options:{image:null,zoomRange:50,hotspots:[],dragMessage:"Drag Image (Image Pane)",processMessage:"Process Image....",previewWidth:120,previewHeight:120,hotspotsCSS:"",draggable:!0,controls:!0,zoomImageOptions:!1,moveIncrement:20,isIE8:!1,device:"desktop",minZoom:.5,minZoomIE8:.5,maxZoomIE8:1.5,maxZoom:1.5,template:!1,unavailableImage:"img/unavailable_image.png",tmpl:"bizagi.processviewer.template",hotSpotsSVG:!1,formatStyles:{},milestonesHeight:25,width:"100%",height:150,dimentions:{width:100,height:150},animation:{path:[],interval:0,instance:0,time:200,counter:0},configuration:{localTemplate:"",processviewerStageId:"",processviewerStage:"",$processviewerStage:"",processviewerStageSet:"",processviewerImageStage:"",processviewerHotSpotsContainer:"",processviewerStagePathsSet:"",errorImageCSS:"processviewer-error-image",sliderOptions:{}},getTemplate:function(t){return bizagi.getTemplate(t)}},_create:function(){var e=this;t.support.touch="ontouchend"in document,e._isInWorkportal()?"undefined"!=typeof bizagi&&void 0!==bizagi.util&&(e.options.isIE8=bizagi.util.isIE8(),e.options.device=bizagi.util.detectDevice()):bizagi={workportal:!1},e.$el=t('<div class="wdg-processviewer"></div>'),e.$el.attr("role","widget.bizagi.processviewer"),e.element.append(e.$el),e.options.jsonBizagi?"string"==typeof e.options.jsonBizagi.processDefinition&&"string"==typeof e.options.jsonBizagi.processDefinition?t.when(t.get(e.options.jsonBizagi.processDefinition),t.get(e.options.jsonBizagi.processGraphicsInfo)).done(function(t,r){e._processDataForPlugin({definition:t[0],graphics:r[0]})}).fail(function(t){e.$el.text(t.message)}):e._processDataForPlugin({definition:e.options.jsonBizagi.processDefinition,graphics:e.options.jsonBizagi.processGraphicsInfo}):e._loadTemplate()},_processDataForPlugin:function(e){var r=this;e.definition.status||e.graphics.status?r._triggers.error({message:e.definition.message,json:e}):t.when(t(e).processviewerQueries()).done(function(e){t.extend(r.options,e),r._loadTemplate()})},_triggerError:function(t){},_loadTemplate:function(){var e=this,r=e.options.template;bizagi.workportal?(e.loader=new bizagi.ui.controls.tmplloader,r?r.indexOf(".html")&&t.when(e.loader.loadTemplates({processviewer:r})).done(function(){e.options.configuration.localTemplate=e.loader.getTemplate("processviewer"),e._buildprocessviewer()}):(r=e.options.getTemplate(e.options.tmpl),t.when(e.loader.loadTemplates({processviewer:r})).done(function(){e.options.configuration.localTemplate=e.loader.getTemplate("processviewer"),e._buildprocessviewer()}))):r?r.indexOf(".html")&&t.when(t.get(e.options.template)).done(function(t){e.options.configuration.localTemplate=t,e._buildprocessviewer()}):(r=e.options.getTemplate(e.options.tmpl),t.when(t.get(r)).done(function(t){e.options.configuration.localTemplate=t,e._buildprocessviewer()}))},_buildprocessviewer:function(){var e,r,i=this;i.$el.empty(),e=i.options.configuration.processviewerStageId=i._generateID(),r=t.tmpl(i.options.configuration.localTemplate,{id:e,isIE8:i.options.isIE8}),i.$el.append(r),i._createStage()},resize:function(t,e){var r=this;e=e||r.options.width,h=t||r.options.height,r.$el.outerWidth(e),r.$el.outerHeight(t)},calculatePosition:function(t,e,r,i){return{top:i/2-(e+45)+"px",left:r/2-(t+67.5)+"px"}},setPosition:function(e,r){var i=document.getElementById(r),n=this._getStageContainer(),s=t("#bz-gq-processviewer-canvas"),o=t(n),a=parseInt(isNaN(e.css("left").replace("px",""))?0:e.css("left").replace("px","")),l=parseInt(isNaN(e.css("top").replace("px",""))?0:e.css("top").replace("px","")),c=this.calculatePosition(a,l,s.width(),s.height());o.animate({left:c.left,top:c.top},1500,function(){var t=!0,e=0,r=setInterval(function(){t?i.classList.remove("processviewer-shape-selected"):i.classList.add("processviewer-shape-selected"),t=!t,5==e&&clearInterval(r),e++},400)})},_createStage:function(){var e,r,i,n,s,o,a=this;e=a.options.width?a.options.width:"100%",r=a.options.height?a.options.height:150,a.$el.outerWidth(e),a.$el.outerHeight(r);var l=100*a.options.dimentions.width/150+a.options.dimentions.width,c=100*a.options.dimentions.height/150+a.options.dimentions.height,h=a._getStageContainer();a._ScrollZoomProcessViewer(h),a._setResetZoom(t("button#resetZoom"),h),a.options.configuration.processviewerStage=s=new Raphael(h,l,c),a.options.configuration.processviewerPathsStageGroup=s.group(),s.canvas.setAttribute("id",a._generateID()),s.canvas.setAttribute("id",a._generateID()),s.canvas.setAttribute("class","processviewer-zvg-container"),s.canvas.setAttribute("class","processviewer-zvg-nested"),a.options.configuration.processviewerStageSet=s.set(),a.options.configuration.processviewerstageHotSpotSet=s.set(),e.indexOf("%")&&(o=!0),o||a.options.dimentions.width<e?t("[data-processviewercontainer]",a.element).width("100%"):t("[data-processviewercontainer]",a.element).width(a.options.dimentions.width),a.options.dimentions.width<e&&t("[data-processviewercontainer]",a.element).width(e),a.options.image?t.when(a._verifyingImage(a.options.image)).done(function(t){i=t.width?t.width:"150",n=t.height?t.height:"150",a.options.configuration.processviewerImageStage=a.options.configuration.processviewerStage.image(t.src,0,0,i,n),a.options.configuration.processviewerStageSet.push(a.options.configuration.processviewerImageStage),a.options.configuration.processviewerRectStage.attr("fill","rgba(255,255,255,0)"),a.options.configuration.processviewerRectStage.attr("stroke","none"),a._createUIControls()}).fail(function(t){a._createUIFailView(t)}):(i=a.element.width()?a.element.width():"150",n=a.element.height()?a.element.height():"150",a.options.configuration.processviewerRectStage=a.options.configuration.processviewerStage.rect(0,0,2*e,2*r),a.options.configuration.processviewerRectStage.attr("fill","rgba(255,255,255,0)"),a.options.configuration.processviewerRectStage.attr("stroke","none"),a.options.configuration.processviewerRectStage[0].setAttribute("id","BaseStage"+a._generateID()),a._createUIControls())},_createUIControls:function(){var e=this;e.options.configuration.processviewerStage,e.options.configuration.processviewerImageStage;e.options.draggable&&e._setDraggable(),t.when(e._createSVGProcessPool(),e._createSVGLanes(),e._createSVGMilestones(),e._createSVGSequenceFlows()).done(function(){e._createStyleFormats(),e.options.isIE8||e._createMarkers(),e._addHandlers(),e._createSlider(),e.options.hotSpotsSVG?e._createSVGHotSpots():t.when(e._createHTMLHotSpots()).done(function(){e._adjustLabelsPosition();var t={type:"pvComplete",message:"processviewer complete",time:new Date,ui:e.$el};e.element.trigger(t)})})},_zoomProcessViewer:function(e,r){var i=this;i._updateOutputSlider(r);var n=t(r).val();i.options.configuration.processviewerPathsStageGroup.scale(n),i.options.configuration.processviewerHotSpotsContainer.css("font-size",n+"em");var s=t(i.options.configuration.processviewerStage.defs);t(i.options.configuration.processviewerStage.canvas).append(s),i._updateHotSpotsScale(n),e.preventDefault(),e.stopPropagation()},calcProcessViewerTo:function(t,e,r,i){var n=t*(e-i),s=t>0?n-r+i:r-i-n;return t>0?(s<0?"":"-")+Math.abs(s):s},_ScrollZoomProcessViewer:function(e){var r=this,i=t(e).closest(".processviewer-wrapper"),n=t("input[type='range']",r.element),s=t(e),o=null;e.addEventListener("wheel",function(t){null==o&&(o=s.find("[data-processviewerhotspots] > [data-processviewerhotspot]:first"));var e=parseInt(isNaN(s.css("left").replace("px",""))?0:s.css("left").replace("px","")),a=parseInt(isNaN(s.css("top").replace("px",""))?0:s.css("top").replace("px","")),l=Number(n.val()),c=(t.wheelDelta?t.wheelDelta:-1*t.deltaY)>=0;if(n.val(l+.1*(c?1:-1)),l!=n.val()){var h=i.offset(),u=parseInt(o.css("left").replace("px",""))+parseInt(o.css("width").replace("px",""))/2,p=parseInt(o.css("top").replace("px",""))+parseInt(o.css("height").replace("px",""))/2;r._zoomProcessViewer(t,n);var f=parseInt(o.css("left").replace("px",""))+parseInt(o.css("width").replace("px",""))/2,d=parseInt(o.css("top").replace("px",""))+parseInt(o.css("height").replace("px",""))/2,g=r.calcProcessViewerTo(f/u,t.clientX-e,t.clientX,h.left+10),v=r.calcProcessViewerTo(d/p,t.clientY-a,t.clientY,h.top+10);s.css({left:g+"px",top:v+"px"})}})},_setResetZoom:function(e,r){var i=this;e.click(function(e){var n=t("input[type='range']",i.element);n.val(1),t(r).css({left:"0px",top:"0px"}),i._zoomProcessViewer(e,n)})},_createSlider:function(){var e=this,r=e.validateHTML5Features.checkInput("range");if(t.support.touch||r){t(".ui-for-desktop",e.element).remove();var i=t("input[type='range']",e.element);i.attr("min",e.options.minZoom),i.attr("max",e.options.maxZoom),i.attr("step",.1),i.attr("value",1),t.support.touch&&"desktop"!==e.options.device?(i.change(function(){e._updateOutputSlider(this)}),i.bind("touchstart",function(){t(this).prev("output").addClass("is-visible-output"),e._updateOutputSlider(this)}),i.bind("touchend",function(){var r=t(this).val();t(this).prev("output").removeClass("is-visible-output"),e.options.configuration.processviewerPathsStageGroup.scale(r),e.options.configuration.processviewerHotSpotsContainer.css("font-size",r+"em"),e._updateHotSpotsScale(r),e._updateOutputSlider(this)})):(i.mouseenter(function(){t(this).prev("output").addClass("is-visible-output"),e._updateOutputSlider(this)}).mouseleave(function(){t(this).prev("output").removeClass("is-visible-output")}),i.change(function(t){e._zoomProcessViewer(t,this)}))}else{t(".ui-for-touch",e.element).remove();var n=t(".processviewer-zvg-nested",e.element);n.data("real-width",n.width()),n.data("real-height",n.height());var s=function(e,r){var i=r.value||1,n='<div class="tooltip"><div class="tooltip-inner">'+(Math.round(100*i)+"%")+"</div></div>";t(".sliderTooltip").html(n)};e.options.configuration.sliderOptions={min:e.options.minZoomIE8,max:e.options.maxZoomIE8,step:.1,value:1,create:s,slide:s,stop:function(t,r){r.value>1&&(n[0].setAttribute("width",n.data("real-width")*r.value),n[0].setAttribute("height",n.data("real-height")*r.value)),e.options.configuration.processviewerPathsStageGroup.scale(r.value),e.options.configuration.processviewerHotSpotsContainer.css("font-size",r.value+"em"),e._updateHotSpotsScale(r.value),e._setDraggable()}},t("[data-processviewerslider]",e.element).slider(e.options.configuration.sliderOptions)}},_updateOutputSlider:function(e){var r=t(e);r.prev("output").text(Math.round(100*r.val())+"%")},_updateHotSpotsScale:function(e){var r=this.options.configuration.hotspotsList,i=t("[data-processviewerhotspots]",this.element),n=i;if(i.length>1){n=i[0];for(var s=1;s<i.length;s++)t(i[s]).offset().left>t(n).offset().left&&(n=i[s]);r=t(n).find(".processviewer-hotspot")}t(n).hide(),t(".processviewer-hotspot-icon svg g",this.element).each(function(){this.setAttribute("transform","scale("+e/10+")")});for(var o=0;o<r.length;o++){var a=t(r[o]),l=a.data("real-width")*e,c=a.data("real-height")*e,h=a.data("real-left")*e,u=a.data("real-top")*e;a.outerWidth(l),a.outerHeight(c),a.css("left",h),a.css("top",u)}t(n).show()},_scaleSVG:function(){},_addHandlers:function(){var e=this;t(window).on("resize.processviewer",function(){e._setDraggable()})},_setDraggable:function(){var e=this;if(t.support.touch&&"desktop"!==e.options.device){var r=e.options.configuration.processviewerPathsStageGroup.getScale(),i=e.options.configuration.processviewerStage.canvas.getAttribute("width")*r,n=e.options.configuration.processviewerStage.canvas.getAttribute("height")*r;t(".processviewer-wrapper",e.element).addClass("ui-scroll-touch"),t("[data-processviewercontainer]",e.element).width(i),t("[data-processviewercontainer]",e.element).height(n)}else{e.options.configuration.$processviewerStage=t(e.options.configuration.processviewerStage.canvas).parent();var s=t("[data-processviewercontainer]",e.element).position();if(s){r=e.options.configuration.processviewerPathsStageGroup.getScale();var o=e.element.width(),a=e.element.height();i=e.options.configuration.processviewerStage.width*r,n=e.options.configuration.processviewerStage.height*r;maxleft=s.left,maxTop=s.top;var l=t("[data-processviewer-wrapper-container]",e.element).is(":ui-draggable");o<i||a<n?l||(e.$el.addClass(" processviewer-drag"),e._dragLimits(),e.options.configuration.$processviewerStage.draggable({refreshPositions:!0,drag:function(t,e){}})):l&&(e.options.configuration.$processviewerStage.draggable("destroy"),e.element.removeClass("processviewer-drag"),e.options.configuration.$processviewerStage.css({left:0,top:0}),e.options.configuration.processviewerHotSpotsContainer.css({left:0,top:0}))}}},_dragLimits:function(){var t=this,e=t.options.configuration.processviewerPathsStageGroup.getScale(),r=t.element.width(),i=t.element.height(),n=t.options.configuration.processviewerStage.width*e,s=t.options.configuration.processviewerStage.height*e,o=0,a=0;return r<n&&(o=r-n),i<s&&(a=i-s),{x:o,y:a}},_movePaths:function(t,e){this.options.configuration.processviewerStage.move(t,e)},_createMarkers:function(){var e=t.bizagi.processviewer.design.markers;if(e)for(var r in e){var i=e[r].properties,n={id:r,css:r,markerHeight:10,markerWidth:10,refX:10,refY:5,orient:"auto"},s=this.options.configuration.processviewerStage.marker();t(s.node).attrSVG(n),t(s.node.lastElementChild).attrSVG(i),this.options.configuration.processviewerMarkerEndArrow||(this.options.configuration.processviewerMarkerEndArrow=[]),this.options.configuration.processviewerMarkerEndArrow.push(s)}},_createStyleFormats:function(){var e=this.options.formatStyles,r=t("<div></div>"),i="<style>";for(var n in e){var s="."+n.toLowerCase()+"{";r.css(e[n].css),i+=s+=r.attr("style")+"}"}i+="</style>",t("head").append(t(i))},_asignLabelFormat:function(e,r){if(r.bpmnLabel&&r.bpmnLabel.labelStyle){var i=r.bpmnLabel.labelStyle,n=this.options.formatStyles[i];t(e).closest("svg").length>0&&t(e).css(n.css);var s=n.cssClass;s.push(i);for(var o=0;o<s.length;o++)t(e).addClass(s[o].toLowerCase())}},_createSVGProcessPool:function(){for(var t=this,e=[],r=t.options.configuration.processviewerPathsStageGroup,i=t.options.hotspots.length-1;i>=0;i--)t.options.hotspots[i].elementType===t.constants.ELEMENT_TYPE.PROCESS&&(e.push(t.options.hotspots[i]),t.options.hotspots.splice(i,1));t._createSVGRect(r,e,"processPool")},_createSVGLanes:function(){for(var t=this,e=[],r=t.options.configuration.processviewerPathsStageGroup,i=t.options.hotspots.length-1;i>=0;i--)t.options.hotspots[i].elementType===t.constants.ELEMENT_TYPE.LANE&&(e.push(t.options.hotspots[i]),t.options.hotspots.splice(i,1));t._createSVGRect(r,e,"lanes")},_createSVGMilestones:function(){for(var t=this,e=[],r=t.options.configuration.processviewerPathsStageGroup,i=t.options.hotspots.length-1;i>=0;i--)t.options.hotspots[i].elementType===t.constants.ELEMENT_TYPE.MILESTONES&&(e.push(t.options.hotspots[i]),t.options.hotspots.splice(i,1));t._createSVGRect(r,e,"milestones")},_createSVGSequenceFlows:function(){for(var t=this,e=[],r=t.options.configuration.processviewerPathsStageGroup,i=t.options.hotspots.length-1;i>=0;i--)t.options.hotspots[i].elementType!==t.constants.ELEMENT_TYPE.SEQUENCEFLOW&&t.options.hotspots[i].elementType!==t.constants.ELEMENT_TYPE.ASSOCIATION||!t.options.hotspots[i].hasOwnProperty(t.constants.PROPERTIES.WAYPOINTS)||(e.push(t.options.hotspots[i]),t.options.hotspots[i].conditionType===t.constants.CONDITION_TYPE.NORMAL&&t.options.hotspots.splice(i,1));t._createSVGPaths(r,e)},_createSVGRect:function(e,r,i){for(var n,s=this,o=0;o<r.length;o++){var a=r[o];if(void 0===a[s.constants.PROPERTIES.BOUNDS])console.log(a);else{var l=a[s.constants.PROPERTIES.BOUNDS],c=e.rect(l.x,l.y,l.width,l.height);if(a.bpmnElementRef?c[0].setAttribute("id",a.bpmnElementRef):a.bpmnElement&&a.bpmnElement.baref&&a.bpmnElement.baref.ref&&c[0].setAttribute("id",a.bpmnElement.baref.ref),""===a.displayName&&(a.displayName="Lane"),null===a.displayName&&(a.displayName=" "),a.displayName&&(n=e.text(l.height/2*-1,10,a.displayName)),a.elementType===s.constants.ELEMENT_TYPE.PROCESS&&(n.attr({"font-weight":"600",y:a.bounds.y+l.height/2,x:10}).data("rotation",-90),n.transform("r-90")),a.elementType===s.constants.ELEMENT_TYPE.MILESTONES){n.attr({"font-weight":"600",y:a.bounds.y+16,x:a.bounds.x+l.width/2}),c.attr("height",s.options.milestonesHeight);var h=a.bounds.x+a.bounds.width,u=a.bounds.y+s.options.milestonesHeight,p=a.bounds.height,f=s._getPathString([{x:h,y:u},{x:h,y:p}]);e.path(f).attr({stroke:"#CCC","stroke-dasharray":"--"});var d=h-1,g=s._getPathString([{x:d,y:a.bounds.y},{x:d+s.options.milestonesHeight,y:s.options.milestonesHeight/2},{x:d,y:s.options.milestonesHeight}]);e.path(g).attr({stroke:"#CCC",fill:"#FFF"})}if(a.elementType===s.constants.ELEMENT_TYPE.LANE){t(n.node).width(),a.bounds.height,t(n.node).height();n.attr({y:a.bounds.y+a.bounds.height/2,x:a.bounds.x+10,"font-weight":"600"}).data("rotation",-90),n.transform("r-90");var v=a.bounds.x+30,m=a.bounds.height,y=s._getPathString([{x:v,y:a.bounds.y+25},{x:v,y:m}]);e.path(y).attr({stroke:"#E6E6E6",fill:"none"})}t(c[0]).attr("id")&&a.displayName&&t(n[0]).data("id",a.id),c.attr({stroke:"#E6E6E6",fill:"none"}),s._asignLabelFormat(n[0],a)}}},_createSVGPaths:function(e,r){for(var i=this,n=0;n<r.length;n++){var s=r[n];if(void 0===s[i.constants.PROPERTIES.WAYPOINTS])console.log(s);else{var o=!1;s.elementType!==i.constants.ELEMENT_TYPE.TEXTANNOTATION&&s.conditionType!==i.constants.CONDITION_TYPE.RELATION&&s.conditionType!==i.constants.CONDITION_TYPE.COMPENSATION&&(o=!0);var a=i._getPathString(s[i.constants.PROPERTIES.WAYPOINTS]);a+=i.options.isIE8&&o?i._getArrowPathString(s[i.constants.PROPERTIES.WAYPOINTS]):"";var l=e.path(a);s.bpmnElementRef?l[0].setAttribute("id",s.bpmnElementRef):s.bpmnElement&&s.bpmnElement.baref&&s.bpmnElement.baref.ref&&l[0].setAttribute("id",s.bpmnElement.baref.ref),o&&t(l.node).setMarkerSVG("normal");var c=l.getTotalLength()/2,h=l.getPointAtLength(c);s.displayName&&(nText=e.text(h.x,h.y,s.displayName)),t(l[0]).attr("id")&&s.displayName&&t(nText[0]).data("id",s.id),s.conditionType!==i.constants.CONDITION_TYPE.RELATION&&s.conditionType!==i.constants.CONDITION_TYPE.COMPENSATION||l.attr({"stroke-dasharray":".","stroke-width":"2"}),i._asignLabelFormat(l[0],s)}}},_createHTMLHotSpots:function(){for(var e=this,r=[],i=e.options.hotspots,n=e.options.configuration.processviewerHotSpotsContainer=t('<div class="processviewer-hotspots-container" data-processviewerhotspots style="position:absolute;"></div>'),s=0;s<i.length;s++){var o=i[s];if(o.bounds||o.x){o.number=s;var a=e._createHotSpotDiv(o);r.push(a),n.append(a)}}t("[data-processviewer-wrapper-container]",e.element).prepend(n),n.on("click",".processviewer-hotspot",function(r){var i=t(this).data("number"),n=t(this);e.options.hotspots[i].onClick&&e.options.hotspots[i].onClick(r,n),e._triggers.click.apply(n,[e.element])}),n.on("mouseenter",".processviewer-hotspot",function(r){var i=t(this).data("number"),n=t(this);e.options.hotspots[i].onMouseOver&&e.options.hotspots[i].onMouseOver(r,n),e._triggers.onMouseOver.apply(n,[e.element])}),n.on("mouseout",".processviewer-hotspot",function(r){var i=t(this).data("number"),n=t(this);e.options.hotspots[i].onMouseOut&&e.options.hotspots[i].onMouseOut(r,n),e._triggers.onMouseOut.apply(n,[e.element])}),e.options.configuration.hotspotsList=t(".processviewer-hotspot",e.element)},_createHotSpotDiv:function(e){var r=t('<div class="processviewer-hotspot processviewer-hotspot-div" data-processviewerhotspot></div>'),i=t('<div class="processviewer-hotspot-label" data-processviewerlabel></div>'),n=this._getHotSpotData(e);return r.outerWidth(n.w),r.outerHeight(n.h),r.css("left",n.x+"px"),r.css("top",n.y+"px"),r.data("number",e.number),r.attr("number",e.number),e.bounds&&(r.data("real-width",e.bounds.width),r.data("real-height",e.bounds.height),r.data("real-left",e.bounds.x),r.data("real-top",e.bounds.y)),e.displayName&&e.elementType!==this.constants.ELEMENT_TYPE.SEQUENCEFLOW&&(i.text(e.displayName),r.append(i)),e.elementType&&this._createIconsForHotSpots(r,e),e.text&&e.text.content&&(i.text(e.text.content),r.append(i)),e.dataState&&e.dataState.displayName&&(i.text(e.dataState.displayName),r.append(i)),e.radius&&r.css("border-radius",e.radius),e.css&&r.addClass(e.css),e.loopCharacteristics&&(e.loopCharacteristics.isSequential?r.addClass("issequential"):e.loopCharacteristics.isSequential||r.addClass("isparallel")),this._asignLabelFormat(i[0],e),e.elementType&&r.addClass(e.elementType.toLowerCase()),e.conditionType&&r.addClass(e.conditionType.toLowerCase()),e.eventType&&r.addClass(e.eventType.toLowerCase()),e.subProcessType&&r.addClass(e.subProcessType.toLowerCase()),e.isForCompensation&&r.addClass("isforcompensation"),e.bpmnElementRef?r.attr("id",e.bpmnElementRef):e.bpmnElement&&e.bpmnElement.baref&&e.bpmnElement.baref.ref&&r.attr("id",e.bpmnElement.baref.ref),e.content&&r.append(e.content),r},_createIconsForHotSpots:function(e,r){var i=r.elementType.toLowerCase(),n=t('<div class="processviewer-hotspot-icon" data-processviewericon></div>');if(e.append(n),t.bizagi.processviewer.design.icons){var s=t.bizagi.processviewer.design.icons.scale,o=t.bizagi.processviewer.design.icons.bounds.width*s,a=t.bizagi.processviewer.design.icons.bounds.height*s,l=new Raphael(n[0],o,a).group();r.isForCompensation&&(i="isforcompensation");var c=t.bizagi.processviewer.design.icons.iconset[i];if(c){svgTmp=c.svg;for(var h=0;h<svgTmp.length;h++){var u=svgTmp[h],p=l[u.type]();for(var f in s<1&&l.node.setAttribute("transform","scale("+s+")"),u.properties)p[0].setAttribute(f,u.properties[f])}}}},_getPathString:function(t){for(var e="",r=0;r<t.length;r++)0===r&&(e+="M"),r>0&&(e+="L"),e+=t[r].x+",",e+=t[r].y+",";return e},_getArrowPathString:function(t){var e=t[t.length-1],r=t[t.length-2],i=r.x,n=e.x,s=r.y,o=e.y,a=Raphael.angle(n,o,i,s),l=Raphael.rad(a-135),c=Raphael.rad(a+135);return"M"+n+","+o+",L"+(n+10*Math.cos(l))+","+(o+10*Math.sin(l))+",M"+n+","+o+",L"+(n+10*Math.cos(c))+","+(o+10*Math.sin(c))},_getHotSpotData:function(t){var e={x:0,y:0,w:0,h:0};return t.x?e.x=t.x:t.bounds.x&&(e.x=t.bounds.x),t.y?e.y=t.y:t.bounds.y&&(e.y=t.bounds.y),t.w?e.w=t.w:t.bounds.width&&(e.w=t.bounds.width),t.h?e.h=t.h:t.bounds.height&&(e.h=t.bounds.height),e},_createSVGHotSpots:function(){for(var t=this,e=t.options.hotspots,r=0;r<e.length;r++){var i=e[r],n=t.options.configuration.processviewerStage.rect(i.x,i.y,50,50);n.id=i.id,"function"==typeof i.onClick?n.click(i.onClick):n.click(t._triggers.click);var s=t._triggers.onMouseOver,o=t._triggers.onMouseOut;"function"==typeof i.onMouseOver&&(s=i.onMouseOver),"function"==typeof i.onMouseOut&&(o=i.onMouseOut),n.hover(s,o),n.node.id=i.id,n.node.class=i.css,t.options.configuration.processviewerstageHotSpotSet.push(n)}t.options.configuration.processviewerStageSet.push(t.options.configuration.processviewerstageHotSpotSet)},_triggers:{click:function(e){var r={type:"pvClick",message:"hotspot clicked",time:new Date,ui:{control:this,id:t(this).attr("id")}};e.trigger(r)},onMouseOver:function(e){var r={type:"pvMouseIn",message:"hotspot mouse in",time:new Date,ui:{control:this,id:t(this).attr("id")}};e.trigger(r)},onMouseOut:function(e){var r={type:"pvMouseOut",message:"hotspot mouse out",time:new Date,ui:{control:this,id:t(this).attr("id")}};e.trigger(r)},error:function(e){var r={type:"pvError",time:new Date};t.extend(e,r),t.event.trigger(e)}},_createUIFailView:function(e){var r=t('<div class="'+this.options.configuration.errorImageCSS+' svg-error-content"><div class="processviewer-absolute-center"><img src="'+this.options.unavailableImage+'" class="processviewer-absolute-center"/></div><span class="processviewer-message">'+e+"</span></div>");t("[data-processviewercontainer]",this.element).append(r)},_verifyingImage:function(e){var r=t.Deferred(),i=document.createElement("img");return i.onload=function(){r.resolve(i)},i.onerror=function(){r.reject(e)},i.src=e,r.promise()},_getStageContainer:function(e){return t("[data-processviewer-wrapper-container]",this.element)[0]},_generateID:function(){var e=(new Date).getTime(),r="processviewer-xxxxxxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:7&r|8).toString(16)});return t("#"+r).length>0?this._generateID():r},_adjustLabelsPosition:function(){for(var e=t(".processviewer-hotspot-label",this.element),r=(e.closest(".processviewer-hotspot"),0);r<e.length;r++){var i=t(e[r]),n=i.closest(".processviewer-hotspot"),s=n.outerHeight();if(n.hasClass("subprocess")||n.hasClass("callactivity")||n.hasClass("dataobject")){var o=t._ptToem(s+10);i.css({paddingTop:o})}else this.options.isIE8&&i.css({paddingTop:"1.8em"})}},_setOption:function(t,e){this.options[t]=e,this._update()},_update:function(){var t=this.options.value+"%";this.element.text(t),100===this.options.value&&this._trigger("complete",null,{value:100})},_destroy:function(){this.element.empty().removeAttr("style","").removeAttr("role",""),clearInterval(this.options.animation.interval)},_getSelectedClassCSSByWorkitemState:function(t,e){var r;e&&e.filter&&(r=e.filter(function(e){return e.guidTask===t}));var i="processviewer-shape-selected";return r&&r.length>0&&14==r[0].wiState&&(i="processviewer-shape-selected-standby"),i},selectShape:function(e,r){for(var i=t.isArray(e)?e:[e],n=0,s=i.length;n<s;n++){var o=t("#"+i[n],this.$el);if(o.length){var a=this._getSelectedClassCSSByWorkitemState(i[n],r);"div"!==o.prop("tagName").toLowerCase()?(o.addClassSVG(a),o.setMarkerSVG("selected")):o.addClass(a)}}},unSelectShape:function(e,r){for(var i=t.isArray(e)?e:[e],n=0,s=i.length;n<s;n++){var o=t("#"+i[n],this.$el),a=o.prop("tagName").toLowerCase(),l=this._getSelectedClassCSSByWorkitemState(i[n],r);"div"!==a?(o.removeClassSVG(l),o.reverseMarkerSVG()):o.removeClass(l)}},unSelectAllShapes:function(){for(var e=t(".processviewer-shape-selected",this.$el),r=0;r<e.length;r++){var i=t(e[r]);"div"!==i.prop("tagName").toLowerCase()?(i.removeClassSVG("processviewer-shape-selected"),i.reverseMarkerSVG()):i.removeClass("processviewer-shape-selected")}},drawRoute:function(e){for(var r=[],i=0;i<e.length;i++){var n=t("#"+e[i],this.$el);if(n.length>0)"div"!==n.prop("tagName").toLowerCase()?(n.addClassSVG("processviewer-highlighted"),n.setMarkerSVG("highlighted")):n.addClass("processviewer-highlighted");else r.push(e[i])}this._triggers.error({message:"Doesn't find element",ui:r})},animateRoute:function(e){var r=this;r.option.counter;t.isArray(e)&&(r.options.animation.counter=0,r.options.animation.path=e,r.options.animation.status=0),0===r.options.animation.status?r._startRouteAnimation():r._stopRouteAnimation()},_startRouteAnimation:function(){var e=this,r=e.options.animation.path;e.options.animation.status=1,0===e.options.animation.counter&&e.clearRoute(),e.options.animation.interval=setInterval(function(){if(e.options.animation.counter<r.length){var i=t("[id="+r[e.options.animation.counter]+"]",e.$el).last();if(i.length>0)"div"!==i.prop("tagName").toLowerCase()?(i.addClassSVG("processviewer-highlighted"),i.setMarkerSVG("highlighted"),i[0].strokecolor="#FF7F00"):i.addClass("processviewer-highlighted");e.options.animation.counter++}else e.element.trigger({type:"animationComplete",message:"animation end!",time:new Date,ui:e.$el}),e.options.animation.counter=0,e._stopRouteAnimation()},e.options.animation.time)},_stopRouteAnimation:function(){this.options.animation.status=0,clearInterval(this.options.animation.interval)},_isInWorkportal:function(){var t=!1;return"undefined"!=typeof bizagi&&void 0!==bizagi.workportal&&(t=!0),t},clearRoute:function(){for(var e=t(".processviewer-highlighted",this.$el),r=0;r<e.length;r++){var i=t(e[r]);"div"!==i.prop("tagName").toLowerCase()?(i.removeClassSVG("processviewer-highlighted"),i[0].strokecolor="#000",i.reverseMarkerSVG()):i.removeClass("processviewer-highlighted")}},validateHTML5Features:{checkInput:function(t){var e=document.createElement("input");return e.setAttribute("type",t),e.type==t}}}),t.fn.addClassSVG=function(e){var r=arguments[0];return e=t.extend({},t.fn.addClassSVG.config,e),this.each(function(){var t=this.getAttribute("class"),e="";null===t&&(t=""),"string"==typeof r&&-1===t.indexOf(r)&&(e=t+" "+r,this.setAttribute("class",e))})},t.fn.addClassSVG.config={},t.fn.setMarkerSVG=function(e){var r="url(#"+arguments[0]+")";return e=t.extend({},t.fn.addClassSVG.config,e),this.each(function(){var t=this.getAttribute("marker-end");t!=r&&(this.setAttribute("marker-end",r),this.setAttribute("toggle-marker-end",t))})},t.fn.reverseMarkerSVG=function(){return this.each(function(){var t=this.getAttribute("marker-end"),e=this.getAttribute("toggle-marker-end");null!==e&&null!==t&&(this.setAttribute("marker-end",e),this.removeAttribute("toggle-marker-end"))})},t.fn.removeClassSVG=function(e){var r=arguments[0];return e=t.extend({},t.fn.addClassSVG.config,e),this.each(function(){var t=this.getAttribute("class"),e="";null!==t&&"string"==typeof r&&-1!==t.indexOf(r)&&(e=t.replace(r,"").replace("  "," "),this.setAttribute("class",e))})},t.fn.removeClassSVG.config={},t.fn.hasClassSVG=function(t){var e=arguments[0],r=this[0].getAttribute("class"),i=!1;return null!==r&&"string"==typeof e&&-1!==r.indexOf(e)&&(i=!0),i},t.fn.attrSVG=function(t){var e=this[0];for(var r in t)e.setAttribute(r,t[r]);return e},t._ptToem=function(t,e){return e||(e=12),t/e+"em"}}(jQuery),function(t){t.fn.processviewerQueries=function(){this.css("color","green");var e=this;return e.data=this[0],e.internalDataSource={elements:[]},e.datasource={hotspots:[],formatStyles:[]},e.deferred=t.Deferred(),e.padding=80,e.typeDefinitions=t.bizagi.processviewer.configuration.validTypeDefinitions,e.constants=t.bizagi.processviewer.configuration.constants,this.methods={init:function(){var e=this,r=t.Deferred();return e.typeDefinitions.unshift("owner"),e.data.definition.owner={processType:e.data.definition.processType,elementType:e.data.definition.elementType,displayName:e.data.definition.displayName,id:e.data.definition.id},t.when(e.methods.processElements.apply(e,[])).done(function(){r.resolve(e.datasource)}),r.promise()},processElements:function(){var e=this,r=[];for(var i in e.data.definition){var n=e.data.definition[i];if(e.methods.validateKindObject.apply(e,[i]))if(i===e.constants.LANESETS){if(n){var s=e.methods.getLanesFromLaneSet.apply(e,[n]);r=r.concat(s)}}else r=r.concat(n)}e.internalDataSource.elements=e.internalDataSource.elements.concat(r);for(var o=0;o<e.internalDataSource.elements.length;o++){var a=e.internalDataSource.elements[o].id,l=e.methods.getElementGraphicDataById.apply(e,[a]);if(l){var c=t.extend({},l,e.internalDataSource.elements[o]);e.datasource.hotspots.push(c)}}e.datasource.dimentions=e.methods._getMaxDimentions.apply(e,[]),e.datasource.formatStyles=e.methods.getStylesFormat.apply(e,[])},getStylesFormat:function(){var e,r={};if(this.data.graphics[this.constants.BPMNLABELSTYLES]){e=this.data.graphics[this.constants.BPMNLABELSTYLES];for(var i=0;i<e.length;i++){var n=e[i],s=n.font.size?t._ptToem(n.font.size):"1em";r[n.id]={css:{fontFamily:n.font.name||"Arial",fontSize:s,fontWeight:n.font.isBold?"bold":"normal",fontStyle:n.font.isItalic?"italic":"normal",color:n.font.color||"Black"},cssClass:["alignment-"+n.alignment]}}}return r},_getMaxDimentions:function(){var t,e=this,r=0,i=0,n=[];for(var s in e.data.definition){var o=e.data.definition[s];s===e.constants.LANESETS&&o&&(n=e.methods.getLanesFromLaneSet.apply(e,[o]))}for(var a=0;a<n.length;a++)n[a].id&&(t=e.methods.getElementGraphicDataById.apply(e,[n[a].id])),"object"==typeof t&&(r<t.bounds.width&&(r=t.bounds.width+e.padding),i+=t.bounds.height+e.padding);return{width:r,height:i}},_ptToEM:function(t){return t/e.pixelFontSize},getElementGraphicDataById:function(t){for(var e,r=this.data.graphics.bpmnPlane.diagramElements,i=0;i<r.length;i++){var n=this.methods.hasReferenceId(r[i]);if(n&&(localID=n,localID===t)){e=r[i];break}}return e},getLanesFromLaneSet:function(t){for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r].lanes);return e},validateKindObject:function(t){for(var e=!1,r=0;r<this.typeDefinitions.length;r++)if(this.typeDefinitions[r]===t){e=!0;break}return e},hasReferenceId:function(t){var e=!1;return t.bpmnElement?t.bpmnElement.baref&&t.bpmnElement.baref.ref&&(e=t.bpmnElement.baref.ref):t.bpmnElementRef&&(e=t.bpmnElementRef),e}},this.methods.init.apply(this,[])}}(jQuery),function(t){if(t.support.touch="ontouchend"in document,t.support.touch){var e,r=t.ui.mouse.prototype,i=r._mouseInit;r._touchStart=function(t){!e&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,n(t,"mouseover"),n(t,"mousemove"),n(t,"mousedown"))},r._touchMove=function(t){e&&(this._touchMoved=!0,n(t,"mousemove"))},r._touchEnd=function(t){e&&(n(t,"mouseup"),n(t,"mouseout"),this._touchMoved||n(t,"click"),e=!1)},r._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),i.call(e)}}function n(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var r=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}}(jQuery),function(t){var e,r,i="hasOwnProperty",n=/[\.\/]/,s=function(){},o=function(t,e){return t-e},a={n:{}},l=function(t,i){t=String(t);var n,s=r,a=Array.prototype.slice.call(arguments,2),c=l.listeners(t),h=0,u=[],p={},f=[],d=e;e=t,r=0;for(var g=0,v=c.length;g<v;g++)"zIndex"in c[g]&&(u.push(c[g].zIndex),c[g].zIndex<0&&(p[c[g].zIndex]=c[g]));for(u.sort(o);u[h]<0;)if(n=p[u[h++]],f.push(n.apply(i,a)),r)return r=s,f;for(g=0;g<v;g++)if("zIndex"in(n=c[g]))if(n.zIndex==u[h]){if(f.push(n.apply(i,a)),r)break;do{if((n=p[u[++h]])&&f.push(n.apply(i,a)),r)break}while(n)}else p[n.zIndex]=n;else if(f.push(n.apply(i,a)),r)break;return r=s,e=d,f.length?f:null};l._events=a,l.listeners=function(t){var e,r,i,s,o,l,c,h,u=t.split(n),p=a,f=[p],d=[];for(s=0,o=u.length;s<o;s++){for(h=[],l=0,c=f.length;l<c;l++)for(r=[(p=f[l].n)[u[s]],p["*"]],i=2;i--;)(e=r[i])&&(h.push(e),d=d.concat(e.f||[]));f=h}return d},l.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var r=t.split(n),i=a,o=0,l=r.length;o<l;o++)i=(i=i.n).hasOwnProperty(r[o])&&i[r[o]]||(i[r[o]]={n:{}});for(i.f=i.f||[],o=0,l=i.f.length;o<l;o++)if(i.f[o]==e)return s;return i.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},l.f=function(t){var e=[].slice.call(arguments,1);return function(){l.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},l.stop=function(){r=1},l.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},l.nts=function(){return e.split(n)},l.off=l.unbind=function(t,e){if(t){var r,s,o,c,h,u,p,f=t.split(n),d=[a];for(c=0,h=f.length;c<h;c++)for(u=0;u<d.length;u+=o.length-2){if(o=[u,1],r=d[u].n,"*"!=f[c])r[f[c]]&&o.push(r[f[c]]);else for(s in r)r[i](s)&&o.push(r[s]);d.splice.apply(d,o)}for(c=0,h=d.length;c<h;c++)for(r=d[c];r.n;){if(e){if(r.f){for(u=0,p=r.f.length;u<p;u++)if(r.f[u]==e){r.f.splice(u,1);break}!r.f.length&&delete r.f}for(s in r.n)if(r.n[i](s)&&r.n[s].f){var g=r.n[s].f;for(u=0,p=g.length;u<p;u++)if(g[u]==e){g.splice(u,1);break}!g.length&&delete r.n[s].f}}else for(s in delete r.f,r.n)r.n[i](s)&&r.n[s].f&&delete r.n[s].f;r=r.n}}else l._events=a={n:{}}},l.once=function(t,e){var r=function(){return l.unbind(t,r),e.apply(this,arguments)};return l.on(t,r)},l.version="0.4.2",l.toString=function(){return"You are running Eve 0.4.2"},"undefined"!=typeof module&&module.exports?module.exports=l:t.eve=l}(this),function(t,e){!function(t,e){function r(t){if(r.is(t,"function"))return y?t():e.on("raphael.DOMload",t);if(r.is(t,j))return r._engine.create[T](r,t.splice(0,3+r.is(t[0],q))).add(t);var i=Array.prototype.slice.call(arguments,0);if(r.is(i[i.length-1],"function")){var n=i.pop();return y?n.call(r._engine.create[T](r,i)):e.on("raphael.DOMload",function(){n.call(r._engine.create[T](r,i))})}return r._engine.create[T](r,arguments)}function i(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var r in t)t[S](r)&&(e[r]=i(t[r]));return e}function n(t,e,r){return function i(){var n=Array.prototype.slice.call(arguments,0),s=n.join("␀"),o=i.cache=i.cache||{},a=i.count=i.count||[];if(o[S](s))return function(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return t.push(t.splice(r,1)[0])}(a,s),r?r(o[s]):o[s];a.length>=1e3&&delete o[a.shift()];a.push(s);o[s]=t[T](e,n);return r?r(o[s]):o[s]}}function s(){return this.hex}function o(t,e){for(var r=[],i=0,n=t.length;n-2*!e>i;i+=2){var s=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?n-4==i?s[3]={x:+t[0],y:+t[1]}:n-2==i&&(s[2]={x:+t[0],y:+t[1]},s[3]={x:+t[2],y:+t[3]}):s[0]={x:+t[n-2],y:+t[n-1]}:n-4==i?s[3]=s[2]:i||(s[0]={x:+t[i],y:+t[i+1]}),r.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return r}function a(t,e,r,i,n){var s=-3*e+9*r-9*i+3*n,o=t*s+6*e-12*r+6*i;return t*o-3*e+3*r}function l(t,e,r,i,n,s,o,l,c){null==c&&(c=1);for(var h=(c=c>1?1:c<0?0:c)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,d=0;d<12;d++){var g=h*u[d]+h,v=a(g,t,r,n,o),m=a(g,e,i,s,l),y=v*v+m*m;f+=p[d]*O.sqrt(y)}return h*f}function c(t,e,r,i,n,s,o,a){if(!(R(t,r)<D(n,o)||D(t,r)>R(n,o)||R(e,i)<D(s,a)||D(e,i)>R(s,a))){var l=(t*i-e*r)*(n-o)-(t-r)*(n*a-s*o),c=(t*i-e*r)*(s-a)-(e-i)*(n*a-s*o),h=(t-r)*(s-a)-(e-i)*(n-o);if(h){var u=l/h,p=c/h,f=+u.toFixed(2),d=+p.toFixed(2);if(!(f<+D(t,r).toFixed(2)||f>+R(t,r).toFixed(2)||f<+D(n,o).toFixed(2)||f>+R(n,o).toFixed(2)||d<+D(e,i).toFixed(2)||d>+R(e,i).toFixed(2)||d<+D(s,a).toFixed(2)||d>+R(s,a).toFixed(2)))return{x:u,y:p}}}}function h(t,e,i){var n=r.bezierBBox(t),s=r.bezierBBox(e);if(!r.isBBoxIntersect(n,s))return i?0:[];for(var o=l.apply(0,t),a=l.apply(0,e),h=R(~~(o/5),1),u=R(~~(a/5),1),p=[],f=[],d={},g=i?0:[],v=0;v<h+1;v++){var m=r.findDotsAtSegment.apply(r,t.concat(v/h));p.push({x:m.x,y:m.y,t:v/h})}for(v=0;v<u+1;v++)m=r.findDotsAtSegment.apply(r,e.concat(v/u)),f.push({x:m.x,y:m.y,t:v/u});for(v=0;v<h;v++)for(var y=0;y<u;y++){var x=p[v],b=p[v+1],w=f[y],_=f[y+1],S=F(b.x-x.x)<.001?"y":"x",k=F(_.x-w.x)<.001?"y":"x",C=c(x.x,x.y,b.x,b.y,w.x,w.y,_.x,_.y);if(C){if(d[C.x.toFixed(4)]==C.y.toFixed(4))continue;d[C.x.toFixed(4)]=C.y.toFixed(4);var E=x.t+F((C[S]-x[S])/(b[S]-x[S]))*(b.t-x.t),T=w.t+F((C[k]-w[k])/(_[k]-w[k]))*(_.t-w.t);E>=0&&E<=1.001&&T>=0&&T<=1.001&&(i?g++:g.push({x:C.x,y:C.y,t1:D(E,1),t2:D(T,1)}))}}return g}function u(t,e,i){t=r._path2curve(t),e=r._path2curve(e);for(var n,s,o,a,l,c,u,p,f,d,g=i?0:[],v=0,m=t.length;v<m;v++){var y=t[v];if("M"==y[0])n=l=y[1],s=c=y[2];else{"C"==y[0]?(f=[n,s].concat(y.slice(1)),n=f[6],s=f[7]):(f=[n,s,n,s,l,c,l,c],n=l,s=c);for(var x=0,b=e.length;x<b;x++){var w=e[x];if("M"==w[0])o=u=w[1],a=p=w[2];else{"C"==w[0]?(d=[o,a].concat(w.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,u,p,u,p],o=u,a=p);var _=h(f,d,i);if(i)g+=_;else{for(var S=0,k=_.length;S<k;S++)_[S].segment1=v,_[S].segment2=x,_[S].bez1=f,_[S].bez2=d;g=g.concat(_)}}}}}return g}function p(t,e,r,i,n,s){null!=t?(this.a=+t,this.b=+e,this.c=+r,this.d=+i,this.e=+n,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function f(){return this.x+B+this.y+B+this.width+" × "+this.height}function d(t,e,r,i,n,s){function o(t){return((h*t+c)*t+l)*t}var a,l=3*e,c=3*(i-e)-l,h=1-l-c,u=3*r,p=3*(n-r)-u,f=1-u-p;return a=function(t,e){var r,i,n,s,a,u;for(n=t,u=0;u<8;u++){if(s=o(n)-t,F(s)<e)return n;if(F(a=(3*h*n+2*c)*n+l)<1e-6)break;n-=s/a}if(i=1,(n=t)<(r=0))return r;if(n>i)return i;for(;r<i;){if(s=o(n),F(s-t)<e)return n;t>s?r=n:i=n,n=(i-r)/2+r}return n}(t,1/(200*s)),((f*a+p)*a+u)*a}function g(t,e){var r=[],i={};if(this.ms=e,this.times=1,t){for(var n in t)t[S](n)&&(i[Q(n)]=t[n],r.push(Q(n)));r.sort(lt)}this.anim=i,this.top=r[r.length-1],this.percents=r}function v(t,i,n,s,o,a){n=Q(n);var l,c,h,u,f,g,v=t.ms,m={},y={},x={};if(s)for(_=0,k=se.length;_<k;_++){var w=se[_];if(w.el.id==i.id&&w.anim==t){w.percent!=n?(se.splice(_,1),h=1):c=w,i.attr(w.totalOrigin);break}}else s=+y;for(var _=0,k=t.percents.length;_<k;_++){if(t.percents[_]==n||t.percents[_]>s*t.top){n=t.percents[_],f=t.percents[_-1]||0,v=v/t.top*(n-f),u=t.percents[_+1],l=t.anim[n];break}s&&i.attr(t.anim[t.percents[_]])}if(l){if(c)c.initstatus=s,c.start=new Date-c.ms*s;else{for(var C in l)if(l[S](C)&&(tt[S](C)||i.paper.customAttributes[S](C)))switch(m[C]=i.attr(C),null==m[C]&&(m[C]=J[C]),y[C]=l[C],tt[C]){case q:x[C]=(y[C]-m[C])/v;break;case"colour":m[C]=r.getRGB(m[C]);var E=r.getRGB(y[C]);x[C]={r:(E.r-m[C].r)/v,g:(E.g-m[C].g)/v,b:(E.b-m[C].b)/v};break;case"path":var T=Mt(m[C],y[C]),N=T[1];for(m[C]=T[0],x[C]=[],_=0,k=m[C].length;_<k;_++){x[C][_]=[0];for(var B=1,L=m[C][_].length;B<L;B++)x[C][_][B]=(N[_][B]-m[C][_][B])/v}break;case"transform":var M=i._,z=Ft(M[C],y[C]);if(z)for(m[C]=z.from,y[C]=z.to,x[C]=[],x[C].real=!0,_=0,k=m[C].length;_<k;_++)for(x[C][_]=[m[C][_][0]],B=1,L=m[C][_].length;B<L;B++)x[C][_][B]=(y[C][_][B]-m[C][_][B])/v;else{var O=i.matrix||new p,R={_:{transform:M.transform},getBBox:function(){return i.getBBox(1)}};m[C]=[O.a,O.b,O.c,O.d,O.e,O.f],Rt(R,y[C]),y[C]=R._.transform,x[C]=[(R.matrix.a-O.a)/v,(R.matrix.b-O.b)/v,(R.matrix.c-O.c)/v,(R.matrix.d-O.d)/v,(R.matrix.e-O.e)/v,(R.matrix.f-O.f)/v]}break;case"csv":var D=P(l[C])[I](b),F=P(m[C])[I](b);if("clip-rect"==C)for(m[C]=F,x[C]=[],_=F.length;_--;)x[C][_]=(D[_]-m[C][_])/v;y[C]=D;break;default:for(D=[][A](l[C]),F=[][A](m[C]),x[C]=[],_=i.paper.customAttributes[C].length;_--;)x[C][_]=((D[_]||0)-(F[_]||0))/v}var V=l.easing,G=r.easing_formulas[V];if(!G)if((G=P(V).match(U))&&5==G.length){var H=G;G=function(t){return d(t,+H[1],+H[2],+H[3],+H[4],v)}}else G=ct;if(g=l.start||t.start||+new Date,w={anim:t,percent:n,timestamp:g,start:g+(t.del||0),status:0,initstatus:s||0,stop:!1,ms:v,easing:G,from:m,diff:x,to:y,el:i,callback:l.callback,prev:f,next:u,repeat:a||t.times,origin:i.attr(),totalOrigin:o},se.push(w),s&&!c&&!h&&(w.stop=!0,w.start=new Date-v*s,1==se.length))return ae();h&&(w.start=new Date-w.ms*s),1==se.length&&oe(ae)}e("raphael.anim.start."+i.id,i,t)}}function m(t){for(var e=0;e<se.length;e++)se[e].el.paper==t&&se.splice(e--,1)}r.version="2.1.2",r.eve=e;var y,x,b=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},_=/\{(\d+)\}/g,S="hasOwnProperty",k={doc:document,win:t},C={was:Object.prototype[S].call(k.win,"Raphael"),is:k.win.Raphael},E=function(){this.ca=this.customAttributes={}},T="apply",A="concat",N="ontouchstart"in k.win||k.win.DocumentTouch&&k.doc instanceof DocumentTouch,B=" ",P=String,I="split",L="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[I](B),M={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},z=P.prototype.toLowerCase,O=Math,R=O.max,D=O.min,F=O.abs,V=O.pow,G=O.PI,q="number",H="string",j="array",Y=Object.prototype.toString,W=(r._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),$={NaN:1,Infinity:1,"-Infinity":1},U=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,X=O.round,Q=parseFloat,Z=parseInt,K=P.prototype.toUpperCase,J=r._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},tt=r._availableAnimAttrs={blur:q,"clip-rect":"csv",cx:q,cy:q,fill:"colour","fill-opacity":q,"font-size":q,height:q,opacity:q,path:"path",r:q,rx:q,ry:q,stroke:"colour","stroke-opacity":q,"stroke-width":q,transform:"transform",width:q,x:q,y:q},et=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,rt={hs:1,rg:1},it=/,?([achlmqrstvxz]),?/gi,nt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,st=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ot=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,at=(r._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),lt=function(t,e){return Q(t)-Q(e)},ct=function(t){return t},ht=r._rectPath=function(t,e,r,i,n){return n?[["M",t+n,e],["l",r-2*n,0],["a",n,n,0,0,1,n,n],["l",0,i-2*n],["a",n,n,0,0,1,-n,n],["l",2*n-r,0],["a",n,n,0,0,1,-n,-n],["l",0,2*n-i],["a",n,n,0,0,1,n,-n],["z"]]:[["M",t,e],["l",r,0],["l",0,i],["l",-r,0],["z"]]},ut=function(t,e,r,i){return null==i&&(i=r),[["M",t,e],["m",0,-i],["a",r,i,0,1,1,0,2*i],["a",r,i,0,1,1,0,-2*i],["z"]]},pt=r._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return ut(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return ut(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return ht(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return ht(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return ht(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return ht(e.x,e.y,e.width,e.height)}},ft=r.mapPath=function(t,e){if(!e)return t;var r,i,n,s,o,a,l;for(t=Mt(t),n=0,o=t.length;n<o;n++)for(l=t[n],s=1,a=l.length;s<a;s+=2)r=e.x(l[s],l[s+1]),i=e.y(l[s],l[s+1]),l[s]=r,l[s+1]=i;return t};if(r._g=k,r.type=k.win.SVGAngle||k.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==r.type){var dt,gt=k.doc.createElement("div");if(gt.innerHTML='<v:shape adj="1"/>',(dt=gt.firstChild).style.behavior="url(#default#VML)",!dt||"object"!=typeof dt.adj)return r.type="";gt=null}r.svg=!(r.vml="VML"==r.type),r._Paper=E,r.fn=x=E.prototype=r.prototype,r._id=0,r._oid=0,r.is=function(t,e){return"finite"==(e=z.call(e))?!$[S](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||Y.call(t).slice(8,-1).toLowerCase()==e},r.angle=function(t,e,i,n,s,o){if(null==s){var a=t-i,l=e-n;return a||l?(180+180*O.atan2(-l,-a)/G+360)%360:0}return r.angle(t,e,s,o)-r.angle(i,n,s,o)},r.rad=function(t){return t%360*G/180},r.deg=function(t){return 180*t/G%360},r.snapTo=function(t,e,i){if(i=r.is(i,"finite")?i:10,r.is(t,j)){for(var n=t.length;n--;)if(F(t[n]-e)<=i)return t[n]}else{var s=e%(t=+t);if(s<i)return e-s;if(s>t-i)return e-s+t}return e};r.createUUID=(vt=/[xy]/g,mt=function(t){var e=16*O.random()|0,r="x"==t?e:3&e|8;return r.toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(vt,mt).toUpperCase()});var vt,mt;r.setWindow=function(t){e("raphael.setWindow",r,k.win,t),k.win=t,k.doc=k.win.document,r._engine.initWin&&r._engine.initWin(k.win)};var yt=function(t){if(r.vml){var e,i=/^\s+|\s+$/g;try{var s=new ActiveXObject("htmlfile");s.write("<body>"),s.close(),e=s.body}catch(t){e=createPopup().document.body}var o=e.createTextRange();yt=n(function(t){try{e.style.color=P(t).replace(i,"");var r=o.queryCommandValue("ForeColor");return"#"+("000000"+(r=(255&r)<<16|65280&r|(16711680&r)>>>16).toString(16)).slice(-6)}catch(t){return"none"}})}else{var a=k.doc.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",k.doc.body.appendChild(a),yt=n(function(t){return a.style.color=t,k.doc.defaultView.getComputedStyle(a,"").getPropertyValue("color")})}return yt(t)},xt=function(){return"hsb("+[this.h,this.s,this.b]+")"},bt=function(){return"hsl("+[this.h,this.s,this.l]+")"},wt=function(){return this.hex},_t=function(t,e,i){if(null==e&&r.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,e=t.g,t=t.r),null==e&&r.is(t,H)){var n=r.getRGB(t);t=n.r,e=n.g,i=n.b}return(t>1||e>1||i>1)&&(t/=255,e/=255,i/=255),[t,e,i]},St=function(t,e,i,n){var s={r:t*=255,g:e*=255,b:i*=255,hex:r.rgb(t,e,i),toString:wt};return r.is(n,"finite")&&(s.opacity=n),s};r.color=function(t){var e;return r.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=r.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):r.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=r.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(r.is(t,"string")&&(t=r.getRGB(t)),r.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=r.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=r.rgb2hsb(t),t.v=e.b):(t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1),t.toString=wt,t},r.hsb2rgb=function(t,e,r,i){var n,s,o,a,l;return this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(r=t.b,e=t.s,t=t.h,i=t.o),a=(l=r*e)*(1-F((t=(t*=360)%360/60)%2-1)),n=s=o=r-l,St(n+=[l,a,0,0,a,l][t=~~t],s+=[a,l,l,a,0,0][t],o+=[0,0,a,l,l,a][t],i)},r.hsl2rgb=function(t,e,r,i){var n,s,o,a,l;return this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(r=t.l,e=t.s,t=t.h),(t>1||e>1||r>1)&&(t/=360,e/=100,r/=100),a=(l=2*e*(r<.5?r:1-r))*(1-F((t=(t*=360)%360/60)%2-1)),n=s=o=r-l/2,St(n+=[l,a,0,0,a,l][t=~~t],s+=[a,l,l,a,0,0][t],o+=[0,0,a,l,l,a][t],i)},r.rgb2hsb=function(t,e,r){var i,n;return r=_t(t,e,r),t=r[0],e=r[1],r=r[2],i=R(t,e,r),n=i-D(t,e,r),{h:((0==n?null:i==t?(e-r)/n:i==e?(r-t)/n+2:(t-e)/n+4)+360)%6*60/360,s:0==n?0:n/i,b:i,toString:xt}},r.rgb2hsl=function(t,e,r){var i,n,s,o;return r=_t(t,e,r),t=r[0],e=r[1],r=r[2],n=R(t,e,r),s=D(t,e,r),i=(n+s)/2,{h:((0==(o=n-s)?null:n==t?(e-r)/o:n==e?(r-t)/o+2:(t-e)/o+4)+360)%6*60/360,s:0==o?0:i<.5?o/(2*i):o/(2-2*i),l:i,toString:bt}},r._path2string=function(){return this.join(",").replace(it,"$1")};r._preload=function(t,e){var r=k.doc.createElement("img");r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){e.call(this),this.onload=null,k.doc.body.removeChild(this)},r.onerror=function(){k.doc.body.removeChild(this)},k.doc.body.appendChild(r),r.src=t};r.getRGB=n(function(t){if(!t||(t=P(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:s};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:s};!rt[S](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=yt(t));var e,i,n,o,a,l,c=t.match(W);return c?(c[2]&&(n=Z(c[2].substring(5),16),i=Z(c[2].substring(3,5),16),e=Z(c[2].substring(1,3),16)),c[3]&&(n=Z((a=c[3].charAt(3))+a,16),i=Z((a=c[3].charAt(2))+a,16),e=Z((a=c[3].charAt(1))+a,16)),c[4]&&(l=c[4][I](et),e=Q(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),i=Q(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),n=Q(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(o=Q(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100)),c[5]?(l=c[5][I](et),e=Q(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),i=Q(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),n=Q(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(o=Q(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),r.hsb2rgb(e,i,n,o)):c[6]?(l=c[6][I](et),e=Q(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),i=Q(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),n=Q(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(o=Q(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),r.hsl2rgb(e,i,n,o)):((c={r:e,g:i,b:n,toString:s}).hex="#"+(16777216|n|i<<8|e<<16).toString(16).slice(1),r.is(o,"finite")&&(c.opacity=o),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:s}},r),r.hsb=n(function(t,e,i){return r.hsb2rgb(t,e,i).hex}),r.hsl=n(function(t,e,i){return r.hsl2rgb(t,e,i).hex}),r.rgb=n(function(t,e,r){return"#"+(16777216|r|e<<8|t<<16).toString(16).slice(1)}),r.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},r=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),r.hex},r.getColor.reset=function(){delete this.start},r.parsePathString=function(t){if(!t)return null;var e=kt(t);if(e.arr)return Et(e.arr);var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return r.is(t,j)&&r.is(t[0],j)&&(n=Et(t)),n.length||P(t).replace(nt,function(t,e,r){var s=[],o=e.toLowerCase();if(r.replace(ot,function(t,e){e&&s.push(+e)}),"m"==o&&s.length>2&&(n.push([e][A](s.splice(0,2))),o="l",e="m"==e?"l":"L"),"r"==o)n.push([e][A](s));else for(;s.length>=i[o]&&(n.push([e][A](s.splice(0,i[o]))),i[o]););}),n.toString=r._path2string,e.arr=Et(n),n},r.parseTransformString=n(function(t){if(!t)return null;var e=[];return r.is(t,j)&&r.is(t[0],j)&&(e=Et(t)),e.length||P(t).replace(st,function(t,r,i){var n=[];z.call(r);i.replace(ot,function(t,e){e&&n.push(+e)}),e.push([r][A](n))}),e.toString=r._path2string,e});var kt=function(t){var e=kt.ps=kt.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var r in e)e[S](r)&&r!=t&&(e[r].sleep--,!e[r].sleep&&delete e[r])}),e[t]};r.findDotsAtSegment=function(t,e,r,i,n,s,o,a,l){var c=1-l,h=V(c,3),u=V(c,2),p=l*l,f=p*l,d=h*t+3*u*l*r+3*c*l*l*n+f*o,g=h*e+3*u*l*i+3*c*l*l*s+f*a,v=t+2*l*(r-t)+p*(n-2*r+t),m=e+2*l*(i-e)+p*(s-2*i+e),y=r+2*l*(n-r)+p*(o-2*n+r),x=i+2*l*(s-i)+p*(a-2*s+i),b=c*t+l*r,w=c*e+l*i,_=c*n+l*o,S=c*s+l*a,k=90-180*O.atan2(v-y,m-x)/G;return(v>y||m<x)&&(k+=180),{x:d,y:g,m:{x:v,y:m},n:{x:y,y:x},start:{x:b,y:w},end:{x:_,y:S},alpha:k}},r.bezierBBox=function(t,e,i,n,s,o,a,l){r.is(t,"array")||(t=[t,e,i,n,s,o,a,l]);var c=Lt.apply(null,t);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},r.isPointInsideBBox=function(t,e,r){return e>=t.x&&e<=t.x2&&r>=t.y&&r<=t.y2},r.isBBoxIntersect=function(t,e){var i=r.isPointInsideBBox;return i(e,t.x,t.y)||i(e,t.x2,t.y)||i(e,t.x,t.y2)||i(e,t.x2,t.y2)||i(t,e.x,e.y)||i(t,e.x2,e.y)||i(t,e.x,e.y2)||i(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},r.pathIntersection=function(t,e){return u(t,e)},r.pathIntersectionNumber=function(t,e){return u(t,e,1)},r.isPointInsidePath=function(t,e,i){var n=r.pathBBox(t);return r.isPointInsideBBox(n,e,i)&&u(t,[["M",e,i],["H",n.x2+10]],1)%2==1},r._removedFactory=function(t){return function(){e("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var Ct=r.pathBBox=function(t){var e=kt(t);if(e.bbox)return i(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Mt(t);for(var r,n=0,s=0,o=[],a=[],l=0,c=t.length;l<c;l++)if("M"==(r=t[l])[0])n=r[1],s=r[2],o.push(n),a.push(s);else{var h=Lt(n,s,r[1],r[2],r[3],r[4],r[5],r[6]);o=o[A](h.min.x,h.max.x),a=a[A](h.min.y,h.max.y),n=r[5],s=r[6]}var u=D[T](0,o),p=D[T](0,a),f=R[T](0,o),d=R[T](0,a),g=f-u,v=d-p,m={x:u,y:p,x2:f,y2:d,width:g,height:v,cx:u+g/2,cy:p+v/2};return e.bbox=i(m),m},Et=function(t){var e=i(t);return e.toString=r._path2string,e},Tt=r._pathToRelative=function(t){var e=kt(t);if(e.rel)return Et(e.rel);r.is(t,j)&&r.is(t&&t[0],j)||(t=r.parsePathString(t));var i=[],n=0,s=0,o=0,a=0,l=0;"M"==t[0][0]&&(n=t[0][1],s=t[0][2],o=n,a=s,l++,i.push(["M",n,s]));for(var c=l,h=t.length;c<h;c++){var u=i[c]=[],p=t[c];if(p[0]!=z.call(p[0]))switch(u[0]=z.call(p[0]),u[0]){case"a":u[1]=p[1],u[2]=p[2],u[3]=p[3],u[4]=p[4],u[5]=p[5],u[6]=+(p[6]-n).toFixed(3),u[7]=+(p[7]-s).toFixed(3);break;case"v":u[1]=+(p[1]-s).toFixed(3);break;case"m":o=p[1],a=p[2];default:for(var f=1,d=p.length;f<d;f++)u[f]=+(p[f]-(f%2?n:s)).toFixed(3)}else{u=i[c]=[],"m"==p[0]&&(o=p[1]+n,a=p[2]+s);for(var g=0,v=p.length;g<v;g++)i[c][g]=p[g]}var m=i[c].length;switch(i[c][0]){case"z":n=o,s=a;break;case"h":n+=+i[c][m-1];break;case"v":s+=+i[c][m-1];break;default:n+=+i[c][m-2],s+=+i[c][m-1]}}return i.toString=r._path2string,e.rel=Et(i),i},At=r._pathToAbsolute=function(t){var e=kt(t);if(e.abs)return Et(e.abs);if(r.is(t,j)&&r.is(t&&t[0],j)||(t=r.parsePathString(t)),!t||!t.length)return[["M",0,0]];var i=[],n=0,s=0,a=0,l=0,c=0;"M"==t[0][0]&&(n=+t[0][1],s=+t[0][2],a=n,l=s,c++,i[0]=["M",n,s]);for(var h,u,p=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),f=c,d=t.length;f<d;f++){if(i.push(h=[]),(u=t[f])[0]!=K.call(u[0]))switch(h[0]=K.call(u[0]),h[0]){case"A":h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=+(u[6]+n),h[7]=+(u[7]+s);break;case"V":h[1]=+u[1]+s;break;case"H":h[1]=+u[1]+n;break;case"R":for(var g=[n,s][A](u.slice(1)),v=2,m=g.length;v<m;v++)g[v]=+g[v]+n,g[++v]=+g[v]+s;i.pop(),i=i[A](o(g,p));break;case"M":a=+u[1]+n,l=+u[2]+s;default:for(v=1,m=u.length;v<m;v++)h[v]=+u[v]+(v%2?n:s)}else if("R"==u[0])g=[n,s][A](u.slice(1)),i.pop(),i=i[A](o(g,p)),h=["R"][A](u.slice(-2));else for(var y=0,x=u.length;y<x;y++)h[y]=u[y];switch(h[0]){case"Z":n=a,s=l;break;case"H":n=h[1];break;case"V":s=h[1];break;case"M":a=h[h.length-2],l=h[h.length-1];default:n=h[h.length-2],s=h[h.length-1]}}return i.toString=r._path2string,e.abs=Et(i),i},Nt=function(t,e,r,i){return[t,e,r,i,r,i]},Bt=function(t,e,r,i,n,s){return[1/3*t+2/3*r,1/3*e+2/3*i,1/3*n+2/3*r,1/3*s+2/3*i,n,s]},Pt=function(t,e,r,i,s,o,a,l,c,h){var u,p=120*G/180,f=G/180*(+s||0),d=[],g=n(function(t,e,r){var i=t*O.cos(r)-e*O.sin(r),n=t*O.sin(r)+e*O.cos(r);return{x:i,y:n}});if(h)k=h[0],C=h[1],_=h[2],S=h[3];else{u=g(t,e,-f),t=u.x,e=u.y,u=g(l,c,-f),l=u.x,c=u.y;O.cos(G/180*s),O.sin(G/180*s);var v=(t-l)/2,m=(e-c)/2,y=v*v/(r*r)+m*m/(i*i);y>1&&(y=O.sqrt(y),r*=y,i*=y);var x=r*r,b=i*i,w=(o==a?-1:1)*O.sqrt(F((x*b-x*m*m-b*v*v)/(x*m*m+b*v*v))),_=w*r*m/i+(t+l)/2,S=w*-i*v/r+(e+c)/2,k=O.asin(((e-S)/i).toFixed(9)),C=O.asin(((c-S)/i).toFixed(9));(k=t<_?G-k:k)<0&&(k=2*G+k),(C=l<_?G-C:C)<0&&(C=2*G+C),a&&k>C&&(k-=2*G),!a&&C>k&&(C-=2*G)}var E=C-k;if(F(E)>p){var T=C,N=l,B=c;C=k+p*(a&&C>k?1:-1),l=_+r*O.cos(C),c=S+i*O.sin(C),d=Pt(l,c,r,i,s,0,a,N,B,[C,T,_,S])}E=C-k;var P=O.cos(k),L=O.sin(k),M=O.cos(C),z=O.sin(C),R=O.tan(E/4),D=4/3*r*R,V=4/3*i*R,q=[t,e],H=[t+D*L,e-V*P],j=[l+D*z,c-V*M],Y=[l,c];if(H[0]=2*q[0]-H[0],H[1]=2*q[1]-H[1],h)return[H,j,Y][A](d);d=[H,j,Y][A](d).join()[I](",");for(var W=[],$=0,U=d.length;$<U;$++)W[$]=$%2?g(d[$-1],d[$],f).y:g(d[$],d[$+1],f).x;return W},It=function(t,e,r,i,n,s,o,a,l){var c=1-l;return{x:V(c,3)*t+3*V(c,2)*l*r+3*c*l*l*n+V(l,3)*o,y:V(c,3)*e+3*V(c,2)*l*i+3*c*l*l*s+V(l,3)*a}},Lt=n(function(t,e,r,i,n,s,o,a){var l,c=n-2*r+t-(o-2*n+r),h=2*(r-t)-2*(n-r),u=t-r,p=(-h+O.sqrt(h*h-4*c*u))/2/c,f=(-h-O.sqrt(h*h-4*c*u))/2/c,d=[e,a],g=[t,o];return F(p)>"1e12"&&(p=.5),F(f)>"1e12"&&(f=.5),p>0&&p<1&&(l=It(t,e,r,i,n,s,o,a,p),g.push(l.x),d.push(l.y)),f>0&&f<1&&(l=It(t,e,r,i,n,s,o,a,f),g.push(l.x),d.push(l.y)),c=s-2*i+e-(a-2*s+i),u=e-i,p=(-(h=2*(i-e)-2*(s-i))+O.sqrt(h*h-4*c*u))/2/c,f=(-h-O.sqrt(h*h-4*c*u))/2/c,F(p)>"1e12"&&(p=.5),F(f)>"1e12"&&(f=.5),p>0&&p<1&&(l=It(t,e,r,i,n,s,o,a,p),g.push(l.x),d.push(l.y)),f>0&&f<1&&(l=It(t,e,r,i,n,s,o,a,f),g.push(l.x),d.push(l.y)),{min:{x:D[T](0,g),y:D[T](0,d)},max:{x:R[T](0,g),y:R[T](0,d)}}}),Mt=r._path2curve=n(function(t,e){var r=!e&&kt(t);if(!e&&r.curve)return Et(r.curve);for(var i=At(t),n=e&&At(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=function(t,e,r){var i,n;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][A](Pt[T](0,[e.x,e.y][A](t.slice(1))));break;case"S":"C"==r||"S"==r?(i=2*e.x-e.bx,n=2*e.y-e.by):(i=e.x,n=e.y),t=["C",i,n][A](t.slice(1));break;case"T":"Q"==r||"T"==r?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][A](Bt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][A](Bt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][A](Nt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][A](Nt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][A](Nt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][A](Nt(e.x,e.y,e.X,e.Y))}return t},l=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)t.splice(e++,0,["C"][A](r.splice(0,6)));t.splice(e,1),u=R(i.length,n&&n.length||0)}},c=function(t,e,r,s,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",s.x,s.y]),r.bx=0,r.by=0,r.x=t[o][1],r.y=t[o][2],u=R(i.length,n&&n.length||0))},h=0,u=R(i.length,n&&n.length||0);h<u;h++){i[h]=a(i[h],s),l(i,h),n&&(n[h]=a(n[h],o)),n&&l(n,h),c(i,n,s,o,h),c(n,i,o,s,h);var p=i[h],f=n&&n[h],d=p.length,g=n&&f.length;s.x=p[d-2],s.y=p[d-1],s.bx=Q(p[d-4])||s.x,s.by=Q(p[d-3])||s.y,o.bx=n&&(Q(f[g-4])||o.x),o.by=n&&(Q(f[g-3])||o.y),o.x=n&&f[g-2],o.y=n&&f[g-1]}return n||(r.curve=Et(i)),n?[i,n]:i},null,Et),zt=(r._parseDots=n(function(t){for(var e=[],i=0,n=t.length;i<n;i++){var s={},o=t[i].match(/^([^:]*):?([\d\.]*)/);if(s.color=r.getRGB(o[1]),s.color.error)return null;s.color=s.color.hex,o[2]&&(s.offset=o[2]+"%"),e.push(s)}for(i=1,n=e.length-1;i<n;i++)if(!e[i].offset){for(var a=Q(e[i-1].offset||0),l=0,c=i+1;c<n;c++)if(e[c].offset){l=e[c].offset;break}l||(l=100,c=n);for(var h=((l=Q(l))-a)/(c-i+1);i<c;i++)a+=h,e[i].offset=a+"%"}return e}),r._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Ot=(r._tofront=function(t,e){e.top!==t&&(zt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},r._toback=function(t,e){e.bottom!==t&&(zt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},r._insertafter=function(t,e,r){zt(t,r),e==r.top&&(r.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},r._insertbefore=function(t,e,r){zt(t,r),e==r.bottom&&(r.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},r.toMatrix=function(t,e){var r=Ct(t),i={_:{transform:""},getBBox:function(){return r}};return Rt(i,e),i.matrix}),Rt=(r.transformPath=function(t,e){return ft(t,Ot(t,e))},r._extractTransform=function(t,e){if(null==e)return t._.transform;e=P(e).replace(/\.{3}|\u2026/g,t._.transform||"");var i=r.parseTransformString(e),n=0,s=0,o=0,a=1,l=1,c=t._,h=new p;if(c.transform=i||[],i)for(var u=0,f=i.length;u<f;u++){var d,g,v,m,y,x=i[u],b=x.length,w=P(x[0]).toLowerCase(),_=x[0]!=w,S=_?h.invert():0;"t"==w&&3==b?_?(d=S.x(0,0),g=S.y(0,0),v=S.x(x[1],x[2]),m=S.y(x[1],x[2]),h.translate(v-d,m-g)):h.translate(x[1],x[2]):"r"==w?2==b?(y=y||t.getBBox(1),h.rotate(x[1],y.x+y.width/2,y.y+y.height/2),n+=x[1]):4==b&&(_?(v=S.x(x[2],x[3]),m=S.y(x[2],x[3]),h.rotate(x[1],v,m)):h.rotate(x[1],x[2],x[3]),n+=x[1]):"s"==w?2==b||3==b?(y=y||t.getBBox(1),h.scale(x[1],x[b-1],y.x+y.width/2,y.y+y.height/2),a*=x[1],l*=x[b-1]):5==b&&(_?(v=S.x(x[3],x[4]),m=S.y(x[3],x[4]),h.scale(x[1],x[2],v,m)):h.scale(x[1],x[2],x[3],x[4]),a*=x[1],l*=x[2]):"m"==w&&7==b&&h.add(x[1],x[2],x[3],x[4],x[5],x[6]),c.dirtyT=1,t.matrix=h}t.matrix=h,c.sx=a,c.sy=l,c.deg=n,c.dx=s=h.e,c.dy=o=h.f,1==a&&1==l&&!n&&c.bbox?(c.bbox.x+=+s,c.bbox.y+=+o):c.dirtyT=1}),Dt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Ft=r._equaliseTransform=function(t,e){e=P(e).replace(/\.{3}|\u2026/g,t),t=r.parseTransformString(t)||[],e=r.parseTransformString(e)||[];for(var i,n,s,o,a=R(t.length,e.length),l=[],c=[],h=0;h<a;h++){if(s=t[h]||Dt(e[h]),o=e[h]||Dt(s),s[0]!=o[0]||"r"==s[0].toLowerCase()&&(s[2]!=o[2]||s[3]!=o[3])||"s"==s[0].toLowerCase()&&(s[3]!=o[3]||s[4]!=o[4]))return;for(l[h]=[],c[h]=[],i=0,n=R(s.length,o.length);i<n;i++)i in s&&(l[h][i]=s[i]),i in o&&(c[h][i]=o[i])}return{from:l,to:c}};r._getContainer=function(t,e,i,n){var s;if(null!=(s=null!=n||r.is(t,"object")?t:k.doc.getElementById(t)))return s.tagName?null==e?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:e,height:i}:{container:1,x:t,y:e,width:i,height:n}},r.pathToRelative=Tt,r._engine={},r.path2curve=Mt,r.matrix=function(t,e,r,i,n,s){return new p(t,e,r,i,n,s)},function(t){function e(t){return t[0]*t[0]+t[1]*t[1]}function i(t){var r=O.sqrt(e(t));t[0]&&(t[0]/=r),t[1]&&(t[1]/=r)}t.add=function(t,e,r,i,n,s){var o,a,l,c,h=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[t,r,n],[e,i,s],[0,0,1]];for(t&&t instanceof p&&(f=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),o=0;o<3;o++)for(a=0;a<3;a++){for(c=0,l=0;l<3;l++)c+=u[o][l]*f[l][a];h[o][a]=c}this.a=h[0][0],this.b=h[1][0],this.c=h[0][1],this.d=h[1][1],this.e=h[0][2],this.f=h[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new p(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,r,i){null==e&&(e=t),(r||i)&&this.add(1,0,0,1,r,i),this.add(t,0,0,e,0,0),(r||i)&&this.add(1,0,0,1,-r,-i)},t.rotate=function(t,e,i){t=r.rad(t),e=e||0,i=i||0;var n=+O.cos(t).toFixed(9),s=+O.sin(t).toFixed(9);this.add(n,s,-s,n,e,i),this.add(1,0,0,1,-e,-i)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[P.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return r.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];t.scalex=O.sqrt(e(n[0])),i(n[0]),t.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*t.shear,n[1][1]-n[0][1]*t.shear],t.scaley=O.sqrt(e(n[1])),i(n[1]),t.shear/=t.scaley;var s=-n[0][1],o=n[1][1];return o<0?(t.rotate=r.deg(O.acos(o)),s<0&&(t.rotate=360-t.rotate)):t.rotate=r.deg(O.asin(s)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[I]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:"")+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:"")+(e.rotate?"r"+[e.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(p.prototype);var Vt=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Vt&&Vt[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Vt&&Vt[1]<8?x.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:x.safari=function(){};for(var Gt=function(){this.returnValue=!1},qt=function(){return this.originalEvent.preventDefault()},Ht=function(){this.cancelBubble=!0},jt=function(){return this.originalEvent.stopPropagation()},Yt=function(t){var e=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,r=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft;return{x:t.clientX+r,y:t.clientY+e}},Wt=k.doc.addEventListener?function(t,e,r,i){var n=function(t){var e=Yt(t);return r.call(i,t,e.x,e.y)};return t.addEventListener(e,n,!1),N&&M[e]&&t.addEventListener(M[e],function(e){for(var n=Yt(e),s=e,o=0,a=e.targetTouches&&e.targetTouches.length;o<a;o++)if(e.targetTouches[o].target==t){(e=e.targetTouches[o]).originalEvent=s,e.preventDefault=qt,e.stopPropagation=jt;break}return r.call(i,e,n.x,n.y)},!1),function(){return t.removeEventListener(e,n,!1),N&&M[e]&&t.removeEventListener(M[e],n,!1),!0}}:k.doc.attachEvent?function(t,e,r,i){var n=function(t){t=t||k.win.event;var e=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,n=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,s=t.clientX+n,o=t.clientY+e;return t.preventDefault=t.preventDefault||Gt,t.stopPropagation=t.stopPropagation||Ht,r.call(i,t,s,o)};return t.attachEvent("on"+e,n),function(){return t.detachEvent("on"+e,n),!0}}:void 0,$t=[],Ut=function(t){for(var r,i=t.clientX,n=t.clientY,s=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,o=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,a=$t.length;a--;){if(r=$t[a],N&&t.touches){for(var l,c=t.touches.length;c--;)if((l=t.touches[c]).identifier==r.el._drag.id){i=l.clientX,n=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var h,u=r.el.node,p=u.nextSibling,f=u.parentNode,d=u.style.display;k.win.opera&&f.removeChild(u),u.style.display="none",h=r.el.paper.getElementByPoint(i,n),u.style.display=d,k.win.opera&&(p?f.insertBefore(u,p):f.appendChild(u)),h&&e("raphael.drag.over."+r.el.id,r.el,h),i+=o,n+=s,e("raphael.drag.move."+r.el.id,r.move_scope||r.el,i-r.el._drag.x,n-r.el._drag.y,i,n,t)}},Xt=function(t){r.unmousemove(Ut).unmouseup(Xt);for(var i,n=$t.length;n--;)(i=$t[n]).el._drag={},e("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,t);$t=[]},Qt=r.el={},Zt=L.length;Zt--;)!function(t){r[t]=Qt[t]=function(e,i){return r.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Wt(this.shape||this.node||k.doc,t,e,i||this)})),this},r["un"+t]=Qt["un"+t]=function(e){for(var i=this.events||[],n=i.length;n--;)i[n].name!=t||!r.is(e,"undefined")&&i[n].f!=e||(i[n].unbind(),i.splice(n,1),!i.length&&delete this.events);return this}}(L[Zt]);Qt.data=function(t,i){var n=at[this.id]=at[this.id]||{};if(0==arguments.length)return n;if(1==arguments.length){if(r.is(t,"object")){for(var s in t)t[S](s)&&this.data(s,t[s]);return this}return e("raphael.data.get."+this.id,this,n[t],t),n[t]}return n[t]=i,e("raphael.data.set."+this.id,this,i,t),this},Qt.removeData=function(t){return null==t?at[this.id]={}:at[this.id]&&delete at[this.id][t],this},Qt.getData=function(){return i(at[this.id]||{})},Qt.hover=function(t,e,r,i){return this.mouseover(t,r).mouseout(e,i||r)},Qt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Kt=[];Qt.drag=function(t,i,n,s,o,a){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,h=l.clientY,u=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,p=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft;if(this._drag.id=l.identifier,N&&l.touches)for(var f,d=l.touches.length;d--;)if(f=l.touches[d],this._drag.id=f.identifier,f.identifier==this._drag.id){c=f.clientX,h=f.clientY;break}this._drag.x=c+p,this._drag.y=h+u,!$t.length&&r.mousemove(Ut).mouseup(Xt),$t.push({el:this,move_scope:s,start_scope:o,end_scope:a}),i&&e.on("raphael.drag.start."+this.id,i),t&&e.on("raphael.drag.move."+this.id,t),n&&e.on("raphael.drag.end."+this.id,n),e("raphael.drag.start."+this.id,o||s||this,l.clientX+p,l.clientY+u,l)}return this._drag={},Kt.push({el:this,start:l}),this.mousedown(l),this},Qt.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Qt.undrag=function(){for(var t=Kt.length;t--;)Kt[t].el==this&&(this.unmousedown(Kt[t].start),Kt.splice(t,1),e.unbind("raphael.drag.*."+this.id));!Kt.length&&r.unmousemove(Ut).unmouseup(Xt),$t=[]},x.circle=function(t,e,i){var n=r._engine.circle(this,t||0,e||0,i||0);return this.__set__&&this.__set__.push(n),n},x.rect=function(t,e,i,n,s){var o=r._engine.rect(this,t||0,e||0,i||0,n||0,s||0);return this.__set__&&this.__set__.push(o),o},x.ellipse=function(t,e,i,n){var s=r._engine.ellipse(this,t||0,e||0,i||0,n||0);return this.__set__&&this.__set__.push(s),s},x.path=function(t){t&&!r.is(t,H)&&!r.is(t[0],j)&&(t+="");var e=r._engine.path(r.format[T](r,arguments),this);return this.__set__&&this.__set__.push(e),e},x.image=function(t,e,i,n,s){var o=r._engine.image(this,t||"about:blank",e||0,i||0,n||0,s||0);return this.__set__&&this.__set__.push(o),o},x.text=function(t,e,i){var n=r._engine.text(this,t||0,e||0,P(i));return this.__set__&&this.__set__.push(n),n},x.set=function(t){!r.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new ce(t);return this.__set__&&this.__set__.push(e),e.paper=this,e.type="set",e},x.setStart=function(t){this.__set__=t||this.set()},x.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},x.setSize=function(t,e){return r._engine.setSize.call(this,t,e)},x.setViewBox=function(t,e,i,n,s){return r._engine.setViewBox.call(this,t,e,i,n,s)},x.top=x.bottom=null,x.raphael=r;x.getElementByPoint=function(t,e){var r,i,n,s,o,a,l,c,h,u=this.canvas,p=k.doc.elementFromPoint(t,e);if(k.win.opera&&"svg"==p.tagName){var f=(i=(r=u).getBoundingClientRect(),n=r.ownerDocument,s=n.body,o=n.documentElement,a=o.clientTop||s.clientTop||0,l=o.clientLeft||s.clientLeft||0,c=i.top+(k.win.pageYOffset||o.scrollTop||s.scrollTop)-a,h=i.left+(k.win.pageXOffset||o.scrollLeft||s.scrollLeft)-l,{y:c,x:h}),d=u.createSVGRect();d.x=t-f.x,d.y=e-f.y,d.width=d.height=1;var g=u.getIntersectionList(d,null);g.length&&(p=g[g.length-1])}if(!p)return null;for(;p.parentNode&&p!=u.parentNode&&!p.raphael;)p=p.parentNode;return p==this.canvas.parentNode&&(p=u),p=p&&p.raphael?this.getById(p.raphaelid):null},x.getElementsByBBox=function(t){var e=this.set();return this.forEach(function(i){r.isBBoxIntersect(i.getBBox(),t)&&e.push(i)}),e},x.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},x.forEach=function(t,e){for(var r=this.bottom;r;){if(!1===t.call(e,r))return this;r=r.next}return this},x.getElementsByPoint=function(t,e){var r=this.set();return this.forEach(function(i){i.isPointInside(t,e)&&r.push(i)}),r},Qt.isPointInside=function(t,e){var i=this.realPath=pt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(i=r.transformPath(i,this.attr("transform"))),r.isPointInsidePath(i,t,e)},Qt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=pt[this.type](this),e.bboxwt=Ct(this.realPath),e.bboxwt.toString=f,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=pt[this.type](this)),e.bbox=Ct(ft(this.realPath,this.matrix)),e.bbox.toString=f,e.dirty=e.dirtyT=0),e.bbox)},Qt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Qt.glow=function(t){if("text"==this.type)return null;var e={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},r=e.width/2,i=this.paper,n=i.set(),s=this.realPath||pt[this.type](this);s=this.matrix?ft(s,this.matrix):s;for(var o=1;o<r+1;o++)n.push(i.path(s).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/r*o).toFixed(3),opacity:+(e.opacity/r).toFixed(3)}));return n.insertBefore(this).translate(e.offsetx,e.offsety)};var Jt=function(t,e,i,n,s,o,a,c,h){return null==h?l(t,e,i,n,s,o,a,c):r.findDotsAtSegment(t,e,i,n,s,o,a,c,function(t,e,r,i,n,s,o,a,c){if(c<0||l(t,e,r,i,n,s,o,a)<c)return;var h,u=.5,p=1-u;h=l(t,e,r,i,n,s,o,a,p);for(;F(h-c)>.01;)h=l(t,e,r,i,n,s,o,a,p+=(h<c?1:-1)*(u/=2));return p}(t,e,i,n,s,o,a,c,h))},te=function(t,e){return function(i,n,s){i=Mt(i);for(var o,a,l,c,h,u="",p={},f=0,d=0,g=i.length;d<g;d++){if("M"==(l=i[d])[0])o=+l[1],a=+l[2];else{if(c=Jt(o,a,l[1],l[2],l[3],l[4],l[5],l[6]),f+c>n){if(e&&!p.start){if(h=Jt(o,a,l[1],l[2],l[3],l[4],l[5],l[6],n-f),u+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y],s)return u;p.start=u,u=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,l[5],l[6]].join(),f+=c,o=+l[5],a=+l[6];continue}if(!t&&!e)return{x:(h=Jt(o,a,l[1],l[2],l[3],l[4],l[5],l[6],n-f)).x,y:h.y,alpha:h.alpha}}f+=c,o=+l[5],a=+l[6]}u+=l.shift()+l}return p.end=u,(h=t?f:e?p:r.findDotsAtSegment(o,a,l[0],l[1],l[2],l[3],l[4],l[5],1)).alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},ee=te(1),re=te(),ie=te(0,1);r.getTotalLength=ee,r.getPointAtLength=re,r.getSubpath=function(t,e,r){if(this.getTotalLength(t)-r<1e-6)return ie(t,e).end;var i=ie(t,r,1);return e?ie(i,e).end:i},Qt.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():ee(t)},Qt.getPointAtLength=function(t){var e=this.getPath();if(e)return re(e,t)},Qt.getPath=function(){var t,e=r._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return e&&(t=e(this)),t},Qt.getSubpath=function(t,e){var i=this.getPath();if(i)return r.getSubpath(i,t,e)};var ne=r.easing_formulas={linear:function(t){return t},"<":function(t){return V(t,1.7)},">":function(t){return V(t,.48)},"<>":function(t){var e=.48-t/1.04,r=O.sqrt(.1734+e*e),i=r-e,n=V(F(i),1/3)*(i<0?-1:1),s=-r-e,o=V(F(s),1/3)*(s<0?-1:1),a=n+o+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return(t-=1)*t*(2.70158*t+1.70158)+1},elastic:function(t){return t==!!t?t:V(2,-10*t)*O.sin(2*(t-.075)*G/.3)+1},bounce:function(t){var e=7.5625,r=2.75;return t<1/r?e*t*t:t<2/r?e*(t-=1.5/r)*t+.75:t<2.5/r?e*(t-=2.25/r)*t+.9375:e*(t-=2.625/r)*t+.984375}};ne.easeIn=ne["ease-in"]=ne["<"],ne.easeOut=ne["ease-out"]=ne[">"],ne.easeInOut=ne["ease-in-out"]=ne["<>"],ne["back-in"]=ne.backIn,ne["back-out"]=ne.backOut;var se=[],oe=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},ae=function(){for(var t=+new Date,i=0;i<se.length;i++){var n=se[i];if(!n.el.removed&&!n.paused){var s,o,a=t-n.start,l=n.ms,c=n.easing,h=n.from,u=n.diff,p=n.to,f=(n.t,n.el),d={},g={};if(n.initstatus?(a=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*l,n.status=n.initstatus,delete n.initstatus,n.stop&&se.splice(i--,1)):n.status=(n.prev+(n.percent-n.prev)*(a/l))/n.anim.top,!(a<0))if(a<l){var m=c(a/l);for(var y in h)if(h[S](y)){switch(tt[y]){case q:s=+h[y]+m*l*u[y];break;case"colour":s="rgb("+[le(X(h[y].r+m*l*u[y].r)),le(X(h[y].g+m*l*u[y].g)),le(X(h[y].b+m*l*u[y].b))].join(",")+")";break;case"path":s=[];for(var x=0,b=h[y].length;x<b;x++){s[x]=[h[y][x][0]];for(var w=1,_=h[y][x].length;w<_;w++)s[x][w]=+h[y][x][w]+m*l*u[y][x][w];s[x]=s[x].join(B)}s=s.join(B);break;case"transform":if(u[y].real)for(s=[],x=0,b=h[y].length;x<b;x++)for(s[x]=[h[y][x][0]],w=1,_=h[y][x].length;w<_;w++)s[x][w]=h[y][x][w]+m*l*u[y][x][w];else{var k=function(t){return+h[y][t]+m*l*u[y][t]};s=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==y)for(s=[],x=4;x--;)s[x]=+h[y][x]+m*l*u[y][x];break;default:var C=[][A](h[y]);for(s=[],x=f.paper.customAttributes[y].length;x--;)s[x]=+C[x]+m*l*u[y][x]}d[y]=s}f.attr(d),function(t,r,i){setTimeout(function(){e("raphael.anim.frame."+t,r,i)})}(f.id,f,n.anim)}else{if(function(t,i,n){setTimeout(function(){e("raphael.anim.frame."+i.id,i,n),e("raphael.anim.finish."+i.id,i,n),r.is(t,"function")&&t.call(i)})}(n.callback,f,n.anim),f.attr(p),se.splice(i--,1),n.repeat>1&&!n.next){for(o in p)p[S](o)&&(g[o]=n.totalOrigin[o]);n.el.attr(g),v(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&v(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}}r.svg&&f&&f.paper&&f.paper.safari(),se.length&&oe(ae)},le=function(t){return t>255?255:t<0?0:t};Qt.animateWith=function(t,e,i,n,s,o){var a=this;if(a.removed)return o&&o.call(a),a;var l=i instanceof g?i:r.animation(i,n,s,o);v(l,a,l.percents[0],null,a.attr());for(var c=0,h=se.length;c<h;c++)if(se[c].anim==e&&se[c].el==t){se[h-1].start=se[c].start;break}return a},Qt.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},g.prototype.delay=function(t){var e=new g(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},g.prototype.repeat=function(t){var e=new g(this.anim,this.ms);return e.del=this.del,e.times=O.floor(R(t,0))||1,e},r.animation=function(t,e,i,n){if(t instanceof g)return t;!r.is(i,"function")&&i||(n=n||i||null,i=null),t=Object(t),e=+e||0;var s,o,a={};for(o in t)t[S](o)&&Q(o)!=o&&Q(o)+"%"!=o&&(s=!0,a[o]=t[o]);return s?(i&&(a.easing=i),n&&(a.callback=n),new g({100:a},e)):new g(t,e)},Qt.animate=function(t,e,i,n){var s=this;if(s.removed)return n&&n.call(s),s;var o=t instanceof g?t:r.animation(t,e,i,n);return v(o,s,o.percents[0],null,s.attr()),s},Qt.setTime=function(t,e){return t&&null!=e&&this.status(t,D(e,t.ms)/t.ms),this},Qt.status=function(t,e){var r,i,n=[],s=0;if(null!=e)return v(t,this,-1,D(e,1)),this;for(r=se.length;s<r;s++)if((i=se[s]).el.id==this.id&&(!t||i.anim==t)){if(t)return i.status;n.push({anim:i.anim,status:i.status})}return t?0:n},Qt.pause=function(t){for(var r=0;r<se.length;r++)se[r].el.id!=this.id||t&&se[r].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,se[r].anim)&&(se[r].paused=!0);return this},Qt.resume=function(t){for(var r=0;r<se.length;r++)if(se[r].el.id==this.id&&(!t||se[r].anim==t)){var i=se[r];!1!==e("raphael.anim.resume."+this.id,this,i.anim)&&(delete i.paused,this.status(i.anim,i.status))}return this},Qt.stop=function(t){for(var r=0;r<se.length;r++)se[r].el.id!=this.id||t&&se[r].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,se[r].anim)&&se.splice(r--,1);return this},e.on("raphael.remove",m),e.on("raphael.clear",m),Qt.toString=function(){return"Raphaël’s object"};var ce=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,r=t.length;e<r;e++)!t[e]||t[e].constructor!=Qt.constructor&&t[e].constructor!=ce||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},he=ce.prototype;for(var ue in he.push=function(){for(var t,e,r=0,i=arguments.length;r<i;r++)!(t=arguments[r])||t.constructor!=Qt.constructor&&t.constructor!=ce||(this[e=this.items.length]=this.items[e]=t,this.length++);return this},he.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},he.forEach=function(t,e){for(var r=0,i=this.items.length;r<i;r++)if(!1===t.call(e,this.items[r],r))return this;return this},Qt)Qt[S](ue)&&(he[ue]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t][T](r,e)})}}(ue));return he.attr=function(t,e){if(t&&r.is(t,j)&&r.is(t[0],"object"))for(var i=0,n=t.length;i<n;i++)this.items[i].attr(t[i]);else for(var s=0,o=this.items.length;s<o;s++)this.items[s].attr(t,e);return this},he.clear=function(){for(;this.length;)this.pop()},he.splice=function(t,e,r){t=t<0?R(this.length+t,0):t,e=R(0,D(this.length-t,e));var i,n=[],s=[],o=[];for(i=2;i<arguments.length;i++)o.push(arguments[i]);for(i=0;i<e;i++)s.push(this[t+i]);for(;i<this.length-t;i++)n.push(this[t+i]);var a=o.length;for(i=0;i<a+n.length;i++)this.items[t+i]=this[t+i]=i<a?o[i]:n[i-a];for(i=this.items.length=this.length-=e-a;this[i];)delete this[i++];return new ce(s)},he.exclude=function(t){for(var e=0,r=this.length;e<r;e++)if(this[e]==t)return this.splice(e,1),!0},he.animate=function(t,e,i,n){(r.is(i,"function")||!i)&&(n=i||null);var s,o,a=this.items.length,l=a,c=this;if(!a)return this;n&&(o=function(){!--a&&n.call(c)}),i=r.is(i,H)?i:o;var h=r.animation(t,e,i,o);for(s=this.items[--l].animate(h);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(s,h,h),this.items[l]&&!this.items[l].removed||a--;return this},he.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},he.getBBox=function(){for(var t=[],e=[],r=[],i=[],n=this.items.length;n--;)if(!this.items[n].removed){var s=this.items[n].getBBox();t.push(s.x),e.push(s.y),r.push(s.x+s.width),i.push(s.y+s.height)}return{x:t=D[T](0,t),y:e=D[T](0,e),x2:r=R[T](0,r),y2:i=R[T](0,i),width:r-t,height:i-e}},he.clone=function(t){t=this.paper.set();for(var e=0,r=this.items.length;e<r;e++)t.push(this.items[e].clone());return t},he.toString=function(){return"Raphaël‘s set"},he.glow=function(t){var e=this.paper.set();return this.forEach(function(r,i){var n=r.glow(t);null!=n&&n.forEach(function(t,r){e.push(t)})}),e},he.isPointInside=function(t,e){var r=!1;return this.forEach(function(i){if(i.isPointInside(t,e))return r=!0,!1}),r},r.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},r=t.face["font-family"];for(var i in t.face)t.face[S](i)&&(e.face[i]=t.face[i]);if(this.fonts[r]?this.fonts[r].push(e):this.fonts[r]=[e],!t.svg)for(var n in e.face["units-per-em"]=Z(t.face["units-per-em"],10),t.glyphs)if(t.glyphs[S](n)){var s=t.glyphs[n];if(e.glyphs[n]={w:s.w,k:{},d:s.d&&"M"+s.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},s.k)for(var o in s.k)s[S](o)&&(e.glyphs[n].k[o]=s.k[o])}return t},x.getFont=function(t,e,i,n){if(n=n||"normal",i=i||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,r.fonts){var s,o=r.fonts[t];if(!o){var a=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(var l in r.fonts)if(r.fonts[S](l)&&a.test(l)){o=r.fonts[l];break}}if(o)for(var c=0,h=o.length;c<h&&((s=o[c]).face["font-weight"]!=e||s.face["font-style"]!=i&&s.face["font-style"]||s.face["font-stretch"]!=n);c++);return s}},x.print=function(t,e,i,n,s,o,a,l){o=o||"middle",a=R(D(a||0,1),-1),l=R(D(l||1,3),1);var c,h=P(i)[I](""),u=0,p=0,f="";if(r.is(n,"string")&&(n=this.getFont(n)),n){c=(s||16)/n.face["units-per-em"];for(var d=n.face.bbox[I](b),g=+d[0],v=d[3]-d[1],m=0,y=+d[1]+("baseline"==o?v+ +n.face.descent:v/2),x=0,w=h.length;x<w;x++){if("\n"==h[x])u=0,S=0,p=0,m+=v*l;else{var _=p&&n.glyphs[h[x-1]]||{},S=n.glyphs[h[x]];u+=p?(_.w||n.w)+(_.k&&_.k[h[x]]||0)+n.w*a:0,p=1}S&&S.d&&(f+=r.transformPath(S.d,["t",u*c,m*c,"s",c,c,g,y,"t",(t-g)/c,(e-y)/c]))}}return this.path(f).attr({fill:"#000",stroke:"none"})},x.add=function(t){if(r.is(t,"array"))for(var e,i=this.set(),n=0,s=t.length;n<s;n++)e=t[n]||{},w[S](e.type)&&i.push(this[e.type]().attr(e));return i},r.format=function(t,e){var i=r.is(e,j)?[0][A](e):arguments;return t&&r.is(t,H)&&i.length-1&&(t=t.replace(_,function(t,e){return null==i[++e]?"":i[e]})),t||""},r.fullfill=(ge=/\{([^\}]+)\}/g,ve=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(t,e){return String(t).replace(ge,function(t,r){return i=t,s=n=e,r.replace(ve,function(t,e,r,i,n){e=e||i,s&&(e in s&&(s=s[e]),"function"==typeof s&&n&&(s=s()))}),s=(null==s||s==n?i:s)+"";var i,n,s})}),r.ninja=function(){return C.was?k.win.Raphael=C.is:delete Raphael,r},r.st=he,pe=document,fe="DOMContentLoaded",null==pe.readyState&&pe.addEventListener&&(pe.addEventListener(fe,de=function(){pe.removeEventListener(fe,de,!1),pe.readyState="complete"},!1),pe.readyState="loading"),function t(){/in/.test(pe.readyState)?setTimeout(t,9):r.eve("raphael.DOMload")}(),e.on("raphael.DOMload",function(){y=!0}),function(){if(r.svg){var t="hasOwnProperty",e=String,i=parseFloat,n=parseInt,s=Math,o=s.max,a=s.abs,l=s.pow,c=/[, ]+/,h=r.eve,u="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},f={};r.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var d=function(i,n){if(n)for(var s in"string"==typeof i&&(i=d(i)),n)n[t](s)&&("xlink:"==s.substring(0,6)?i.setAttributeNS(u,s.substring(6),e(n[s])):i.setAttribute(s,e(n[s])));else(i=r._g.doc.createElementNS("http://www.w3.org/2000/svg",i)).style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},g=function(t,n){var c="linear",h=t.id+n,u=.5,p=.5,f=t.node,g=t.paper,v=f.style,m=r._g.doc.getElementById(h);if(!m){if(n=(n=e(n).replace(r._radial_gradient,function(t,e,r){if(c="radial",e&&r){u=i(e);var n=2*((p=i(r))>.5)-1;l(u-.5,2)+l(p-.5,2)>.25&&(p=s.sqrt(.25-l(u-.5,2))*n+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*n)}return""})).split(/\s*\-\s*/),"linear"==c){var y=n.shift();if(y=-i(y),isNaN(y))return null;var x=[0,0,s.cos(r.rad(y)),s.sin(r.rad(y))],b=1/(o(a(x[2]),a(x[3]))||1);x[2]*=b,x[3]*=b,x[2]<0&&(x[0]=-x[2],x[2]=0),x[3]<0&&(x[1]=-x[3],x[3]=0)}var w=r._parseDots(n);if(!w)return null;if(h=h.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&h!=t.gradient.id&&(g.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){m=d(c+"Gradient",{id:h}),t.gradient=m,d(m,"radial"==c?{fx:u,fy:p}:{x1:x[0],y1:x[1],x2:x[2],y2:x[3],gradientTransform:t.matrix.invert()}),g.defs.appendChild(m);for(var _=0,S=w.length;_<S;_++)m.appendChild(d("stop",{offset:w[_].offset?w[_].offset:_?"100%":"0%","stop-color":w[_].color||"#fff"}))}}return d(f,{fill:"url(#"+h+")",opacity:1,"fill-opacity":1}),v.fill="",v.opacity=1,v.fillOpacity=1,1},v=function(t){var e=t.getBBox(1);d(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},m=function(i,n,s){if("path"==i.type){for(var o,a,l,c,h,u=e(n).toLowerCase().split("-"),g=i.paper,v=s?"end":"start",m=i.node,y=i.attrs,x=y["stroke-width"],b=u.length,w="classic",_=3,S=3,k=5;b--;)switch(u[b]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=u[b];break;case"wide":S=5;break;case"narrow":S=2;break;case"long":_=5;break;case"short":_=2}if("open"==w?(_+=2,S+=2,k+=2,l=1,c=s?4:1,h={fill:"none",stroke:y.stroke}):(c=l=_/2,h={fill:y.stroke,stroke:"none"}),i._.arrows?s?(i._.arrows.endPath&&f[i._.arrows.endPath]--,i._.arrows.endMarker&&f[i._.arrows.endMarker]--):(i._.arrows.startPath&&f[i._.arrows.startPath]--,i._.arrows.startMarker&&f[i._.arrows.startMarker]--):i._.arrows={},"none"!=w){var C="raphael-marker-"+w,E="raphael-marker-"+v+w+_+S;r._g.doc.getElementById(C)?f[C]++:(g.defs.appendChild(d(d("path"),{"stroke-linecap":"round",d:p[w],id:C})),f[C]=1);var T,A=r._g.doc.getElementById(E);A?(f[E]++,T=A.getElementsByTagName("use")[0]):(A=d(d("marker"),{id:E,markerHeight:S,markerWidth:_,orient:"auto",refX:c,refY:S/2}),T=d(d("use"),{"xlink:href":"#"+C,transform:(s?"rotate(180 "+_/2+" "+S/2+") ":"")+"scale("+_/k+","+S/k+")","stroke-width":(1/((_/k+S/k)/2)).toFixed(4)}),A.appendChild(T),g.defs.appendChild(A),f[E]=1),d(T,h);var N=l*("diamond"!=w&&"oval"!=w);s?(o=i._.arrows.startdx*x||0,a=r.getTotalLength(y.path)-N*x):(o=N*x,a=r.getTotalLength(y.path)-(i._.arrows.enddx*x||0)),(h={})["marker-"+v]="url(#"+E+")",(a||o)&&(h.d=r.getSubpath(y.path,o,a)),d(m,h),i._.arrows[v+"Path"]=C,i._.arrows[v+"Marker"]=E,i._.arrows[v+"dx"]=N,i._.arrows[v+"Type"]=w,i._.arrows[v+"String"]=n}else s?(o=i._.arrows.startdx*x||0,a=r.getTotalLength(y.path)-o):(o=0,a=r.getTotalLength(y.path)-(i._.arrows.enddx*x||0)),i._.arrows[v+"Path"]&&d(m,{d:r.getSubpath(y.path,o,a)}),delete i._.arrows[v+"Path"],delete i._.arrows[v+"Marker"],delete i._.arrows[v+"dx"],delete i._.arrows[v+"Type"],delete i._.arrows[v+"String"];for(h in f)if(f[t](h)&&!f[h]){var B=r._g.doc.getElementById(h);B&&B.parentNode.removeChild(B)}}},y={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},x=function(t,r,i){if(r=y[e(r).toLowerCase()]){for(var n=t.attrs["stroke-width"]||"1",s={round:n,square:n,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,o=[],a=r.length;a--;)o[a]=r[a]*n+(a%2?1:-1)*s;d(t.node,{"stroke-dasharray":o.join(",")})}},b=function(i,s){var l=i.node,h=i.attrs,p=l.style.visibility;for(var f in l.style.visibility="hidden",s)if(s[t](f)){if(!r._availableAttrs[t](f))continue;var y=s[f];switch(h[f]=y,f){case"blur":i.blur(y);break;case"title":var b=l.getElementsByTagName("title");if(b.length&&(b=b[0]))b.firstChild.nodeValue=y;else{b=d("title");var _=r._g.doc.createTextNode(y);b.appendChild(_),l.appendChild(b)}break;case"href":case"target":var S=l.parentNode;if("a"!=S.tagName.toLowerCase()){var k=d("a");S.insertBefore(k,l),k.appendChild(l),S=k}"target"==f?S.setAttributeNS(u,"show","blank"==y?"new":y):S.setAttributeNS(u,f,y);break;case"cursor":l.style.cursor=y;break;case"transform":i.transform(y);break;case"arrow-start":m(i,y);break;case"arrow-end":m(i,y,1);break;case"clip-rect":var C=e(y).split(c);if(4==C.length){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var E=d("clipPath"),T=d("rect");E.id=r.createUUID(),d(T,{x:C[0],y:C[1],width:C[2],height:C[3]}),E.appendChild(T),i.paper.defs.appendChild(E),d(l,{"clip-path":"url(#"+E.id+")"}),i.clip=T}if(!y){var A=l.getAttribute("clip-path");if(A){var N=r._g.doc.getElementById(A.replace(/(^url\(#|\)$)/g,""));N&&N.parentNode.removeChild(N),d(l,{"clip-path":""}),delete i.clip}}break;case"path":"path"==i.type&&(d(l,{d:y?h.path=r._pathToAbsolute(y):"M0,0"}),i._.dirty=1,i._.arrows&&("startString"in i._.arrows&&m(i,i._.arrows.startString),"endString"in i._.arrows&&m(i,i._.arrows.endString,1)));break;case"width":if(l.setAttribute(f,y),i._.dirty=1,!h.fx)break;f="x",y=h.x;case"x":h.fx&&(y=-h.x-(h.width||0));case"rx":if("rx"==f&&"rect"==i.type)break;case"cx":l.setAttribute(f,y),i.pattern&&v(i),i._.dirty=1;break;case"height":if(l.setAttribute(f,y),i._.dirty=1,!h.fy)break;f="y",y=h.y;case"y":h.fy&&(y=-h.y-(h.height||0));case"ry":if("ry"==f&&"rect"==i.type)break;case"cy":l.setAttribute(f,y),i.pattern&&v(i),i._.dirty=1;break;case"r":"rect"==i.type?d(l,{rx:y,ry:y}):l.setAttribute(f,y),i._.dirty=1;break;case"src":"image"==i.type&&l.setAttributeNS(u,"href",y);break;case"stroke-width":1==i._.sx&&1==i._.sy||(y/=o(a(i._.sx),a(i._.sy))||1),i.paper._vbSize&&(y*=i.paper._vbSize),l.setAttribute(f,y),h["stroke-dasharray"]&&x(i,h["stroke-dasharray"],s),i._.arrows&&("startString"in i._.arrows&&m(i,i._.arrows.startString),"endString"in i._.arrows&&m(i,i._.arrows.endString,1));break;case"stroke-dasharray":x(i,y,s);break;case"fill":var B=e(y).match(r._ISURL);if(B){E=d("pattern");var P=d("image");E.id=r.createUUID(),d(E,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),d(P,{x:0,y:0,"xlink:href":B[1]}),E.appendChild(P),function(t){r._preload(B[1],function(){var e=this.offsetWidth,r=this.offsetHeight;d(t,{width:e,height:r}),d(P,{width:e,height:r}),i.paper.safari()})}(E),i.paper.defs.appendChild(E),d(l,{fill:"url(#"+E.id+")"}),i.pattern=E,i.pattern&&v(i);break}var I=r.getRGB(y);if(I.error){if(("circle"==i.type||"ellipse"==i.type||"r"!=e(y).charAt())&&g(i,y)){if("opacity"in h||"fill-opacity"in h){var L=r._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,""));if(L){var M=L.getElementsByTagName("stop");d(M[M.length-1],{"stop-opacity":("opacity"in h?h.opacity:1)*("fill-opacity"in h?h["fill-opacity"]:1)})}}h.gradient=y,h.fill="none";break}}else delete s.gradient,delete h.gradient,!r.is(h.opacity,"undefined")&&r.is(s.opacity,"undefined")&&d(l,{opacity:h.opacity}),!r.is(h["fill-opacity"],"undefined")&&r.is(s["fill-opacity"],"undefined")&&d(l,{"fill-opacity":h["fill-opacity"]});I[t]("opacity")&&d(l,{"fill-opacity":I.opacity>1?I.opacity/100:I.opacity});case"stroke":I=r.getRGB(y),l.setAttribute(f,I.hex),"stroke"==f&&I[t]("opacity")&&d(l,{"stroke-opacity":I.opacity>1?I.opacity/100:I.opacity}),"stroke"==f&&i._.arrows&&("startString"in i._.arrows&&m(i,i._.arrows.startString),"endString"in i._.arrows&&m(i,i._.arrows.endString,1));break;case"gradient":("circle"==i.type||"ellipse"==i.type||"r"!=e(y).charAt())&&g(i,y);break;case"opacity":h.gradient&&!h[t]("stroke-opacity")&&d(l,{"stroke-opacity":y>1?y/100:y});case"fill-opacity":if(h.gradient){(L=r._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,"")))&&(M=L.getElementsByTagName("stop"),d(M[M.length-1],{"stop-opacity":y}));break}default:"font-size"==f&&(y=n(y,10)+"px");var z=f.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[z]=y,i._.dirty=1,l.setAttribute(f,y)}}w(i,s),l.style.visibility=p},w=function(i,s){if("text"==i.type&&(s[t]("text")||s[t]("font")||s[t]("font-size")||s[t]("x")||s[t]("y"))){var o=i.attrs,a=i.node,l=a.firstChild?n(r._g.doc.defaultView.getComputedStyle(a.firstChild,"").getPropertyValue("font-size"),10):10;if(s[t]("text")){for(o.text=s.text;a.firstChild;)a.removeChild(a.firstChild);for(var c,h=e(s.text).split("\n"),u=[],p=0,f=h.length;p<f;p++)c=d("tspan"),p&&d(c,{dy:1.2*l,x:o.x}),c.appendChild(r._g.doc.createTextNode(h[p])),a.appendChild(c),u[p]=c}else for(p=0,f=(u=a.getElementsByTagName("tspan")).length;p<f;p++)p?d(u[p],{dy:1.2*l,x:o.x}):d(u[0],{dy:0});d(a,{x:o.x,y:o.y}),i._.dirty=1;var g=i._getBBox(),v=o.y-(g.y+g.height/2);v&&r.is(v,"finite")&&d(u[0],{dy:v})}},_=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=r._oid++,t.raphaelid=this.id,this.matrix=r.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},S=r.el;_.prototype=S,S.constructor=_,r._engine.path=function(t,e){var r=d("path");e.canvas&&e.canvas.appendChild(r);var i=new _(r,e);return i.type="path",b(i,{fill:"none",stroke:"#000",path:t}),i},S.rotate=function(t,r,n){if(this.removed)return this;if((t=e(t).split(c)).length-1&&(r=i(t[1]),n=i(t[2])),t=i(t[0]),null==n&&(r=n),null==r||null==n){var s=this.getBBox(1);r=s.x+s.width/2,n=s.y+s.height/2}return this.transform(this._.transform.concat([["r",t,r,n]])),this},S.scale=function(t,r,n,s){if(this.removed)return this;if((t=e(t).split(c)).length-1&&(r=i(t[1]),n=i(t[2]),s=i(t[3])),t=i(t[0]),null==r&&(r=t),null==s&&(n=s),null==n||null==s)var o=this.getBBox(1);return n=null==n?o.x+o.width/2:n,s=null==s?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",t,r,n,s]])),this},S.translate=function(t,r){return this.removed?this:((t=e(t).split(c)).length-1&&(r=i(t[1])),t=i(t[0])||0,r=+r||0,this.transform(this._.transform.concat([["t",t,r]])),this)},S.transform=function(e){var i=this._;if(null==e)return i.transform;if(r._extractTransform(this,e),this.clip&&d(this.clip,{transform:this.matrix.invert()}),this.pattern&&v(this),this.node&&d(this.node,{transform:this.matrix}),1!=i.sx||1!=i.sy){var n=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":n})}return this},S.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},S.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},S.remove=function(){if(!this.removed&&this.node.parentNode){var t=this.paper;for(var e in t.__set__&&t.__set__.exclude(this),h.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),r._tear(this,t),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node),this)this[e]="function"==typeof this[e]?r._removedFactory(e):null;this.removed=!0}},S._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}return t&&this.hide(),e},S.attr=function(e,i){if(this.removed)return this;if(null==e){var n={};for(var s in this.attrs)this.attrs[t](s)&&(n[s]=this.attrs[s]);return n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==i&&r.is(e,"string")){if("fill"==e&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==e)return this._.transform;for(var o=e.split(c),a={},l=0,u=o.length;l<u;l++)(e=o[l])in this.attrs?a[e]=this.attrs[e]:r.is(this.paper.customAttributes[e],"function")?a[e]=this.paper.customAttributes[e].def:a[e]=r._availableAttrs[e];return u-1?a:a[o[0]]}if(null==i&&r.is(e,"array")){for(a={},l=0,u=e.length;l<u;l++)a[e[l]]=this.attr(e[l]);return a}if(null!=i){var p={};p[e]=i}else null!=e&&r.is(e,"object")&&(p=e);for(var f in p)h("raphael.attr."+f+"."+this.id,this,p[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[t](f)&&p[t](f)&&r.is(this.paper.customAttributes[f],"function")){var d=this.paper.customAttributes[f].apply(this,[].concat(p[f]));for(var g in this.attrs[f]=p[f],d)d[t](g)&&(p[g]=d[g])}return b(this,p),this},S.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&r._tofront(this,t),this},S.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;return"a"==t.tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),r._toback(this,this.paper),this.paper,this},S.insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),r._insertafter(this,t,this.paper),this},S.insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),r._insertbefore(this,t,this.paper),this},S.blur=function(t){var e=this;if(0!=+t){var i=d("filter"),n=d("feGaussianBlur");e.attrs.blur=t,i.id=r.createUUID(),d(n,{stdDeviation:+t||1.5}),i.appendChild(n),e.paper.defs.appendChild(i),e._blur=i,d(e.node,{filter:"url(#"+i.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter");return e},r._engine.circle=function(t,e,r,i){var n=d("circle");t.canvas&&t.canvas.appendChild(n);var s=new _(n,t);return s.attrs={cx:e,cy:r,r:i,fill:"none",stroke:"#000"},s.type="circle",d(n,s.attrs),s},r._engine.rect=function(t,e,r,i,n,s){var o=d("rect");t.canvas&&t.canvas.appendChild(o);var a=new _(o,t);return a.attrs={x:e,y:r,width:i,height:n,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},a.type="rect",d(o,a.attrs),a},r._engine.ellipse=function(t,e,r,i,n){var s=d("ellipse");t.canvas&&t.canvas.appendChild(s);var o=new _(s,t);return o.attrs={cx:e,cy:r,rx:i,ry:n,fill:"none",stroke:"#000"},o.type="ellipse",d(s,o.attrs),o},r._engine.image=function(t,e,r,i,n,s){var o=d("image");d(o,{x:r,y:i,width:n,height:s,preserveAspectRatio:"none"}),o.setAttributeNS(u,"href",e),t.canvas&&t.canvas.appendChild(o);var a=new _(o,t);return a.attrs={x:r,y:i,width:n,height:s,src:e},a.type="image",a},r._engine.text=function(t,e,i,n){var s=d("text");t.canvas&&t.canvas.appendChild(s);var o=new _(s,t);return o.attrs={x:e,y:i,"text-anchor":"middle",text:n,font:r._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",b(o,o.attrs),o},r._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},r._engine.create=function(){var t=r._getContainer.apply(0,arguments),e=t&&t.container,i=t.x,n=t.y,s=t.width,o=t.height;if(!e)throw new Error("SVG container not found.");var a,l=d("svg"),c="overflow:hidden;";return i=i||0,n=n||0,d(l,{height:o=o||342,version:1.1,width:s=s||512,xmlns:"http://www.w3.org/2000/svg"}),1==e?(l.style.cssText=c+"position:absolute;left:"+i+"px;top:"+n+"px",r._g.doc.body.appendChild(l),a=1):(l.style.cssText=c+"position:relative",e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l)),(e=new r._Paper).width=s,e.height=o,e.canvas=l,e.clear(),e._left=e._top=0,a&&(e.renderfix=function(){}),e.renderfix(),e},r._engine.setViewBox=function(t,e,r,i,n){h("raphael.setViewBox",this,this._viewBox,[t,e,r,i,n]);var s,a,l=o(r/this.width,i/this.height),c=this.top,u=n?"xMidYMid meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,s="0 0 "+this.width+" "+this.height):(this._vbSize=l,s=t+" "+e+" "+r+" "+i),d(this.canvas,{viewBox:s,preserveAspectRatio:u});l&&c;)a="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":a}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[t,e,r,i,!!n],this},r.prototype.renderfix=function(){var t,e=this.canvas,r=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(r){t=e.createSVGMatrix()}var i=-t.e%1,n=-t.f%1;(i||n)&&(i&&(this._left=(this._left+i)%1,r.left=this._left+"px"),n&&(this._top=(this._top+n)%1,r.top=this._top+"px"))},r.prototype.clear=function(){r.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=d("desc")).appendChild(r._g.doc.createTextNode("Created with Raphaël "+r.version)),t.appendChild(this.desc),t.appendChild(this.defs=d("defs"))},r.prototype.remove=function(){for(var t in h("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?r._removedFactory(t):null};var k=r.st;for(var C in S)S[t](C)&&!k[t](C)&&(k[C]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t].apply(r,e)})}}(C))}}(),function(){if(r.vml){var t="hasOwnProperty",e=String,i=parseFloat,n=Math,s=n.round,o=n.max,a=n.min,l=n.abs,c="fill",h=/[, ]+/,u=r.eve,p=" ",f={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},d=/([clmz]),?([^clmz]*)/gi,g=/ progid:\S+Blur\([^\)]+\)/g,v=/-?[^,\s-]+/g,m="position:absolute;left:0;top:0;width:1px;height:1px",y=21600,x={path:1,rect:1,image:1},b={circle:1,ellipse:1},w=function(t,e,i){var n=r.matrix();return n.rotate(-t,.5,.5),{dx:n.x(e,i),dy:n.y(e,i)}},_=function(t,e,r,i,n,s){var o=t._,a=t.matrix,h=o.fillpos,u=t.node,f=u.style,d=1,g="",v=y/e,m=y/r;if(f.visibility="hidden",e&&r){if(u.coordsize=l(v)+p+l(m),f.rotation=s*(e*r<0?-1:1),s){var x=w(s,i,n);i=x.dx,n=x.dy}if(e<0&&(g+="x"),r<0&&(g+=" y")&&(d=-1),f.flip=g,u.coordorigin=i*-v+p+n*-m,h||o.fillsize){var b=u.getElementsByTagName(c);b=b&&b[0],u.removeChild(b),h&&(x=w(s,a.x(h[0],h[1]),a.y(h[0],h[1])),b.position=x.dx*d+p+x.dy*d),o.fillsize&&(b.size=o.fillsize[0]*l(e)+p+o.fillsize[1]*l(r)),u.appendChild(b)}f.visibility="visible"}};r.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var S,k=function(t,r,i){for(var n=e(r).toLowerCase().split("-"),s=i?"end":"start",o=n.length,a="classic",l="medium",c="medium";o--;)switch(n[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=n[o];break;case"wide":case"narrow":c=n[o];break;case"long":case"short":l=n[o]}var h=t.node.getElementsByTagName("stroke")[0];h[s+"arrow"]=a,h[s+"arrowlength"]=l,h[s+"arrowwidth"]=c},C=function(n,l){n.attrs=n.attrs||{};var u=n.node,g=n.attrs,m=u.style,w=x[n.type]&&(l.x!=g.x||l.y!=g.y||l.width!=g.width||l.height!=g.height||l.cx!=g.cx||l.cy!=g.cy||l.rx!=g.rx||l.ry!=g.ry||l.r!=g.r),C=b[n.type]&&(g.cx!=l.cx||g.cy!=l.cy||g.r!=l.r||g.rx!=l.rx||g.ry!=l.ry),T=n;for(var A in l)l[t](A)&&(g[A]=l[A]);if(w&&(g.path=r._getPath[n.type](n),n._.dirty=1),l.href&&(u.href=l.href),l.title&&(u.title=l.title),l.target&&(u.target=l.target),l.cursor&&(m.cursor=l.cursor),"blur"in l&&n.blur(l.blur),(l.path&&"path"==n.type||w)&&(u.path=function(t){var i=/[ahqstv]/gi,n=r._pathToAbsolute;if(e(t).match(i)&&(n=r._path2curve),i=/[clmz]/g,n==r._pathToAbsolute&&!e(t).match(i)){var o=e(t).replace(d,function(t,e,r){var i=[],n="m"==e.toLowerCase(),o=f[e];return r.replace(v,function(t){n&&2==i.length&&(o+=i+f["m"==e?"l":"L"],i=[]),i.push(s(t*y))}),o+i});return o}var a,l,c=n(t);o=[];for(var h=0,u=c.length;h<u;h++){a=c[h],"z"==(l=c[h][0].toLowerCase())&&(l="x");for(var g=1,m=a.length;g<m;g++)l+=s(a[g]*y)+(g!=m-1?",":"");o.push(l)}return o.join(p)}(~e(g.path).toLowerCase().indexOf("r")?r._pathToAbsolute(g.path):g.path),"image"==n.type&&(n._.fillpos=[g.x,g.y],n._.fillsize=[g.width,g.height],_(n,1,1,0,0,0))),"transform"in l&&n.transform(l.transform),C){var N=+g.cx,B=+g.cy,P=+g.rx||+g.r||0,I=+g.ry||+g.r||0;u.path=r.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",s((N-P)*y),s((B-I)*y),s((N+P)*y),s((B+I)*y),s(N*y)),n._.dirty=1}if("clip-rect"in l){var L=e(l["clip-rect"]).split(h);if(4==L.length){L[2]=+L[2]+ +L[0],L[3]=+L[3]+ +L[1];var M=u.clipRect||r._g.doc.createElement("div"),z=M.style;z.clip=r.format("rect({1}px {2}px {3}px {0}px)",L),u.clipRect||(z.position="absolute",z.top=0,z.left=0,z.width=n.paper.width+"px",z.height=n.paper.height+"px",u.parentNode.insertBefore(M,u),M.appendChild(u),u.clipRect=M)}l["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(n.textpath){var O=n.textpath.style;l.font&&(O.font=l.font),l["font-family"]&&(O.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),l["font-size"]&&(O.fontSize=l["font-size"]),l["font-weight"]&&(O.fontWeight=l["font-weight"]),l["font-style"]&&(O.fontStyle=l["font-style"])}if("arrow-start"in l&&k(T,l["arrow-start"]),"arrow-end"in l&&k(T,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var R=u.getElementsByTagName(c);if(!(R=R&&R[0])&&(R=S(c)),"image"==n.type&&l.src&&(R.src=l.src),l.fill&&(R.on=!0),null!=R.on&&"none"!=l.fill&&null!==l.fill||(R.on=!1),R.on&&l.fill){var D=e(l.fill).match(r._ISURL);if(D){R.parentNode==u&&u.removeChild(R),R.rotate=!0,R.src=D[1],R.type="tile";var F=n.getBBox(1);R.position=F.x+p+F.y,n._.fillpos=[F.x,F.y],r._preload(D[1],function(){n._.fillsize=[this.offsetWidth,this.offsetHeight]})}else R.color=r.getRGB(l.fill).hex,R.src="",R.type="solid",r.getRGB(l.fill).error&&(T.type in{circle:1,ellipse:1}||"r"!=e(l.fill).charAt())&&E(T,l.fill,R)&&(g.fill="none",g.gradient=l.fill,R.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var V=((+g["fill-opacity"]+1||2)-1)*((+g.opacity+1||2)-1)*((+r.getRGB(l.fill).o+1||2)-1);V=a(o(V,0),1),R.opacity=V,R.src&&(R.color="none")}u.appendChild(R);var G=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],q=!1;!G&&(q=G=S("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(G.on=!0),("none"==l.stroke||null===l.stroke||null==G.on||0==l.stroke||0==l["stroke-width"])&&(G.on=!1);var H=r.getRGB(l.stroke);G.on&&l.stroke&&(G.color=H.hex),V=((+g["stroke-opacity"]+1||2)-1)*((+g.opacity+1||2)-1)*((+H.o+1||2)-1);var j=.75*(i(l["stroke-width"])||1);if(V=a(o(V,0),1),null==l["stroke-width"]&&(j=g["stroke-width"]),l["stroke-width"]&&(G.weight=j),j&&j<1&&(V*=j)&&(G.weight=1),G.opacity=V,l["stroke-linejoin"]&&(G.joinstyle=l["stroke-linejoin"]||"miter"),G.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(G.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),"stroke-dasharray"in l){var Y={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};G.dashstyle=Y[t](l["stroke-dasharray"])?Y[l["stroke-dasharray"]]:""}q&&u.appendChild(G)}if("text"==T.type){T.paper.canvas.style.display="";var W=T.paper.span,$=g.font&&g.font.match(/\d+(?:\.\d*)?(?=px)/);m=W.style,g.font&&(m.font=g.font),g["font-family"]&&(m.fontFamily=g["font-family"]),g["font-weight"]&&(m.fontWeight=g["font-weight"]),g["font-style"]&&(m.fontStyle=g["font-style"]),$=i(g["font-size"]||$&&$[0])||10,m.fontSize=100*$+"px",T.textpath.string&&(W.innerHTML=e(T.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var U=W.getBoundingClientRect();T.W=g.w=(U.right-U.left)/100,T.H=g.h=(U.bottom-U.top)/100,T.X=g.x,T.Y=g.y+T.H/2,("x"in l||"y"in l)&&(T.path.v=r.format("m{0},{1}l{2},{1}",s(g.x*y),s(g.y*y),s(g.x*y)+1));for(var X=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,Z=X.length;Q<Z;Q++)if(X[Q]in l){T._.dirty=1;break}switch(g["text-anchor"]){case"start":T.textpath.style["v-text-align"]="left",T.bbx=T.W/2;break;case"end":T.textpath.style["v-text-align"]="right",T.bbx=-T.W/2;break;default:T.textpath.style["v-text-align"]="center",T.bbx=0}T.textpath.style["v-text-kern"]=!0}},E=function(t,s,o){t.attrs=t.attrs||{},t.attrs;var a=Math.pow,l="linear",c=".5 .5";if(t.attrs.gradient=s,s=(s=e(s).replace(r._radial_gradient,function(t,e,r){return l="radial",e&&r&&(e=i(e),r=i(r),a(e-.5,2)+a(r-.5,2)>.25&&(r=n.sqrt(.25-a(e-.5,2))*(2*(r>.5)-1)+.5),c=e+p+r),""})).split(/\s*\-\s*/),"linear"==l){var h=s.shift();if(h=-i(h),isNaN(h))return null}var u=r._parseDots(s);if(!u)return null;if(t=t.shape||t.node,u.length){t.removeChild(o),o.on=!0,o.method="none",o.color=u[0].color,o.color2=u[u.length-1].color;for(var f=[],d=0,g=u.length;d<g;d++)u[d].offset&&f.push(u[d].offset+p+u[d].color);o.colors=f.length?f.join():"0% "+o.color,"radial"==l?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=c,o.angle=0):(o.type="gradient",o.angle=(270-h)%360),t.appendChild(o)}return 1},T=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=r._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=e,this.matrix=r.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},A=r.el;T.prototype=A,A.constructor=T,A.transform=function(t){if(null==t)return this._.transform;var i,n=this.paper._viewBoxShift,s=n?"s"+[n.scale,n.scale]+"-1-1t"+[n.dx,n.dy]:"";n&&(i=t=e(t).replace(/\.{3}|\u2026/g,this._.transform||"")),r._extractTransform(this,s+t);var o,a=this.matrix.clone(),l=this.skew,c=this.node,h=~e(this.attrs.fill).indexOf("-"),u=!e(this.attrs.fill).indexOf("url(");if(a.translate(1,1),u||h||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",o=a.split(),h&&o.noRotation||!o.isSimple){c.style.filter=a.toFilter();var f=this.getBBox(),d=this.getBBox(1),g=f.x-d.x,v=f.y-d.y;c.coordorigin=g*-y+p+v*-y,_(this,1,1,g,v,0)}else c.style.filter="",_(this,o.scalex,o.scaley,o.dx,o.dy,o.rotate);else c.style.filter="",l.matrix=e(a),l.offset=a.offset();return i&&(this._.transform=i),this},A.rotate=function(t,r,n){if(this.removed)return this;if(null!=t){if((t=e(t).split(h)).length-1&&(r=i(t[1]),n=i(t[2])),t=i(t[0]),null==n&&(r=n),null==r||null==n){var s=this.getBBox(1);r=s.x+s.width/2,n=s.y+s.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,r,n]])),this}},A.translate=function(t,r){return this.removed?this:((t=e(t).split(h)).length-1&&(r=i(t[1])),t=i(t[0])||0,r=+r||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=r),this.transform(this._.transform.concat([["t",t,r]])),this)},A.scale=function(t,r,n,s){if(this.removed)return this;if((t=e(t).split(h)).length-1&&(r=i(t[1]),n=i(t[2]),s=i(t[3]),isNaN(n)&&(n=null),isNaN(s)&&(s=null)),t=i(t[0]),null==r&&(r=t),null==s&&(n=s),null==n||null==s)var o=this.getBBox(1);return n=null==n?o.x+o.width/2:n,s=null==s?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",t,r,n,s]])),this._.dirtyT=1,this},A.hide=function(){return!this.removed&&(this.node.style.display="none"),this},A.show=function(){return!this.removed&&(this.node.style.display=""),this},A._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},A.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),r.eve.unbind("raphael.*.*."+this.id),r._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?r._removedFactory(t):null;this.removed=!0}},A.attr=function(e,i){if(this.removed)return this;if(null==e){var n={};for(var s in this.attrs)this.attrs[t](s)&&(n[s]=this.attrs[s]);return n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==i&&r.is(e,"string")){if(e==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var o=e.split(h),a={},l=0,p=o.length;l<p;l++)(e=o[l])in this.attrs?a[e]=this.attrs[e]:r.is(this.paper.customAttributes[e],"function")?a[e]=this.paper.customAttributes[e].def:a[e]=r._availableAttrs[e];return p-1?a:a[o[0]]}if(this.attrs&&null==i&&r.is(e,"array")){for(a={},l=0,p=e.length;l<p;l++)a[e[l]]=this.attr(e[l]);return a}var f;for(var d in null!=i&&((f={})[e]=i),null==i&&r.is(e,"object")&&(f=e),f)u("raphael.attr."+d+"."+this.id,this,f[d]);if(f){for(d in this.paper.customAttributes)if(this.paper.customAttributes[t](d)&&f[t](d)&&r.is(this.paper.customAttributes[d],"function")){var g=this.paper.customAttributes[d].apply(this,[].concat(f[d]));for(var v in this.attrs[d]=f[d],g)g[t](v)&&(f[v]=g[v])}f.text&&"text"==this.type&&(this.textpath.string=f.text),C(this,f)}return this},A.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&r._tofront(this,this.paper),this},A.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),r._toback(this,this.paper)),this)},A.insertAfter=function(t){return this.removed?this:(t.constructor==r.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),r._insertafter(this,t,this.paper),this)},A.insertBefore=function(t){return this.removed?this:(t.constructor==r.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),r._insertbefore(this,t,this.paper),this)},A.blur=function(t){var e=this.node.runtimeStyle,i=e.filter;return i=i.replace(g,""),0!=+t?(this.attrs.blur=t,e.filter=i+p+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",e.margin=r.format("-{0}px 0 0 -{0}px",s(+t||1.5))):(e.filter=i,e.margin=0,delete this.attrs.blur),this},r._engine.path=function(t,e){var r=S("shape");r.style.cssText=m,r.coordsize=y+p+y,r.coordorigin=e.coordorigin;var i=new T(r,e),n={fill:"none",stroke:"#000"};t&&(n.path=t),i.type="path",i.path=[],i.Path="",C(i,n),e.canvas.appendChild(r);var s=S("skew");return s.on=!0,r.appendChild(s),i.skew=s,i.transform(""),i},r._engine.rect=function(t,e,i,n,s,o){var a=r._rectPath(e,i,n,s,o),l=t.path(a),c=l.attrs;return l.X=c.x=e,l.Y=c.y=i,l.W=c.width=n,l.H=c.height=s,c.r=o,c.path=a,l.type="rect",l},r._engine.ellipse=function(t,e,r,i,n){var s=t.path();return s.attrs,s.X=e-i,s.Y=r-n,s.W=2*i,s.H=2*n,s.type="ellipse",C(s,{cx:e,cy:r,rx:i,ry:n}),s},r._engine.circle=function(t,e,r,i){var n=t.path();return n.attrs,n.X=e-i,n.Y=r-i,n.W=n.H=2*i,n.type="circle",C(n,{cx:e,cy:r,r:i}),n},r._engine.image=function(t,e,i,n,s,o){var a=r._rectPath(i,n,s,o),l=t.path(a).attr({stroke:"none"}),h=l.attrs,u=l.node,p=u.getElementsByTagName(c)[0];return h.src=e,l.X=h.x=i,l.Y=h.y=n,l.W=h.width=s,l.H=h.height=o,h.path=a,l.type="image",p.parentNode==u&&u.removeChild(p),p.rotate=!0,p.src=e,p.type="tile",l._.fillpos=[i,n],l._.fillsize=[s,o],u.appendChild(p),_(l,1,1,0,0,0),l},r._engine.text=function(t,i,n,o){var a=S("shape"),l=S("path"),c=S("textpath");i=i||0,n=n||0,o=o||"",l.v=r.format("m{0},{1}l{2},{1}",s(i*y),s(n*y),s(i*y)+1),l.textpathok=!0,c.string=e(o),c.on=!0,a.style.cssText=m,a.coordsize=y+p+y,a.coordorigin="0 0";var h=new T(a,t),u={fill:"#000",stroke:"none",font:r._availableAttrs.font,text:o};h.shape=a,h.path=l,h.textpath=c,h.type="text",h.attrs.text=e(o),h.attrs.x=i,h.attrs.y=n,h.attrs.w=1,h.attrs.h=1,C(h,u),a.appendChild(c),a.appendChild(l),t.canvas.appendChild(a);var f=S("skew");return f.on=!0,a.appendChild(f),h.skew=f,h.transform(""),h},r._engine.setSize=function(t,e){var i=this.canvas.style;return this.width=t,this.height=e,t==+t&&(t+="px"),e==+e&&(e+="px"),i.width=t,i.height=e,i.clip="rect(0 "+t+" "+e+" 0)",this._viewBox&&r._engine.setViewBox.apply(this,this._viewBox),this},r._engine.setViewBox=function(t,e,i,n,s){r.eve("raphael.setViewBox",this,this._viewBox,[t,e,i,n,s]);var a,l,c=this.width,h=this.height,u=1/o(i/c,n/h);return s&&(i*(a=h/n)<c&&(t-=(c-i*a)/2/a),n*(l=c/i)<h&&(e-=(h-n*l)/2/l)),this._viewBox=[t,e,i,n,!!s],this._viewBoxShift={dx:-t,dy:-e,scale:u},this.forEach(function(t){t.transform("...")}),this},r._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),S=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){S=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},r._engine.initWin(r._g.win),r._engine.create=function(){var t=r._getContainer.apply(0,arguments),e=t.container,i=t.height,n=t.width,s=t.x,o=t.y;if(!e)throw new Error("VML container not found.");var a=new r._Paper,l=a.canvas=r._g.doc.createElement("div"),c=l.style;return s=s||0,o=o||0,n=n||512,i=i||342,a.width=n,a.height=i,n==+n&&(n+="px"),i==+i&&(i+="px"),a.coordsize=216e5+p+216e5,a.coordorigin="0 0",a.span=r._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(a.span),c.cssText=r.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",n,i),1==e?(r._g.doc.body.appendChild(l),c.left=s+"px",c.top=o+"px",c.position="absolute"):e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l),a.renderfix=function(){},a},r.prototype.clear=function(){r.eve("raphael.clear",this),this.canvas.innerHTML="",this.span=r._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},r.prototype.remove=function(){for(var t in r.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?r._removedFactory(t):null;return!0};var N=r.st;for(var B in A)A[t](B)&&!N[t](B)&&(N[B]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t].apply(r,e)})}}(B))}}(),C.was?k.win.Raphael=r:Raphael=r,r;var pe,fe,de;var ge,ve}(t,t.eve)}(this),function(t){Raphael.fn.nestedSVG=function(e,r,i){var n=this;arguments[0]instanceof Array||arguments[0];return function(s,o){n.set(o);var a,l=new Raphael(e,r,i);return l.canvas.setAttribute("x",0),l.canvas.setAttribute("y",0),n.canvas.appendChild(l.canvas),a={move:function(t,e){l.canvas.setAttribute("x",t),l.canvas.setAttribute("y",e)}},t.extend(l,a),l}(0,arguments[0]instanceof Array?arguments[0]:arguments[1])}}(jQuery),jQuery,Raphael.fn.marker=function(){var t=this;return arguments[0]instanceof Array||arguments[0],function(e,r){t.set(r);var i=t.raphael.vml?document.createElement("marker"):document.createElementNS("http://www.w3.org/2000/svg","marker"),n=t.path("M2,2 L2,10 L10,6 L2,2");return n.node.setAttribute("fill","black"),t.defs.appendChild(i),i.appendChild(n.node),{scale:function(t,e){var r=i.getAttribute("transform");return i.attr("transform",updateScale(r,t,e)),this},move:function(t,e){i.setAttribute("x",t),i.setAttribute("y",e)},attr:function(t,e){i.setAttribute(t,e)},attrs:function(t){for(var e in t)i.setAttribute(e,t[e])},type:"marker",node:i}}(0,arguments[0]instanceof Array?arguments[0]:arguments[1])},function(t){Raphael.fn.group=function(){var e=this;arguments[0]instanceof Array||arguments[0];return function(r,i){e.set(i);var n,s=e.raphael.vml?document.createElement("group"):document.createElementNS("http://www.w3.org/2000/svg","g");return e.canvas.appendChild(s),s.canvas=s,n={setScale:function(t){return e.raphael.vml?this.forEach(function(e){var r=e.data("rotation")||0;e.transform("S"+t+","+t+", 0, 0, r"+r)}):s.setAttribute("transform","scale("+t+")"),this},getScale:function(){var t=s.getAttribute("transform");return null===t&&(t="scale(1)"),t.replace("scale(","").replace(")","")}},t.extend(n,e),n.scale=n.setScale,n.canvas=s,n[0]=s,n.type="group",n.node=s,n}(0,arguments[0]instanceof Array?arguments[0]:arguments[1])}}(jQuery),bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.graphicquery",{},{init:function(t,e,r){var i=this;i.subprocesses=[],i.currentTasks=[],i.path=[],i.callStack=[],i.currentWorkflow={idCase:r.data.idCase,idWorkflow:r.data.idWorkflow},i._super(t,e,r),i.loadTemplates({"graphicquery-wrapper":bizagi.getTemplate("bizagi.workportal.desktop.widgets.graphicquery").concat("#ui-bizagi-webpart-graphicquery"),"graphicquery-tooltip-currenttask":bizagi.getTemplate("bizagi.workportal.desktop.widgets.graphicquery").concat("#ui-bizagi-webpart-graphicquery-tooltip-currenttask"),"graphicquery-tooltip-subcases":bizagi.getTemplate("bizagi.workportal.desktop.widgets.graphicquery").concat("#ui-bizagi-webpart-graphicquery-tooltip-subcases"),"graphicquery-subcases":bizagi.getTemplate("bizagi.workportal.desktop.widgets.graphicquery").concat("#ui-bizagi-webpart-graphicquery-subcases"),"graphicquery-parentsummary":bizagi.getTemplate("bizagi.workportal.desktop.widgets.graphicquery").concat("#ui-bizagi-webpart-graphicquery-parentsummary"),"graphicquery-summary":bizagi.getTemplate("bizagi.workportal.desktop.widgets.graphicquery").concat("#ui-bizagi-webpart-graphicquery-summary"),"graphicquery-tooltip-users":bizagi.getTemplate("bizagi.workportal.desktop.widgets.graphicquery").concat("#ui-bizagi-webpart-graphicquery-tooltip-users"),"graphicquery-actionbar":bizagi.getTemplate("bizagi.workportal.desktop.widgets.graphicquery").concat("#ui-bizagi-webpart-graphicquery-actionbar"),useNewEngine:!1})},getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY},renderContent:function(){var t=this.getTemplate("graphicquery-wrapper");return this.content=$.tmpl(t)}}),bizagi.workportal.widgets.graphicquery.extend("bizagi.workportal.widgets.graphicquery",{},{postRender:function(){var t=this;t.dateFormat=t.getResource("dateFormat")+" "+t.getResource("timeFormat"),t.$header=$(".bz-gq-header",t.content),t.$actionBar=$("#bz-gq-actionbar-container",t.$header),t.$pvCanvas=$("#bz-gq-processviewer-canvas",t.content),t.$summary=$("#bz-gq-summary-container",t.$header),t.instanceBizagiGraphicQuery=new bizagi.graphicquery(this),t.renderProcessViewer(),t.eventsHandler()},renderProcessViewer:function(){return this.instanceBizagiGraphicQuery.renderProcessViewer()},eventsHandler:function(){return this.instanceBizagiGraphicQuery.eventsHandler()}});
//# sourceMappingURL=../../../../Maps/desktop/processviewer.desktop.production.js.map
