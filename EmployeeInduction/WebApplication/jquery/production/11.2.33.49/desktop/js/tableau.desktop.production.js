!function(e){var t=/_|-/,n=/::/,a=/([A-Z]+)([A-Z][a-z])/g,r=/([a-z\d])([A-Z])/g,o=/([a-z\d])([A-Z])/g,s=/\{([^\}]+)\}/g,l=/\./,u=function(e,t,i){return e[t]||i&&(e[t]={})},c=function(e){var t=typeof e;return t&&("function"==t||"object"==t)},d=function(t,i,n){var a,r,o,s=t?t.split(l):[],d=s.length,g=e.isArray(i)?i:[i||window],p=0;if(0==d)return g[0];for(;a=g[p++];){for(o=0;o<d-1&&c(a);o++)a=u(a,s[o],n);if(c(a)&&void 0!==(r=u(a,s[o],n)))return!1===n&&delete a[s[o]],r}},g=e.String=e.extend(e.String||{},{getObject:d,capitalize:function(e,t){return e.charAt(0).toUpperCase()+e.substr(1)},camelize:function(e){return(e=g.classize(e)).charAt(0).toLowerCase()+e.substr(1)},classize:function(e,i){for(var n=e.split(t),a=0;a<n.length;a++)n[a]=g.capitalize(n[a]);return n.join(i||"")},niceName:function(e){g.classize(parts[i]," ")},underscore:function(e){return e.replace(n,"/").replace(a,"$1_$2").replace(r,"$1_$2").replace(o,"_").toLowerCase()},sub:function(e,t,i){var n=[];return n.push(e.replace(s,function(e,a){var r=d(a,t,"boolean"==typeof i?!i:i),o=typeof r;return"object"!==o&&"function"!==o||null===o?""+r:(n.push(r),"")})),n.length<=1?n[0]:n}})}(jQuery),function(e){var t=!1,i=e.makeArray,n=e.isFunction,a=e.isArray,r=e.extend,o=function(e,t){return e.concat(i(t))},s=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,l=function(e,t,i){for(var a in i=i||e,e)i[a]=n(e[a])&&n(t[a])&&s.test(e[a])?function(e,i){return function(){var n,a=this._super;return this._super=t[e],n=i.apply(this,arguments),this._super=a,n}}(a,e[a]):e[a]},u=e.Class=function(){arguments.length&&u.extend.apply(u,arguments)};r(u,{callback:function(e){var t,n=i(arguments);return e=n.shift(),a(e)||(e=[e]),t=this,function(){for(var i,r,s=o(n,arguments),l=e.length,u=0;u<l;u++)(r=e[u])&&((i="string"==typeof r)&&t._set_called&&(t.called=r),s=(i?t[r]:r).apply(t,s||[]),u<l-1&&(s=!a(s)||s._use_call?[s]:s));return s}},getObject:e.String.getObject,newInstance:function(){var e,t=this.rawInstance();return t.setup&&(e=t.setup.apply(t,arguments)),t.init&&t.init.apply(t,a(e)?e:arguments),t},setup:function(e,t){return this.defaults=r(!0,{},e.defaults,this.defaults),arguments},rawInstance:function(){t=!0;var e=new this;return t=!1,e},extend:function(e,i,n){"string"!=typeof e&&(n=i,i=e,e=null),n||(n=i,i=null),n=n||{};var a,s,c=this.prototype;function d(){if(!t)return this.constructor!==d&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}for(a in t=!0,s=new this,t=!1,l(n,c,s),this)this.hasOwnProperty(a)&&(d[a]=this[a]);if(l(i,this,d),e){var g=e.split(/\./),p=g.pop(),h=u.getObject(g.join("."),window,!0),f=h;h[p]=d}r(d,{prototype:s,namespace:f,shortName:p,constructor:d,fullName:e}),d.prototype.Class=d.prototype.constructor=d;var b=d.setup.apply(d,o([this],arguments));return d.init&&d.init.apply(d,b||[]),d}}),u.prototype.callback=u.callback}(jQuery),function(e,t){var i,n=e.fn.domManip,a="_tmplitem",r=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,o={},s={},l={key:0,data:{}},u=0,c=0,d=[];function g(t,i,n,a){var r={data:a||(i?i.data:{}),_wrap:i?i._wrap:null,tmpl:null,parent:i||null,nodes:[],calls:_,nest:w,wrap:E,html:x,update:C};return t&&e.extend(r,t,{nodes:[],parent:i}),n&&(r.tmpl=n,r._ctnt=r._ctnt||r.tmpl(e,r),r.key=++u,(d.length?s:o)[u]=r),r}e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(a){var r,s,l,u,d=[],g=e(a),p=1===this.length&&this[0].parentNode;if(i=o||{},p&&11===p.nodeType&&1===p.childNodes.length&&1===g.length)g[n](this[0]),d=this;else{for(s=0,l=g.length;s<l;s++)c=s,r=(s>0?this.clone(!0):this).get(),e.fn[n].apply(e(g[s]),r),d=d.concat(r);c=0,d=this.pushStack(d,t,g.selector)}return u=i,i=null,e.tmpl.complete(u),d}}),e.fn.extend({tmpl:function(t,i,n){return e.tmpl(this[0],t,i,n)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,a,r,s){if(t[0]&&t[0].nodeType){for(var l,u=e.makeArray(arguments),d=t.length,g=0;g<d&&!(l=e.data(t[g++],"tmplItem")););d>1&&(u[0]=[e.makeArray(t)]),l&&c&&(u[2]=function(t){e.tmpl.afterManip(this,t,r)}),n.apply(this,u)}else n.apply(this,arguments);return c=0,i||e.tmpl.complete(o),this}}),e.extend({fasttmpl:function(t,i,n,a){n=n||{},$.extend(n,{fast:!0}),bizagi.chrono.start("fasttmpl");var r=e.tmpl(t,i,n,a);return bizagi.chrono.stop("fasttmpl"),r},tmpl:function(t,i,n,a){n&&n.nestedExecution||(p=[]);var r,u,c=!a,d=n&&n.fast;if(c)a=l,t=e.template[t]||e.template(null,t),s={};else if(!t)return t=a.tmpl,o[a.key]=a,a.nodes=[],a.wrapped&&v(a,a.wrapped),u=f(a,null,a.tmpl(e,a),d),n&&n.nestedExecution||h(),d?u:e(u);return t?("function"==typeof i&&(i=i.call(a||{})),n&&n.wrapped&&v(n,n.wrapped),r=e.isArray(i)?e.map(i,function(e){return e?g(n,a,t,e):null}):[g(n,a,t,i)],c?(u=f(a,null,r,d),n&&n.nestedExecution||h(),d?u:e(u)):(n&&n.nestedExecution||h(),r)):[]},tmplItem:function(t){var i;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(i=e.data(t,"tmplItem"))&&(t=t.parentNode););return i||l},template:function(t,i){return i?("string"==typeof i?i=m(i):i instanceof e&&(i=i[0]||{}),i.nodeType&&(i=e.data(i,"tmpl")||e.data(i,"tmpl",m(i.innerHTML))),"string"==typeof t?e.template[t]=i:i):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,r.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(e){o={}},afterManip:function(t,i,n){var a=11===i.nodeType?e.makeArray(i.childNodes):1===i.nodeType?[i]:[];n.call(t,i),z(a),c++}});var p=[];function h(){if(p)for(var e=0;e<p.length;e++){$(p[e]).removeData("tmplItem")}p=null}function f(t,i,n,r){var o,s;return s=r?n?e.map(n,function(e){return"string"==typeof e?e:f(e,t,e._ctnt,!0)}):t:n?e.map(n,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+a+'="'+t.key+'" $2'):e:f(e,t,e._ctnt)}):t,i?s:(s=s.join(""),r?s:(s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,i,n,a){z(o=e(n).get()),i&&(o=b(i).concat(o)),a&&(o=o.concat(b(a)))}),o||b(s)))}function b(t){var i=document.createElement("div");return i.innerHTML=t,e.makeArray(i.childNodes)}function m(t){var i="var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,i,n,a,r,o,s){var l,u,c,d=e.tmpl.tag[n];if(!d)throw"Template command not found: "+n;return l=d._default||[],o&&!/\w$/.test(r)&&(r+=o,o=""),r?(r=y(r),s=s?","+y(s)+")":o?")":"",u=o?r.indexOf(".")>-1?r+o:"("+r+").call($item"+s:r,c=o?u:"(typeof("+r+")==='function'?("+r+").call($item):("+r+"))"):c=u=l.$1||"null",a=y(a),"');"+d[i?"close":"open"].split("$notnull_1").join(r?"typeof("+r+")!=='undefined' && ("+r+")!=null":"true").split("$1a").join(c).split("$1").join(u).split("$2").join(a?a.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(e,t,i,n){return(n=n?","+n+")":i?")":"")?"("+t+").call($item"+n:e}):l.$2||"")+"_.push('"})+"');}return _;";return new Function("jQuery","$item",i)}function v(t,i){t._wrap=f(t,!0,e.isArray(i)?i:[r.test(i)?i:e(i).html()]).join("")}function y(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function z(t){var i,n,r,l,d,p="_"+c,h={};for(r=0,l=t.length;r<l;r++)if(1===(i=t[r]).nodeType){for(d=(n=i.getElementsByTagName("*")).length-1;d>=0;d--)f(n[d]);f(i)}function f(t){var i,n,r,l,d=t;if(l=t.getAttribute(a)){for(;d.parentNode&&1===(d=d.parentNode).nodeType&&!(i=d.getAttribute(a)););i!==l&&(d=d.parentNode?11===d.nodeType?0:d.getAttribute(a)||0:0,(r=o[l])||((r=g(r=s[l],o[d]||s[d],null,!0)).key=++u,o[u]=r),c&&f(l)),t.removeAttribute(a)}else c&&(r=e.data(t,"tmplItem"))&&(f(r.key),o[r.key]=r,d=(d=e.data(t.parentNode,"tmplItem"))?d.key:0);if(r){for(n=r;n&&n.key!=d;)n.nodes.push(t),n=n.parent;delete r._ctnt,delete r._wrap,e.data(t,"tmplItem",r)}function f(e){r=h[e+=p]=h[e]||g(r,o[r.parent.key+p]||r.parent,null,!0)}}}function _(e,t,i,n){if(!e)return d.pop();d.push({_:e,tmpl:t,item:this,data:i,options:n})}function w(t,i,n){return n||(n={}),n.nestedExecution=!0,e.tmpl(e.template(t),i,n,this)}function E(t,i){var n=t.options||{};return n.wrapped=i,e.tmpl(e.template(t.tmpl),t.data,n,t.item)}function x(t,i){var n=this._wrap;return e.map(e(e.isArray(n)?n.join(""):n).filter(t||"*"),function(e){return i?e.innerText||e.textContent:e.outerHTML||(t=e,(n=document.createElement("div")).appendChild(t.cloneNode(!0)),n.innerHTML);var t,n})}function C(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}}(jQuery),$.Class.extend("bizagi.services.service",{},{init:function(){},getServerResourceDictionary:function(){var e="";"undefined"!=typeof bizagiConfig&&bizagiConfig.proxyPrefix?e=bizagiConfig.proxyPrefix:"undefined"!=typeof BIZAGI_PROXY_PREFIX&&(e=BIZAGI_PROXY_PREFIX);var t="undefined"==typeof BIZAGI_LANGUAGE?bizagi.language:BIZAGI_LANGUAGE;return $.ajax({url:e+"Rest/Multilanguage/Client?cultureName="+t+"&version="+bizagi.loader.version,rpcEnabled:!1,cache:!0,dataType:"json",async:!0})},getResourceDictionary:function(e){return $.ajax({url:e,rpcEnabled:!1,dataType:"json",async:!0})}}),$.Class.extend("bizagi.templates.services.service",{customTemplateFile:bizagi.loader.getResource("tmpl","bizagi.overrides."+bizagi.detectDevice()+".custom.templates"),cachedTemplates:{},customTemplates:{}},{init:function(e){this.localization=e,this.cssRegex=/{{css "(.+)"}}/g,this.loadingFileDeferred={}},loadCustomTemplates:function(){var e=this,t=new $.Deferred;return $.when(this.getTemplateFile(this.Class.customTemplateFile)).done(function(i){var n=$("<div />").html(i),a=$("script",n);$.each(a,function(t,i){i=$(i),e.Class.customTemplates[i.attr("id")]=i.html()}),t.resolve()}),t.promise()},getTemplate:function(e){var t=!1;if(e=(e=e.replace(/([^#]*#)([^#]*#)([^#]*)/g,"$1$3")).replace(/([a-zA-Z_\/.-=]*)#([a-zA-Z_\/.-]*)\?(build=[a-zA-Z0-9.-]*)/g,"$1?$3#$2"),bizagi.enableCustomizations){var i=this.getHash(e);this.Class.customTemplates[i]&&(t=!0)}return t||"release"!==bizagi.loader.environment?this.internalGetTemplate(e).pipe(function(t){return $.template("#"+e,t)}):this.getTemplateForRelease(e).pipe(function(t){return $.template("#"+e,t)})},getTemplateWidget:function(e){var t=!1;if(e=(e=e.replace(/([^#]*#)([^#]*#)([^#]*)/g,"$1$3")).replace(/([a-zA-Z_\/.-=]*)#([a-zA-Z_\/.-]*)\?(build=[a-zA-Z0-9.-]*)/g,"$1?$3#$2"),bizagi.enableCustomizations){var i=this.getHash(e);this.Class.customTemplates[i]&&(t=!0)}return t||"release"!==bizagi.loader.environment?this.internalGetTemplate(e).pipe(function(t){return $.templates("#"+e,t)}):this.getTemplateForRelease(e).pipe(function(t){return $.templates("#"+e,t)})},getTemplateWebpart:function(e){return e=(e=e.replace(/([^#]*#)([^#]*#)([^#]*)/g,"$1$3")).replace(/([a-zA-Z_\/.-=]*)#([a-zA-Z_\/.-]*)\?(build=[a-zA-Z0-9.-]*)/g,"$1?$3#$2"),this.internalGetTemplate(e).pipe(function(t){return $.template("#"+e,t)})},getTemplateForRelease:function(e){var t,i,n=this,a=$.Deferred();return n.containsHash(e)?(t=n.getUrlWithoutHashes(e),i=n.getHash(e)):(t=e,i=""),n.Class.cachedTemplates[t]?a.resolve(n.processAndReturnTemplate(t,i)):$.when(n.loadTemplateFileForRelease(t)).done(function(){a.resolve(n.processAndReturnTemplate(t,i))}),a.promise()},loadTemplateFileForRelease:function(e){var t=this,i=$.Deferred();return t.Class.cachedTemplates[e]?t.Class.cachedTemplates[e]:t.loadingFileDeferred[e]?($.when(t.loadingFileDeferred[e]).done(function(){i.resolve(t.Class.cachedTemplates[e])}),i.promise()):(t.loadingFileDeferred[e]=$.Deferred(),$.when($.ajax({url:e,dataType:"text"}),t.localization.ready()).done(function(n){var a,r,o;for(a in n||i.reject(""),"string"!=typeof n&&(n=JSON.parse(n[0])),t.Class.cachedTemplates[e]=n,n)n.hasOwnProperty(a)&&(r=n[a],o=(o=t.localization.translate(r)).replace(t.cssRegex,""),a.indexOf("jsrender")>=0?(delete t.Class.cachedTemplates[e][a],a=a.substring(0,a.indexOf("jsrender")-1),t.Class.cachedTemplates[e][a]=r,$.templates("#"+a,o)):$.template("#"+a,o),t.Class.cachedTemplates[e][a]=t.Class.cachedTemplates[a]=o);t.loadingFileDeferred[e].resolve(),i.resolve(n)}),i.promise())},processAndReturnTemplate:function(e,t){var i=this.Class.cachedTemplates[e][t];if(!i)throw"template "+i+"doesn't exist";return i},internalGetTemplate:function(e){var t=this,i=new $.Deferred,n=this.Class.cachedTemplates[e];if(n)i.resolve(n);else if(t.containsHash(e)){var a=t.getUrlWithoutHashes(e),r=t.getHash(e);if(t.Class.customTemplates[r])return i.resolve(t.Class.customTemplates[r]),i.promise();$.when(t.getTemplatePart(a,r)).done(function(n){t.Class.cachedTemplates[e]=n,i.resolve(n)})}else $.when(t.getTemplateFile(e)).done(function(e){i.resolve(e)});return i.promise()},getTemplatePart:function(e,t){var i=this,n=new $.Deferred;return $.when(i.loadingTemplatePartExecution).done(function(){i.loadingTemplatePart=!0,i.loadingTemplatePartExecution=new $.Deferred,$.when(i.getTemplateFile(e)).done(function(a){var r=$("<div />").html(a),o=$("#"+t,r);bizagi.assert(o.length>0,"No template part ("+t+") found in content for:"+e),a=o.html(),i.loadingTemplatePartExecution.resolve(),i.loadingTemplatePart=!0,n.resolve(a)})}),n.promise()},getTemplateFile:function(e){var t=this,i=this.Class.cachedTemplates[e];return i||$.when($.ajax({url:e,dataType:"text"}),t.localization.ready()).pipe(function(i){if(!i)return"";if("string"!=typeof i&&(i=i[0]),void 0===i)return"";var n=t.localization.translate(i),a=n.match(t.cssRegex);a&&$.each(a,function(e,i){var n=i.replace(t.cssRegex,"$1");bizagi.loader.loadFile({src:n,type:"css",environment:"debug"})}),n=n.replace(t.cssRegex,"");var r=$("<div />").html(n);return $("script",r).each(function(e,t){var i=$(t).attr("id"),n=$(t).attr("type");if($.templates&&n&&n.indexOf("jsrender")>=0)$.templates("#"+i,$(t).html());else try{$.template("#"+i,$(t).html())}catch(e){console.log(e,r)}}),t.Class.cachedTemplates[e]="string"==typeof n?n:n[0].outerHTML,n})},containsHash:function(e){return-1!=e.indexOf("#")},getHash:function(e){return e.substring(e.indexOf("#")+1,e.length)},getUrlWithoutHashes:function(e){return e.substring(0,e.indexOf("#"))}});var originalEmptyMethod=jQuery.fn.empty;jQuery.fn.empty=function(){var e=originalEmptyMethod.apply(this,arguments),t=$(this);return t.hasClass("ui-bizagi-component-loading")&&t.loadingMessage(),e},jQuery.fn.fastEmpty=function(){this.children().remove();var e=$(this);e.hasClass("ui-bizagi-component-loading")&&e.loadingMessage()};var originalPrependMethod=jQuery.fn.prepend;jQuery.fn.prepend=function(){var e=$(this);if(0==e.length)return jQuery.fn;e.data("loading")&&(originalEmptyMethod.apply(this),e.data("loading",!1));var t=originalPrependMethod.apply(this,arguments);return"body"!=e[0].tagName.toLowerCase()&&e.find(".ui-bizagi-component-adjustable").length>0&&$(document).triggerHandler("resizeLayout"),e.removeData("loading"),t};var originalAppendMethod=jQuery.fn.append;jQuery.fn.append=function(){var element=$(this);if(0==element.length)return jQuery.fn;eval(element.attr("data-loading"))&&(originalEmptyMethod.apply(this),element.data("loading",!1));var result=originalAppendMethod.apply(this,arguments),tagName=element[0].tagName||"";return"body"!=tagName.toLowerCase()&&element.find(".ui-bizagi-component-adjustable").length>0&&$(document).triggerHandler("resizeLayout"),element.removeData("loading"),result};var originalTmplMethod=jQuery.tmpl;for(key in jQuery.tmpl=function(){var e=originalTmplMethod.apply(this,arguments);return arguments[2]&&arguments[2].fast?e:($(".ui-bizagi-component",e).each(function(e,t){for(var i=$(t).attr("component"),n=$(t).parent();0==n[0].tagName.length;)n=n.parent();n.attr("data-bizagi-component",i),$(t).detach()}),$("[data-loading=true]",e).length>0&&$("[data-loading=true]",e).loadingMessage(),$("[data-loading=true]",e).addClass("ui-bizagi-component-loading"),e.jquery&&$.each(e,function(e,t){t.outerHTML&&$(t).is("[data-loading=true]")&&($(t).loadingMessage(),$(t).addClass("ui-bizagi-component-loading"))}),$("[data-adjustable=true]",e).addClass("ui-bizagi-component-adjustable"),e.jquery&&$.each(e,function(e,t){t.outerHTML&&$(t).is("[data-adjustable=true]")&&$(t).addClass("ui-bizagi-component-adjustable")}),e)},originalTmplMethod)jQuery.tmpl[key]=originalTmplMethod[key];$.extend(jQuery.tmpl.tag,{component:{open:'_ = _.concat(\'<div class="ui-bizagi-component" component="$1"></div>\');'},loading:{open:"_ = _.concat('data-loading=\"true\"');"},adjustable:{open:"_ = _.concat('data-adjustable=\"true\"');"},resource:{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode(bizagi.localization.getResource($1a)));}"},log:{open:"console.log($1, $2);"},children:{open:"_ = _.concat('{{children}}');"},control:{open:"_ = _.concat('{{control}}');"},files:{open:"_ = _.concat('{{files}}');"},result:{open:"_ = _.concat('{{result}}');"},element:{open:"_ = _.concat('{{element $1}}');"},for:{_default:{$2:"var i=1;i<=1;i++"},open:"for ($2){",close:"};"},actions:{open:"_ = _.concat('{{actions}}');"}}),bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.chrono=void 0!==bizagi.chrono?bizagi.chrono:{},bizagi.enableTrace=!1,bizagi.enableDebug=!1,bizagi.enableChrono=!1,bizagi.log=function(e,t,i){var n=window.document;if(bizagi.enableTrace){var a,r;if(void 0===bizagi.logContainer&&(bizagi.logContainer=$(".ui-bizagi-log-container",n),0==bizagi.logContainer.length&&(bizagi.logContainer=(a=$("<div />").appendTo($("body",n)),r=void 0!==bizagi.detectDevice?bizagi.detectDevice():bizagi.util.detectDevice(),a.bizagi_notifications({headerAdditionalClass:"ui-bizagi-log-container-header",containerAdditionalClass:"ui-bizagi-notifications-container ui-bizagi-log-container",itemIcon:"ui-icon-info",title:"Debugging Log",location:"top",device:r}),a.bind("itemClick",function(e,t){var i=$("<div />").appendTo($("body"),n),a="desktop"==r?$("<textarea />"):$("<textarea readonly=true />");"string"==typeof t.data?(a.height("90%"),a.width("100%"),a.text(t.data),i.append(a)):(a.height("90%"),a.width("100%"),a.text(JSON.encode(t.data)),i.append(a)),i.dialog({width:640,height:480,modal:!0,title:"Object Hierarchy",close:function(){i.dialog("destroy"),i.detach()}})}),a))),t)try{t=JSON.parse(JSON.encode(t))}catch(e){t={}}bizagi.logContainer.bizagi_notifications("addNotification",e,t,function(e){if("info"==(e=e||"ui-icon-bullet"))return"ui-icon-info";if("warning"==e)return"ui-icon-alert";if("error"==e)return"ui-icon-circle-close";if("timer"==e)return"ui-icon-clock";if("success"==e)return"ui-icon-check";return e}(i))}},bizagi.assert=function(e,t,i){e||bizagi.log(t,i,"error")},bizagi.logError=function(e,t){bizagi.log(e,t,"error")},bizagi.debug=function(e,t){bizagi.enableDebug&&bizagi.log(e,t,"info")},bizagi.getLogInstance=function(){return bizagi.logContainer},bizagi.chrono.init=function(e){e?bizagi.chronos[e]={millis:0,timestamp:0}:bizagi.chronos={}},bizagi.chrono.start=function(e,t){bizagi.enableChrono&&(t=void 0!==t&&t,bizagi.chronos[e]=bizagi.chronos[e]||{millis:0,timestamp:0},bizagi.chronos[e].running||(bizagi.chronos[e].timestamp=(new Date).getTime(),bizagi.chronos[e].profiling=bizagi.enableProfiler&&t,bizagi.chronos[e].running=!0,bizagi.enableProfiler&&t&&(console.time(e),console.timeStamp(e),console.profile(e))))},bizagi.chrono.initAndStart=function(e){bizagi.chrono.init(e),bizagi.chrono.start(e)},bizagi.chrono.stop=function(e){if(bizagi.enableChrono&&(bizagi.chronos[e]=bizagi.chronos[e]||{millis:0,timestamp:0},bizagi.chronos[e].running)){var t=(new Date).getTime()-bizagi.chronos[e].timestamp;bizagi.chronos[e].millis=bizagi.chronos[e].millis+t,bizagi.chronos[e].running=!1,bizagi.chronos[e].profiling&&(console.timeEnd(e),console.timeStamp(e+"end"),console.profileEnd(e))}},bizagi.chrono.stopAndLog=function(e){bizagi.chronos[e]&&bizagi.chronos[e].running&&bizagi.chrono.stop(e),bizagi.chrono.log(e)},bizagi.chrono.log=function(e){bizagi.chronos[e]&&bizagi.log("Timer "+e+": "+bizagi.chronos[e].millis+"ms",null,"timer")},bizagi.chrono.logTimers=function(){if(bizagi.enableChrono)for(key in bizagi.chronos)bizagi.chrono.log(key)},bizagi.chrono.init(),bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.util=void 0!==bizagi.util?bizagi.util:{},$.Class.extend("bizagi.l10n",{templateRegex:/%{([\w-{}$.]+)}/,templateSubExpressionRegex:/[$]{([\w.]+)}/g},{init:function(e){this.resourceLocationDefinition=e,this.service=new bizagi.services.service,this.dictionaries={},this.dictionary={},this.readyDeferred=null,this.enableCustomizations=void 0!==bizagi.enableCustomizations?bizagi.enableCustomizations:"undefined"==typeof BIZAGI_ENABLE_CUSTOMIZATIONS||BIZAGI_ENABLE_CUSTOMIZATIONS,this.defaultDatetimeInfo="undefined"!=typeof BIZAGI_DEFAULT_DATETIME_INFO&&BIZAGI_DEFAULT_DATETIME_INFO},setLanguage:function(e){var t=this;t.language=e,t.readyDeferred=new $.Deferred,$.when(t._getDictionary(e)).done(function(e){if(t.dictionary=e,t.defaultDatetimeInfo&&(t.defaultDatetimeInfo.shortDateFormat&&t.overrideSpecificResource("dateFormat",t.defaultDatetimeInfo.shortDateFormat),t.defaultDatetimeInfo.timeFormat&&t.overrideSpecificResource("timeFormat",t.defaultDatetimeInfo.timeFormat)),t.enableCustomizations){if(t.resourceLocationDefinition.custom){var i="undefined"!=typeof BIZAGI_LOCAL_RESOURCES&&BIZAGI_LOCAL_RESOURCES?t.service.getResourceDictionary:t.service.getServerResourceDictionary;i===t.service.getServerResourceDictionary&&BIZAGI_LANGUAGE===t.language?t.readyDeferred.resolve():i(t.resourceLocationDefinition.custom).done(function(e){t.enableCustomizations&&t.overrideResources(e),t.readyDeferred.resolve()})}}else t.readyDeferred.resolve()})},loadLanguageExtension:function(e){var t=this;t.language=e,t.readyDeferred=new $.Deferred;var i=t.getLanguageFromCulture(e);return void 0===t.resourceLocationDefinition[i.toLowerCase()]&&(i="default"),t.service.getResourceDictionary(t.resourceLocationDefinition[i.toLowerCase()]).done(function(i){t.dictionaries[e.toLowerCase()]=t.dictionaries[e.toLowerCase()]||{},$.extend(t.dictionaries[e.toLowerCase()],i),t.readyDeferred.resolve()}).fail(function(t,i,n){alert("Can't load localization file for language: "+e+", "+i+" - "+n)}),t.readyDeferred.promise()},getLanguageFromCulture:function(e){return-1!==e.indexOf("-")?e.split("-")[0]:e},resolvei18n:function(e){if(!e)return"";if("string"==typeof e)return e;if(this.language&&"default"!=this.language){var t=e.i18n.default.languages[this.language];if(t)return t}return e.i18n.default},getResource:function(e,t){return null==this.dictionary[e]?void 0!==t?t:e:this.dictionary[e]},setResource:function(e,t){e&&""!==e&&(this.dictionary[e]=t)},getMessageFromLocalization:function(e,t,i,n){var a="";"error"==t?n?a=e:(e=e.toLowerCase(),(a=bizagi.localization.getResource("workportal-general-error-"+e))==="workportal-general-error-"+e&&"workportal-general-error-generic"===bizagi.localization.getResource("workportal-general-error-generic")&&(a="The request could not be completed.")):a=bizagi.localization.getResource(e);if(i)for(var r=0;r<i.length;r++)a=a.replace("{"+r+"}",i[r]);return a},translate:function(e){var t;do{if(t=this.Class.templateRegex.exec(e)){var i=t[1];if(-1==i.indexOf("$"))e=e.replaceAll(t[0],this.getResource(i));else{var n=this.Class.templateSubExpressionRegex.exec(i);if(!n){n=/[$]{([\w.]+)}/g.exec(i)}e=e.replaceAll(t[0],"{{resource "+n[1]+"}}")}}}while(null!=t);return e},overrideResources:function(e){var t=e[this._getUserLanguage(this.language)];for(var i in t)this.dictionary[i]=t[i]},overrideSpecificResource:function(e,t){e=e||"nodefined",t=t||"",this.dictionary[e]=t},_getDictionary:function(e){var t=this,i=new $.Deferred;if(e=e.toLowerCase(),null!=t.dictionaries[e])return t.dictionaries[e];var n=t._getUserLanguage(e);return("undefined"!=typeof BIZAGI_LOCAL_RESOURCES&&BIZAGI_LOCAL_RESOURCES?t.service.getResourceDictionary:t.service.getServerResourceDictionary)(t.resourceLocationDefinition[n]).done(function(n){t.dictionaries[e]=n,i.resolve(n)}).fail(function(t,n,a){if(void 0===t.responseJSON&&0===t.status&&"error"===t.statusText&&""===a)console.log("Can't load localization file for language: "+e+", "+n+" - "+a);else if(503===t.status){i.resolve({})}else alert("Can't load localization file for language: "+e+", "+n+" - "+a)}),i.promise()},_getUserLanguage:function(e){var t=e.toLowerCase();if(null==this.resourceLocationDefinition[t]&&t.length>0)for(var i=t.split("-"),n=i.length-1;n>=0;n--)if(null!=this.resourceLocationDefinition[i[n]]){t=i[n];break}return 0!=t.length&&null!=this.resourceLocationDefinition[t]||(bizagi.log("No resource definition location has been given for language :"+e+", loading default language"),t="default"),t},ready:function(){return this.readyDeferred.promise()}}),bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.util=void 0!==bizagi.util?bizagi.util:{},bizagi.context=void 0!==bizagi.context?bizagi.context:{},bizagi.util.smartphone=void 0!==bizagi.util.smartphone?bizagi.util.smartphone:{},bizagi.util.tablet=void 0!==bizagi.util.tablet?bizagi.util.tablet:{};var DEVICES={};function printf(e){var t,i=Array.prototype.slice.call(arguments,1);return e.replace(/(%[disv])/g,function(e,n){if(void 0!==(t=i.shift()))switch(n.charCodeAt(1)){case 100:return+t;case 105:return Math.round(+t);case 115:return String(t);case 118:return t}return n})}function bizagiQueue(){var e=this,t=[];e.add=function(e){t.push({callbacks:[e]})},e.addParallel=function(i){if(0==t.length)return e.add(i);t[t.length-1].callbacks.push(i)},e.execute=function(){for(var e=new $.Deferred,i=e.promise(),n=t.length,a=0;a<n;a++)i=i.pipe(function(){var e=t.shift();return $.when.apply($,$.map(e.callbacks,function(e){if("function"==typeof e){var t=$.Deferred();return $.when(e()).done(function(){t.resolve()}).fail(function(){t.resolve()}),t.promise()}return e}))});return e.resolve(),i=i.done(function(){t=[]})}}DEVICES[DEVICES.desktop=0]="desktop",DEVICES[DEVICES.smartphone=1]="smartphone",DEVICES[DEVICES.tablet=2]="tablet",bizagi.deviceEnum=DEVICES,function(e){e.fn.callInside=function(t,i){if("iframe"!=e(this)[0].tagName.toLowerCase())return null;if(null==e(this)[0].contentWindow)return null;try{e(this)[0].contentWindow.args=i}catch(e){return null}return e.browser.msie?e(this)[0].contentWindow.execScript("args = (this.window.args)?this.window.args:{}; insideFunction = "+t.toString()+"; insideFunction(args)"):e.browser.webkit||e.browser.mozilla?e(this)[0].contentWindow.eval("args = window.args;insideFunction = "+t.toString()+"; insideFunction(args)"):void 0}}(jQuery),function(e){e.fn.callInsidePopup=function(t,i){var n=this;e(document).ready(function(){try{e(n)[0].args=i}catch(e){return null}return e.browser.msie?e(n)[0].execScript("args = (this.window.args)?this.window.args:{}; insideFunction = "+t.toString()+"; insideFunction(args)"):e.browser.webkit||e.browser.mozilla?e(n)[0].eval("args = window.args;insideFunction = "+t.toString()+"; insideFunction(args)"):void 0})}}(jQuery),jQuery,!!CSSStyleDeclaration.prototype.getPropertyValue||(CSSStyleDeclaration.prototype.getPropertyValue=function(e){return this.getAttribute(e)},CSSStyleDeclaration.prototype.setProperty=function(e,t,i){if(this.setAttribute(e,t),""!=(i=void 0!==i?i:"")){var n=new RegExp(RegExp.escape(e)+"\\s*:\\s*"+RegExp.escape(t)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(n,e+": "+t+" !"+i+";")}},CSSStyleDeclaration.prototype.removeProperty=function(e){return this.removeAttribute(e)},CSSStyleDeclaration.prototype.getPropertyPriority=function(e){return new RegExp(RegExp.escape(e)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi").test(this.cssText)?"important":""}),RegExp.escape=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},jQuery.fn.style=function(e,t,i){if(void 0!==this.get(0)){var n=this.get(0).style;if(void 0===e)return n;if(void 0===t)return n.getPropertyValue(e);i=void 0!==i?i:"",n.setProperty?n.setProperty(e,t,i):n.setAttribute(e,t,i)}},jQuery,jQuery.nl2br=function(e){return e.replace(/(\r\n|\n\r|\r|\n|\\r\\n|\\n\\r|\\r|\\n)/g,"<br>")},jQuery,jQuery.br2nl=function(e){return e.replace(/\r\n|\r|\n/g,"\r")},function(e){jQuery.controlValueIsChanged=function(t){var i=t,n=i.properties,a=i.getValue(),r=n.originalValue,o=!0;return!!e.forceCollectData||("grid"!=t.properties.type||"pending"!=t.ready().state())&&(["combo","queryCombo","list","queryList","radio","queryRadio","queryState"].includes(n.type)||/^cascadingcombo$/i.test(n.type)?(a&&void 0!==a.length&&(a=a[0]),r&&void 0!==r.length&&(r=r[0]),a=a&&a.id?a.id:a,o=(r=r&&r.id?r.id:r)!=a):o="boolean"==n.type||"queryBoolean"==n.type||"queryCheck"==n.type?bizagi.util.parseBoolean(r)!=bizagi.util.parseBoolean(a):"searchNumber"==n.type?!!a:"date"===n.type?new Date(r).getTime()!==new Date(a).getTime():r!==a,o)}}(jQuery),function(e){jQuery.getMaxZindex=function(){var t=e("*"),i=1;return e.each(t,function(t,n){var a=parseInt(e(n).css("z-index"));a>i&&(i=a+1)}),i}}(jQuery),function(e){jQuery.equalizeHeights=function(t){var i=new Array;e(t).each(function(){e(this).css("min-height","0"),e(this).css("max-height","none"),e(this).css("height","auto"),i.push(e(this).outerHeight())});var n=Math.max.apply(Math,i);e(t).each(function(){e(this).css("height",n+"px")})}}(jQuery),bizagi.util.autoSave=function(){var e=$.Deferred();return"desktop"!==bizagi.util.detectDevice()?$(document).data("auto-save")?$(document).trigger("save-form",[e]):e.resolve():$._data($(document)[0],"events")["save-form"]&&$._data($(document)[0],"events")["save-form"].length>0?$(document).trigger("save-form",[e]):e.resolve(),e.promise()},bizagi.util.anonymizedUserInformation={id:"00000000-0000-0000-0000-000000000000",name:"",username:"",email:"",domain:"",picture:"",isAnonymized:!0},bizagi.util.datepickerResource=[],bizagi.util.datepickerResource.en={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.es={closeText:"Cerrar",prevText:"&#x3C;Ant",nextText:"Sig&#x3E;",currentText:"Hoy",monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],dayNamesShort:["dom","lun","mar","mié","jue","vie","sáb"],dayNamesMin:["D","L","M","X","J","V","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.ar={closeText:"إغلاق",prevText:"&#x3C;السابق",nextText:"التالي&#x3E;",currentText:"اليوم",monthNames:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesShort:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],dayNamesMin:["ح","ن","ث","ر","خ","ج","س"],weekHeader:"أسبوع",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.cs={closeText:"Zavřít",prevText:"&#x3C;Dříve",nextText:"Později&#x3E;",currentText:"Nyní",monthNames:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],monthNamesShort:["led","úno","bře","dub","kvě","čer","čvc","srp","zář","říj","lis","pro"],dayNames:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],dayNamesShort:["ne","po","út","st","čt","pá","so"],dayNamesMin:["ne","po","út","st","čt","pá","so"],weekHeader:"Týd",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.de={closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.fr={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.ja={closeText:"閉じる",prevText:"&#x3C;前",nextText:"次&#x3E;",currentText:"今日",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","火","水","木","金","土"],dayNamesMin:["日","月","火","水","木","金","土"],weekHeader:"週",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},bizagi.util.datepickerResource.nl={closeText:"Sluiten",prevText:"←",nextText:"→",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.pt={closeText:"Fechar",prevText:"Anterior",nextText:"Seguinte",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],weekHeader:"Sem",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.ru={closeText:"Закрыть",prevText:"&#x3C;Пред",nextText:"След&#x3E;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},bizagi.util.datepickerResource.zh={closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},bizagi.util.liveProcessesEvents=bizagi.util.liveProcessesEvents||{},bizagi.util.liveProcessesEvents.newLiveProcess=document.createEvent("Event"),bizagi.util.liveProcessesEvents.newLiveProcess.initEvent("new-live-process",!0,!0),bizagi.util.liveProcessesEvents.routeEvents=document.createEvent("Event"),bizagi.util.liveProcessesEvents.routeEvents.initEvent("parent-route-events",!0,!0),bizagi.util.liveProcessesEvents.routeEvents.route="/",bizagi.util.liveProcessesEvents.saveEvent=document.createEvent("Event"),bizagi.util.liveProcessesEvents.saveEvent.initEvent("save-live",!0,!0),bizagi.util.liveProcessesEvents.saveEvent.lastWidget="",bizagi.util.liveProcessesEvents.saveEvent.nextWidget="",bizagi.util.liveSave=function(e){bizagi.util.liveProcessesEvents.saveEvent.nextWidget=e;var t=$.Deferred(),i=0;try{i=$(document).find("iframe")[0].contentWindow.location.href.indexOf("quickprocess")}catch(e){i=-1}return(e!==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY||e===bizagi.util.liveProcessesEvents.saveEvent.lastWidget)&&$(document).find("iframe").length>0&&i>0?(bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise=t,document.dispatchEvent(bizagi.util.liveProcessesEvents.saveEvent)):t.resolve(),$.when(t).done(function(){bizagi.util.liveProcessesEvents.saveEvent.lastWidget=e}),t.promise()},bizagi.util.md5=function(e){var t=t||function(e,t){var i={},n=i.lib={},a=function(){},r=n.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var a=0;a<e;a++)t[n+a>>>2]|=(i[a>>>2]>>>24-a%4*8&255)<<24-(n+a)%4*8;else if(65535<i.length)for(a=0;a<e;a+=4)t[n+a>>>2]=i[a>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new o.init(i,t)}}),s=i.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(i,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(i,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,a=i.sigBytes,r=this.blockSize,s=a/(4*r);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*r,a=e.min(4*t,a),t){for(var l=0;l<t;l+=r)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=a}return new o.init(l,a)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=d.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new g.HMAC.init(e,i).finalize(t)}}});var g=i.algo={};return i}(Math);return function(e){function i(e,t,i,n,a,r,o){return((e=e+(t&i|~t&n)+a+o)<<r|e>>>32-r)+t}function n(e,t,i,n,a,r,o){return((e=e+(t&n|i&~n)+a+o)<<r|e>>>32-r)+t}function a(e,t,i,n,a,r,o){return((e=e+(t^i^n)+a+o)<<r|e>>>32-r)+t}function r(e,t,i,n,a,r,o){return((e=e+(i^(t|~n))+a+o)<<r|e>>>32-r)+t}for(var o=t,s=(u=o.lib).WordArray,l=u.Hasher,u=o.algo,c=[],d=0;64>d;d++)c[d]=4294967296*e.abs(e.sin(d+1))|0;u=u.MD5=l.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;16>o;o++){var s=e[d=t+o];e[d]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}o=this._hash.words;var l,u,d=e[t+0],g=(s=e[t+1],e[t+2]),p=e[t+3],h=e[t+4],f=e[t+5],b=e[t+6],m=e[t+7],v=e[t+8],y=e[t+9],z=e[t+10],_=e[t+11],w=e[t+12],E=e[t+13],x=e[t+14],C=e[t+15],S=o[0],A=r(A=r(A=r(A=r(A=a(A=a(A=a(A=a(A=n(A=n(A=n(A=n(A=i(A=i(A=i(A=i(A=o[1],u=i(u=o[2],l=i(l=o[3],S=i(S,A,u,l,d,7,c[0]),A,u,s,12,c[1]),S,A,g,17,c[2]),l,S,p,22,c[3]),u=i(u,l=i(l,S=i(S,A,u,l,h,7,c[4]),A,u,f,12,c[5]),S,A,b,17,c[6]),l,S,m,22,c[7]),u=i(u,l=i(l,S=i(S,A,u,l,v,7,c[8]),A,u,y,12,c[9]),S,A,z,17,c[10]),l,S,_,22,c[11]),u=i(u,l=i(l,S=i(S,A,u,l,w,7,c[12]),A,u,E,12,c[13]),S,A,x,17,c[14]),l,S,C,22,c[15]),u=n(u,l=n(l,S=n(S,A,u,l,s,5,c[16]),A,u,b,9,c[17]),S,A,_,14,c[18]),l,S,d,20,c[19]),u=n(u,l=n(l,S=n(S,A,u,l,f,5,c[20]),A,u,z,9,c[21]),S,A,C,14,c[22]),l,S,h,20,c[23]),u=n(u,l=n(l,S=n(S,A,u,l,y,5,c[24]),A,u,x,9,c[25]),S,A,p,14,c[26]),l,S,v,20,c[27]),u=n(u,l=n(l,S=n(S,A,u,l,E,5,c[28]),A,u,g,9,c[29]),S,A,m,14,c[30]),l,S,w,20,c[31]),u=a(u,l=a(l,S=a(S,A,u,l,f,4,c[32]),A,u,v,11,c[33]),S,A,_,16,c[34]),l,S,x,23,c[35]),u=a(u,l=a(l,S=a(S,A,u,l,s,4,c[36]),A,u,h,11,c[37]),S,A,m,16,c[38]),l,S,z,23,c[39]),u=a(u,l=a(l,S=a(S,A,u,l,E,4,c[40]),A,u,d,11,c[41]),S,A,p,16,c[42]),l,S,b,23,c[43]),u=a(u,l=a(l,S=a(S,A,u,l,y,4,c[44]),A,u,w,11,c[45]),S,A,C,16,c[46]),l,S,g,23,c[47]),u=r(u,l=r(l,S=r(S,A,u,l,d,6,c[48]),A,u,m,10,c[49]),S,A,x,15,c[50]),l,S,f,21,c[51]),u=r(u,l=r(l,S=r(S,A,u,l,w,6,c[52]),A,u,p,10,c[53]),S,A,z,15,c[54]),l,S,s,21,c[55]),u=r(u,l=r(l,S=r(S,A,u,l,v,6,c[56]),A,u,C,10,c[57]),S,A,b,15,c[58]),l,S,E,21,c[59]),u=r(u,l=r(l,S=r(S,A,u,l,h,6,c[60]),A,u,_,10,c[61]),S,A,g,15,c[62]),l,S,y,21,c[63]);o[0]=o[0]+S|0,o[1]=o[1]+A|0,o[2]=o[2]+u|0,o[3]=o[3]+l|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;i[a>>>5]|=128<<24-a%32;var r=e.floor(n/4294967296);for(i[15+(a+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),i[14+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),i=(t=this._hash).words,n=0;4>n;n++)a=i[n],i[n]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=l._createHelper(u),o.HmacMD5=l._createHmacHelper(u)}(Math),t.MD5(e).toString()},bizagi.util.multiReplace=function(e,t){for(var i in t=t||{}){var n=new RegExp(i,"g");e=e.replace(n,t[i])}return e},bizagi.util.replaceAll=function(e,t,i){return bizagi.replaceAll(e,t,i)},bizagi.util.replaceAllGlobalRegExp=function(e,t,i){var n=e,a=new RegExp(t,"g");return(n=n.replace(a,i)).toString()},String.prototype.replaceAll=function(e,t){return bizagi.util.replaceAll(this,e,t)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.startsWith=function(e){return this.slice(0,e.length)==e},String.prototype.getInitials=function(){var e="";if(0===this.length)e='<svg  class="bz-icon bz-icon-24 bz-icon-svg"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-user-deactivated"></use></svg>';else{try{for(var t=this.replace(/  +/g," ").split(" "),i=0;i<t.length&&2!=(e+=t[i][0]||"").length;i+=1);}catch(e){}e=e.toUpperCase()}return e},Math.sign=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1},bizagi.clone=function(e){return JSON.parse(JSON.encode(e))},bizagi.measureString=function(e,t){var i=$("<span/>").appendTo("body");i.text(e),t&&i.css("font-size",t);var n=i.width();return i.detach(),n},bizagi.util.trim=function(e){return void 0===e||null==e?e:e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},bizagi.util.isIE7=function(){return bizagi.util.isIE()&&7==document.documentMode},bizagi.util.isIE8=function(){return bizagi.util.isIE()&&8==document.documentMode},bizagi.util.isIE9=function(){return bizagi.util.isIE()&&9==document.documentMode},bizagi.util.isIE10=function(){return bizagi.util.isIE()&&10==document.documentMode},bizagi.util.isIE11=function(){return!!navigator.userAgent.match(/Trident\/7.0/)&&!navigator.userAgent.match(/MSIE/i)},bizagi.util.isIE11OrLower=function(){return bizagi.util.isIE11()||bizagi.util.isIE10()||bizagi.util.isIE9()||bizagi.util.isIE8()||bizagi.util.isIE7()},bizagi.util.isIE10OrLower=function(){return bizagi.util.isIE10()||bizagi.util.isIE9()||bizagi.util.isIE8()||bizagi.util.isIE7()},bizagi.util.isEdge=function(){return!!/Edge\/*./i.test(navigator.userAgent)},bizagi.util.isIE=function(){return navigator.appName.indexOf("Internet Explorer")>0||!!navigator.userAgent.match(/Trident/)},bizagi.util.getIEVersion=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE"),i=0;return t>0?i=parseInt(e.substring(t+5,e.indexOf(".",t))):(navigator.userAgent.match(/Trident/)||window.navigator.userAgent.indexOf("Edge")>-1)&&(i=11),i},bizagi.util.isChrome=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},bizagi.util.isFirefox=function(e){return/Firefox/.test(navigator.userAgent)&&(void 0===e||e<=(i=navigator.userAgent,n=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?{name:"IE",version:(t=/\brv[ :]+(\d+)/g.exec(i)||[])[1]||""}:"Chrome"===n[1]&&null!=(t=i.match(/\bOPR|Edge\/(\d+)/))?{name:"Opera",version:t[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=i.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),{name:n[0],version:n[1]})).version);var t,i,n},bizagi.util.getBrowser=function(){var e="undetected";return bizagi.util.isChrome()?e="chrome":bizagi.util.isFirefox()?e="firefox":bizagi.util.isEdge()?e="edge":bizagi.util.isIE11()?e="ie11":bizagi.util.isIE10()&&(e="ie10"),e},bizagi.util.emptyNavigatorInfo=function(){bizagi.navigator&&bizagi.navigator.info&&(bizagi.navigator.info={})},$(document).ready(function(){if($("html").addClass("browser-"+bizagi.util.getBrowser()),bizagi.language){var e=bizagi.language.split("-");e&&e.length>0&&$("html").addClass("language-"+e[0])}}),bizagi.util.setIphoneXOverrides=function(){bizagi.util.isNativePluginSupported()&&void 0!==bizagiapp.isIphoneX&&bizagiapp.isIphoneX(function(e){if("true"===e)$("head").append('<style type="text/css" id="iphoneXStyle"></style>'),$("#iphoneXStyle").text(".bz-menu-home .bz-menu-carousel .bz-menu-carousel-seat{padding:0 16px 16px}.bz-home-header .km-navbar{padding:35px 16px 5px}#menuHome .bz-home-header .km-navbar{padding:30px 3px 0}#menuHome .km-navbar .km-rightitem{font-size:19px;right:.4em;top:32px}#menuHome .km-navbar .km-leftitem{font-size:24px;left:0;top:25px}#taskFeed .km-navbar .km-rightitem{font-size:19px;top:25px;right:0}#taskFeed .km-navbar .km-leftitem{font-size:24px;top:20px;left:0}#homePortal #menuHome .km-view-title .km-buttongroup{margin-left:0;top:2px}.bz-render-header,.search-container{padding-top:25px}#activity-search,.search-container .bz-wp-mu-button-search{padding-top:40px}#content-newCase-drawer{padding-top:25px}#menuHome{background:#EBEDF1!important}.km-flat .km-content{background-color:#fff} .k-loading-mask{top:0!important}");else if(bizagi.util.isiOSDevice()){$("head").append('<style type="text/css" id="iphoneStyle"></style>');$("#iphoneStyle").text("#homePortal .bz-home-header > div{padding-top:.8em}")}})},bizagi.util.isString=function(e){return"[object String]"===Object.prototype.toString.apply(e)},bizagi.util.isObject=function(e){return"[object Object]"===Object.prototype.toString.apply(e)},bizagi.util.isArray=function(e){return Array.isArray(e)},bizagi.util.isNull=function(e){return"[object Null]"===Object.prototype.toString.apply(e)},bizagi.util.isBoolean=function(e){return"[object Boolean]"===Object.prototype.toString.apply(e)},bizagi.util.getInternetExplorerVersion=function(){return bizagi.util.isIE()?Number(document.documentMode):-1},bizagi.util.detectDevice=function(){return bizagi.detectDevice()},bizagi.util.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},bizagi.util.isGUID=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},bizagi.util.mustImplement=function(e){try{console.log("Not implemented exception: "+e)}catch(e){}},bizagi.util.encodeXpath=function(e){return bizagi.util.isEmpty(e)||void 0===e.replaceAll?"":e.replaceAll(".","_").replaceAll("=","_").replaceAll("[","_").replaceAll("]","_")},bizagi.util.parseBoolean=function(e){return void 0===e?null:null===e?null:""===e?null:!0===e||1===e||"true"===e.toString()||"1"===e||("true"===e.toString().toLowerCase()||(null===e||!1!==e)&&0!==e&&"false"!==e.toString()&&"0"!==e&&("false"!==e.toString().toLowerCase()&&null))},bizagi.util.isEmpty=function(e){return 0!==e&&(null==e||""===e||("Array"==typeof e?0==e.length:"[object Array]"===Object.prototype.toString.apply(e)?0===e.length:"[object Object]"===Object.prototype.toString.apply(e)&&(!!$.isEmptyObject(e)||bizagi.util.isEmptyCombo(e))))},bizagi.util.isEmptyCombo=function(e){if("[object Object]"===Object.prototype.toString.apply(e)){var t,i=!1,n=!1;for(t in e)if(e.hasOwnProperty(t)&&("id"===t?i=!0:"value"===t?!0:n=!0,n))return!1;if(i)return""===e.id}},bizagi.util.decodeURI=function(e){for(var t,i=!1,n=e=e||"";!i;)try{if(t=decodeURI(n),bizagi.util.hasNonVisibleChars(t)){n=e;break}t==n?i=!0:n=t}catch(e){i=!0}return n},bizagi.util.hasNonVisibleChars=function(e){for(var t,i=(e=e||"").length,n=0,a=!1;n<i;)if((t=e.charCodeAt(n++))<32||t>126){a=!0;break}return a},bizagi.util.percent2Number=function(e){return Number(String(e).replace("%",""))},bizagi.util.isObjectEmpty=function(e){return!(e.length>0)},bizagi.util.isMapEmpty=function(e){if(1==e.length&&0==e[0].length)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},bizagi.util.replaceSelector=function(e,t,i){var n=$(t,e);n.length>0&&(n.append(i),n.children().unwrap())},bizagi.util.hasScroll=function(e,t){e.length&&(e=e[0]);var i=!!e[t="vertical"===t?"scrollTop":"scrollLeft"];return i||(e[t]=1,i=!!e[t],e[t]=0),i},bizagi.util.identicalObjects=function(e,t){if(typeof e!=typeof t)return!1;if("function"==typeof e)return e.toString()===t.toString();if(e instanceof Object&&t instanceof Object){if(bizagi.util.countProps(e)!==bizagi.util.countProps(t))return!1;for(k in e)if(!bizagi.util.identicalObjects(e[k],t[k]))return!1;return!0}return e===t},bizagi.util.countProps=function(e){var t=0;for(k in e)e.hasOwnProperty(k)&&t++;return t},bizagi.util.isScrolledIntoView=function(e,t){if(null==e)return!1;var i=(t=t||$(window)).scrollTop(),n=$(e).offset().top;return n+$(e).height()<=i+$(t).height()&&n>=i},bizagi.util.centerElementIntoScroll=function(e,t){if(null==e)return!1;var i=(t=t||$(window)).scrollTop(),n=$(e).offset().top,a=$(e).height(),r=i+(n>0?n+a:n-a);t.scrollTop(r)},bizagi.util.encodeHtml=function(e){return null==e?"":"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},bizagi.util.decodeHtmlEntities=function(e){return null==e?"":"string"==typeof e?e.replace(/&apos;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,"'"):e},bizagi.util.getHashParams=function(){return window.location.hash.substring(1).split("#")},bizagi.util.loadFile=function(e){var t=new $.Deferred,i=e&&e.src?e.src:e,n=e&&e.type?e.type:null;return bizagi.loader.loadFile({src:i,type:n}).then(function(){t.resolve()}),t.promise()},bizagi.util.initWebpart=function(e,t){var i=new $.Deferred;return t=t||bizagi.detectDevice(),e.initialized?i.resolve():e.initializing?$.when(e.loadingDeferred.promise()).done(function(){i.resolve()}):(e.loadingDeferred=new $.Deferred,e.initializing=!0,bizagi.loader.initWebpart(e,t,function(){e.loadingDeferred.resolve(),e.initializing=!1,i.resolve()})),i.promise()},bizagi.util.getQueryString=function(e){for(var t={},i=((e=e||window.location.href).indexOf("?")>0?e.substring(e.indexOf("?")+1):"").split("&"),n=i.length-1;n>=0;n--){var a=i[n].indexOf("=");if(-1!=a){var r=i[n].substring(0,a),o=i[n].substring(a+1);t[r]=unescape(o)}}return t},bizagi.util.extendQueryString=function(e,t){var i=e.indexOf("?")>0?e.substring(0,e.indexOf("?")):e,n=bizagi.util.getQueryString(e),a=$.extend({},n,t);return i+"?"+$.param(a)},bizagi.util.getStackTrace=function(){var e=[],t=!1;try{n.dont.exist+=0}catch(o){if(o.stack){for(var i=o.stack.split("\n"),n=0,a=i.length;n<a;n++)i[n].match(/^\s*[A-Za-z0-9\-_\$]+\(/)&&e.push(i[n]);e.shift(),t=!0}else if(window.opera&&o.message){for(i=o.message.split("\n"),n=0,a=i.length;n<a;n++)if(i[n].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var r=i[n];i[n+1]&&(r+=" at "+i[n+1],n++),e.push(r)}e.shift(),t=!0}}if(!t)for(var o=arguments.callee.caller;o;){var s=o.toString(),l=s.substring(s.indexOf("function")+8,s.indexOf(""))||"anonymous";e.push(l),o=o.caller}return e},bizagi.util.highLightElement=function(e){e.addClass("ui-highlight-control"),$.when(setTimeout(function(){e.addClass("ui-highlight-off-control")},450)).done(setTimeout(function(){e.removeClass("ui-highlight-control ui-highlight-off-control")},800))},bizagi.util.autoScrollBottom=function(e){try{var t;t=e[0].scrollHeight,e.scrollTop(t)}catch(e){}},bizagi.util.autoScrollInterval={init:!1},bizagi.util.autoScroll=function(e,t,i,n){var a=!1;clearInterval(bizagi.util.autoScrollInterval[n]),bizagi.util.autoScrollInterval[n]=0,bizagi.util.autoScrollInterval.init=!0,$("body").addClass("autoscroll"),$("body.autoscroll").mousemove(function(r){r.pageY<t?a||(a=!0,bizagi.util.autoScrollTopInterval(e,"autoscroll",n)):r.pageY>i?a||(a=!0,bizagi.util.autoScrollBottomInterval(e,"autoscroll",n)):(clearInterval(bizagi.util.autoScrollInterval[n]),a=!1)})},bizagi.util.autoScrollTopInterval=function(e,t,i){clearInterval(bizagi.util.autoScrollInterval[i]),t&&$("body").addClass(t),0==e.scrollTop()?clearInterval(bizagi.util.autoScrollInterval[i]):(clearInterval(bizagi.util.autoScrollInterval[i]),bizagi.util.autoScrollInterval[i]=setInterval(function(){e.scrollTop()>0?e.scrollTop(e.scrollTop()-40):clearInterval(bizagi.util.autoScrollInterval[i])},100))},bizagi.util.autoScrollBottomInterval=function(e,t,i){clearInterval(bizagi.util.autoScrollInterval[i]),t&&$("body").addClass(t);var n=$(e)[0].scrollHeight-$(e).innerHeight();e.scrollTop()>=n?clearInterval(bizagi.util.autoScrollInterval[i]):(clearInterval(bizagi.util.autoScrollInterval[i]),bizagi.util.autoScrollInterval[i]=setInterval(function(){bizagi.util.autoScrollBottom($("html")),e.scrollTop()<n?e.scrollTop(e.scrollTop()+40):clearInterval(bizagi.util.autoScrollInterval[i])},100))},bizagi.util.removeAutoScroll=function(e,t){$("body."+e).unbind("mousemove").removeClass(e),clearInterval(bizagi.util.autoScrollInterval[t]),bizagi.util.autoScrollInterval.init=!1},bizagi.util.getMaxZIndex=function(e){return e=e||$("div,span"),Math.max.apply(null,$(e).map(function(){var e;return isNaN(e=parseInt($(this).css("z-index"),10))?0:e}))},bizagi.showPopup=function(e,t,i){var n=t.width||1024,a=t.height||768,r=$(window).height()/2-a/2,o=$(window).width()/2-n/2,s=window.open(e,"","width="+n+",height="+a+", top="+r+", left="+o+", Menubar=NO, Location=NO, Status=NO, scrollbars=YES");window.BAPopupWindow=s,window.BAPopupCallback=i,window.BACloseWindow=function(e,t){window.BAPopupWindow.close(),window.BAPopupCallback(e,t)}},bizagi.showQuirksModePopup=function(e,t){var i=window.BIZAGI_PATH_TO_BASE+"quirks.html",n=t.width||1024,a=t.height||768,r=$(window).height()/2-a/2,o=$(window).width()/2-n/2,s=window.open(i,"bizagiPopup","width="+n+",height="+a+", top="+r+", left="+o+", Menubar=NO, Location=NO, Status=NO, scrollbars=YES");window.BAQuirksPopupWindow=s,setTimeout(function(){try{s.document.title=t.title}catch(e){}},50),$(s).callInsidePopup(function(e){var t=e.jQuery,i=e.popupWindow;i.quirksOnLoad=function(){var n=t("body",i.document),a=t("iframe",n);n.removeClass("ui-bizagi-loading-message"),a.show();var r=e.userParams.afterLoad;if(r&&null!=r){var o=t.extend(e.userParams,{popupWindow:i});a.callInside(r,o)}};var n=function(){var a=t("body",i.document);a.length>0?a.append("<iframe scrolling='yes' id='innerFrameContent' src='"+e.url+"' style='width: 100%; height: 100%; display:none' frameborder='0' onload='quirksOnLoad();'></iframe>"):setTimeout(function(){n()},50)};n()},{jQuery:$,userParams:t,popupWindow:s,url:e})},bizagi.resolveResult=function(e){var t;return e.done(function(e){t=e}),t},bizagi.createPopup=function(e){var t=e.name,i=e.onClose,n=e.title?e.title:"",a=$('<div class="ui-widget-overlay '+t+'-overlay" />'),r=$('<div class="'+t+'-popup  ui-popup-modal"/>').appendTo(a),o=$('<div class="'+t+'-btn-close biz-btn-close"><i class="biz-icon ui-close-btn bz-studio bz-black bz-false_16x16_black"></i></div>').appendTo(r);e.title&&$('<div class="'+t+'-popup-header ui-popup-header" ><h3>'+n+"</h3></div>").appendTo(r);var s=$('<div class="'+t+'-popup-content" />').appendTo(r);r.hide(),e.additionalClass&&r.addClass(e.additionalClass);var l=e.container||"body";a.appendTo($(l,document)),e.center&&(r.css("top",(a.height()-r.height())/2),r.css("left",(a.width()-r.width())/2)),r.show();var u=function(e){a.detach(),i&&i(e)};return o.click(u),{fullPopup:r,overlay:a,content:s,close:function(e){u(e)}}},bizagi.createOkCancelPopup=function(e){e.name="popup-ok-cancel";var t=e.onOk,i=e.onCancel,n=bizagi.createPopup(e),a=$("<div></div>").addClass("container-okcancel-popup"),r=$("<div></div>").addClass("message-okcancel-popup ui-light-bevel-border biz-gradient-v"),o=$("<div></div>").addClass("buttonsContainer-okcancel-popup biz-actions-bar");r.text(e.message),r.appendTo(a);var s=$("<span></span>").addClass("ok-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn"),l=$("<span></span>").addClass("cancel-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn");s.text(bizagi.localization.getResource("bizagi-editor-okcancel-ok")),l.text(bizagi.localization.getResource("bizagi-editor-okcancel-cancel")),s.appendTo(o),l.appendTo(o),o.appendTo(a),a.appendTo(n.content);var u=function(){n.close(),"function"==typeof t&&t()};s.click(u);var c=function(){n.close(),"function"==typeof i&&i()};return l.click(c),{close:function(){n.close()},ok:function(){u()},cancel:function(){c()}}},bizagi.dialog=function(e){var t=$("<div></div>").addClass("biz-dialog"),i=$("<p></p>");i.text(e.message||""),i.appendTo(t),t.appendTo($("body",document)),t.dialog({title:e.title,modal:!0,buttons:e.buttons,close:function(){t.dialog("destroy")}})},bizagi.closeQuirksModePopup=function(){var e=window.BAQuirksPopupWindow;window.BAQuirksPopupWindow=null;try{e&&e.close()}catch(e){}},bizagi.getStyle=function(e){var t,i=location.href.replace("/default.aspx",""),n=!!e.match(/@/),a=!!e.match(/\*/),r=new RegExp(e.replace("*",""),"g"),o="";if(""==e)return"";var s=function(e){for(var i=0;i<document.styleSheets.length;i++)if(null!=(t=document.styleSheets[i].rules||document.styleSheets[i].cssRules))for(var s=0;s<t.length;s++)if(null!=document.styleSheets[i].href&&(null==document.styleSheets[i].href.match(/less.css/g)||"release"==BIZAGI_ENVIRONMENT)){var l=t[s].cssText?t[s].cssText:"";a?null!=t[s].selectorText&&null!=t[s].selectorText.match(r)&&($.browser.webkit?o+=t[s].cssText.replace(/\(path\)/g,""):$.browser.msie&&"8.0"==$.browser.version?o+=t[s].style.cssText:o+=t[s].cssText.replace(/\(path\)/g,"../../jquery/workportal/css/desktop")):null!=t[s].selectorText&&t[s].selectorText==e&&(o+=t[s].cssText),n&&null!=t[s]&&null!=l&&-1!=l.indexOf("@font-face")&&($.browser.webkit?o+=l.replace(/jquery\/workportal\/css\/desktop\//g,"").replace(/\(path\)/g,""):o+=l.replace(/\(path\)/g,"../../"))}return o};return $.browser.msie?function(e){if("8.0"==$.browser.version)return s(e);for(var n,l=0;l<document.styleSheets.length;l++)if(null!=(t=document.styleSheets[l].cssRules||document.styleSheets[l].rules))for(var u=0;u<t.length;u++)if("release"==BIZAGI_ENVIRONMENT)a&&(null!=t[u].selectorText&&null!=t[u].selectorText.match(r)?o+=t[u].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop"):null!=t[u].selectorText&&t[u].selectorText==e&&(o+=t[u].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop")));else if(null!=t[u].href&&null!=t[u].href&&null==t[u].href.match(/less.css/g)){n=t[u].styleSheet.cssRules||[];for(var c=0;c<n.length;c++)a?null==n[c].selectorText&&null==n[c].selectorText||null==n[c].selectorText.match(r)||(o+=n[c].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop")):null!=n[c].selectorText&&n[c].selectorText==e&&(o+=n[c].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop"))}return o}(e):s(e)},bizagi.cookie=function(e,t,i){if(arguments.length>1&&"[object Object]"!==String(t)){if(i=$.extend({},i),null==t&&(i.expires=-1),"number"==typeof i.expires){var n=i.expires,a=i.expires=new Date;a.setDate(a.getDate()+n)}return t=String(t),document.cookie=[encodeURIComponent(e),"=",i.raw?t:encodeURIComponent(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}var r,o=(i=t||{}).raw?function(e){return e}:decodeURIComponent;return(r=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?o(r[1]):null},bizagi.util.randomNumber=function(e,t){return e=e||1,t=t||1e7,Math.floor(Math.random()*(t-e+1))+e},bizagi.util.setContext=function(e,t){e=e||{},(t=t||!1)&&(bizagi.context={}),$.each(e,function(e,t){bizagi.context[e]=t}),bizagi.context.idWorkItem=bizagi.context.idWorkitem},bizagi.util.reloadCSS=function(){var e="?reload="+(new Date).getTime();$('link[rel="stylesheet"]').each(function(){this.href=this.href.replace(/\?.*|$/,e)})},bizagi.util.setInterval=function(params){var _name=params.name||"default",_call=params.call||function(){},_params=params.params||{},_singleton=params.singleton||!1,_timeOut=params.timeout||5e3,_maxIterations=params.iterations||1e3,_context=params.context||"true;",_killWhenExitContext=!params.hasOwnProperty("killWhenExitContext")||params.killWhenExitContext;bizagi.timeOut=bizagi.timeOut||{},null==bizagi.timeOut[_name]&&(bizagi.timeOut[_name]=[]),_singleton&&null!=bizagi.timeOut[_name]&&(bizagi.timeOut[_name]=[]),bizagi.timeOut[_name].push({name:_name,params:_params,call:_call,singleton:_singleton,timeOut:_timeOut,iterations:0,maxIterations:_maxIterations,context:_context,killWhenExitContext:_killWhenExitContext,itsRunning:!1,timeInit:Math.round((new Date).getTime())});var executeTimeOut=function(){$.each(bizagi.timeOut,function(k,v){$.each(v,function(key,value){var now=Math.round((new Date).getTime()),actualIterations=Math.round((now-value.timeInit)/value.timeOut);if(bizagi.timeOut[value.name][key].iterations=actualIterations,actualIterations<value.maxIterations)if(eval(value.context)){if(!value.itsRunning){if(value.params&&$.browser.msie)var ieFunction=function(){return value.call(value.params)};bizagi.timeOut[value.name][key].pointer=$.browser.msie?setInterval(ieFunction,value.timeOut,"JavaScript"):setInterval(value.call,value.timeOut,value.params),bizagi.timeOut[value.name][key].itsRunning=!0}}else value.killWhenExitContext?(bizagi.timeOut[value.name].splice(key,1),clearTimeout(value.pointer)):(bizagi.timeOut[value.name][key].itsRunning=!1,clearTimeout(value.pointer));else clearTimeout(value.pointer),bizagi.timeOut[value.name].splice(key,1)})})};bizagi.timeOutRunning||(bizagi.timeOutRunning=!0,setInterval(executeTimeOut,1e3))},bizagi.util.isDate=function(e){var t,i,n=!1,a=!1,r=!1,o=(e=e||"").toString().split(" ");return t=o[0],(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)||/^\d{4}\/\d{1,2}\/\d{1,2}$/.test(t)||/^\d{1,2}\/\d{1,2}\/\d{1,2}$/.test(t))&&(n=!0),o.length>1&&(i=o[1],a=!0,3==o.length&&(i=i+" "+o[2]),/^\d{1,2}:\d{2}(:\d{2})?(\s[aApP][mM])?$/.test(i)&&(r=!0)),a?n&&r:n},bizagi.util.unicode2htmlencode=function(e){var t,i=(e=e.replace(/\r\n/g,"\n")).length,n="";for(t=0;t<i;t++)n+="&#x"+e.charCodeAt(t).toString(16)+";";return n},bizagi.util.getHeadElement=function(){var e=document.getElementsByTagName("head")[0],t=document&&document.documentElement;return e||(e=document.createElement("head"),t.insertBefore(e,t.firstChild)),bizagi.util.getHeadElement=function(){return e},e},bizagi.util.loadStyle=function(e,t){var i,n=document.getElementById(t);if(e&&!n){var a=document.createElement("style");a.type="text/css",a.id=t,a.styleSheet?a.styleSheet.cssText=e:(i=document.createTextNode(e),a.childNodes.length?a.firstChild.nodeValue!==i.nodeValue&&a.replaceChild(i,a.firstChild):a.appendChild(i)),bizagi.util.getHeadElement().appendChild(a)}},bizagi.util.loadIconStyle=function(e,t){bizagi.log("bizagi.util.loadIconStyle");var i=document.createElement("style");i.type="text/css";var n=".mtool-item-image-"+t+" { background:url(data:image/png;base64,"+e+"); }";i.innerHTML=n,bizagi.util.getHeadElement().appendChild(i)},bizagi.util.formatDecimalAndMoneyCell=function(e,t){var i,n,a,r,o={decimalSymbol:t.decimalSeparator,digitGroupSymbol:t.groupSeparator,roundToDecimalPlace:t.decimalDigits};for(i=$.extend({symbol:"€",decimalSeparator:",",groupSeparator:".",decimalDigits:"2"},t),n=$.extend({colorize:!1,decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0,negativeFormat:"(%s%n)",positiveFormat:"%s%n",roundToDecimalPlace:"2",symbol:""},o),a=0;a<e.columnTitle.length;a++){if("MONEY"==e.columnTitle[a].type.toUpperCase())for(r=0;r<e.rows.length;r++)e.rows[r].fields[a]=bizagi.util.formatMoney(e.rows[r].fields[a],i);if("FLOAT"==e.columnTitle[a].type.toUpperCase()||"REAL"==e.columnTitle[a].type.toUpperCase())for(r=0;r<e.rows.length;r++){var s=bizagi.util.formatDecimal(e.rows[r].fields[a],n);if(!0===bizagi.override.removeTrailingZeros){var l=!0;-1!=s.toString().indexOf(")")&&(l=!1,s=s.replace("(","").replace(")",""));var u=new RegExp("("+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"\\d*?[1-9])0+$","g");s=s.replace(u,"$1"),u=new RegExp("\\"+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"0+$","g"),s=s.replace(u,""),l||(s="("+s+")")}e.rows[r].fields[a]=s}}return e},bizagi.util.formatBoolean=function(e){return 1==bizagi.util.parseBoolean(e)?bizagi.localization.getResource("render-boolean-yes"):0==bizagi.util.parseBoolean(e)?bizagi.localization.getResource("render-boolean-no"):""},bizagi.util.formatInvariantBoolean=function(e){e=e||"",$(".formatBoolean",e).not(".formatted").each(function(e,t){var i=$(t),n=i.html();i.addClass("formatted");try{var a=bizagi.util.formatBoolean(n);i.html(a)}catch(e){i.html(n)}})},bizagi.util.formatDecimal=function(e,t){var i=$("<i/>").text(e);return i.formatCurrency(t),i.text()},bizagi.util.formatMonetaryCells=function(e,t){t=t||{symbol:"€",decimalSeparator:",",groupSeparator:".",decimalDigits:"2"};for(var i=0;i<e.columnTitle.length;i++)if("MONEY"==e.columnTitle[i].type.toUpperCase())for(var n=0;n<e.rows.length;n++)e.rows[n].fields[i]=bizagi.util.formatMoney(e.rows[n].fields[i],t);return e},bizagi.util.formatMoney=function(e,t){var i="",n="",a="",r="",o="",s=e<0;if(null==e&&(e=""),(e=e.toString()).length>=1){var l=e.indexOf(".");if(l>0)a=(e=bizagi.util.fixDecimalDigits(e,t.decimalDigits)).substring(0,l).replace(/\D/g,"");else{for(var u=0;u<t.decimalDigits;u++)o+="0";a=e.replace(/\D/g,"")}if(e=e.replace(/\D/g,""),r=t.decimalDigits>0?l>0?t.decimalSeparator+e.substring(e.length-t.decimalDigits,e.length):t.decimalSeparator+o:"",a.length>3){var c=0;for(u=a.length-1;u>=0;u--)3==c&&(n+=".",c=0),n+=a[u],c+=1;for(u=n.length-1;u>=0;u--)i+=n[u]}else i=a;if(i=i.replaceAll(".",t.groupSeparator),s)i=bizagi.localization.getResource("numericFormat").negativeFormat.replace("%s",t.symbol).replace("%n",i+r);else i=t.symbol+i+r;return i}return e},bizagi.util.getOnlyNumbersByString=function(e){return e.replace(/\D/g,"")},bizagi.util.fixDecimalDigits=function(e,t){var i,n;if(i=e.indexOf("."),e.substring(0,i),t>(n=e.substring(i+1,e.length)).length)for(var a=n.length;a<t;a++)e+="0";else e=parseFloat(e).toFixed(t);return e},bizagi.util.formatInvariantMoney=function(e,t){e=e||"";var i={symbol:t.symbol,decimalSeparator:t.decimalSeparator||",",groupSeparator:t.groupSeparator||".",decimalDigits:t.decimalDigits||"2"};!1===t.allowDecimals&&(i.decimalDigits="0"),$(".formatMoney",e).not(".formated").each(function(e,t){var n=$(t).html();$(t).addClass("formated");try{var a=parseFloat(n);if(!isNaN(a)){var r=bizagi.util.formatMoney(a,i);$(t).html(r)}}catch(e){$(t).html(n)}})},bizagi.util.formatInvariantNumber=function(e,t){e=e||"";var i="2";i="0"==t.decimalDigits?"0":t.decimalDigits||"2";var n={symbol:"",decimalSeparator:t.decimalSeparator||",",groupSeparator:t.groupSeparator||t.thousands?".":"",decimalDigits:i};$(".formatMoney",e).not(".formated").each(function(e,i){var a=$(i).html();$(i).addClass("formated");try{var r=a.match(/[a-zA-Z]/),o=null!=r&&r.length>0?NaN:parseFloat(a);if(!isNaN(o)){var s=bizagi.util.formatMoney(o,n);t.percentage&&(s=s.toString()+"%"),$(i).html(s)}}catch(e){$(i).html(a)}})},bizagi.util.formatInvariantDate=function(e,t){e=e||"",t=t||"MM/dd/yyyy hh:mm:ss",$(".formatDate",e).not(".formated").each(function(e,i){var n=$(i).html();$(i).addClass("formated");try{var a=new Date(n),r=t;bizagi.util.isValidDate(a)&&(r=bizagi.util.getFormatDate(a,r));var o=bizagi.util.dateFormatter.formatDate(a,r);$(i).html(o)}catch(e){$(i).html(n)}})},bizagi.util.formatDateFromInvariantStringDate=function(e){if(bizagi.util.isValidDate(e)){var t=bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"),i=new Date(e);return t=bizagi.util.getFormatDate(i,t),bizagi.util.dateFormatter.formatDate(i,t)}return e||""},bizagi.util.getFormatDate=function(e,t){var i=t,n=e.getHours(),a=e.getMinutes(),r=e.getSeconds(),o=e.getMilliseconds();return 0===n&&0===a&&0===r&&0===o&&(i=bizagi.localization.getResource("dateFormat")),i},bizagi.util.formatValueByDataType=function(e,t){var i=e;switch(t){case"NText":case 23:case"Char":case 14:case"VarChar":case 15:case"Text":case 16:e&&e.length>30&&(i=bizagi.util.replaceLineBreak(e));break;case"Boolean":case 5:case"Binary":case 17:i=bizagi.util.formatBoolean(e);break;case"Int":case 2:case"BigInt":case 1:case"SmallInt":case 3:case"TinyInt":case 4:case"Numeric":case 7:i=null==e?"":e;break;case"Money":case 8:i=bizagi.util.formatMonetaryCell(e);break;case"Float":case 10:case"Real":case 11:case"Decimal":case 6:i=bizagi.util.formatDecimalCell(e);break;case"DateTime":case 12:case"SmallDateTime":case 13:i=bizagi.util.formatDateFromInvariantStringDate(e)}return null==i&&(i=""),i},bizagi.util.isValidDate=function(e){if(void 0!==e&&null!=e){var t=new Date(e);return!isNaN(t.valueOf())}return!1},bizagi.util.monthNames=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),bizagi.util.dayNames=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"),bizagi.util.dateFormatter=new function(){this.LZ=function(e){return(e<0||e>9?"":"0")+e},this.isDate=function(e,t){return 0!=this.getDateFromFormat(e,t)},this.getRelativeTime=function(e,t,i){var n=new Date,a=e instanceof Date?e:kendo.parseDate(e,t),r=n.getTime()-a.getTime(),o=s(r,"year",31536e6,i);return o||(o=s(r,"month",2628e6,i))||(o=s(r,"week",6048e5,i))||(o=s(r,"day",864e5,i))||(o=s(r,"hour",36e5,i))||(o=s(r,"minute",6e4,i))||(i?o=s(0===r?r+1:r,"minute",1,i):(o=s(r,"second",2e3,i))||(o=bizagi.localization.getResource("workportal-relativetime-momentago"))),o;function s(e,t,i,n){var a=(e/i).toFixed(0);if(a>0){if(n)return 1==a?bizagi.localization.getResource("workportal-relativetime-"+t).replace("%s",a):bizagi.localization.getResource("workportal-relativetime-"+t+"s").replace("%s",a);var r=bizagi.localization.getResource("workportal-relativetime-ago");return 1==a?r.replace("%s",bizagi.localization.getResource("workportal-relativetime-"+t).replace("%s",a)):r.replace("%s",bizagi.localization.getResource("workportal-relativetime-"+t+"s").replace("%s",a))}return null}},this.compareDates=function(e,t,i,n){var a=getDateFromFormat(e,t),r=getDateFromFormat(i,n);return 0==a||0==r?-1:a>r?1:0},this.getDifferenceBetweenDates=function(e,t,i){if(!(e instanceof Date&&e instanceof Date))return"one param not is Date";switch(i){case"seconds":return(t.getTime()-e.getTime())/1e3;case"milliseconds":return t.getTime()-e.getTime();default:return"unit is not Defined"}},this.formatDate=function(e,t,i){if(!bizagi.util.isValidDate(e)||0==e)return"";var n=bizagi.util.monthNames,a=bizagi.util.dayNames;t+="";var r,o,s="",l=0,u=e.getFullYear()+"",c=e.getMonth()+1,d=e.getDate(),g=e.getDay(),p=e.getHours(),h=e.getMinutes(),f=e.getSeconds(),b=e.getMilliseconds(),m=new Object;if(bizagi.util.isValidResource("datePickerRegional")&&(i=bizagi.localization.getResource("datePickerRegional")),i){var v=i.monthNames.concat(i.monthNamesShort),y=i.dayNames.concat(i.dayNamesShort);n=n.toString()===v.toString()?n:v,a=a.toString()===y.toString()?a:y}for((u.length<4||"-"===u.charAt(0)&&u.length<5)&&(u=""+(u-0+1900)),m.y=""+u,m.yyyy=u,m.yy=u.substring(2,4),m.M=c,m.MM=this.LZ(c),m.MMM=n[c+11],m.MMMM=n[c-1],m.NNN=n[c+11],m.d=d,m.dd=this.LZ(d),m.ddd=a[g+7],m.dddd=a[g],m.E=a[g+7],m.EE=a[g],m.H=p,m.HH=this.LZ(p),m.tt=p<12?"am":"pm",m.TT=p<12?"AM":"PM",m.h=0==p?12:p>12?p-12:p,m.hh=this.LZ(m.h),m.K=p>11?p-12:p,m.k=p+1,m.KK=this.LZ(m.K),m.kk=this.LZ(m.k),m.a=p>11?"PM":"AM",m.m=h,m.mm=this.LZ(h),m.s=f,m.ss=this.LZ(f),m.FFF=b;l<t.length;){for(r=t.charAt(l),o="";t.charAt(l)==r&&l<t.length;)o+=t.charAt(l++);null!=m[o]?s+=m[o]:s+=o}return s},this.getDateFromFormat=function(e,t,i){var n=bizagi.util.monthNames,a=bizagi.util.dayNames;e+="",t+="";var r,o,s=0,l=0,u=0,c=0,d=new Date,g=d.getYear(),p=d.getMonth()+1,h=1,f=d.getHours(),b=d.getMinutes(),m=d.getSeconds(),v=(d.getMilliseconds(),"");if(bizagi.util.isValidResource("datePickerRegional")&&(i=bizagi.localization.getResource("datePickerRegional")),i){var y=i.monthNames.concat(i.monthNamesShort),z=i.dayNames.concat(i.dayNamesShort);n=n.toString()===y.toString()?n:y,a=a.toString()===z.toString()?a:z}for(;l<t.length;){for(r=t.charAt(l),o="";t.charAt(l)==r&&l<t.length;)o+=t.charAt(l++);if("yyyy"==o||"yy"==o||"y"==o){if("yyyy"==o&&(u=4,c=4),"yy"==o&&(u=2,c=2),"y"==o&&(u=2,c=4),null==(g=S(e,s,u,c)))return 0;s+=g.length,2==g.length&&(g=g>70?g-0+1900:g-0+2e3)}else if("MMMM"==o||"MMM"==o||"NNN"==o){p=0;for(var _=0;_<n.length;_++){var w=n[_];if(e.substring(s,s+w.length).toLowerCase()==w.toLowerCase()&&("MMMM"==o||"MMM"==o||"NNN"==o&&_>11)){(p=_+1)>12&&(p-=12),s+=w.length;break}}if(p<1||p>12)return 0}else if("dddd"==o||"EE"==o||"E"==o)for(var E=0;E<a.length;E++){var x=a[E];if(e.substring(s,s+x.length).toLowerCase()==x.toLowerCase()){s+=x.length;break}}else if("MM"==o||"M"==o){if(null==(p=S(e,s,1,2))||p<1||p>12)return 0;s+=p.length}else if("dd"==o||"d"==o){if(null==(h=S(e,s,1,2))||h<1||h>31)return 0;s+=h.length}else if("hh"==o||"h"==o){if(null==(f=S(e,s,o.length,2))||f<1||f>12)return 0;s+=f.length}else if("HH"==o||"H"==o){if(null==(f=S(e,s,o.length,2))||f<0||f>23)return 0;s+=f.length}else if("KK"==o||"K"==o){if(null==(f=S(e,s,o.length,2))||f<0||f>11)return 0;s+=f.length}else if("kk"==o||"k"==o){if(null==(f=S(e,s,o.length,2))||f<1||f>24)return 0;s+=f.length,f--}else if("mm"==o||"m"==o){if(null==(b=S(e,s,o.length,2))||b<0||b>59)return 0;s+=b.length}else if("ss"==o||"s"==o){if(null==(m=S(e,s,o.length,2))||m<0||m>59)return 0;s+=m.length}else if("FFF"==o){if(ff=S(e,s,o.length,3),null==ff||ff<0||ff>999)return 0;s+=ff.length}else if("a"==o||"tt"==o){if("am"==e.substring(s,s+2).toLowerCase())v="AM";else{if("pm"!=e.substring(s,s+2).toLowerCase())return 0;v="PM"}s+=2}else{if(e.substring(s,s+o.length)!=o)return 0;s+=o.length}}if(2==p)if(g%4==0&&g%100!=0||g%400==0){if(h>29)return 0}else if(h>28)return 0;return(4==p||6==p||9==p||11==p)&&h>30?0:(f<12&&"PM"==v?f=f-0+12:f>11&&"AM"==v&&(f-=12),new Date(g,p-1,h,f,b,m));function C(e){for(var t=0;t<e.length;t++)if(-1=="1234567890".indexOf(e.charAt(t)))return!1;return!0}function S(e,t,i,n){for(var a=n;a>=i;a--){var r=e.substring(t,t+a);if(r.length<i)return null;if(C(r))return r}return null}},this.parseDate=function(e){for(var t,i=2==arguments.length&&arguments[1],n=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d"),a=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d"),r=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M"),o=new Array(n,i?r:a,i?a:r),s=0;s<o.length;s++)for(var l=window[o[s]],u=0;u<l.length;u++)if(0!=(t=getDateFromFormat(e,l[u])))return new Date(t);return null},this.analyzeTimeFormat=function(e){for(var t,i,n=0,a={show24Hours:!1,showSeconds:!1,separator:":"},r="";n<e.length;){for(t=e.charAt(n),i="";e.charAt(n)==t&&n<e.length;)i+=e.charAt(n++);"hh"==i||"h"==i?(r=i,a.show24Hours=!1):"HH"==i||"H"==i?(r=i,a.show24Hours=!0):"mm"==i||"m"==i?r=i:"ss"==i||"s"==i?(r=i,a.showSeconds=!0):"a"==i?r=i:"H"!=r.toUpperCase()&&"HH"!=r.toUpperCase()||(a.separator=i)}return a},this.getDateFromInvariant=function(e,t){e="string"!=typeof(e=null==e?"":e)?e.toString():e;var i="MM/dd/yyyy"+(t?" H:mm:ss":"");t&&e&&(e.toLowerCase().indexOf("am")>0||e.toLowerCase().indexOf("pm")>0)&&(i="MM/dd/yyyy h:mm:ss a");var n=bizagi.util.dateFormatter.getDateFromFormat(e,i);return 0!=n||t?0==n&&t&&null!=e&&""!=e&&(i="MM/dd/yyyy",(n=bizagi.util.dateFormatter.getDateFromFormat(e,i)).setHours(0,0,0,0)):(i="MM/dd/yyyy H:mm:ss",n=bizagi.util.dateFormatter.getDateFromFormat(e,i)),n},this.formatInvariant=function(e,t){var i="MM/dd/yyyy"+(t?" HH:mm:ss":"");return bizagi.util.dateFormatter.formatDate(e,i)},this.getDateFromISO=function(e,t){var i="yyyy-MM-dd"+(t?" HH:mm":""),n=bizagi.util.dateFormatter.getDateFromFormat(e,i);return 0==n&&t&&(i="yyyy-MM-dd"+(t?" HH:mm:ss":""),n=bizagi.util.dateFormatter.getDateFromFormat(e,i)),0!=n||t||(i="yyyy-MM-dd HH:mm",0==(n=bizagi.util.dateFormatter.getDateFromFormat(e,i))&&(i="yyyy-MM-dd HH:mm:ss",n=bizagi.util.dateFormatter.getDateFromFormat(e,i))),n},this.formatISO=function(e,t){var i="yyyy-MM-dd"+(t?" HH:mm":"");return bizagi.util.dateFormatter.formatDate(e,i)},this.formatISO8601=function(e,t){return(t=t||!1)&&e.setHours(0,0,0,0),bizagi.util.dateFormatter.formatDate(e,"yyyy-MM-ddTHH:mm:ss")},this.isFormatISO8601=function(e){return/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i.test(e)},this.sleep=function(e){for(var t=(new Date).getTime();(new Date).getTime()<t+e;);},this.getDateFormatByDatePickerJqueryUI=function(){return bizagi.localization.getResource("dateFormat").replace("yyyy","yy")}},bizagi.util.browserSupportLocalStorage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},bizagi.util.setItemLocalStorage=function(e,t){return!!bizagi.util.browserSupportLocalStorage()&&(localStorage.setItem(e,t),!0)},bizagi.util.getItemLocalStorage=function(e){return localStorage.getItem(e)},bizagi.util.removeItemLocalStorage=function(e){localStorage.removeItem(e)},bizagi.util.clearLocalStorage=function(){bizagi.util.browserSupportLocalStorage()&&localStorage.clear()},"debug"==("undefined"!=typeof BIZAGI_ENVIRONMENT?BIZAGI_ENVIRONMENT:"release")?"object"!=typeof window.console&&(window.console={log:function(e){}}):"object"!=typeof console?window.console={log:function(e){}}:bizagiConfig&&!bizagiConfig.showConsoleLog&&(console.log=function(e){}),bizagi.util.smartphone.startLoading=function(e){(e||$("body")).append('<div class="bz-util-loading-container"> <div class="ui-bizagi-loading-icon bz-util-loading"></div>  </div>')},bizagi.util.smartphone.stopLoading=function(e){var t=e||$("body");$(".bz-util-loading-container",t).remove()},bizagi.util.isEventSupported=function(e,t){var i,n=!("onblur"in document.documentElement);return!!e&&(t&&"string"!=typeof t||(t=document.createElement(t||"div")),!(i=(e="on"+e)in t)&&n&&(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute&&(t.setAttribute(e,""),i="function"==typeof t[e],void 0!==t[e]&&(t[e]=void 0),t.removeAttribute(e))),i)},bizagi.circularDependencies=function(){var e=(new Function).prototype;e.list=[],e.lastNodeAdded,e.addNode=function(t,i){var n=JSON.encode(i),o=a(t,n);if(!o){var s=new r(t,n);return e.list.push({name:t,obj:n,nodeObj:s,timeStamp:(new Date).getTime()}),s}(e.lastNodeAdded||e.list[e.list.length-1]).nodeObj.addChild(o.nodeObj),e.lastNodeAdded=o},e.resolve=function(t,i,a){return t=t||n()||e.list[0].nodeObj,new o(t,i,a)};var t,i,n=function(){for(var t=0;t<e.list.length;t++)if(e.list[t].nodeObj.childs.length>0)return e.list[t].nodeObj;return e.list.length>0?e.list[0].nodeObj:{}},a=function(t,i){for(var n=0;n<e.list.length;n++)if(e.list[n].name==t){var a=(new Date).getTime();if(e.list[n].timeStamp+1e3<a)e.list.splice(n,1);else if(e.list[n].obj==i)return e.list[n]}return!1},r=function(e,t){e=e||"",t=t||{};var i=function(e,t){this.name=e,this.obj=t,this.childs=[]};return i.prototype.addChild=function(e){this.childs.push(e)},i}(),o=((i=(t=function(n,a,r){this.node=n||{},this.node.childs=this.node.childs||[],this.resolved=a||[],this.seen=r||[],this.seen.push(this.node);for(var o=0;o<this.node.childs.length;o++)if(!i.hasObject(this.node.childs[o],this.resolved)){if(i.hasObject(this.node.childs[o],this.seen)){e.list=[];var s={dependencyFrom:this.node.name,dependencyFromObj:this.node.obj,dependencyTo:this.node.childs[o].name,dependencyToObj:this.node.childs[o].obj,path:this.seen};return{error:$.extend({standardError:{status:"error",responseText:JSON.encode({message:i.makeErrorMessage(s),type:"alert"})},multiactionError:{message:i.makeErrorMessage(s),type:"alert"}},s)}}return t(this.node.childs[o],this.resolved,this.seen)}this.resolved&&this.resolved.push(this.node)}).prototype).hasObject=function(e,t){for(var i=0;i<t.length;i++)if(t[i].name==e.name)return!0;return!1},i.makeErrorMessage=function(e){return printf(bizagi.localization.getResource("render-actions-loop-validation"),e.dependencyFrom,e.dependencyTo)},t);return e},bizagi.util.cssExtended=function(e,t){var n=t.split(";");for(i=0;i<n.length;i++)""!=n[i]&&bizagi.util.cssExtendedApplyChanges(e,n[i])},bizagi.util.cssExtendedApplyChanges=function(e,t){for(var i=0;i<e.length;i++){var n=$(e[i]),a=t.split(":")[0];if(n.attr("style")){var r=n.attr("style").split(";"),o=[],s="";for(j=0;j<r.length;j++){var l=r[j].split(":");$.trim(l[0])!=a&&""!=$.trim(l[0])&&o.push(l[0]+":"+l[1]+";"),s=JSON.stringify(o).replace(/\","/g," ").replace(/\["/g," ").replace(/\"]/g," ")}s="[]"==s?"":s,n.attr("style",s+t+";")}else if(n.css(a)){r=n.css(a),s="";(o=[]).push(t+";"),s="[]"==s?"":s,n.attr("style",s+t+";")}}},bizagi.util.scrollTop=function(e){if(e&&e[0])for(;"HTML"!==e[0].tagName&&"scroll"!=e.css("overflow-y")&&"auto"!=e.css("overflow-y")&&e.parent().length>0;)e=e.parent();return e},bizagi.util.sortJSON=function(e,t,i){return e.sort(function(e,n){var a=e[t],r=n[t];return"asc"===i?a<r?-1:a>r?1:0:"desc"===i?a>r?-1:a<r?1:0:void 0})},bizagi.util.shortNumber=function(e){var t=e.toString(),i=t.length;return i>=4&&i<7?t="+"+t.charAt(0)+"K":i>=7&&i<10?t="+"+t.charAt(0)+"M":i>=10&&(t="+"+t.charAt(0)+"B"),"&nbsp;&nbsp;&nbsp;"+t},bizagi.util.replaceLineBreak=function(e){return"string"==typeof e?e.replace(/\r\n|\r|\n|<br>|<br\/>/g,"<br/>"):e},bizagi.util.escapeHtml=function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},bizagi.util.formatMonetaryCell=function(e){return bizagi.util.formatMoney(e,BIZAGI_DEFAULT_CURRENCY_INFO)},bizagi.util.formatDecimalCell=function(e){var t,i={decimalSymbol:BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator,digitGroupSymbol:BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator,roundToDecimalPlace:BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits};t=$.extend({colorize:!1,decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0,negativeFormat:"(%s%n)",positiveFormat:"%s%n",roundToDecimalPlace:"2",symbol:""},i);var n=bizagi.util.formatDecimal(e,t);if(!0===bizagi.override.removeTrailingZeros){var a=!0;-1!=n.toString().indexOf(")")&&(a=!1,n=n.replace("(","").replace(")",""));var r=new RegExp("("+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"\\d*?[1-9])0+$","g");n=n.replace(r,"$1"),r=new RegExp("\\"+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"0+$","g"),n=n.replace(r,""),a||(n="("+n+")")}return n},bizagi.util.showNotification=function(e){e=e||{};var t=$('<div id="sync-notification" class="bz-cm-icon"></div>').text(e.text||"");t.appendTo($("body")),t.fadeIn(1500,function(){t.stop()}),t.fadeOut(2e3,function(){t.remove()})},bizagi.util.isModeOnline=function(){return void 0!==bizagi.context.isOfflineForm&&!bizagi.context.isOfflineForm},bizagi.util.dispose=function(e){for(key in e)"object"==typeof e[key]&&delete e[key],"function"==typeof e[key]&&(e[key]=null,delete e[key])},bizagi.util.arrayEach=function(e,t){var i;if(e)if("[object Array]"===Object.prototype.toString.apply(e)&&"[object Function]"===Object.prototype.toString.apply(t)){for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(e[i],i,e[i]))return}else $.each(e,t)},bizagi.util.getStandardNotation=function(e,t){t=t||".";var i="",n=!1,a=!1;e=(e.length>0?e.toString().toLowerCase():"").replace(/ /g,"");for(var r=0;r<e.length;r++)("+"!==e[r]&&"-"!==e[r]||0!==r&&"e"!=e[r-1])&&isNaN(Number(e[r]))?e[r]!==t||n?"e"!==e[r]||a||(i+=e[r],a=!0):(i+=e[r],n=!0):i+=e[r];return i},bizagi.util.scientificNotationFormat=function(e,t,i,n,a){t=t||".",e=bizagi.util.getStandardNotation(e,t),i=i>0?i:38,n=n>0?n:-125,a=a>0?a:125;var r=new RegExp("[0-9]+("+t+"[0-9]+)?(e[+-]?[0-9]+)?"),o=e.match(r),s=0,l="-"===e[0]?e[0]:"",u=0;if(e=e.replace(l,""),o&&o[0]&&o[2]){var c=o[0]?o[0].replace(o[2],"").split(t):"",d="",g="";return c[0]=c[0].replace(/^0+/g,""),c[0].length>1?(u=(d=c[0].slice(1)).length,g=c[0][0]||"",d=d.concat(o[1]||"")):1===c[0].length?(g=c[0][0]||"",d=d.concat(c[1]||"")):(u=c[1].length,c[1]=c[1].replace(/^0+/g,""),u=c[1].length-1-u,g=c[1][0],d=c[1].slice(1)),(d=d.replace(t,"").replace(/0+$/g,"")).length>=i&&(d=d.slice(0,i-1)),l+g+(d?t+d:"")+"e"+((s=(s=Number(o[2].replace("e",""))+u)>a?a:s<n?n:s)>0?"+"+s:s)}if(e){u=e.indexOf(t);var p=0,h=e.length-1;e=e.replace(t,"");for(var f=p;!b;)"0"!==e[f]&&e[f]!==t?(b=!0,p=f):f++;for(var b=!1,m=h;!b;)"0"!==e[m]&&e[m]!==t?(b=!0,h=m+1):m--;if(h=h>i+p?i+p:h,-1!==u){b=!1;return s=u-(p+1),(d=e.slice(p,h)).length>0&&!isNaN(Number(d[0]))?l+d[0]+(d.length>1?t+d.slice(1):"")+"e"+(s>0?"+"+s:s):"0"}var v=e.slice(p,p+1),y=e.slice(p+1,e.length);return s=y.length,(y=y.replace(/0+$/g,"")).length>i&&(y=e.slice(p+1,i+p)),Number(v)?l+v+(y.length>0?t+y:"")+"e"+(s>0?"+"+s:s):"0"}return""},bizagi.util.stripslashes=function(e){return e.replace(/\\'/g,"'").replace(/\"/g,'"').replace(/\\\\/g,"\\").replace(/\\0/g,"\0")},bizagi.util.isHTMLValidText=function(e){return new RegExp(/<(.|\n)*?>/g).test(e)},bizagi.util.resetData=function(){var e=JSON.parse(sessionStorage.getItem("bizagiAuthentication"));sessionStorage.removeItem("bizagiAuthentication"),$.extend(e,{isAuthenticate:"false"}),sessionStorage.setItem("bizagiAuthentication",JSON.encode(e))},bizagi.util.changeData=function(e){var t=JSON.parse(sessionStorage.getItem("bizagiAuthentication"));sessionStorage.removeItem("bizagiAuthentication"),$.extend(t,e),sessionStorage.setItem("bizagiAuthentication",JSON.encode(t))},bizagi.util.isMobileDevice=function(e){return e=e||bizagi.detectDevice(),["smartphone_ios","smartphone_ios_native","smartphone_android","smartphone_android_native","tablet","tablet_ios","tablet_ios_native","tablet_android","tablet_android_native"].indexOf(e)>-1},bizagi.util.isTabletDevice=function(e){return e=e||bizagi.util.detectDevice(),["tablet","tablet_ios","tablet_ios_native","tablet_android","tablet_android_native"].indexOf(e)>-1},bizagi.util.isAndroidTabletDevice=function(e){return e=e||bizagi.util.detectDevice(),bizagi.util.isTabletDevice()&&-1!==e.indexOf("android")},bizagi.util.isiOSTabletDevice=function(e){return e=e||bizagi.util.detectDevice(),bizagi.util.isTabletDevice()&&!(-1===e.indexOf("android"))},bizagi.util.isSmartphoneDevice=function(e){return e=e||bizagi.util.detectDevice(),["smartphone_ios","smartphone_ios_native","smartphone_android","smartphone_android_native"].indexOf(e)>-1},bizagi.util.isAndroidSmartphoneDevice=function(e){return e=e||bizagi.util.detectDevice(),bizagi.util.isSmartphoneDevice()&&-1!==e.indexOf("android")},bizagi.util.isiOSSmartphoneDevice=function(e){return e=e||bizagi.util.detectDevice(),bizagi.util.isSmartphoneDevice()&&-1!==e.indexOf("ios")},bizagi.util.isOfflineForm=function(e){if(!bizagi.util.isMobileDevice()||void 0===e)return!1;var t=e.context||null,i=e.container||null,n=null!==i?i:null!==t?t.getFormContainer():null;if(null===n)return!1;var a=n.getParams()||{};return void 0!==a.isOfflineForm&&bizagi.util.parseBoolean(a.isOfflineForm)},bizagi.util.detectAndroidVersion=function(){var e=navigator.userAgent.toLowerCase().indexOf("android"),t=navigator.userAgent.toLowerCase().substring(e+8,e+13);return t=t.replaceAll(".",""),Number(t)},bizagi.util.getPathUrl=function(e){var t="",i=location.pathname.split("/"),n=location.protocol+"//"+location.host;if("/"==BIZAGI_PATH_TO_BASE[0])t=n+BIZAGI_PATH_TO_BASE+e;else{for(var a=BIZAGI_PATH_TO_BASE.split("../").length,r=0,o=i.length;r<o-a;r++)n+=i[r]+"/";t=(n="/"===n[n.length-1]?n:n+"/")+e}return t},bizagi.util.getAndroidVersion=function(){var e=navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/);return!!e&&parseFloat(e[1])},bizagi.util.mobileImagePath=function(e){var t=e,i=bizagi.util.getAndroidVersion();if(!i)return t;if("content://com.android"===t.substring(0,21)&&i<=4.4){var n=t.split("%3A");t=n.length>1?"content://media/external/images/media/"+n[1]:"content://media/external/images/media/"+(n=t.split("/"))[n.length-1]}return t},bizagi.util.isValidResource=function(e){return!!bizagi.localization&&bizagi.localization.getResource(e)!==e},bizagi.util.b64toBlob=function(e,t,i){t=t||"",i=i||512;for(var n=atob(e),a=[],r=0;r<n.length;r+=i){for(var o=n.slice(r,r+i),s=new Array(o.length),l=0;l<o.length;l++)s[l]=o.charCodeAt(l);var u=new Uint8Array(s);a.push(u)}return new Blob(a,{type:t})},bizagi.util.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=255&e.charCodeAt(i);return t},bizagi.util.hasOfflineFormsEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_OFFLINE_FORMS&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_OFFLINE_FORMS)},bizagi.util.isFlatDesignEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_FLAT&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_FLAT)},bizagi.util.isMobileGridEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_MOBILE_GRID&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_MOBILE_GRID)},bizagi.util.isNativeHeaderEnabled=function(){return"undefined"!=typeof NATIVE_HEADER_ENABLE&&!0===bizagi.util.parseBoolean(NATIVE_HEADER_ENABLE)},bizagi.util.isQuickSearchEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_QUICK_SEARCH&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_QUICK_SEARCH)},bizagi.util.isOAuth2Enabled=function(){return"undefined"!=typeof BIZAGI_AUTH_TYPE&&"OAuth"===BIZAGI_AUTH_TYPE},bizagi.util.getNativeComponent=function(){return"undefined"!=typeof BIZAGI_NATIVE_COMPONENT?BIZAGI_NATIVE_COMPONENT:""},bizagi.util.isVersionSupported=function(){var e=!0;if("undefined"!=typeof BIZAGI_SERVER_VERSION&&!bizagi.util.isEmpty(BIZAGI_SERVER_VERSION)){var t=BIZAGI_SERVER_VERSION.match(/\d+\.\d+/);e=!t||parseFloat(t.shift())>=11}return e},bizagi.util.isCordovaSupported=function(){return"undefined"!=typeof cordova},bizagi.util.isNativePluginSupported=function(){return"undefined"!=typeof bizagiapp},bizagi.util.isTabletNativeSupported=function(){return"undefined"!=typeof bizagiapp&&bizagi.util.isTabletDevice()},bizagi.util.isSmartphoneNativeSupported=function(){return"undefined"!=typeof bizagiapp&&bizagi.util.isSmartphoneDevice()},bizagi.util.isNativePluginSupported()&&window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),bizagi.util.detectRealDevice=function(){var e="undefined"==typeof BIZAGI_DEFAULT_DEVICE||bizagi.util.isEmpty(BIZAGI_DEFAULT_DEVICE)?null:BIZAGI_DEFAULT_DEVICE;BIZAGI_DEFAULT_DEVICE="";var t=bizagi.detectDevice();return BIZAGI_DEFAULT_DEVICE=e,t},bizagi.util.isAndroid=function(){return navigator.userAgent.toLowerCase().indexOf("android")>-1},bizagi.util.isAndroidDevice=function(){return bizagi.util.detectDevice().indexOf("android")>-1},bizagi.util.isiOSDevice=function(){return-1===bizagi.util.detectDevice().indexOf("android")},bizagi.util.getChannelType=function(){return"undefined"==typeof BIZAGI_SERVER_CHANNEL||bizagi.util.isEmpty(BIZAGI_SERVER_CHANNEL)?bizagi.loader.channel||"":BIZAGI_SERVER_CHANNEL},bizagi.util.isDataUrl=function(e){try{return!!e.toString().match(/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i)}catch(e){}return!1},bizagi.util.getDataUrl=function(e){var t;try{if(void 0===e.value||bizagi.util.isEmpty(e.value))t=e.url||"";else{var i=e.value,n=i.value||i;if(Array.isArray(n)){var a=n.shift();t=Array.isArray(a)?a.join(""):a}else t=n}(t=bizagi.util.isEmpty(t)?"":"data:image/png;base64,"+t.replace(/^data:.*;base64,/,""))&&-1!==t.indexOf("Invalid case id")&&(t="")}catch(e){t=""}return t},bizagi.util.processFailMessage=function(e){var t=e||{};try{t=(t="string"==typeof t?JSON.parse(t):t).responseText||t.message||t}catch(i){t=e}return t};var tmp_block_header="<div class='blockHeaderByLiveProcess'></div>";bizagi.util.disableWorkPortalMenu=function(){var e=$("body").find("#ui-bizagi-wp-menu").height();$(tmp_block_header).prependTo("body"),$("body").find(".blockHeaderByLiveProcess").css({position:"absolute",width:"100%",height:e+"px",background:"gray",opacity:"0.9","z-index":"101"})},bizagi.util.enableWorkPortalMenu=function(){$("body").find(".blockHeaderByLiveProcess").detach()},bizagi.util.downloadFile=function(e,t){var i=window.navigator.userAgent.indexOf("MSIE "),n="";if(t)n=e;else{var a=e.split("/");n=window.location.href.split("#")[0]+a.slice(a.indexOf("Api"),a.length).join("/")}bizagi.util.isEdge()||i>0||navigator.userAgent.match(/Trident.*rv\:11\./)?0===$("#iframe-download").length?$("<iframe/>").attr({src:n,style:"visibility:hidden;display:none",id:"iframe-download"}).appendTo("body"):$("#iframe-download").attr("src",n):window.open(n)},bizagi.util.executeActionRoutingFromWorkportal=function(e,t){bizagi.workportal.controllers.menu.prototype.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:e,idWorkItem:t})},bizagi.util.getMessageFromNetworkState=function(e){return e?bizagi.localization.getResource("render-without-globalform-offline-userOnline","The case has been created successfully, please wait until the server synchronizes"):bizagi.localization.getResource("render-without-globalform-offline","Your offline case has been created successfully. It will synchronized as soon as you go online.")},bizagi.util.sanitizeHTML=function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML},bizagi.util.arrayUnique=function(e){for(var t=e.concat(),i=0,n=t.length;i<n;++i)for(var a=i+1;a<n;++a)t[i]===t[a]&&t.splice(a-=1,1);return t},bizagi.util.debounce=function(e,t,i){var n;return function(){var a=this,r=arguments,o=i&&!n;clearTimeout(n),n=setTimeout(function(){n=null,i||e.apply(a,r)},t),o&&e.apply(a,r)}},bizagi.util.isNativeImageEditorSupported=function(){return bizagi.util.isNativePluginSupported()&&bizagi.util.isiOSDevice()&&bizagi.override.enableImageEditor},bizagi.util.errorMessage=function(e){return'<div class="admin-stakeholder-message"> <i class="bz-wp-empty__img"></i> <p class="bz-wp-empty__info bz-wp-empty__info--first"> '+e+"</p></div>"},bizagi.util.validateUrlWellFormed=function(e){if(/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(e)){return/^((http|https):\/\/)/.test(e)||(e="http://"+e),e}return null},bizagi.util.decodedDisplayValue=function(e){var t=e||"",i="";"string"==typeof t&&(i=(i=(i=(i=(i=(i=bizagi.util.decodeURI(t).replaceAll("&","&amp;")).replaceAll("$","&#36;")).replaceAll("<","&lt;").replaceAll(">","&gt;")).replaceAll('"',"&#34;").replaceAll("'","&#39;").replaceAll("/","&#47;")).replaceAll("\\n","<br/>")).replaceAll("\n","<br/>"));return i},bizagi.util.setCaretPosition=function(e,t){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}},bizagi.util.getCaretPosition=function(e){var t=0;if(document.selection){e.focus();var i=document.selection.createRange();i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t},bizagi.util.escapeRegex=function(e){return(e=e||"").replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},bizagi.util.getFeatureObject=function(e){var t=e.split(".");return this.featureObjectCache=this.featureObjectCache||{},e in this.featureObjectCache?this.featureObjectCache[e]:this.featureObjectCache[e]=function(t){var i=bizagi.util.getConfigFeatures();if("string"==typeof e&&void 0!==i){for(var n=i,a=0,r=t.length;a<r;a++)if(void 0===(n=n[t[a]]))return;return n}}(t)},bizagi.util.getConfigFeatures=function(){var e=window.bizagiConfig||bizagiConfig||{};return bizagi.util.isMobileDevice()&&"undefined"!=typeof BIZAGI_MOBILE_FEATURES&&!bizagi.util.isEmpty(BIZAGI_MOBILE_FEATURES)&&(e.features=JSON.parse(BIZAGI_MOBILE_FEATURES||"{}")),e.features},bizagi.util.resetConfigFeatures=function(){bizagi.util.featureObjectCache=void 0},bizagi.util.isFailResponse=function(e){return e&&(e.type&&"error"===e.type||e.status&&"error"===e.status||e.code&&"UNKNOWN_ERROR"===e.code)},bizagi.util.formatItem=function(e){if(null!=e){if($.isArray(e)){for(var t=0,i=e.length;t<i;t++)null!=e[t]&&"boolean"==typeof e[t]&&(!0===bizagi.util.parseBoolean(e[t])?e[t]=bizagi.localization.getResource("render-boolean-yes"):!1===bizagi.util.parseBoolean(e[t])&&(e[t]=bizagi.localization.getResource("render-boolean-no"))),e[t]=bizagi.util.sanitizeHTML(e[t]);return e.join(" - ")}return bizagi.util.sanitizeHTML(e)}return""},bizagi.util.highlightMatches=function(e,t){var i;switch(typeof e.value){case"number":i=e.value;break;case"object":i=bizagi.util.formatItem(e.value);break;case"string":var n=bizagi.util.escapeRegex(t).replaceAll("%",""),a=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+n+")(?![^<>]*>)(?![^&;]+;)","gi");i=bizagi.util.sanitizeHTML(e.value).replace(a,"<strong>$1</strong>");break;default:i=e.value}return i},bizagi.util.getDesktopResolution=function(){var e="",t=1,i=window.screen.width,n=window.screen.height;return"deviceXDPI"in screen?t=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in window&&(t=window.devicePixelRatio),t=Number(t.toFixed(3)),i&&i>0&&n&&n>0&&(e=i*t+"x"+n*t),e},bizagi.util.getDeviceCode=function(){return bizagi.util.isMobileDevice()?"undefined"==typeof BIZAGI_DEVICE_MARKET_NAME||bizagi.util.isEmpty(BIZAGI_DEVICE_MARKET_NAME)?"":BIZAGI_DEVICE_MARKET_NAME:bizagi.util.getDesktopResolution()},bizagi.util.normalizeType=function(e){return void 0===e?e:e.replace(/smartphone/,"").replace(/tablet/,"").replace(/offline/,"")},bizagi.util.hideOrShowXToCloseDialog=function(e,t){var i=".ui-dialog-titlebar-close";t?$(i,e).show():$(i,e).hide()},bizagi.util.isEnableFeature=function(e){return!1!==bizagi.features[e]},function(e){var t=function(e,i){return null===e.parentNode?i:t(e.parentNode,i.concat([e]))},i=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},n=function(e){return/(auto|scroll)/.test(i(t=e,"overflow")+i(t,"overflow-y")+i(t,"overflow-x"));var t};e.scrollerParent=function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=t(e.parentNode,[]),a=0;a<i.length;a+=1)if(n(i[a]))return i[a];return document.scrollingElement||document.documentElement}}}(jQuery),bizagi.util.startkendo=function(e){void 0===bizagi.kendoMobileApplication?(bizagi.kendoMobileApplication=new kendo.mobile.Application($("body"),{skin:"flat",browserHistory:!1,init:function(t){kendo.ui.progress($(".km-flat"),!0),e.started&&e.started()}}),bizagi.kendoMobileApplication.bizagiNavigate=function(e,t){this.navigate(e,t)}):e.started&&e.started()},bizagi.util.isSharepointContext=function(){return"undefined"!=typeof BIZAGI_SHAREPOINT_CONTEXT&&!0===bizagi.util.parseBoolean(BIZAGI_SHAREPOINT_CONTEXT)},bizagi.util.isEmptyValue=function(e){if(0===e)return!1;if(null==e||""===e)return!0;if("Array"==typeof e)return 0===e.length;if("[object Array]"===Object.prototype.toString.apply(e))return 0===e.length;if("[object Object]"===Object.prototype.toString.apply(e)){for(var t in e)if(e.hasOwnProperty(t)&&!bizagi.util.isEmptyValue(e[t]))return!1;return!0}return!1};var TableauController=function(e,t){var i=new GlobalsTableau,n=new UITableau(i);return _bizagiTableau=new BizagiTableau(i,n,e),{init:function(){bizagi.resourceDefinitionLocation={es:bizagi.loader.getResource("l10n","bizagi.tableau.resources.es"),en:bizagi.loader.getResource("l10n","bizagi.tableau.resources.en"),default:bizagi.loader.getResource("l10n","bizagi.tableau.resources.en")},bizagi.localization=new bizagi.l10n(bizagi.resourceDefinitionLocation),bizagi.localization.enableCustomizations=!1,bizagi.localization.setLanguage(t),$.when(bizagi.localization.readyDeferred).done(function(){bizagi.templateService=new bizagi.templates.services.service(bizagi.localization),n.renderTmpl("bizagi.connector.tableau.invalid",function(){_bizagiTableau.buildConnector()})})}}},UITableau=function(e){var t=e;function i(e,i){$("#nextButton").click(e),$("#tableau-uploadConfiguration").change(function(){var e=this.files[0];if(e){var t=new FileReader;t.onload=function(e){var t,i,n=e.target.result;if("{}"!==n)try{var a=JSON.parse(n);!function(e){var t=Object.keys(e);if(2!==t.length)throw"invalid configuration";if("entities"!==t[0]||"processes"!==t[1])throw"invalid configuration"}(a),document.getElementById("tableau-alert-error").style.display="none",c(a)}catch(e){t=bizagi.localization.dictionary["tableau-error-invalid-file"],(i=document.getElementById("tableau-alert-error")).style.removeProperty("display"),i.getElementsByClassName("tableau-alert-message")[0].innerText=t}},t.readAsText(e)}}),$("#importButton").click(function(){var e=document.getElementById("tableau-uploadConfiguration");e.click()});var a=document.getElementById("tableau-entity-tree");if(0===t.entities.length)return n("importButton"),n("nextButton"),void(document.getElementById("emptyEntityList").style.display="block");for(var r=0;r<t.entities.length;r++){var o=document.createElement("li"),d=t.entities[r],g=l(d.name,d.name,!0,!1,r);if(o.className="parent-node",o.appendChild(u("btn-"+d.name)),o.appendChild(g),d.attribs&&d.attribs.length>0){var p=document.createElement("ul"),h=document.createElement("div");h.id="container-nodes-"+d.name,h.className="tableau-collapsed",s(d,h),p.appendChild(h),o.appendChild(p)}a.appendChild(o)}i&&c()}function n(e){document.getElementById(e).disabled=!0}function a(e,t){$("#tableau-content").empty(),bizagi.templateService.getTemplate(bizagi.getTemplate(e)).done(function(e){$.tmpl(e,{whiteLogo:("release"===BIZAGI_ENVIRONMENT?"jquery/production/"+bizagi.loader.build+"/desktop/css/":"jquery/tableau/css/")+"images/logotype-bizagi-white.png",blackLogo:("release"===BIZAGI_ENVIRONMENT?"jquery/production/"+bizagi.loader.build+"/desktop/css/":"jquery/tableau/css/")+"images/logotype-bizagi-black.png"}).appendTo("#tableau-content"),void 0!==t&&"function"==typeof t&&t()})}function r(e,i){$("#nextButton").click(e),$("#backButton").click(i);for(var n=document.getElementById("tableau-entity-process-body"),a=Object.keys(t.processByEntity),r=0;r<a.length;r++){var s=t.entities[a[r]],l=document.createElement("tr"),u=document.createElement("td"),c=document.createElement("td");u.className="bz-table__cell",u.innerText=s.name,c.appendChild(o(a[r])),l.appendChild(u),l.appendChild(c),n.appendChild(l)}}function o(e){var i=document.createElement("select"),n=t.entities[e],a=t.processByEntity[e];i.className="bz-select",i.onchange=function(){t.processByEntity[e]=this.value};for(var r=0;r<n.processesRelated.length;r++){var o=document.createElement("option");o.className="bz-option",o.innerText=n.processesRelated[r].displayName,o.value=n.processesRelated[r].id,i.appendChild(o)}return i.value=a,i}function s(e,t){for(var i=0;i<e.attribs.length;i++){var n,a,r=e.attribs[i],o=e.name+"."+r.name,s=1===r.xpaths.length||-1===r.id;if(e.isProcessEntity&&-1===r.id)for(var c=0;c<r.xpaths.length;c++){var d=r.xpaths[c].value,g=e.name+"."+d;"@workitems"!==d.toLowerCase()&&(n=document.createElement("li"),a=l(g,d,!1,s),n.appendChild(a),t.appendChild(n))}else if(-1!==r.id){if(a=l(o,r.name,!1,s),n=document.createElement("li"),s||n.appendChild(u("btn-"+o)),n.appendChild(a),!s){var p=document.createElement("ul"),h=document.createElement("div");n.className="parent-node",h.id="container-nodes-"+o,h.className="tableau-collapsed";for(c=1;c<r.xpaths.length;c++){d=r.xpaths[c].value.split(".")[1];var f=document.createElement("li");g=o+"."+d;f.appendChild(l(g,d,!1,!0)),h.appendChild(f),p.appendChild(h)}n.appendChild(p)}t.appendChild(n)}}}function l(e,i,n,a,r){n||(n=!1),a||(a=!1);var o=document.createElement("div"),s=document.createElement("input"),l=document.createElement("label");return o.id=e,o.className="bz-checkbox",o.setAttribute("bz-root",n),o.setAttribute("bz-leaf",a),n&&o.setAttribute("bz-index",r),s.className="bz-checkbox__input",l.className="bz-checkbox__label",s.type="checkbox",l.innerText=i,o.onclick=function(){var e=this.getElementsByClassName("bz-checkbox__input")[0],i=this.parentElement.getElementsByTagName("ul"),n=[],a=this.id.split(".")[0],r=document.getElementById(a).getAttribute("bz-index"),o=this.id.substring(0,this.id.length-this.innerText.length-1);if(i.length>0&&(n=i[0].getElementsByClassName("bz-checkbox__input")),null===e.getAttribute("checked")){for(var s=this.id.split("."),l="",u=0;u<s.length;u++){l+=s[u],(c=document.getElementById(l)).getElementsByClassName("bz-checkbox__input")[0].setAttribute("checked","checked"),"true"!=c.getAttribute("bz-root")&&(t.selectedEntities[r]||(t.selectedEntities[r]={}),t.selectedEntities[r][c.id]=1),l+="."}for(u=0;u<n.length;u++){var c=n[u].parentElement;n[u].setAttribute("checked","checked"),"true"!=c.getAttribute("bz-root")&&(t.selectedEntities[r]||(t.selectedEntities[r]={}),t.selectedEntities[r][c.id]=1)}}else{e.removeAttribute("checked"),delete t.selectedEntities[r][this.id];for(u=0;u<n.length;u++){l=n[u].parentElement.id;n[u].removeAttribute("checked"),delete t.selectedEntities[r][l]}"true"==this.getAttribute("bz-root")?delete t.selectedEntities[r]:function(e,i,n){var a=document.getElementById(i),r=a.parentElement.getElementsByTagName("ul"),o=[];r.length>0&&(o=r[0].getElementsByClassName("bz-checkbox__input"));for(var s=!1,l=0;l<o.length;l++){if(null!=o[l].getAttribute("checked")){s=!1;break}s=!0}s&&(a.getElementsByClassName("bz-checkbox__input")[0].removeAttribute("checked"),"true"==a.getAttribute("bz-root")?delete t.selectedEntities[n]:delete t.selectedEntities[n][a.id]);if(e!==i&&0===Object.keys(t.selectedEntities[n]).length){var u=document.getElementById(e);u.getElementsByClassName("bz-checkbox__input")[0].removeAttribute("checked"),delete t.selectedEntities[n]}}(a,o,r)}},o.appendChild(s),o.appendChild(l),o}function u(e){var t=document.createElement("button");return t.className="bz-btn bz-btn--s tableau-node-expand",t.innerText="+",t.id=e,t.onclick=function(){var e=this.id.substring(4,this.id.length),t=document.getElementById("container-nodes-"+e);t&&("tableau-collapsed"===t.className?(t.className="",this.innerText="-"):(t.className="tableau-collapsed",this.innerText="+"))},t}function c(e){e||(e={entities:t.selectedEntities,processes:t.processByEntity});for(var i=Object.keys(t.selectedEntities),n=0;n<i.length;n++){var a=Object.keys(t.selectedEntities[i[n]]),r=a[0].split(".")[0];(l=document.getElementById(r)).getElementsByClassName("bz-checkbox__input")[0].removeAttribute("checked");for(var o=0;o<a.length;o++){document.getElementById(a[o]).getElementsByClassName("bz-checkbox__input")[0].removeAttribute("checked")}}t.selectedEntities={},t.processByEntity={};var s=Object.keys(e.entities);for(n=0;n<s.length;n++){var l,u=Object.keys(e.entities[s[n]]);r=u[0].split(".")[0];if(l=document.getElementById(r)){var c=l.getAttribute("bz-index");l.getElementsByClassName("bz-checkbox__input")[0].setAttribute("checked","checked"),e.processes[s[n]]&&(t.processByEntity[c]=e.processes[s[n]]);for(o=0;o<u.length;o++){var d=document.getElementById(u[o]);d&&(d.getElementsByClassName("bz-checkbox__input")[0].setAttribute("checked","checked"),t.selectedEntities[c]||(t.selectedEntities[c]={}),t.selectedEntities[c][d.id]=1)}}}}return{loadTreeView:i,loadEntityProcessTable:r,loadResumeConfiguration:function e(n,o){$("#submitButton").click(n),$("#backButton").click(function(){var s=a.bind(this,"bizagi.connector.tableau.tree",i.bind(this,o,!0));if(0===Object.keys(t.processByEntity).length)s();else{var l=a.bind(this,"bizagi.connector.tableau.export",e.bind(this,n,o));a("bizagi.connector.tableau.processTable",r.bind(this,l,s))}});var s={entities:t.selectedEntities,processes:t.processByEntity};$("#selectConfiguration").click(function(){var e=document.createRange();e.selectNode(document.getElementById("tableau-container-configuration")),window.getSelection().removeAllRanges(),window.getSelection().addRange(e)}),document.getElementById("tableau-container-configuration").innerText=JSON.stringify(s,null,2)},showFailedConnectionMessage:function(){$("#form-client-id").addClass("bz-form-item--error"),$("#form-client-secret").addClass("bz-form-item--error"),document.getElementById("authButton").disabled=!1},disableBtn:n,renderTmpl:a}},BizagiTableau=function(e,t,i){var n,a=i,r=new UtilsTableau,o=e,s=t;function l(e,t){s.disableBtn("authButton"),r.setConnectionDataProp("globals","url",a,!0),r.setAuthData("clientId",e),r.setAuthData("clientSecret",t),b(m)}function u(){s.disableBtn("nextButton");for(var e=o.selectedEntities,t=Object.keys(e),i=!1,n=0;n<t.length;n++){for(var a=o.entities[t[n]],r=Object.keys(e[t[n]]),l=!1,d=0;d<r.length;d++)-1!==r[d].indexOf("@")&&(l=!0,i=!0);l&&!o.processByEntity[t[n]]?o.processByEntity[t[n]]=a.processesRelated[0].id:l||delete o.processByEntity[t[n]]}var g=Object.keys(o.processByEntity);for(n=0;n<g.length;n++){(a=o.selectedEntities[g[n]])||delete o.processByEntity[g[n]]}var p=s.renderTmpl.bind(this,"bizagi.connector.tableau.tree",s.loadTreeView.bind(this,u,!0)),h=s.renderTmpl.bind(this,"bizagi.connector.tableau.export",s.loadResumeConfiguration.bind(this,c,u));i?s.renderTmpl("bizagi.connector.tableau.processTable",s.loadEntityProcessTable.bind(this,h,p)):h()}function c(){for(var e=Object.keys(o.selectedEntities),t=0;t<e.length;t++){var i=o.entities[e[t]],n=Object.keys(o.selectedEntities[e[t]]),a=[],s=null,l=!1;a.push("BizagiId");for(var u=0;u<n.length;u++)a.push(n[u].substring(i.name.length+1,n[u].length)),-1!==n[u].indexOf("@")&&(l=!0,showNextStep=!0);l&&(s=o.processByEntity[e[t]]),r.setConnectionDataProp("entities",i.name,{entityIndex:e[t],queryByProcess:l,processId:s,attribs:a})}tableau.submit()}function d(e){for(var t=r.getConnectionData().entities,i=Object.keys(t),n=[],a="",o=0;o<i.length;o++)a=y(i[o]),n.push({id:a,alias:a,columns:g(t[i[o]].attribs)});e(n)}function g(e){for(var t=[],i=0;i<e.length;i++)t.push({id:y(e[i]),dataType:tableau.dataTypeEnum.string});return t}function p(e,t,i){i||(i=0);var n=r.getConnectionData(),a=e.tableInfo.id,s=n.entities[a],l=s.attribs,u=n.globals.url+"/odata/query/executeEntityQuery",c={queryParameter:{entity:a,xpaths:[]}};s.queryByProcess&&(c.queryParameter.processId=s.processId);for(var d=0;d<l.length;d++)"BizagiId"!==l[d]&&c.queryParameter.xpaths.push({xpath:l[d]});o.dataRows=[];var g=$.Deferred();f({url:u+"?$top="+r.ITEMS_PAGE,table:e,bodyRequest:c,deferred:g}),$.when(g).done(function(i){for(var n,a,s,l,d=r.calculateNumOfPages(i)-1,g=(n=e,a=t,s=d,l=0,function(){if(0===s||s===++l)return n.appendRows(o.dataRows),a()}),p=1;p<=d;p++){var f="?$skip="+p*r.ITEMS_PAGE+"&$top="+r.ITEMS_PAGE;h({url:u+f,table:e,bodyRequest:c,doneCallback:g})}0===d&&g()}).fail(function(n){v(n,i+1,p.bind(this,e,t,i+1))})}function h(e,t){t||(t=0);var i=$.Deferred();e.deferred=i,f(e),$.when(i).done(function(){e.doneCallback()}).fail(function(i){v(i,t+1,h.bind(this,e,t+1))})}function f(e){var t=r.getConnectionData(),i=r.getAuthData(),n=e.table.tableInfo.id,a=t.entities[n].attribs;$.ajax({type:"POST",url:e.url,dataType:"json",data:e.bodyRequest,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+i.accessToken)},success:function(t){for(var i=t.value,n=0;n<i.length;n++){for(var r={},s=0;s<a.length;s++){var l=y(a[s]),u=a[s];if("@"===u[0])u=u[1].toLowerCase()+(u=u.substring(2,u.length));r[l]=i[n][u]}o.dataRows.push(r)}i.length>0?(tableau.reportProgress("Bizagi status: "+o.dataRows.length+" of "+t["@odata.totalCount"]+" records"),e.deferred.resolve(t["@odata.totalCount"])):e.deferred.resolve(0)},error:function(t){e.deferred.reject(t)}})}function b(e){var t=r.getConnectionData(),i=r.getAuthData();$.ajax({type:"POST",url:t.globals.url+"/oauth2/server/token",contentType:"application/x-www-form-urlencoded",data:"grant_type=client_credentials&scope=api",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+btoa(i.clientId+":"+i.clientSecret))},success:function(t){t.access_token?(r.setAuthData("accessToken",t.access_token),void 0!==e&&"function"==typeof e&&e()):(s.showFailedConnectionMessage(),tableau.log("Bizagi Error: "+JSON.stringify(t)),tableau.abortForAuth("Bizagi Error: Wrong credentials"))},error:function(e){s.showFailedConnectionMessage(),tableau.log("Bizagi Error: "+JSON.stringify(e)),401===e.status?tableau.abortForAuth("Bizagi Error: Wrong credentials"):tableau.abortWithError("Bizagi Error: See log for details")}})}function m(e){e||(e=0);var t=r.getConnectionData(),i=r.getAuthData();$.ajax({type:"GET",url:t.globals.url+"/odata/query/entity",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+i.accessToken)},success:function(e){var t=e.value;t.length>0&&(o.entities=t),s.renderTmpl("bizagi.connector.tableau.tree",s.loadTreeView.bind(this,u))},error:function(t){v(t,e+1,m.bind(this,e+1))}})}function v(e,t,i){if(console.log(t),401===e.status&&t<3)b(i);else{tableau.log("Bizagi Retry Error: "+JSON.stringify(e)),tableau.log("Number of retries: "+t);var n=e.responseJSON?e.responseJSON.message:"See log for details";tableau.abortWithError("Bizagi Error: "+n)}}function y(e){return e.replace(/ /g,"_").replace(/"/g,"_doublequote_").replace(/,/g,"_comma_").replace(/=/g,"_equal_").replace(/\//g,"_fslash_").replace(/-/g,"_dash_").replace(/\./g,"_dot_").replace(/[^A-Za-z0-9_]/g,"_")}return{buildConnector:function(){if((n=tableau.makeConnector()).getSchema=d,n.getData=p,n.init=function(e){s.renderTmpl("bizagi.connector.tableau.login",function(){if("gatherData"!==tableau.phase&&tableau.connectionData&&r.getConnectionData().globals.url===a&&tableau.password){var e=r.getAuthData();$("#clientId").val(e.clientId),$("#clientSecret").val(e.clientSecret),l($("#clientId").val(),$("#clientSecret").val())}$("#authButton").click(function(){l($("#clientId").val(),$("#clientSecret").val())})}),e()},tableau.registerConnector(n),window.tableauVersionBootstrap&&window._tableau.triggerInitialization(),!window.tableauVersionBootstrap){var e=window.document.createEvent("Event");e.initEvent("DOMContentLoaded",!0,!0),window.document.dispatchEvent(e)}},connect:l}},UtilsTableau=function(){var e=100;function t(){try{return JSON.parse(tableau.connectionData)}catch(e){tableau.log("Error parsing connection data: "+e),tableau.abortWithError("Bizagi Error: problem parsing connection data. See log for details.")}}function i(){try{return JSON.parse(tableau.password)}catch(e){tableau.log("Error parsing auth data: "+e),tableau.abortWithError("Bizagi Error: problem parsing authentication data. See log for details.")}}return{setAuthData:function(e,t){var n={clientId:"",clientSecret:"",accessToken:""};tableau.password&&(n=i()),n[e]=t,tableau.password=JSON.stringify(n)},setConnectionDataProp:function(e,i,n,a){a||(a=!1);var r={globals:{},entities:{}};tableau.connectionData&&!a&&(r=t()),i||n?i?r[e][i]=n:r[e]=n:r[e]={},tableau.connectionData=JSON.stringify(r)},calculateNumOfPages:function(t){var i=Math.floor(t/e);return t%e>0&&i++,i},getConnectionData:t,getAuthData:i,ITEMS_PAGE:e}},GlobalsTableau=function(){return{entities:[],selectedEntities:{},dataRows:[],processByEntity:{}}};!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){i(20).init()},function(e,t,i){function n(){var e=o.get(a);return e&&0!==e.length?e.split(r):[]}var a="wdc_approved_origins",r=",",o=i(9);e.exports.addApprovedOrigin=function(e){if(e){var t=n();t.push(e),i=t.join(r),console.log("Saving approved origins '"+i+"'"),o.set(a,i)}var i},e.exports.getApprovedOrigins=n},function(e,t){var i={phaseEnum:{interactivePhase:"interactive",authPhase:"auth",gatherDataPhase:"gatherData"},authPurposeEnum:{ephemeral:"ephemeral",enduring:"enduring"},authTypeEnum:{none:"none",basic:"basic",custom:"custom"},dataTypeEnum:{bool:"bool",date:"date",datetime:"datetime",float:"float",int:"int",string:"string",geometry:"geometry"},columnRoleEnum:{dimension:"dimension",measure:"measure"},columnTypeEnum:{continuous:"continuous",discrete:"discrete"},aggTypeEnum:{sum:"sum",avg:"avg",median:"median",count:"count",countd:"count_dist"},geographicRoleEnum:{area_code:"area_code",cbsa_msa:"cbsa_msa",city:"city",congressional_district:"congressional_district",country_region:"country_region",county:"county",state_province:"state_province",zip_code_postcode:"zip_code_postcode",latitude:"latitude",longitude:"longitude"},unitsFormatEnum:{thousands:"thousands",millions:"millions",billions_english:"billions_english",billions_standard:"billions_standard"},numberFormatEnum:{number:"number",currency:"currency",scientific:"scientific",percentage:"percentage"},localeEnum:{america:"en-us",brazil:"pt-br",china:"zh-cn",france:"fr-fr",germany:"de-de",japan:"ja-jp",korea:"ko-kr",spain:"es-es"},joinEnum:{inner:"inner",left:"left"}};e.exports.apply=function(e){for(var t in i)e[t]=i[t]}},function(e,t){function i(e){this.nativeApiRootObj=e,this._initPublicInterface(),this._initPrivateInterface()}i.prototype._initPublicInterface=function(){console.log("Initializing public interface for NativeDispatcher"),this._submitCalled=!1;var e={};e.abortForAuth=this._abortForAuth.bind(this),e.abortWithError=this._abortWithError.bind(this),e.addCrossOriginException=this._addCrossOriginException.bind(this),e.log=this._log.bind(this),e.submit=this._submit.bind(this),e.reportProgress=this._reportProgress.bind(this),this.publicInterface=e},i.prototype._abortForAuth=function(e){this.nativeApiRootObj.WDCBridge_Api_abortForAuth.api(e)},i.prototype._abortWithError=function(e){this.nativeApiRootObj.WDCBridge_Api_abortWithError.api(e)},i.prototype._addCrossOriginException=function(e){this.nativeApiRootObj.WDCBridge_Api_addCrossOriginException.api(e)},i.prototype._log=function(e){this.nativeApiRootObj.WDCBridge_Api_log.api(e)},i.prototype._submit=function(){return this._submitCalled?void console.log("submit called more than once"):(this._submitCalled=!0,void this.nativeApiRootObj.WDCBridge_Api_submit.api())},i.prototype._initPrivateInterface=function(){console.log("Initializing private interface for NativeDispatcher"),this._initCallbackCalled=!1,this._shutdownCallbackCalled=!1;var e={};e._initCallback=this._initCallback.bind(this),e._shutdownCallback=this._shutdownCallback.bind(this),e._schemaCallback=this._schemaCallback.bind(this),e._tableDataCallback=this._tableDataCallback.bind(this),e._dataDoneCallback=this._dataDoneCallback.bind(this),this.privateInterface=e},i.prototype._initCallback=function(){return this._initCallbackCalled?void console.log("initCallback called more than once"):(this._initCallbackCalled=!0,void this.nativeApiRootObj.WDCBridge_Api_initCallback.api())},i.prototype._shutdownCallback=function(){return this._shutdownCallbackCalled?void console.log("shutdownCallback called more than once"):(this._shutdownCallbackCalled=!0,void this.nativeApiRootObj.WDCBridge_Api_shutdownCallback.api())},i.prototype._schemaCallback=function(e,t){this.nativeApiRootObj.WDCBridge_Api_schemaCallbackEx?this.nativeApiRootObj.WDCBridge_Api_schemaCallbackEx.api(e,t||[]):this.nativeApiRootObj.WDCBridge_Api_schemaCallback.api(e)},i.prototype._tableDataCallback=function(e,t){this.nativeApiRootObj.WDCBridge_Api_tableDataCallback.api(e,t)},i.prototype._reportProgress=function(e){this.nativeApiRootObj.WDCBridge_Api_reportProgress?this.nativeApiRootObj.WDCBridge_Api_reportProgress.api(e):console.log("reportProgress not available from this Tableau version")},i.prototype._dataDoneCallback=function(){this.nativeApiRootObj.WDCBridge_Api_dataDoneCallback.api()},e.exports=i},function(e,t,i){function n(e,t,i){this.privateApiObj=t,this.globalObj=i,this._hasAlreadyThrownErrorSoDontThrowAgain=!1,this.changeTableauApiObj(e)}var a=i(6),r=i(2);n.prototype.init=function(){console.log("Initializing shared WDC"),this.globalObj.onerror=this._errorHandler.bind(this),this._initTriggerFunctions(),this._initDeprecatedFunctions()},n.prototype.changeTableauApiObj=function(e){this.tableauApiObj=e,this.tableauApiObj.makeConnector=this._makeConnector.bind(this),this.tableauApiObj.registerConnector=this._registerConnector.bind(this),r.apply(this.tableauApiObj)},n.prototype._errorHandler=function(e,t,i,n,a){if(console.error(a),this._hasAlreadyThrownErrorSoDontThrowAgain)return!0;var r=e;if(a?r+="   stack:"+a.stack:(r+="   file: "+t,r+="   line: "+i),!this.tableauApiObj||!this.tableauApiObj.abortWithError)throw r;return this.tableauApiObj.abortWithError(r),this._hasAlreadyThrownErrorSoDontThrowAgain=!0,!0},n.prototype._makeConnector=function(){return{init:function(e){e()},shutdown:function(e){e()}}},n.prototype._registerConnector=function(e){for(var t=["init","shutdown","getSchema","getData"],i=t.length-1;i>=0;i--)if("function"!=typeof e[t[i]])throw"The connector did not define the required function: "+t[i];console.log("Connector registered"),this.globalObj._wdc=e,this._wdc=e},n.prototype._initTriggerFunctions=function(){this.privateApiObj.triggerInitialization=this._triggerInitialization.bind(this),this.privateApiObj.triggerSchemaGathering=this._triggerSchemaGathering.bind(this),this.privateApiObj.triggerDataGathering=this._triggerDataGathering.bind(this),this.privateApiObj.triggerShutdown=this._triggerShutdown.bind(this)},n.prototype._triggerInitialization=function(){this._wdc.init(this.privateApiObj._initCallback)},n.prototype._triggerSchemaGathering=function(){this._wdc.getSchema(this.privateApiObj._schemaCallback)},n.prototype._triggerDataGathering=function(e){if(1!=e.length)throw"Unexpected number of tables specified. Expected 1, actual "+e.length.toString();var t=e[0],i=!!t.filterColumnId,n=new a(t.tableInfo,t.incrementValue,i,t.filterColumnId||"",t.filterValues||[],this.privateApiObj._tableDataCallback);this._wdc.getData(n,this.privateApiObj._dataDoneCallback)},n.prototype._triggerShutdown=function(){this._wdc.shutdown(this.privateApiObj._shutdownCallback)},n.prototype._initDeprecatedFunctions=function(){this.tableauApiObj.initCallback=this._initCallback.bind(this),this.tableauApiObj.headersCallback=this._headersCallback.bind(this),this.tableauApiObj.dataCallback=this._dataCallback.bind(this),this.tableauApiObj.shutdownCallback=this._shutdownCallback.bind(this)},n.prototype._initCallback=function(){this.tableauApiObj.abortWithError("tableau.initCallback has been deprecated in version 2.0.0. Please use the callback function passed to init")},n.prototype._headersCallback=function(e,t){this.tableauApiObj.abortWithError("tableau.headersCallback has been deprecated in version 2.0.0")},n.prototype._dataCallback=function(e,t,i){this.tableauApiObj.abortWithError("tableau.dataCallback has been deprecated in version 2.0.0")},n.prototype._shutdownCallback=function(){this.tableauApiObj.abortWithError("tableau.shutdownCallback has been deprecated in version 2.0.0. Please use the callback function passed to shutdown")},e.exports=n},function(e,t,i){function n(e){this.globalObj=e,this._initMessageHandling(),this._initPublicInterface(),this._initPrivateInterface()}var a=i(1);i(8),n.prototype._initMessageHandling=function(){console.log("Initializing message handling"),this.globalObj.addEventListener("message",this._receiveMessage.bind(this),!1),this.globalObj.document.addEventListener("DOMContentLoaded",this._onDomContentLoaded.bind(this))},n.prototype._onDomContentLoaded=function(){if(this.globalObj.parent!==window&&this.globalObj.parent.postMessage(this._buildMessagePayload("loaded"),"*"),this.globalObj.opener)try{this.globalObj.opener.postMessage(this._buildMessagePayload("loaded"),"*")}catch(e){console.warn("Some versions of IE may not accurately simulate the Web Data Connector. Please retry on a Webkit based browser")}},n.prototype._packagePropertyValues=function(){return{connectionName:this.globalObj.tableau.connectionName,connectionData:this.globalObj.tableau.connectionData,password:this.globalObj.tableau.password,username:this.globalObj.tableau.username,usernameAlias:this.globalObj.tableau.usernameAlias,incrementalExtractColumn:this.globalObj.tableau.incrementalExtractColumn,versionNumber:this.globalObj.tableau.versionNumber,locale:this.globalObj.tableau.locale,authPurpose:this.globalObj.tableau.authPurpose,platformOS:this.globalObj.tableau.platformOS,platformVersion:this.globalObj.tableau.platformVersion,platformEdition:this.globalObj.tableau.platformEdition,platformBuildNumber:this.globalObj.tableau.platformBuildNumber}},n.prototype._applyPropertyValues=function(e){e&&(this.globalObj.tableau.connectionName=e.connectionName,this.globalObj.tableau.connectionData=e.connectionData,this.globalObj.tableau.password=e.password,this.globalObj.tableau.username=e.username,this.globalObj.tableau.usernameAlias=e.usernameAlias,this.globalObj.tableau.incrementalExtractColumn=e.incrementalExtractColumn,this.globalObj.tableau.locale=e.locale,this.globalObj.tableau.language=e.locale,this.globalObj.tableau.authPurpose=e.authPurpose,this.globalObj.tableau.platformOS=e.platformOS,this.globalObj.tableau.platformVersion=e.platformVersion,this.globalObj.tableau.platformEdition=e.platformEdition,this.globalObj.tableau.platformBuildNumber=e.platformBuildNumber)},n.prototype._buildMessagePayload=function(e,t,i){var n={msgName:e,msgData:t,props:i,version:"2.3.1"};return JSON.stringify(n)},n.prototype._sendMessage=function(e,t){var i=this._buildMessagePayload(e,t,this._packagePropertyValues());if(void 0!==this.globalObj.webkit&&void 0!==this.globalObj.webkit.messageHandlers&&void 0!==this.globalObj.webkit.messageHandlers.wdcHandler)this.globalObj.webkit.messageHandlers.wdcHandler.postMessage(i);else{if(!this._sourceWindow)throw"Looks like the WDC is calling a tableau function before tableau.init() has been called.";this._sourceWindow.postMessage(i,this._sourceOrigin)}},n.prototype._getPayloadObj=function(e){var t=null;try{t=JSON.parse(e)}catch(e){return null}return t},n.prototype._getWebSecurityWarningConfirm=function(){var e=this._sourceOrigin,t=new(i(18))(e).host();if(["localhost","tableau.github.io"].indexOf(t)>=0)return!0;if(t&&t.endsWith("online.tableau.com"))return!0;if(a.getApprovedOrigins().indexOf(e)>=0)return console.log("Already approved the origin'"+e+"', not asking again"),!0;var n=this._getLocalizedString("webSecurityWarning"),r=confirm(n+"\n\n"+t+"\n");return r&&a.addApprovedOrigin(e),r},n.prototype._getCurrentLocale=function(){var e=navigator.language||navigator.userLanguage,t=e?e.substring(0,2):"en";return["de","en","es","fr","ja","ko","pt","zh"].indexOf(t)<0&&(t="en"),t},n.prototype._getLocalizedString=function(e){var t=this._getCurrentLocale(),n=i(10),a=i(11),r=i(12),o=i(14);return{de:n,en:a,es:r,fr:i(13),ja:o,ko:i(15),pt:i(16),zh:i(17)}[t][e]},n.prototype._receiveMessage=function(e){if(console.log("Received message!"),!this.globalObj._wdc)throw"No WDC registered. Did you forget to call tableau.registerConnector?";var t=this._getPayloadObj(e.data);if(t){this._sourceWindow||(this._sourceWindow=e.source,this._sourceOrigin=e.origin);var i=t.msgData;switch(this._applyPropertyValues(t.props),t.msgName){case"init":this._getWebSecurityWarningConfirm()?(this.globalObj.tableau.phase=i.phase,this.globalObj._tableau.triggerInitialization()):window.close();break;case"shutdown":this.globalObj._tableau.triggerShutdown();break;case"getSchema":this.globalObj._tableau.triggerSchemaGathering();break;case"getData":this.globalObj._tableau.triggerDataGathering(i.tablesAndIncrementValues)}}},n.prototype._initPublicInterface=function(){console.log("Initializing public interface"),this._submitCalled=!1;var e={};e.abortForAuth=this._abortForAuth.bind(this),e.abortWithError=this._abortWithError.bind(this),e.addCrossOriginException=this._addCrossOriginException.bind(this),e.log=this._log.bind(this),e.reportProgress=this._reportProgress.bind(this),e.submit=this._submit.bind(this),this.publicInterface=e},n.prototype._abortForAuth=function(e){this._sendMessage("abortForAuth",{msg:e})},n.prototype._abortWithError=function(e){this._sendMessage("abortWithError",{errorMsg:e})},n.prototype._addCrossOriginException=function(e){console.log("Cross Origin Exception requested in the simulator. Pretending to work."),setTimeout(function(){this.globalObj._wdc.addCrossOriginExceptionCompleted(e)}.bind(this),0)},n.prototype._log=function(e){this._sendMessage("log",{logMsg:e})},n.prototype._reportProgress=function(e){this._sendMessage("reportProgress",{progressMsg:e})},n.prototype._submit=function(){this._sendMessage("submit")},n.prototype._initPrivateInterface=function(){console.log("Initializing private interface");var e={};e._initCallback=this._initCallback.bind(this),e._shutdownCallback=this._shutdownCallback.bind(this),e._schemaCallback=this._schemaCallback.bind(this),e._tableDataCallback=this._tableDataCallback.bind(this),e._dataDoneCallback=this._dataDoneCallback.bind(this),this.privateInterface=e},n.prototype._initCallback=function(){this._sendMessage("initCallback")},n.prototype._shutdownCallback=function(){this._sendMessage("shutdownCallback")},n.prototype._schemaCallback=function(e,t){this._sendMessage("_schemaCallback",{schema:e,standardConnections:t||[]})},n.prototype._tableDataCallback=function(e,t){this._sendMessage("_tableDataCallback",{tableName:e,data:t})},n.prototype._dataDoneCallback=function(){this._sendMessage("_dataDoneCallback")},e.exports=n},function(e,t){function i(e,t,i,n,a,r){this.tableInfo=e,this.incrementValue=t||"",this.isJoinFiltered=i,this.filterColumnId=n,this.filterValues=a,this._dataCallbackFn=r,this.appendRows=this._appendRows.bind(this)}i.prototype._appendRows=function(e){return e?Array.isArray(e)?void this._dataCallbackFn(this.tableInfo.id,e):void console.warn("Table.appendRows must take an array of arrays or array of objects"):void console.warn("rows data is null or undefined")},e.exports=i},function(e,t){e.exports.copyFunctions=function(e,t){for(var i in e)"function"==typeof e[i]&&(t[i]=e[i])},e.exports.linkObjectProperties=function(e,t,i){i.forEach(function(i){Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:function(){return e[i]},set:function(t){return e[i]=t}})})},e.exports.tableauProperties=["authPurpose","authType","connectionData","connectionName","language","locale","logLevel","password","phase","platformBuildNumber","platformEdition","platformOs","platformVersion","propertiesReady","scriptVersion","username","usernameAlias","APIVersion"]},function(e,t){String.prototype.endsWith||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),t={}.toString,i=function(e){if(null==this)throw TypeError();var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var n=i.length,a=String(e),r=a.length,o=n;if(arguments.length>1){var s=arguments[1];void 0!==s&&((o=s?Number(s):0)!=o&&(o=0))}var l=Math.min(Math.max(o,0),n)-r;if(l<0)return!1;for(var u=-1;++u<r;)if(i.charCodeAt(l+u)!=a.charCodeAt(u))return!1;return!0};e?e(String.prototype,"endsWith",{value:i,configurable:!0,writable:!0}):String.prototype.endsWith=i}()},function(e,t,i){var n;!function(a,r){"use strict";var o=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var t=function(e,i,n){return 1===arguments.length?t.get(e):t.set(e,i,n)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){t._cachedDocumentCookie!==t._document.cookie&&t._renewCache();var i=t._cache[t._cacheKeyPrefix+e];return i===r?r:decodeURIComponent(i)},t.set=function(e,i,n){return(n=t._getExtendedOptions(n)).expires=t._getExpiresDate(i===r?-1:n.expires),t._document.cookie=t._generateCookieString(e,i,n),t},t.expire=function(e,i){return t.set(e,r,i)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&e.secure!==r?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,i){if(i=i||new Date,"number"==typeof e?e=e===1/0?t._maxExpireDate:new Date(i.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,i){var n=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return n+=(i=i||{}).path?";path="+i.path:"",n+=i.domain?";domain="+i.domain:"",(n+=i.expires?";expires="+i.expires.toUTCString():"")+(i.secure?";secure":"")},t._getCacheFromString=function(e){for(var i={},n=e?e.split("; "):[],a=0;a<n.length;a++){var o=t._getKeyValuePairFromCookieString(n[a]);i[t._cacheKeyPrefix+o.key]===r&&(i[t._cacheKeyPrefix+o.key]=o.value)}return i},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var i,n=e.substr(0,t);try{i=decodeURIComponent(n)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+n+'"',e)}return{key:i,value:e.substr(t+1)}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="cookies.js",i="1"===t.set(e,1).get(e);return t.expire(e),i},t.enabled=t._areEnabled(),t},s=a&&"object"==typeof a.document?o(a):o;(n=function(){return s}.call(t,i,t,e))===r||(e.exports=n)}("undefined"==typeof window?this:window)},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"To help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t){e.exports={webSecurityWarning:"wwTo help prevent malicious sites from getting access to your confidential data, confirm that you trust the following site:"}},function(e,t,i){var n;!function(a){function r(e){return e&&(e=e.toString().replace(l.pluses,"%20"),e=decodeURIComponent(e)),e}function o(e){var t,i,n,a,o,s,u,c=[];if(null==e||""===e)return c;for(0===e.indexOf("?")&&(e=e.substring(1)),t=0,u=(i=e.toString().split(l.query_separator)).length;t<u;t++)0!==(a=(n=i[t]).indexOf("="))&&(o=r(n.substring(0,a)),s=r(n.substring(a+1)),c.push(-1===a?[n,null]:[o,s]));return c}function s(e){var t,i,n;this.uriParts=(t=e,i=l.uri_parser.exec(t||""),n={},["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"].forEach(function(e,t){n[e]=i[t]||""}),n),this.queryPairs=o(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var l={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var i,n;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(this),r=a.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),n=0;n<r;){var o;n in a&&(o=a[n],e.call(i,o,n,a)),n++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(e){s.prototype[e]=function(t){return void 0!==t&&(this.uriParts[e]=t),this.uriParts[e]}}),s.prototype.hasAuthorityPrefix=function(e){return void 0!==e&&(this.hasAuthorityPrefixUserPref=e),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},s.prototype.isColonUri=function(e){return void 0===e?!!this.uriParts.isColonUri:void(this.uriParts.isColonUri=!!e)},s.prototype.query=function(e){var t,i,n,a="";for(void 0!==e&&(this.queryPairs=o(e)),t=0,n=this.queryPairs.length;t<n;t++)i=this.queryPairs[t],a.length>0&&(a+="&"),null===i[1]?a+=i[0]:(a+=i[0],a+="=",void 0!==i[1]&&(a+=encodeURIComponent(i[1])));return a.length>0?"?"+a:a},s.prototype.getQueryParamValue=function(e){var t,i,n;for(i=0,n=this.queryPairs.length;i<n;i++)if(e===(t=this.queryPairs[i])[0])return t[1]},s.prototype.getQueryParamValues=function(e){var t,i,n,a=[];for(t=0,n=this.queryPairs.length;t<n;t++)e===(i=this.queryPairs[t])[0]&&a.push(i[1]);return a},s.prototype.deleteQueryParam=function(e,t){var i,n,a,o,s,l=[];for(i=0,s=this.queryPairs.length;i<s;i++)a=r((n=this.queryPairs[i])[0])===r(e),o=n[1]===t,(1!==arguments.length||a)&&(2!==arguments.length||a&&o)||l.push(n);return this.queryPairs=l,this},s.prototype.addQueryParam=function(e,t,i){return 3===arguments.length&&-1!==i?(i=Math.min(i,this.queryPairs.length),this.queryPairs.splice(i,0,[e,t])):arguments.length>0&&this.queryPairs.push([e,t]),this},s.prototype.hasQueryParam=function(e){var t,i=this.queryPairs.length;for(t=0;t<i;t++)if(this.queryPairs[t][0]==e)return!0;return!1},s.prototype.replaceQueryParam=function(e,t,i){var n,a,o=-1,s=this.queryPairs.length;if(3===arguments.length){for(n=0;n<s;n++)if(r((a=this.queryPairs[n])[0])===r(e)&&decodeURIComponent(a[1])===r(i)){o=n;break}o>=0&&this.deleteQueryParam(e,r(i)).addQueryParam(e,t,o)}else{for(n=0;n<s;n++)if(r((a=this.queryPairs[n])[0])===r(e)){o=n;break}this.deleteQueryParam(e),this.addQueryParam(e,t,o)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(e){var t="set"+e.charAt(0).toUpperCase()+e.slice(1);s.prototype[t]=function(t){return this[e](t),this}}),s.prototype.scheme=function(){var e="";return this.protocol()?(e+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(e+=":"),e+="//"):this.hasAuthorityPrefix()&&this.host()&&(e+="//"),e},s.prototype.origin=function(){var e=this.scheme();return this.userInfo()&&this.host()&&(e+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(e+="@")),this.host()&&(e+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(e+=":"+this.port())),e},s.prototype.addTrailingSlash=function(){var e=this.path()||"";return"/"!==e.substr(-1)&&this.path(e+"/"),this},s.prototype.toString=function(){var e,t=this.origin();return this.isColonUri()?this.path()&&(t+=":"+this.path()):this.path()?(e=this.path(),l.ends_with_slashes.test(t)||l.starts_with_slashes.test(e)?(t&&t.replace(l.ends_with_slashes,"/"),e=e.replace(l.starts_with_slashes,"/")):t+="/",t+=e):this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},s.prototype.clone=function(){return new s(this.toString())},void 0===(n=function(){return s}.call(t,i,t,e))||(e.exports=n)}()},function(e,t,i){"use strict";function n(e,t,i){function r(e,t){var n=e[0],r=e[1];s[n]={connect:function(e){return"function"!=typeof e?void console.error("Bad callback given to connect to signal "+n):(s.__objectSignals__[r]=s.__objectSignals__[r]||[],s.__objectSignals__[r].push(e),void(t||"destroyed"===n||i.exec({type:a.connectToSignal,object:s.__id__,signal:r})))},disconnect:function(e){if("function"==typeof e){s.__objectSignals__[r]=s.__objectSignals__[r]||[];var o=s.__objectSignals__[r].indexOf(e);return-1===o?void console.error("Cannot find connection of signal "+n+" to "+e.name):(s.__objectSignals__[r].splice(o,1),void(t||0!==s.__objectSignals__[r].length||i.exec({type:a.disconnectFromSignal,object:s.__id__,signal:r})))}console.error("Bad callback given to disconnect from signal "+n)}}}function o(e,t){var i=s.__objectSignals__[e];i&&i.forEach(function(e){e.apply(e,t)})}this.__id__=e,i.objects[e]=this,this.__objectSignals__={},this.__propertyCache__={};var s=this;for(var e in this.unwrapQObject=function(e){if(e instanceof Array){for(var t=new Array(e.length),a=0;a<e.length;++a)t[a]=s.unwrapQObject(e[a]);return t}if(!e||!e["__QObject*__"]||void 0===e.id)return e;var r=e.id;if(i.objects[r])return i.objects[r];if(e.data){var o=new n(r,e.data,i);return o.destroyed.connect(function(){if(i.objects[r]===o){delete i.objects[r];var e=[];for(var t in o)e.push(t);for(var n in e)delete o[e[n]]}}),o.unwrapProperties(),o}console.error("Cannot unwrap unknown QObject "+r+" without data.")},this.unwrapProperties=function(){for(var e in s.__propertyCache__)s.__propertyCache__[e]=s.unwrapQObject(s.__propertyCache__[e])},this.propertyUpdate=function(e,t){for(var i in t){var n=t[i];s.__propertyCache__[i]=n}for(var a in e)o(a,e[a])},this.signalEmitted=function(e,t){o(e,this.unwrapQObject(t))},t.methods.forEach(function(e){var t=e[0],r=e[1];s[t]=function(){for(var e,t=[],o=0;o<arguments.length;++o){var l=arguments[o];"function"==typeof l?e=l:l instanceof n&&void 0!==i.objects[l.__id__]?t.push({id:l.__id__}):t.push(l)}i.exec({type:a.invokeMethod,object:s.__id__,method:r,args:t},function(t){if(void 0!==t){var i=s.unwrapQObject(t);e&&e(i)}})}}),t.properties.forEach(function(e){var t=e[0],o=e[1],l=e[2];s.__propertyCache__[t]=e[3],l&&(1===l[0]&&(l[0]=o+"Changed"),r(l,!0)),Object.defineProperty(s,o,{configurable:!0,get:function(){var e=s.__propertyCache__[t];return void 0===e&&console.warn('Undefined value in property cache for property "'+o+'" in object '+s.__id__),e},set:function(e){if(void 0!==e){s.__propertyCache__[t]=e;var r=e;r instanceof n&&void 0!==i.objects[r.__id__]&&(r={id:r.__id__}),i.exec({type:a.setProperty,object:s.__id__,property:t,value:r})}else console.warn("Property setter for "+o+" called with undefined value!")}})}),t.signals.forEach(function(e){r(e,!1)}),t.enums)s[e]=t.enums[e]}var a={signal:1,propertyUpdate:2,init:3,idle:4,debug:5,invokeMethod:6,connectToSignal:7,disconnectFromSignal:8,setProperty:9,response:10};e.exports={QWebChannel:function(e,t){if("object"==typeof e&&"function"==typeof e.send){var i=this;this.transport=e,this.send=function(e){"string"!=typeof e&&(e=JSON.stringify(e)),i.transport.send(e)},this.transport.onmessage=function(e){var t=e.data;switch("string"==typeof t&&(t=JSON.parse(t)),t.type){case a.signal:i.handleSignal(t);break;case a.response:i.handleResponse(t);break;case a.propertyUpdate:i.handlePropertyUpdate(t);break;default:console.error("invalid message received:",e.data)}},this.execCallbacks={},this.execId=0,this.exec=function(e,t){return t?(i.execId===Number.MAX_VALUE&&(i.execId=Number.MIN_VALUE),e.hasOwnProperty("id")?void console.error("Cannot exec message with property id: "+JSON.stringify(e)):(e.id=i.execId++,i.execCallbacks[e.id]=t,void i.send(e))):void i.send(e)},this.objects={},this.handleSignal=function(e){var t=i.objects[e.object];t?t.signalEmitted(e.signal,e.args):console.warn("Unhandled signal: "+e.object+"::"+e.signal)},this.handleResponse=function(e){return e.hasOwnProperty("id")?(i.execCallbacks[e.id](e.data),void delete i.execCallbacks[e.id]):void console.error("Invalid response message received: ",JSON.stringify(e))},this.handlePropertyUpdate=function(e){for(var t in e.data){var n=e.data[t],r=i.objects[n.object];r?r.propertyUpdate(n.signals,n.properties):console.warn("Unhandled property update: "+n.object+"::"+n.signal)}i.exec({type:a.idle})},this.debug=function(e){i.send({type:a.debug,data:e})},i.exec({type:a.init},function(e){for(var r in e)new n(r,e[r],i);for(var r in i.objects)i.objects[r].unwrapProperties();t&&t(i),i.exec({type:a.idle})})}else console.error("The QWebChannel expects a transport object with a send function and onmessage callback property. Given is: transport: "+typeof e+", transport.send: "+typeof e.send)}}},function(e,t,i){"use strict";function n(e,t){a.copyFunctions(e.publicInterface,window.tableau),a.copyFunctions(e.privateInterface,window._tableau),t.init()}var a=i(7),r=i(4),o=i(3),s=i(5),l=i(19);e.exports.init=function(){var e=null,t=null;window._tableau={},window.tableauVersionBootstrap?(console.log("Initializing NativeDispatcher, Reporting version number"),window.tableauVersionBootstrap.ReportVersionNumber("2.3.1"),e=new o(window)):window.qt&&window.qt.webChannelTransport?(console.log("Initializing NativeDispatcher for qwebchannel"),window.tableau={},window.channel=new l.QWebChannel(qt.webChannelTransport,function(i){console.log("QWebChannel created successfully"),window._tableau._nativeSetupCompleted=function(){e=new o(i.objects),a.linkObjectProperties(i.objects.tableau,window.tableau,a.tableauProperties),t.changeTableauApiObj(window.tableau),n(e,t)},i.objects.tableauVersionBootstrap.ReportVersionNumber("2.3.1")})):(console.log("Version Bootstrap is not defined, Initializing SimulatorDispatcher"),window.tableau={},e=new s(window)),t=new r(window.tableau,window._tableau,window),e&&n(e,t)}}]);
//# sourceMappingURL=../../../../Maps/desktop/tableau.desktop.production.js.map
