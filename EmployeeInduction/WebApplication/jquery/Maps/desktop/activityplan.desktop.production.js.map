{"version":3,"sources":["jquery/workportal/desktop/widget/project.dashboard.menu.activity.plan/bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.plan.js","jquery/workportal/desktop/widget/project.content.dashboard/bizagi.workportal.desktop.widgets.project.content.dashboard.js","jquery/workportal/desktop/widget/project.activity/bizagi.workportal.desktop.widgets.project.activity.js","jquery/workportal/desktop/widget/project.plan.activity.sidebar/bizagi.workportal.desktop.widgets.project.plan.activity.sidebar.js","jquery/workportal/desktop/widget/project.plan.activity.action/bizagi.workportal.desktop.widgets.project.plan.activity.action.js","jquery/workportal/desktop/widget/project.plan.activity.time/bizagi.workportal.desktop.widgets.project.plan.activity.time.js","jquery/workportal/desktop/widget/project.plan.activity.progress/bizagi.workportal.desktop.widgets.project.plan.activity.progress.js","jquery/workportal/desktop/widget/project.plan.activity.subprocesses/bizagi.workportal.desktop.widgets.project.plan.activity.subprocesses.js","jquery/workportal/desktop/widget/project.plan.activity.parent/bizagi.workportal.desktop.widgets.project.plan.activity.parent.js","jquery/workportal/desktop/widget/project.plan.activity.users/bizagi.workportal.desktop.widgets.project.plan.activity.users.js"],"names":["bizagi","workportal","widgets","widget","extend","init","workportalFacade","dataService","params","self","this","_super","loadTemplates","project-dashboard-menu","getTemplate","concat","renderContent","content","$","postRender","contextsLeftSidebarCaseDashboard","forEach","context","sub","proxy","updateView","event","args","clean","$content","getContent","empty","argsTemplate","showFormOverview","menuDashboard","showFormActivity","showCommentsOptionMenu","showFilesOptionMenu","showTimeLineOptionMenu","showPlanOptionMenu","contextPlanOptionMenu","contextFormActivityOptionMenu","contextualized","plan","render","appendTo","showContextByMenuDashboard","type","toUpperCase","addClass","siblings","removeClass","handlerEvents","paramsGetPlan","idPlan","id","when","callGetPlan","then","responsePlan","pub","loadContentById","preventDefault","$item","target","closest","hasClass","util","autoSave","done","document","data","getLevelNavigator","newLevelNavigator","parseInt","refreshLastItemBreadcrumb","histName","level","defer","Deferred","getPlan","always","response","status","undefined","resolve","reject","promise","subMenuHandler","$comments","$files","$timeline","on","toggle","unsub","off","injector","register","project","dashboard","menu","activity","project-content-dashboard","template","setTimeout","window","trigger","base","project-activity","templateHomeActivity","renderForm","idCase","idWorkitem","idTask","radNumber","withOutGlobalForm","isClosed","belongCurrentUser","hasGlobalForm","parseBoolean","showForm","isOfflineForm","messageForm","renderContainer","runningAndAssignToOtherUser","errorTemplate","message","resources","getResource","getMessageFromNetworkState","online","errorHtml","tmpl","goToInbox","fail","proxyPrefix","serviceLocator","database","rendering","facade","setContext","subscribe","execute","canvas","bind","triggerparams","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","fromTask","fromWorkItemId","formsRenderVersion","onClose","publish","widgetName","cookie","renderingFacade","resizeLayout","click","getWidgetByCookie","serviceloadDataPlan","project-plan-activity-sidebar","onNotifyLoadInfoPlan","parans","idActivitySelected","loadData","getDateServer","loadedWithDataActivities","loadedWithDataFirstParent","unsubscribe","sidebar","notifier","dateFormat","localization","timeFormat","estimatedFinishDateTime","beforeUserAssignedActivity","activity-action-main","activity-action-editionpopup","dialogBox","onNotifyLoadInfoActivityExecution","onNotifyExpandedRightSidebar","currentActivity","activities","filter","idUserCreator","currentUser","idUser","userAssigned","currentActivityName","name","showEditAction","append","initilizeActionMenu","initializeTempleteAndEvents","plugins","activityEdition","initPluginPopupEdition","formEditActivity","assignee","date","duration","buttonCancel","buttonUpdate","onClickPopupButtonCancel","onClickPopupButtonUpdate","onDeleteDate","onTypeDuration","select","onSelectMenu","popupEditActivity","formContent","initializeAutoComplete","element","url","getUrl","autocomplete","minLength","source","request","ajax","domain","userName","fullName","term","organization","pag","pagSize","orderField","success","map","users","item","label","user","value","ui","val","IdAssignee","focus","change","initializeDatePicker","datepicker","onSelect","getTime","dateFormatter","getDateFormatByDatePickerJqueryUI","initializeSpiner","desactivateDateByDuration","newValue","isNumeric","spinner","min","max","placeHolder","spin","keyCode","fieldDurationActive","activateElement","form","currentTarget","find","length","onClickOpenPopupEdition","dialog","resizable","draggable","height","width","modal","title","maximize","open","onOpenPopupEdition","close","onClosePopupEdition","activityDate","isEmpty","estimatedFinishDate","isNaN","formatInvariant","Date","getDateFromInvariant","isMinimumDate","setUserAssignedById","removePopupWidgets","callGetDataUsers","responseUsers","next","html","remove","validateParamsOfFormEditActivity","idUserAssigned","updateActivity","progress","startDate","allowEdition","description","finishDate","items","editActivityPlan","refreshAllWidgets","showSucessMessage","onClickFavorite","favoriteOptions","idObject","favoriteType","addFavorite","favoritesData","guidFavorite","idFavorites","delFavorite","messageValidationField","replace","toLowerCase","csvIdUsers","userIds","getUsersData","EXECUTING_ACTIVITY","FINISHED_ACTIVITY","datePickerRegional","plan-time-main","onNotifyLoadInfoActivitySummary","getStateActivity","time","fromDate","getFormattedDate","getFirstDate","dataProgressWidget","getDataByScenarios","unitTime","auxUnitTime","updateWidget","contentTemplate","relativeTime","getRelativeTime","now","minutes","messageDescripionDifference","keywordResource","messageTime","$barRemainingDate","widthNumberDays","css","toString","percentBar","currentState","colorBar","getColorByCreatedAndEstimatedDate","toDate","callGetEffectiveDuration","getColorBar","getPercentBar","getKeywordResourceDescriptionBar","getUnitTime","getUTCDate","dateObj","monthNames","getMonth","formatDate","d","getEffectiveDuration","plan-progress-main","plan-progress-popup-edit","onNotifyUpdateItemFromRender","activityToShow","valuePercentBarComplete","canEdit","popupEditProgress","initPluginPopupEditProgress","formEditProgress","sliderProgress","slider","orientation","range","from","to","step","slide","onChangesliderProgress","each","vals","i","el","numericTextBoxPlugin","format","onChangeNumericTextBoxProgress","decimals","buttonChangeProgress","onShowPopupEditProgress","onClickCancel","onSubmitFormChangeProgress","updateProgressUI","listItems","activityWork","hide","show","text","newPercentProgress","templatePopupEditProgress","onOpenPopupPlan","detach","previusValueProgress","prop","project-subprocesses","project-subprocesses-tootip-custom-properties","subprocesses","plan-parent-main","getPlanParent","planParent","parent","idParent","nameParent","displayName","idWorkflow","idWorkItem","onClickGoToParentCase","routingExecute","usersMap","usersInformation","globalHandlersService","get","usersAssignees","plan-users-main","activityRuning","cvsGuidUsers","activitiesUsers","ownerUserId","ownerUserGuid","push","guidUser","userType","picture","guid","index","userId","userGuid","userAssignedGuid","inArray","justAssignees","addEventHandlersModal","showCreatorInformation","renderUserProfilesAndImages","allUsers","usersAssignee","isOwner","indexOf","isAssignee","usersAdapter","createJsonUserInfo","userCreator","userInfo","username","email","getInitials","userinformation","obj","$li","console","log","not","ev","userSelected","$target","usersActivities","userParam","getIsAssignee","getIsOwner","usertooltip","usersGuids","join","getUsersAssignees","getUserAssignee","tasks","types","actUser","stopPropagation","BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL","closeVisible","modalParameters","refreshInbox"],"mappings":"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","sourcesContent":["/*\r\n *   Name: Bizagi Workportal project Dashboard Menu Activity Plan\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\", {}, {\r\n\r\n   /**\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n      self.params = params || {};\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-dashboard-menu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.plan\").concat(\"#project-dashboard-menu2\")\r\n      });\r\n   },\r\n\r\n   /**\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   /**\r\n    * links events with handlers\r\n    */\r\n   postRender: function () {\r\n      var self = this;\r\n      //Handlers\r\n      self.params.contextsLeftSidebarCaseDashboard.forEach(function(context){\r\n         self.sub(context, $.proxy(self.updateView, self));\r\n      });\r\n\r\n   },\r\n\r\n   /**\r\n    * Update view\r\n    * @param event\r\n    * @param params\r\n    */\r\n   updateView: function (event, params) {\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n      self.clean();\r\n      var $content = self.getContent().empty();\r\n\r\n      var argsTemplate = {\r\n         showFormOverview: self.params.menuDashboard.showFormOverview,\r\n         showFormActivity: self.params.menuDashboard.showFormActivity,\r\n         showCommentsOptionMenu: self.params.menuDashboard.showCommentsOptionMenu,\r\n         showFilesOptionMenu: self.params.menuDashboard.showFilesOptionMenu,\r\n         showTimeLineOptionMenu: self.params.menuDashboard.showTimeLineOptionMenu,\r\n         showPlanOptionMenu: self.params.menuDashboard.showPlanOptionMenu,\r\n         contextPlanOptionMenu: self.params.menuDashboard.contextPlanOptionMenu,\r\n         contextFormActivityOptionMenu: self.params.menuDashboard.contextFormActivityOptionMenu,\r\n         contextualized: self.params.plan.contextualized\r\n      };\r\n\r\n      //Update widget\r\n      var template = self.getTemplate(\"project-dashboard-menu\");\r\n      template.render(argsTemplate).appendTo($content);\r\n\r\n      if(self.params.showContextByMenuDashboard){\r\n         $(\"li[data-context='\" + event.type.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\r\n      }\r\n\r\n      self.handlerEvents();\r\n\r\n      var paramsGetPlan = {idPlan: self.params.plan.id};\r\n      $.when(self.callGetPlan(paramsGetPlan)).then(function(responsePlan){\r\n         $.extend(self.params.plan, responsePlan);\r\n         self.pub(\"notify\", {\r\n            type: \"LOAD_INFO_PLAN\",\r\n            args: self.params\r\n         });\r\n      });\r\n   },   \r\n\r\n   /**\r\n    *   Load Content By Id\r\n    */\r\n   loadContentById: function (event) {\r\n      var self = this;\r\n      event.preventDefault();\r\n      var $item = $(event.target).closest(\"li\");\r\n\r\n      if (!$item.hasClass(\"active\")) {\r\n         $.when(bizagi.util.autoSave()).done(function () {\r\n            $(document).data('auto-save', '');\r\n\r\n            var showContextByMenuDashboard = $item.data(\"context\");\r\n            if (showContextByMenuDashboard) {\r\n               var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\"});\r\n               var currentLevelNavigator = parseInt(getLevelNavigator[0]);\r\n               var nameItemNavigator = \"\";\r\n               var newLevelNavigator = currentLevelNavigator;\r\n\r\n               self.params.refreshLastItemBreadcrumb = false;\r\n               self.pub(\"notify\", {\r\n                  type: showContextByMenuDashboard.toUpperCase(),\r\n                  args: $.extend(self.params,{showContextByMenuDashboard: showContextByMenuDashboard,\r\n                     histName: nameItemNavigator,\r\n                     level: newLevelNavigator})\r\n               });\r\n               $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\r\n            }\r\n         });\r\n      }\r\n   },\r\n\r\n   /**\r\n    * Call services\r\n    */\r\n\r\n   callGetPlan: function(params){\r\n      var self = this;\r\n      var defer = $.Deferred();\r\n      self.dataService.getPlan(params).always(function (response) {\r\n         if (response.status === 200 || response.status === 201 || response.status === undefined) {\r\n            defer.resolve(response);\r\n         }\r\n         else {\r\n            defer.reject();\r\n         }\r\n      });\r\n\r\n      return defer.promise();\r\n   },\r\n\r\n   subMenuHandler: function () {\r\n       var self = this;\r\n       var content = self.getContent();\r\n       var $comments = $(\"[data-context='ACTIVITYPLANCOMMENTS']\", content);\r\n       var $files = $(\"[data-context='ACTIVITYPLANFILES']\", content);\r\n       var $timeline = $(\"[data-context='ACTIVITYPLANTIMELINE']\", content);\r\n\r\n       $(\".ui-bizagi-wp-project-tab-submenu a\", content).on(\"click\", function () {\r\n           $comments.toggle();\r\n           $files.toggle();\r\n           $timeline.toggle();\r\n       });\r\n   },\r\n\r\n   /**\r\n    * Handler events\r\n    */\r\n   handlerEvents: function(){\r\n      var self = this;\r\n      var content = self.getContent();\r\n      self.subMenuHandler();\r\n      $(\".ui-bizagi-wp-project-tab-links a\", content).on(\"click\",  $.proxy(self.loadContentById, self));\r\n   },\r\n\r\n   /**\r\n    * Clean widgets and events\r\n    */\r\n   clean: function(){\r\n      var self = this;\r\n      var content = self.getContent();\r\n\r\n      if(self.params && self.params.contextsLeftSidebarCaseDashboard){\r\n         self.params.contextsLeftSidebarCaseDashboard.forEach(function(context){\r\n            self.unsub(context, $.proxy(self.updateView, self));\r\n         });\r\n      }\r\n\r\n      $(\".ui-bizagi-wp-project-tab-links a\", content).off();\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu.activity.plan], true);","/*\r\n *   Name: Bizagi Workportal Project Content Dashboard\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.content.dashboard\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-content-dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.content.dashboard\").concat(\"#project-plan-content-dashboard\")\r\n      });\r\n\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n\r\n      var template = self.getTemplate(\"project-content-dashboard\");\r\n      self.content = template.render({});\r\n\r\n      return self.content;\r\n   },\r\n   postRender: function(){\r\n      var self = this;\r\n\r\n      setTimeout(function(){\r\n         $(window).trigger(\"resize\"); //Simulate resize for fix when load first time.\r\n      }, 1000);\r\n\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.content.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.content.dashboard], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Activity Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.activity\", {}, {\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n\r\n      var self = this;\r\n\r\n      //Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-activity\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activity\").concat(\"#project-activity-wrapper\")\r\n      });\r\n\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      var templateHomeActivity = self.getTemplate(\"project-activity\");\r\n      self.content = templateHomeActivity.render({});\r\n      return self.content;\r\n   },\r\n\r\n   /*\r\n    * Post render and links events with handlers\r\n    */\r\n   postRender: function () {\r\n\r\n      var self = this;\r\n      self.renderForm({\r\n         idCase: self.params.idCase,\r\n         idWorkitem: self.params.idWorkitem,\r\n         idTask: self.params.idTask,\r\n         radNumber: self.params.radNumber,\r\n         withOutGlobalForm: self.params.withOutGlobalForm || false,\r\n         isClosed: self.params.isClosed,\r\n         belongCurrentUser: self.params.belongCurrentUser,\r\n         hasGlobalForm: bizagi.util.parseBoolean(self.params.hasGlobalForm),\r\n         showForm: bizagi.util.parseBoolean(self.params.showForm),\r\n         isOfflineForm: self.params.isOfflineForm || false,\r\n         messageForm: self.params.messageForm || \"\"\r\n      });\r\n\r\n   },\r\n\r\n   renderForm: function(params){\r\n\r\n      var self = this, resultRender;\r\n      var renderContainer = self.getContent();\r\n\r\n      var runningAndAssignToOtherUser = (!params.isClosed && !params.belongCurrentUser);\r\n      if(runningAndAssignToOtherUser){\r\n         runningAndAssignToOtherUser = true;\r\n         if(!params.hasGlobalForm){\r\n            params.withOutGlobalForm = true;\r\n         }\r\n      }\r\n\r\n      if (!params.withOutGlobalForm) {\r\n         // it has't activities and global form\r\n         var proxyPrefix = (typeof (self.dataService.serviceLocator.proxyPrefix) != undefined) ? self.dataService.serviceLocator.proxyPrefix : \"\";\r\n         var database = (typeof (self.dataService.database) != undefined) ? self.dataService.database : \"\";\r\n\r\n\r\n         // Load render page\r\n         var rendering = self.rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix, \"database\": database });\r\n         // Executes rendering into render container\r\n         bizagi.util.setContext(params);\r\n\r\n         self.rendering.subscribe(\"onLoadDataItemsFromFormActivityPlan\", function (event, params) {\r\n            self.pub(\"notify\", {\r\n               type: \"UPDATE_ITEMS_FROM_FORMRENDER\",\r\n               args: params\r\n            });\r\n         });\r\n         self.rendering.subscribe(\"rendering-formRendered\", function (event, params) {\r\n            self.pub(\"notify\", {\r\n               type: \"ON_RENDER_FINISH\",\r\n               args: params\r\n            });\r\n         });\r\n\r\n         var resultRender = rendering.execute($.extend(params, {\r\n            canvas: renderContainer,\r\n            menu: self.menu\r\n         }));\r\n\r\n         // Attach handler to render container to subscribe for routing events\r\n         renderContainer.bind(\"routing\", function (context, triggerparams) {\r\n            // Executes routing action\r\n\r\n            var params = {\r\n               action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n               idCase: self.params.idCase,\r\n               fromTask: self.params.fromTask || self.params.idTask,\r\n               fromWorkItemId: self.params.fromWorkItemId || self.params.idWorkitem,\r\n               isOfflineForm: self.params.isOfflineForm,\r\n               formsRenderVersion: self.params.formsRenderVersion,\r\n               onClose: function () {\r\n                  // If the user closes the dialog we need to redirect to inbox widget\r\n                  self.publish(\"changeWidget\", {\r\n                     widgetName: bizagi.cookie(\"bizagiDefaultWidget\")\r\n                  });\r\n               }\r\n            };\r\n            params = $.extend(params, triggerparams);\r\n            self.publish(\"executeAction\", params);\r\n         });\r\n      }\r\n      else {\r\n         var errorTemplate = self.workportalFacade.getTemplate(\"info-message\");\r\n         var message = (params.messageForm !== \"\") ? params.messageForm : self.resources.getResource(\"render-without-globalform\");\r\n\r\n         if (typeof self.params != \"undefined\" && typeof self.params.isOfflineForm !== \"undefined\" && self.params.isOfflineForm == true) {\r\n            message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\r\n         }\r\n\r\n         var errorHtml = $.tmpl(errorTemplate, {\r\n            message: message\r\n         });\r\n         // Remove loading icon from summary container\r\n         errorHtml.appendTo(renderContainer);\r\n\r\n         self.goToInbox(errorHtml); //Go to inbox when click on the button \"Go to inbox of the errorHtml template\"\r\n\r\n         resultRender = $.Deferred();\r\n         resultRender.fail();\r\n\r\n      }\r\n      // Keep reference to rendering facade\r\n      self.renderingFacade = rendering;\r\n\r\n      // Resize layout\r\n      self.resizeLayout();\r\n   },\r\n   goToInbox: function(content) {\r\n    var self = this;\r\n    $(\"#ui-bizagi-btn-go-to-inbox\", content).click(function(){  \r\n        self.publish(\"changeWidget\", {\r\n            widgetName: self.workportalFacade.workportal.getWidgetByCookie(true)\r\n        });\r\n    });\r\n   },\r\n\r\n   clean: function(){\r\n\r\n   }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.project.activity', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.activity], true);","/*\r\n *   Name: Bizagi Workportal Project Activity Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activity.sidebar\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, serviceloadDataPlan, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      self.serviceloadDataPlan = serviceloadDataPlan;\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-plan-activity-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.sidebar\").concat(\"#project-plan-activity-sidebar\")\r\n      });\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n\r\n      var template = self.getTemplate(\"project-plan-activity-sidebar\");\r\n      self.content = template.render({});\r\n\r\n      return self.content;\r\n   },\r\n   postRender: function(){\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_PLAN\", $.proxy(self.onNotifyLoadInfoPlan, self));\r\n   },\r\n\r\n    onNotifyLoadInfoPlan: function (event, parans) {\r\n        var self = this;\r\n        if (self.params.plan.idActivitySelected) {\r\n\r\n            var params = {idPlan: self.params.plan.id};\r\n            self.serviceloadDataPlan.loadData(params, self.getDateServer, self.params);\r\n            self.serviceloadDataPlan.subscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\r\n            self.serviceloadDataPlan.subscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\r\n        }\r\n        else {\r\n            if (self.params.showContextByMenuDashboard === \"ACTIVITYPLANPROCESSMAP\" ||\r\n                    self.params.showContextByMenuDashboard === \"ACTIVITYPLANLOG\") {\r\n                self.pub(\"notify\", {\r\n                    type: \"DISABLED_RIGHT_SIDEBAR\"\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    loadedWithDataActivities: function(){\r\n        var self = this;\r\n        self.pub(\"notify\", {\r\n            type: \"LOADED_ACTIVITIES_PLAN\",\r\n            args: self.params\r\n        });\r\n        self.pub(\"notify\", {\r\n            type: \"LOAD_INFO_SUMMARY_PROGRESS_PLAN\",\r\n            args: self.params\r\n        });\r\n        self.pub(\"notify\", {\r\n            type: \"LOAD_INFO_ACTIVITY_SUMMARY\",\r\n            args: self.params\r\n        });\r\n        self.pub(\"notify\", {\r\n            type: \"LOAD_INFO_ACTIVITIES_PLAN\",\r\n            args: self.params\r\n        });\r\n    },\r\n\r\n    loadedWithDataFirstParent: function(){\r\n        var self = this;\r\n        self.pub(\"notify\", {\r\n            type: \"LOAD_INFO_SUMMARY_PLAN\",\r\n            args: self.params\r\n        });\r\n    },\r\n\r\n    clean: function(){\r\n        var self = this;\r\n        if(self.serviceloadDataPlan){\r\n            self.serviceloadDataPlan.unsubscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\r\n            self.serviceloadDataPlan.unsubscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\r\n        }\r\n    }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.sidebar\", [\"workportalFacade\", \"dataService\", \"bizagi.workportal.services.behaviors.loadDataPlan\", bizagi.workportal.widgets.project.plan.activity.sidebar], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Action\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activity.action\", {}, {\r\n\r\n   /**\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, notifier, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      self.dateFormat = bizagi.localization.getResource(\"dateFormat\");\r\n      self.timeFormat = bizagi.localization.getResource(\"timeFormat\");\r\n      self.estimatedFinishDateTime; //Save complete date and time, because datepicker dont save time\r\n\r\n      self.beforeUserAssignedActivity = \"\";\r\n       self.notifier = notifier;\r\n\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"activity-action-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.action\").concat(\"#project-plan-activity-action\"),\r\n         \"activity-action-editionpopup\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.action\").concat(\"#project-plan-activity-action-editionpopup\")\r\n      });\r\n\r\n      self.dialogBox = {};\r\n   },\r\n\r\n   /**\r\n    *\r\n    * @returns {*|jQuery|HTMLElement}\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   /**\r\n    *\r\n    */\r\n   postRender: function () {\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\r\n      self.sub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\r\n   },\r\n\r\n   /**\r\n    * Notifies when an event is raised\r\n    */\r\n   onNotifyLoadInfoActivityExecution: function (event, params) {\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n\r\n      var $content = self.getContent().empty();\r\n\r\n      var currentActivity = {};\r\n      if(self.params.plan.idActivitySelected){\r\n         currentActivity = self.params.plan.activities.filter(function(activity){\r\n            return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\r\n         })[0];\r\n      }\r\n\r\n      if(self.params.plan.idUserCreator === bizagi.currentUser.idUser || currentActivity.userAssigned == bizagi.currentUser.idUser){\r\n\r\n         var argsTemplate = {};\r\n         argsTemplate.currentActivityName = currentActivity.name;\r\n         argsTemplate.showEditAction = true;\r\n         if(self.params.plan.idUserCreator !== bizagi.currentUser.idUser){\r\n             argsTemplate.showEditAction = false;\r\n         }\r\n\r\n         var tmpl = self.getTemplate(\"activity-action-main\");\r\n         $content.append(tmpl.render(argsTemplate));\r\n\r\n         if(argsTemplate.showEditAction){\r\n             self.initilizeActionMenu();\r\n             self.beforeUserAssignedActivity = currentActivity.userAssigned;\r\n             self.content.append($content);\r\n            self.initializeTempleteAndEvents();\r\n         }\r\n      }\r\n   },\r\n\r\n   initializeTempleteAndEvents: function (){\r\n        var self = this;\r\n        self.plugins = {}; \r\n        self.plugins.activityEdition = self.initPluginPopupEdition();\r\n\r\n        self.formEditActivity = {\r\n            assignee: $(\"#activity-form-assignee\", self.plugins.activityEdition),\r\n            date: $(\"#activity-form-date\", self.plugins.activityEdition),\r\n            duration:  $(\"#activity-form-duration\",self.plugins.activityEdition),\r\n            buttonCancel: $(\"#ui-bizagi-wp-project-popupform-action-cancel\", self.plugins.activityEdition),\r\n            buttonUpdate: $(\"#ui-bizagi-wp-project-popupform-action-update\", self.plugins.activityEdition)\r\n        };\r\n\r\n        self.formEditActivity.buttonCancel.on(\"click\", $.proxy(self.onClickPopupButtonCancel, self));\r\n        self.formEditActivity.buttonUpdate.on(\"click\", $.proxy(self.onClickPopupButtonUpdate, self));\r\n\r\n        self.formEditActivity.date.on(\"keydown\", $.proxy(self.onDeleteDate, self));\r\n        self.formEditActivity.duration.on(\"keyup\", $.proxy(self.onTypeDuration, self));\r\n   },\r\n\r\n   /**\r\n    *\r\n    */\r\n   onNotifyExpandedRightSidebar: function(){\r\n      var self = this;\r\n      self.initilizeActionMenu();\r\n   },\r\n\r\n   /**\r\n    *\r\n    */\r\n   initilizeActionMenu: function () {\r\n      var self = this;\r\n      $(\"#ui-bizagi-wp-project-plan-activity-action .menu\", self.content).menu({\r\n         select: $.proxy(self.onSelectMenu, self)\r\n      }).removeClass(\"ui-widget-content\");\r\n   },\r\n\r\n   /**\r\n    *\r\n    * @returns dialogBox.formContent\r\n    */\r\n   initPluginPopupEdition: function () {\r\n      var self = this;\r\n      var popupEditActivity = self.getTemplate(\"activity-action-editionpopup\");\r\n      self.dialogBox.formContent = popupEditActivity.render({});\r\n      return self.dialogBox.formContent;\r\n\r\n   },\r\n\r\n   /**\r\n    *\r\n    * @param element\r\n    */\r\n    initializeAutoComplete: function (element) {\r\n        var self = this;\r\n        var url = self.dataService.serviceLocator.getUrl(\"admin-getUsersList\");\r\n\r\n        element.autocomplete({\r\n            minLength: 2,\r\n            source: function (request, response) {\r\n                $.ajax({\r\n                    url: url,\r\n                    data: {\r\n                        domain: \"\",\r\n                        userName: \"\",\r\n                        fullName: request.term,\r\n                        organization: \"\",\r\n                        pag: 1,\r\n                        pagSize: 100,\r\n                        orderField: \"fullName\"\r\n                    },\r\n                    success: function (data) {\r\n                        response($.map(data.users, function (item) {\r\n                            return {\r\n                                label: item.user,\r\n                                value: item.idUser\r\n                            };\r\n                        }));\r\n                    }\r\n                });\r\n            },\r\n            select: function (event, ui) {\r\n                var name = ui.item.label;\r\n                element.val(name);\r\n                self.formEditActivity.IdAssignee = ui.item.value;\r\n                return false;\r\n            },\r\n            focus: function () {\r\n                return false;\r\n            },\r\n            change: function (event, ui){\r\n                if(ui.item === null){\r\n                    self.formEditActivity.IdAssignee = null;\r\n                    self.formEditActivity.assignee.val(\"\");\r\n                }\r\n                return false;\r\n            }\r\n\r\n        });\r\n\r\n    },\r\n\r\n   /**\r\n    *\r\n    * @param element\r\n    */\r\n    initializeDatePicker: function (element) {\r\n        var self = this;\r\n        element.datepicker({\r\n            onSelect: function () {\r\n                self.formEditActivity.duration.val(\"\");\r\n                self.estimatedFinishDateTime = self.formEditActivity.date.datepicker(\"getDate\") ? self.formEditActivity.date.datepicker(\"getDate\").getTime() : undefined;\r\n            }\r\n        });\r\n        element.datepicker(\"option\", \"dateFormat\", bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI());\r\n    },\r\n\r\n   /**\r\n    *\r\n    * @param element\r\n    */\r\n    initializeSpiner: function (element) {\r\n        var self = this;\r\n        function desactivateDateByDuration(event, newValue){\r\n            var value = newValue || $(event.target).val();\r\n            if (bizagi.util.isNumeric(value) && parseInt(value, 10) > 0) {\r\n               self.formEditActivity.date.val(\"\");\r\n               self.estimatedFinishDateTime = undefined;\r\n            } else {\r\n               $(event.target).val(\"\");\r\n            }\r\n        }\r\n\r\n        element.spinner({\r\n            min: 1,\r\n            max: 1000,\r\n            placeHolder: bizagi.localization.getResource(\"workportal-hours\"),\r\n            change: function (event) {\r\n                desactivateDateByDuration(event);\r\n            },\r\n            spin: function( event, ui ) {\r\n                desactivateDateByDuration(event, ui.value);\r\n            }\r\n        });\r\n    },\r\n\r\n   /***\r\n    * Events\r\n    * @param event\r\n    */\r\n\r\n   onDeleteDate: function (event) {\r\n      var self = this;\r\n      if (event.keyCode === 8) {\r\n          $(event.target).val(\"\");\r\n          self.fieldDurationActive(true);\r\n      }\r\n   },\r\n\r\n   /**\r\n    *\r\n    * @param event\r\n    */\r\n   onTypeDuration: function (event) {\r\n      var self = this;\r\n      var $target = $(event.target);\r\n      if ($target.val() !== \"\") {\r\n          self.estimatedFinishDateTime = undefined;\r\n      } else {\r\n          self.activateElement(self.form.date);\r\n      }\r\n   },\r\n\r\n    /**\r\n     * When select menu\r\n     * @param event\r\n     * @param ui\r\n     */\r\n   onSelectMenu: function (event, ui) {\r\n      var self = this;\r\n      if($(event.currentTarget).find(\"i\").length === 0){\r\n         var item = $(ui.item).data(\"item\");\r\n         switch (item) {\r\n            case \"edit\":\r\n               self.onClickOpenPopupEdition();\r\n               break;\r\n         }\r\n      }\r\n   },\r\n\r\n   /**\r\n    *\r\n    */\r\n   onClickOpenPopupEdition: function () {\r\n        var self = this;\r\n        self.initializeTempleteAndEvents();\r\n        self.dialogBox.formContent.dialog({\r\n            resizable: false,\r\n            draggable: false,\r\n            height: \"auto\",\r\n            width: \"600px\",\r\n            modal: true,\r\n            title: bizagi.localization.getResource(\"workportal-project-plan-title-activity-properties\"),\r\n            maximize: true,\r\n            open: $.proxy(self.onOpenPopupEdition, self),\r\n            close: $.proxy(self.onClosePopupEdition, self)\r\n        });\r\n   },\r\n\r\n    /**\r\n    *\r\n    */\r\n    onOpenPopupEdition: function () {\r\n        var self = this;\r\n        var currentActivity = self.params.plan.activities.filter(function(activity){\r\n            return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\r\n        })[0];\r\n\r\n        var activityDate =  (currentActivity && !bizagi.util.isEmpty(currentActivity.estimatedFinishDate)) ? currentActivity.estimatedFinishDate: \"\";\r\n        if(!isNaN(activityDate)){\r\n            activityDate=bizagi.util.dateFormatter.formatInvariant(new Date(activityDate));\r\n        }\r\n        var estimatedFinishDate = activityDate ? bizagi.util.dateFormatter.getDateFromInvariant(activityDate): \"\";\r\n        var isMinimumDate = estimatedFinishDate instanceof Date ? estimatedFinishDate.getTime() < self.getDateServer() : false;\r\n\r\n        self.initializeAutoComplete(self.formEditActivity.assignee);\r\n        self.initializeDatePicker(self.formEditActivity.date);\r\n        self.initializeSpiner(self.formEditActivity.duration);\r\n\r\n        if (currentActivity.userAssigned) {\r\n            self.setUserAssignedById(currentActivity.userAssigned);\r\n        }\r\n\r\n        self.formEditActivity.date.datepicker(\"option\", \"minDate\", new Date(self.getDateServer()));\r\n\r\n        if (currentActivity.estimatedFinishDate && isMinimumDate) {\r\n            self.formEditActivity.date.datepicker(\"option\", \"minDate\", estimatedFinishDate);//set minimum because, if date is past\r\n        }\r\n\r\n        if (currentActivity.estimatedFinishDate) {\r\n            if (estimatedFinishDate){\r\n                self.formEditActivity.date.datepicker(\"setDate\", estimatedFinishDate);\r\n            }\r\n            self.estimatedFinishDateTime = currentActivity.estimatedFinishDate;\r\n        }\r\n\r\n        if (currentActivity.duration) {\r\n            self.formEditActivity.duration.val(parseInt(currentActivity.duration, 10));\r\n        }\r\n   },\r\n\r\n   /**\r\n    * When close popup edition\r\n    */\r\n   onClosePopupEdition: function(){\r\n      var self = this;\r\n      self.removePopupWidgets();\r\n   },\r\n\r\n   /**\r\n    *\r\n    * @param idUser\r\n    */\r\n    setUserAssignedById: function (idUser) {\r\n        var self = this;\r\n        //Show images users\r\n        self.callGetDataUsers(idUser).then(function (responseUsers) {\r\n            self.formEditActivity.assignee.val(responseUsers[0].name);\r\n        });\r\n        self.formEditActivity.IdAssignee = idUser;\r\n    },\r\n\r\n   /**\r\n    *\r\n    * @param event\r\n    */\r\n    onClickPopupButtonCancel: function(event){\r\n        var self = this;\r\n        event.preventDefault();\r\n        self.removePopupWidgets();\r\n    },\r\n\r\n    /**\r\n    * Remove popup widgets\r\n    */\r\n    removePopupWidgets: function(){\r\n        var self = this;\r\n        self.formEditActivity.assignee.next().find(\"span\").html(\"\");\r\n        self.dialogBox.formContent.remove();\r\n        $(\"#ui-datepicker-div\").remove();\r\n    },\r\n\r\n   /**\r\n    *  Triggered when click update plan activity\r\n    */\r\n    onClickPopupButtonUpdate: function () {\r\n        var self = this;\r\n        if(self.validateParamsOfFormEditActivity()){\r\n            var currentActivity = self.params.plan.activities.filter(function (activity) {\r\n                return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\r\n            })[0];\r\n            var idUserAssigned =  self.formEditActivity.IdAssignee || bizagi.currentUser.idUser;\r\n            if(self.formEditActivity.duration.val()!=\"\"){\r\n                self.params.plan.activities.filter(function (activity) {\r\n                    return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\r\n                })[0].estimatedFinishDate=\"\";\r\n            }\r\n            var updateActivity = {\r\n                progress: currentActivity.progress,\r\n                id: currentActivity.id,\r\n                startDate: currentActivity.startDate,\r\n                duration: self.formEditActivity.duration.val(),\r\n                userAssigned: idUserAssigned,\r\n                allowEdition: currentActivity.allowEdition,\r\n                description: currentActivity.description,\r\n                name: currentActivity.name,\r\n                idPlan: currentActivity.idPlan,\r\n                estimatedFinishDate: self.estimatedFinishDateTime,\r\n                finishDate: currentActivity.finishDate,\r\n                items: currentActivity.items\r\n            };\r\n            $.when(self.dataService.editActivityPlan(updateActivity)).done(function () {\r\n                currentActivity = $.extend(currentActivity, updateActivity);\r\n                self.removePopupWidgets();\r\n\r\n                if (self.beforeUserAssignedActivity !== self.formEditActivity.IdAssignee) {\r\n                    self.pub(\"notify\", {\r\n                        type: \"ACTIVITYPLANCOMMENTS\",\r\n                        args: $.extend(self.params, {refreshAllWidgets: true})\r\n                    });\r\n                }\r\n                else {\r\n                    self.pub(\"notify\", {\r\n                        type: self.params.showContextByMenuDashboard,\r\n                        args: self.params\r\n                    });\r\n                }\r\n\r\n                self.removePopupWidgets();\r\n                self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-project-plan-activity-update-message\"));\r\n            });\r\n        }\r\n    },\r\n\r\n   /***\r\n    * Events\r\n    */\r\n   onClickFavorite: function (event) {\r\n      event.preventDefault();\r\n      var self = this;\r\n      var favoriteOptions = {};\r\n      if ($(event.target).hasClass(\"bz-icon-star-outline\")) {\r\n         favoriteOptions = {\r\n            idObject: self.params.idCase,\r\n            favoriteType: \"CASES\"\r\n         };\r\n         $.when(self.dataService.addFavorite(favoriteOptions)).done(function (favoritesData) {\r\n            self.params.guidFavorite = favoritesData.idFavorites;\r\n            $(event.target).removeClass(\"bz-icon-star-outline\");\r\n            $(event.target).addClass(\"bz-icon-star\");\r\n         });\r\n      }\r\n      else {\r\n         favoriteOptions = {\r\n            idObject: self.params.guidFavorite,\r\n            favoriteType: \"CASES\"\r\n         };\r\n         $.when(self.dataService.delFavorite(favoriteOptions)).done(function () {\r\n            $(event.target).addClass(\"bz-icon-star-outline\");\r\n            $(event.target).removeClass(\"bz-icon-star\");\r\n         });\r\n      }\r\n   },\r\n\r\n   /**\r\n    * Clean events and plugins\r\n    */\r\n   clean: function(){\r\n      var self = this;\r\n      self.unsub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\r\n      self.unsub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\r\n   },\r\n\r\n   /**\r\n    * Validate form edit plan activity\r\n    * @returns {boolean}\r\n    */\r\n    validateParamsOfFormEditActivity: function(){\r\n        var self = this;\r\n        var userAssigned = self.formEditActivity.assignee;\r\n        if (userAssigned.val() && userAssigned.val() !== \"\" && self.formEditActivity.IdAssignee) {\r\n            return true;\r\n        } else {\r\n            var messageValidationField = bizagi.localization.getResource(\"workportal-general-error-field-required\");\r\n            messageValidationField = messageValidationField.replace(\"{0}\", bizagi.localization.getResource(\"workportal-project-plan-assignee\").toLowerCase());\r\n            userAssigned.next().find(\"span\").html(messageValidationField);\r\n            return false;\r\n        }\r\n    },\r\n\r\n   /**\r\n    * Call services\r\n    */\r\n   callGetDataUsers: function (csvIdUsers) {\r\n      var self = this,\r\n         defer = $.Deferred();\r\n      var params = {\r\n         userIds: csvIdUsers,\r\n         width: 50,\r\n         height: 50\r\n      };\r\n\r\n      self.dataService.getUsersData(params).always(function (response) {\r\n         defer.resolve(response);\r\n      });\r\n      return defer.promise();\r\n   }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.action\", [\"workportalFacade\", \"dataService\", \"notifier\", bizagi.workportal.widgets.project.plan.activity.action]);\r\n","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Time\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n/***\r\n * TODO IMPORTANT: This widget is development with TDD, test this file when changes\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.time\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    *\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Constants\r\n      self.EXECUTING_ACTIVITY = \"EXECUTING\";\r\n      self.FINISHED_ACTIVITY = \"FINISHED\";\r\n\r\n      //Regional\r\n      self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"plan-time-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.time\").concat(\"#project-plan-activity-time\")\r\n      });\r\n   },\r\n\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   postRender: function () {\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivitySummary, self));\r\n   },\r\n\r\n   /**\r\n    * Notifies when an event is raised\r\n    */\r\n   onNotifyLoadInfoActivitySummary: function(event, params){\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n      self.getContent().empty();\r\n\r\n      var currentActivity = self.params.plan.activities.filter(function (activity) {\r\n         return activity.id === self.params.plan.idActivitySelected;\r\n      })[0];\r\n\r\n      if(currentActivity.startDate){\r\n         self.getStateActivity(currentActivity);\r\n\r\n         var argsTemplate = {\r\n            time: {\r\n               fromDate: self.getFormattedDate(new Date(self.getFirstDate(currentActivity)))\r\n            }\r\n         };\r\n         var dataProgressWidget = self.getDataByScenarios(currentActivity, true);\r\n\r\n         $.when(dataProgressWidget.unitTime).done(function(auxUnitTime){\r\n            dataProgressWidget = $.extend(dataProgressWidget, {\r\n               unitTime: auxUnitTime\r\n            });\r\n            self.updateWidget($.extend(argsTemplate.time, dataProgressWidget));\r\n         });\r\n\r\n      }\r\n   },\r\n   updateWidget: function(argsTemplate){\r\n      var self = this;\r\n      var $content = self.getContent().empty();\r\n      var contentTemplate = self.getTemplate(\"plan-time-main\");\r\n\r\n      var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(Date.now() - (argsTemplate.unitTime.minutes * 60 * 1000)), null, false);\r\n\r\n      var messageDescripionDifference = bizagi.localization.getResource(\"workportal-project-activity-state-\" + argsTemplate.keywordResource);\r\n      argsTemplate.messageTime = messageDescripionDifference.replace(\"%s\", relativeTime);\r\n\r\n      contentTemplate\r\n         .render(argsTemplate)\r\n         .appendTo($content);\r\n\r\n      //Begin Adjust status bar next to the number days\r\n      var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\r\n      var widthNumberDays = $(\".remaining-days .days\", $content).width();\r\n      $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\r\n\r\n      var $barCompletedDate = $(\".remaining-days .bar-completed\", $content);\r\n\r\n      $barCompletedDate.css(\"width\", argsTemplate.percentBar + \"%\");\r\n      //End Adjust status bar next to the number days\r\n\r\n   },\r\n   getStateActivity: function(activity){\r\n      var self = this;\r\n      if(activity.finishDate){\r\n         activity.currentState = self.FINISHED_ACTIVITY;\r\n         return self.FINISHED_ACTIVITY;\r\n      }\r\n      else{\r\n         activity.currentState = self.EXECUTING_ACTIVITY;\r\n         return self.EXECUTING_ACTIVITY;\r\n      }\r\n   },\r\n   getFirstDate: function(activity){\r\n      var self = this;\r\n      if(activity.currentState === self.EXECUTING_ACTIVITY){\r\n         return activity.startDate;\r\n      } else{\r\n         return activity.finishDate;\r\n      }\r\n   },\r\n   getDataByScenarios: function(activity){\r\n      var self = this;\r\n      var response = {\r\n         colorBar: null,\r\n         percentBar: 100,\r\n         keywordResource: null,\r\n         unitTime: null\r\n      };\r\n      var params = {};\r\n      switch(activity.currentState){\r\n         case self.EXECUTING_ACTIVITY:\r\n            response.keywordResource = \"opened\";\r\n            response.colorBar = self.getColorByCreatedAndEstimatedDate(activity);\r\n\r\n            params = {\r\n               idUser: bizagi.currentUser.idUser,\r\n               fromDate: activity.startDate,\r\n               toDate: Date.now()\r\n            };\r\n            response.unitTime = self.callGetEffectiveDuration(params);\r\n\r\n            break;\r\n         case self.FINISHED_ACTIVITY:\r\n            response.colorBar = \"Gray\";\r\n            response.keywordResource = \"closed\";\r\n            params = {\r\n               idUser: bizagi.currentUser.idUser,\r\n               fromDate: activity.finishDate,\r\n               toDate: Date.now()\r\n            };\r\n            response.unitTime = self.callGetEffectiveDuration(params);\r\n            break;\r\n      }\r\n      return response;\r\n   },\r\n\r\n   getColorBar: function(activity){\r\n      var self = this;\r\n      return self.getDataByScenarios(activity).colorBar;\r\n   },\r\n   getPercentBar: function(activity){\r\n      var self = this;\r\n      return self.getDataByScenarios(activity).percentBar;\r\n   },\r\n   getKeywordResourceDescriptionBar: function(activity){\r\n      var self = this;\r\n      return self.getDataByScenarios(activity).keywordResource;\r\n   },\r\n   getUnitTime: function(activity){\r\n      var self = this;\r\n      return self.getDataByScenarios(activity).unitTime;\r\n   },\r\n\r\n   getColorByCreatedAndEstimatedDate: function(activity){\r\n      var self = this;\r\n      var response = \"Red\";\r\n      if(activity.estimatedFinishDate) {\r\n         if (Date.now() < activity.estimatedFinishDate) {\r\n            var theSameDay = (new Date()).getUTCDate() === (new Date(activity.estimatedFinishDate)).getUTCDate();\r\n            if(theSameDay){\r\n               response = \"Yellow\";\r\n            }\r\n            else{\r\n               response = \"Green\";\r\n            }\r\n         }\r\n      }\r\n      return response;\r\n   },\r\n\r\n   getFormattedDate: function (dateObj) {\r\n      var self = this;\r\n      var monthsNames = self.datePickerRegional.monthNames;\r\n      var shortMonth = dateObj.getMonth();\r\n\r\n      return monthsNames[shortMonth] + \" \" + bizagi.util.dateFormatter.formatDate(dateObj, \"dd hh:mm tt\", bizagi.localization.getResource(\"datePickerRegional\"));\r\n   },\r\n\r\n   /**\r\n    * Call services\r\n    */\r\n   callGetEffectiveDuration: function(params){\r\n      var self = this;\r\n      var d = $.Deferred();\r\n      $.when(\r\n         self.dataService.getEffectiveDuration(params)\r\n      ).done(function (data) {\r\n            d.resolve(data);\r\n         });\r\n      return d.promise();\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.time\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.time], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Progress\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.progress\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      self.plugins = {};\r\n      self.dialogBox = {};\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"plan-progress-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.progress\").concat(\"#project-plan-activity-progress\"),\r\n         \"plan-progress-popup-edit\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.progress\").concat(\"#project-plan-activity-edit-progress\")\r\n      });\r\n   },\r\n\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   postRender: function () {\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\r\n      self.sub(\"UPDATE_ITEMS_FROM_FORMRENDER\", $.proxy(self.onNotifyUpdateItemFromRender, self));\r\n   },\r\n\r\n   /**\r\n    * Notifies when an event is raised\r\n    */\r\n   onNotifyLoadInfoActivityExecution: function (event, params) {\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n      var $content = self.getContent().empty();\r\n\r\n      var activityToShow = self.params.plan.activities.filter(function(activity){\r\n         return activity.id.toUpperCase() == self.params.plan.idActivitySelected.toUpperCase();\r\n      })[0];\r\n\r\n      var argsTemplate = {};\r\n      argsTemplate.valuePercentBarComplete = 0;\r\n      argsTemplate.progress = {\r\n         progress: activityToShow.progress,\r\n         canEdit: (activityToShow.items.length === 0)\r\n      };\r\n\r\n      if(argsTemplate.progress.progress){\r\n         argsTemplate.valuePercentBarComplete = argsTemplate.progress.progress;\r\n      }\r\n\r\n      //Update widget\r\n      var templateMain = self.getTemplate(\"plan-progress-main\");\r\n      templateMain.render(argsTemplate).appendTo($content);\r\n\r\n      self.plugins.popupEditProgress = self.initPluginPopupEditProgress();\r\n\r\n      var popupEditProgress = self.plugins.popupEditProgress;\r\n\r\n      self.formEditProgress = {\r\n         sliderProgress: $(\"#sliderProgress\", popupEditProgress).slider({\r\n            orientation: \"horizontal\",\r\n            range: \"min\",\r\n            max: 100,\r\n            width: 100,\r\n            from: 5,\r\n            to: 50,\r\n            step: 1,\r\n            value: argsTemplate.valuePercentBarComplete,\r\n            slide: $.proxy(self.onChangesliderProgress, self),\r\n            change: $.proxy(self.onChangesliderProgress, self)\r\n         }).each(function () {\r\n            var vals = $(this).slider(\"option\", \"max\") - $(this).slider(\"option\", \"min\");\r\n            for (var i = 0; i <= vals; i += 10) {\r\n               var el = $(\"<label class='step'>\" + (i) + \"</label>\").css(\"left\", (i / vals * 100) + \"%\");\r\n               $(this).append(el);\r\n            }\r\n         }),\r\n         numericTextBoxPlugin: $(\"#inputProgressNumericTextBox\", popupEditProgress).spinner({\r\n            format: \"n0\",\r\n            min: 0,\r\n            max: 100,\r\n            spin: $.proxy(self.onChangeNumericTextBoxProgress, self),\r\n            change: $.proxy(self.onChangeNumericTextBoxProgress, self),\r\n            value: argsTemplate.valuePercentBarComplete,\r\n            decimals: 0\r\n         }),\r\n         buttonChangeProgress: $(\"#button-accept-change-progress\", popupEditProgress),\r\n         buttonCancel: $(\"#button-cancel-change-progress\", popupEditProgress)\r\n      };\r\n\r\n      //Handlers\r\n      $(\".action-open-popup-edit-progress\", $content).on(\"click\", $.proxy(self.onShowPopupEditProgress, self));\r\n\r\n      self.formEditProgress.buttonCancel.on(\"click\", $.proxy(self.onClickCancel, self));\r\n      self.formEditProgress.buttonChangeProgress.on(\"click\", $.proxy(self.onSubmitFormChangeProgress, self));\r\n\r\n      self.updateProgressUI(argsTemplate.valuePercentBarComplete);\r\n      self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", argsTemplate.valuePercentBarComplete);\r\n\r\n   },\r\n\r\n   onNotifyUpdateItemFromRender: function(event, params){\r\n      var self = this;\r\n      var listItems = params.args.items;\r\n      var activityWork = params.args.activityWork;\r\n\r\n      var progress;      \r\n      if(listItems.length > 0){\r\n         //Hide edit progress\r\n         $(\".action-open-popup-edit-progress\", self.content).hide();\r\n      }else{\r\n         $(\".action-open-popup-edit-progress\", self.content).show();\r\n      }\r\n      //set new progress\r\n      $(\".bz-wp-timestamp span\", self.content).text(activityWork);\r\n      $(\".bz-wp-progress-bar\", self.content).css(\"width\", activityWork + \"%\");\r\n\r\n   },\r\n\r\n   updateProgressUI: function(newPercentProgress){\r\n      var self = this,\r\n         $content = self.getContent();\r\n\r\n      $(\".bz-wp-timestamp span\", $content).text(newPercentProgress);\r\n\r\n      //Begin Adjust status bar next to the number days\r\n      var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\r\n      var widthNumberDays = $(\".remaining-days .days\", $content).width();\r\n      $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\r\n\r\n      var $barCompletedDate = $(\".remaining-days .bar-completed\", $content);\r\n\r\n      $barCompletedDate.css(\"width\", newPercentProgress.toString() + \"%\");\r\n      //End Adjust status bar next to the number days\r\n   },\r\n\r\n   initPluginPopupEditProgress: function () {\r\n      var self = this;\r\n      var templatePopupEditProgress = self.getTemplate(\"plan-progress-popup-edit\");\r\n      self.dialogBox.formContent = templatePopupEditProgress.render();\r\n      return self.dialogBox.formContent;\r\n\r\n   },\r\n   /*\r\n    * UI\r\n    */\r\n\r\n   onShowPopupEditProgress: function(){\r\n      var self = this;\r\n\r\n      self.dialogBox.formContent.dialog({\r\n         resizable: false,\r\n         draggable: false,\r\n         height: \"auto\",\r\n         width: \"600px\",\r\n         modal: true,\r\n         title: bizagi.localization.getResource(\"workportal-project-plan-progress-title\"),\r\n         maximize: true,\r\n         open:  $.proxy(self.onOpenPopupPlan, self),\r\n         close: function () {\r\n            self.dialogBox.formContent.dialog(\"destroy\");\r\n            self.dialogBox.formContent.detach();\r\n         }\r\n      });\r\n\r\n      self.previusValueProgress = self.formEditProgress.sliderProgress.slider(\"value\");\r\n\r\n   },\r\n\r\n   onChangeNumericTextBoxProgress: function (event) {\r\n      var self = this;\r\n      var newValue = self.formEditProgress.numericTextBoxPlugin.spinner(\"value\");\r\n      self.formEditProgress.sliderProgress.slider(\"value\", newValue);\r\n   },\r\n\r\n   onChangesliderProgress: function (event) {\r\n      var self = this;\r\n      var newValue = self.formEditProgress.sliderProgress.slider(\"value\");\r\n      self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", newValue);\r\n   },\r\n\r\n   onClickCancel: function (event) {\r\n      event.preventDefault();\r\n      var self = this;\r\n\r\n      self.dialogBox.formContent.dialog(\"destroy\");\r\n      self.dialogBox.formContent.detach();\r\n      //return before value progress\r\n      self.formEditProgress.sliderProgress.slider(\"value\", self.previusValueProgress);\r\n      self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", self.previusValueProgress);\r\n   },\r\n\r\n   onSubmitFormChangeProgress: function (event) {\r\n      event.preventDefault();\r\n      var self = this;\r\n\r\n      self.formEditProgress.buttonChangeProgress.prop(\"disabled\", true);\r\n\r\n      var activityToShow = self.params.plan.activities.filter(function(activity){\r\n         return activity.id == self.params.plan.idActivitySelected;\r\n      })[0];\r\n       var params = $.extend(activityToShow, {\r\n           progress:  self.formEditProgress.numericTextBoxPlugin.spinner(\"value\"),\r\n           idPlan: self.params.plan.id\r\n       });\r\n      $.when(self.dataService.editActivityPlan(params)).done(function () {\r\n         self.formEditProgress.buttonChangeProgress.prop(\"disabled\", false);\r\n         activityToShow.progress = self.formEditProgress.numericTextBoxPlugin.spinner(\"value\");\r\n         self.updateProgressUI(activityToShow.progress);\r\n          self.dialogBox.formContent.dialog(\"destroy\");\r\n          self.dialogBox.formContent.detach();\r\n      });\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.progress\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.progress], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Subprocesses Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.subprocesses\", {}, {\r\n      /*\r\n       *   Constructor\r\n       */\r\n      init: function (workportalFacade, dataService, params) {\r\n         var self = this;\r\n\r\n         // Call base\r\n         self._super(workportalFacade, dataService, params);\r\n\r\n         //Load templates\r\n         self.loadTemplates({\r\n            \"project-subprocesses\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.subprocesses\").concat(\"#project-plan-activity-plan-subprocesses-wrapper\"),\r\n            \"project-subprocesses-tootip-custom-properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.subprocesses\").concat(\"#project-activity-plan-subprocesses-tooltip-custom-properties-wrapper\")\r\n         });\r\n      },\r\n\r\n      /*\r\n       * Renders the template defined in the widget\r\n       */\r\n      renderContent: function () {\r\n         var self = this;\r\n         self.content = $(\"<div></div>\");\r\n         return self.content;\r\n      },\r\n\r\n      /*\r\n       * links events with handlers\r\n       */\r\n      postRender: function () {\r\n         var self = this;\r\n      }\r\n   }\r\n);\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.subprocesses\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.subprocesses]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Parent\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.parent\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"plan-parent-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.parent\").concat(\"#project-plan-activity-parent\")\r\n      });\r\n   },\r\n\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   postRender: function () {\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\r\n   },\r\n\r\n   /**\r\n    * Notifies when an event is raised\r\n    */\r\n\r\n   onNotifyLoadInfoActivityExecution: function (event, params) {\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n      var $content = self.getContent().empty();\r\n\r\n         $.when(self.dataService.getPlanParent({idPlan: self.params.plan.id})).done(function (planParent) {\r\n            self.params.plan.parent = planParent;\r\n            if(self.params.plan.parent){\r\n               var argsTemplate = {};\r\n               argsTemplate.parent = {\r\n                  idParent: self.params.plan.parent.radNumber,\r\n                  nameParent: self.params.plan.parent.displayName,\r\n                  idCase: self.params.plan.parent.idCase,\r\n                  idWorkflow: self.params.plan.parent.idWorkflow,\r\n                  idWorkItem: self.params.plan.parent.idWorkItem,\r\n                  idTask: self.params.plan.parent.idTask\r\n               };\r\n\r\n               //Update widget\r\n               var contentTemplate = self.getTemplate(\"plan-parent-main\");\r\n               contentTemplate\r\n                  .render(argsTemplate)\r\n                  .appendTo($content);\r\n\r\n               $(\"#go-to-parent-case\", $content).on(\"click\", $.proxy(self.onClickGoToParentCase, self));\r\n            }\r\n         });\r\n\r\n\r\n   },\r\n\r\n   onClickGoToParentCase: function (event) {\r\n      event.preventDefault();\r\n      var self = this;\r\n      self.routingExecute($(event.target).closest(\"#go-to-parent-case\"));\r\n   }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.parent\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.parent], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Users Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.users\", {}, {\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      self.usersMap = {};\r\n      self.plugins = {};\r\n      self.usersInformation=[];\r\n      self.globalHandlersService = bizagi.injector.get('globalHandlersService');\r\n      self.usersAssignees = [];\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      //The load template the users plan because they are the same\r\n      self.loadTemplates({\r\n         \"plan-users-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.users\").concat(\"#project-plan-users\")\r\n      });\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   /*\r\n    * links events with handlers\r\n    */\r\n   postRender: function () {\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\r\n   },\r\n\r\n   /*\r\n    * validate if the activity is running\r\n    */\r\n   activityRuning: function (activity) {\r\n      return activity.startDate !== null && activity.finishDate === null;\r\n   },\r\n\r\n   onNotifyLoadInfoActivityExecution: function (event, params) {\r\n      var self = this,\r\n      cvsGuidUsers = [],\r\n         activitiesUsers = [],\r\n         $content = self.getContent().empty();\r\n      self.params = $.extend(self.params, params.args);\r\n\r\n      var ownerUserId = self.params.plan.idUserCreator;\r\n      var ownerUserGuid = self.params.plan.idUserCreator;\r\n\r\n      activitiesUsers.push({ \"idUser\": ownerUserId, \"guidUser\": ownerUserGuid, \"userType\": [\"owner\"] });\r\n      self.usersMap[\"-\" + ownerUserId + \"-\"] = {\r\n         picture: \"\",\r\n         id: ownerUserId,\r\n         guid: ownerUserGuid,\r\n         name: \"\",\r\n         userType: [\"owner\"]\r\n      };\r\n      cvsGuidUsers.push(ownerUserGuid);\r\n      $.each(self.params.plan.activities, function (index, activity) {\r\n         if (self.activityRuning(activity)) {\r\n            var userId = activity.userAssigned;\r\n            var userGuid = activity.userAssignedGuid;\r\n            if (userId === ownerUserId) {\r\n               if($.inArray(\"Assigned\", activitiesUsers[0].userType) === -1){\r\n                  activitiesUsers[0].userType.push(\"Assigned\");\r\n                  self.usersMap[\"-\" + ownerUserId + \"-\"].userType.push(\"Assigned\");\r\n               }\r\n            }\r\n            else {\r\n               self.usersMap[\"-\" + userId + \"-\"] = {\r\n                  picture: \"\",\r\n                  id: userId,\r\n                  name: \"\",\r\n                  userType: [\"Assigned\"]\r\n               };\r\n               if (activitiesUsers.filter(function(user) { return user.idUser == userId; }).length === 0) {\r\n                  var id=userGuid?userGuid:userId;\r\n                  activitiesUsers.push({\"idUser\": id, \"userGuid\": id, \"userType\": [\"Assigned\"]});\r\n                  cvsGuidUsers.push(id);\r\n               }\r\n            }  \r\n         }\r\n      });\r\n      self.activitiesUsers = activitiesUsers;\r\n\r\n      //Update widget\r\n      var contentTemplate = self.getTemplate(\"plan-users-main\");\r\n      contentTemplate\r\n         .render({\r\n            assignee: self.justAssignees(activitiesUsers),\r\n            label: bizagi.localization.getResource(\"workportal-project-plan-assignee\")\r\n         })\r\n         .appendTo($content);\r\n        self.addEventHandlersModal();\r\n      $.when(self.callGetDataUsers(cvsGuidUsers)).then(function () {\r\n         self.showCreatorInformation(ownerUserId);\r\n         self.renderUserProfilesAndImages();\r\n      });\r\n   },\r\n\r\n   /**\r\n    * return standar userAdapter information with only assigned users\r\n    * @param {Array} allUsers \r\n    */\r\n   justAssignees: function (allUsers) {\r\n       var usersAssignee=[];\r\n       allUsers.map(function(user) {\r\n           var isOwner=user.userType.indexOf(\"owner\")!==-1;\r\n           var isAssignee=user.userType.indexOf(\"Assigned\")!==-1;\r\n           usersAssignee.push(usersAdapter.createJsonUserInfo(user.idUser, \"\", \"\", \"\", \"\", \"\", isAssignee, isOwner, [], []));\r\n       });\r\n       return usersAdapter.justAssignees(usersAssignee);\r\n   },\r\n   \r\n   /**\r\n    * show the information of the creator case\r\n    * @param {string} ownerUserId guid user creator\r\n    */\r\n   showCreatorInformation: function (ownerUserId) {\r\n       var self = this;\r\n       var userCreator=self.usersMap[\"-\"+ownerUserId+\"-\"];\r\n       var userInfo = usersAdapter.createJsonUserInfo(\r\n           userCreator.id,\r\n           userCreator.name,\r\n           userCreator.username,\r\n           userCreator.picture?userCreator.picture:undefined,\r\n           userCreator.email,\r\n           userCreator.name.getInitials(),\r\n           false,\r\n           true,\r\n           [],\r\n           []\r\n       );\r\n       self.content.find(\".ui-bizagi-wp-project-plan-users .ui-bizagi-wp-project-users-creator-info\").userinformation(self, { user: userInfo });\r\n   },\r\n\r\n   /**\r\n    * UI\r\n    */\r\n\r\n   renderUserProfilesAndImages: function () {\r\n       var self = this;\r\n       $.each(self.usersMap, function (i, obj) {\r\n           var $li = $(\".ui-bizagi-wp-userlist li[data-iduser=\" + obj.id + \"]\", self.content);\r\n           if (obj.picture !== \"\") {\r\n               $li.find(\"img\").prop(\"src\", obj.picture);\r\n           }\r\n           else {\r\n               $li.find(\"img\").hide();\r\n               if(obj.name!==undefined){\r\n                  $li.find(\"span\").html(obj.name.getInitials());\r\n               }\r\n               else{\r\n                  console.log(\"obj.name is undefined\");\r\n               }\r\n\r\n           }\r\n       });\r\n       $(\".ui-bizagi-wp-userlist li\", self.content).not(\".moreUsers\").on('mouseenter', function (ev) {\r\n         var $target = $(ev.target);  \r\n         var userId = $(this).data(\"iduser\");\r\n         var userSelected;\r\n         $.each(self.usersMap, function (i, obj) {\r\n            if(obj.id === userId)\r\n               userSelected=obj;\r\n        });\r\n         var usersActivities=self.usersAssignees.find(function(assignee) {\r\n            return assignee.userAssigned === userSelected.id;\r\n         });\r\n         var activities=[];\r\n         if(usersActivities)\r\n            usersActivities.activities.map(function(activity) {\r\n               activities.push(activity.name);\r\n            });\r\n         var userParam = usersAdapter.createJsonUserInfo(userSelected.id, userSelected.name, userSelected.username, userSelected.picture, userSelected.email, userSelected.name.getInitials(), self.getIsAssignee(userSelected), self.getIsOwner(userSelected), activities, undefined);\r\n                     \r\n         $target.parent().usertooltip(self,{target:$target,user:userParam});\r\n      });\r\n   },\r\n\r\n   getIsAssignee: function(userSelected){\r\n      if(userSelected.userType.indexOf(\"Assigned\") > -1){\r\n          return true;\r\n      }\r\n      return false;\r\n     },\r\n  \r\n     getIsOwner : function(userSelected){\r\n      if(userSelected.userType.indexOf(\"owner\") > -1){\r\n          return true;\r\n      }\r\n      return false;\r\n     },\r\n   /*\r\n    *  Get data for users\r\n    */\r\n   callGetDataUsers: function (cvsGuidUsers) {\r\n      var self = this,\r\n         params = {},\r\n         defer = $.Deferred();\r\n      params = {\r\n         usersGuids: cvsGuidUsers.join(),\r\n         width: 50,\r\n         height: 50\r\n      };\r\n      $.when(self.dataService.getUsersData(params)).always(function (response) {\r\n        self.usersInformation= response;\r\n         for (var i = 0, length = response.length; i < length; i += 1) {\r\n            if (typeof (response[i].name) === \"undefined\") {\r\n               bizagi.log(response[i] + \" Id Not Found\", response, \"error\");\r\n            } else {\r\n               if(self.usersMap[\"-\" + response[i].id + \"-\"]){\r\n                  self.usersMap[\"-\" + response[i].id + \"-\"].picture += (response[i].picture) ? \"data:image/png;base64,\" + response[i].picture : \"\";\r\n                  self.usersMap[\"-\" + response[i].id + \"-\"].name = response[i].name || \"\";\r\n                  self.usersMap[\"-\" + response[i].id + \"-\"].username = response[i].username || \"\";\r\n                  self.usersMap[\"-\" + response[i].id + \"-\"].email = response[i].email || \"\";\r\n               }\r\n               else{\r\n                  console.log(\"The object is undefined\");\r\n               }\r\n            }\r\n         }\r\n         self.getUsersAssignees();\r\n         defer.resolve();\r\n      });\r\n      return defer.promise();\r\n   },\r\n\r\ngetUsersAssignees: function(){\r\n    var self = this;\r\n    for(var i=0; i<self.usersInformation.length; i++){\r\n        self.usersAssignees.push(self.getUserAssignee(self.usersInformation[i]));\r\n    }\r\n\r\n},\r\n\r\ngetUserAssignee: function(user){\r\n    var self =  this;\r\n    var tasks = [];\r\n    $.each(self.params.plan.activities, function (index, activity) {\r\n        var userId = activity.userAssigned;\r\n        if (userId === user.id && self.activityRuning(activity)) {\r\n            tasks.push({ \"name\": activity.name });\r\n        }\r\n    });\r\n    user.tasks = tasks;\r\n    var types = self.activitiesUsers.find(function(actUser) {\r\n        return actUser.idUser == user.id;\r\n    });\r\n    user.userType = types.userType;\r\n\r\n    var userAssignees = usersAdapter.createJsonUserInfo(\r\n        user.id, \r\n        user.name, \r\n        user.username, \r\n        user.picture ? \"data:image/png;base64,\" + user.picture : undefined, \r\n        user.email, \r\n        user.name.getInitials(),\r\n        self.getIsAssignee(user), \r\n        self.getIsOwner(user), \r\n        user.tasks, \r\n        []);\r\n\r\n        return userAssignees;\r\n   },\r\n\r\n   addEventHandlersModal: function () {\r\n    var self =  this;\r\n    $(\".moreUsers\").click(function(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        var usersAssignees = self.usersAssignees || [];\r\n        self.globalHandlersService.publish(\"showDialogWidget\", {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL,\r\n            closeVisible: true,\r\n            data: usersAssignees,\r\n            maximize: true,\r\n            modalParameters: {\r\n                title: bizagi.localization.getResource(\"workportal-project-users-title\")+ \" (\"+usersAssignees.length+\")\",\r\n                width: 790,\r\n                height: 526,\r\n                refreshInbox: false\r\n            }\r\n        });\r\n     });\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.users\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.users], true);"]}