{"version":3,"sources":["jquery/common/bizagi.filterMultiple/js/bizagi.filterMultiple.js","jquery/common/bizagi.filterMoney/js/bizagi.filterMoney.js","jquery/common/bizagi.filterNumber/js/bizagi.filterNumber.js","jquery/common/bizagi.filterDate/js/bizagi.filterDate.js","jquery/common/bizagi.filterText/js/bizagi.filterText.js","jquery/common/bizagi.filterBoolean/js/bizagi.filterBoolean.js","jquery/common/bizagi.searchuser/js/bizagi.searchuser.js","jquery/workportal/desktop/widget/paginator/bizagi.workportal.desktop.widgets.paginator.js","jquery/workportal/desktop/widget/sortbar/bizagi.workportal.desktop.widgets.sortbar.js","jquery/workportal/desktop/widget/mysearchfilter/bizagi.workportal.desktop.widgets.mysearchfilter.js"],"names":["$","widget","options","showButtonClearFilter","properties","onApply","data","onClear","xpath","setData","_create","self","this","isDefaultFilter","_addButtonClearFilter","_setReturnObject","_bindContextMenuButtons","_bindContextMenu","_bindTooltip","_bindDefaultFilter","a","filtersText","i","defaultValues","applied","returnObject","value","push","id","displayName","$displayNameControl","element","displayText","text","split","btnRemoveFilter","bizagi","localization","getResource","append","attribute","type","typeSearch","contextMenu","types","container","item","opt","root","appendTo","contextMenuButtons","$menuContext","$menu","htmlButtons","on","_addFilterToDisplayName","trigger","_buildContextMenuItems","items","name","className","callback","_removeFilter","replaceAll","$opener","attr","click","event","target","hasClass","is","selector","events","show","div","_disableApply","empty","when","done","checked","find","el","checkbox","_bindHandlers","hide","filterValue","tooltip","content","length","$container","each","index","ev","stopImmediatePropagation","$target","_enableApply","val","splice","indexOf","_resetValue","cont","_setDisplayNameToDefault","$applyControl","removeAttr","removeClass","addClass","Object","getOwnPropertyNames","destroy","Widget","prototype","call","jQuery","xpaths","numericFormat","clone","rangeQuery","_setValue","paramsContextMenu","key","min","max","notification","buttons","$input","formatCurrency","_getFormatOptions","html","_enableNotification","$minValue","$maxValue","proxy","_onClickMinValue","_onClickMaxValue","removeHandlersValuesMinMax","undefined","_setDisplayValue","_setFormatValue","_getObjectValueByString","stringValue","asFloatType","regexString","symbol","digitGroupSymbol","regex","eval","replace","parseFloat","minVal","maxVal","$minControl","$maxControl","keyup","isLowerLimitInvalid","isNaN","isUpperLimitInvalid","isRangeInvalid","_checkNotification","_disableNotification","showLabel","formatOptions","roundToDecimalPlace","eventOnDecimalsEntered","decimalSymbol","off","_setValuesOfReturnObject","_setDisplayTitle","from","to","_setDisplayLabels","_getFromControl","datepicker","_getToControl","$minDate","$maxDate","minDate","Date","_getDateFromInvariant","maxDate","dateFormat","util","dateFormatter","getDateFormatByDatePickerJqueryUI","toLowerCase","defaultDate","changeMonth","changeYear","numberOfMonths","yearRange","onClose","selectedDate","onSelect","_resetValues","formatInvariant","toDefault","$displayTitleControl","displayTitle","minDateObj","maxDateObj","_formatDate","dateObj","formatDate","date","getDateFromInvariant","_setFilterToDisplayName","_getTextControl","textValue","console","log","parseBoolean","valueToLocalize","toString","formatBoolean","fn","bizagiSearchUser","filterData","usersResults","currentPage","totalPages","dBox","editingUser","methods","init","bindElements","openUploadDialog","window","document","dialogBox","dialog","width","maximize","resize","draggable","height","title","modal","showFilters","showButtons","addHandlers","filtersContainer","filters","displayNames","buttonsContainer","searchButtonName","clearButtonName","allowAddUser","newUserBtn","bizagiCreateUser","dataService","renderFactory","canvas","onCreate","selectItem","onCancel","getUsersTableData","clickClearPluginValues","remove","updateFiltersInformation","deferred","searchUsers","Array","isArray","users","total","showUsersTable","showMessageBox","message","status","fail","error","showError","pagination","pagesArray","getPagesArray","usersTableTmpl","getTableTemplate","addTableHandlers","setUpPagination","buttonSelf","itemSelected","valuesToSelect","resolve","pagesToShow","aux","$pager","bizagiPagination","maxElemShow","actualPage","listElement","clickCallBack","pag","parseInt","page","workportal","widgets","extend","workportalFacade","params","_super","loadTemplates","paginator","getTemplate","concat","renderContent","referenceType","template","getSuffixWidget","render","postRender","sub","updateView","configureHandlers","args","$content","getContent","renderTemplate","totalRecords","setModel","fromActionLauncher","clean","histName","action","reference","surrogateKey","guidSearch","getModel","stopNavigation","onPageBreak","disabledPaginatorButtonsByLimits","pub","$buttonFastRewind","$buttonRewind","$buttonFordward","$buttonFastFordward","injector","register","processActionService","accumulatedcontext","sortbar","right-content","addButton","sortMenu","actions","recordsPerPage","recordsMenu","enableFilter","$checkAll","configureAfterPaintHandlers","initializeAndProcessFilterButton","setFiltersSortData","hideFilterButtonAndBar","hideSortButtons","enableBatchActions","updateCounterByFilterApplied","showingFiltering","setVisibleCheckAll","behaviorVisibleSortbar","validActions","actionsData","onCheckUncheck","showSortMenu","showRecordsMenu","sortSelection","setIconSortType","_sortType","orderType","onRemoveSelectedItemsCollections","showingSorting","showingCheckAll","_haveAddButton","setVisibleSortbar","visible","closest","showSelectedItems","numberCheckedItems","keywordSelected","button","sortTypeBeforeChanged","onClickBatchAction","$buttonLI","guidAction","getAction","requestsInProgressActionGuid","addLoadingButtonAction","executeBatchAction","commonActionsmodel","always","$button","prepend","commonActions","$parent","_filters","displayValue","e","stopPropagation","one","currentTarget","display","pop","pageSize","Number","trim","textContent","restoreOrderSelected","processAddButton","$buttonContainer","_lastReferenceEntity","children","startLoading","delay","overlay","getProcessAddAction","referenceEntity","guidEntity","renderButton","endLoading","$addButton","clickAddButton","getMapping","accumulatedContext","getContext","xpathContext","mappingData","onExecuteProcess","onExecuteForm","isChecked","commonActionsModel","showBatchActions","checkAll","prop","typeActions","keys","itemsSelected","moreActions","slice","$actions","tooltipClass","open","ui","uiTooltip","$id","keyActionGuid","not","$buttonAction","close","hover","stop","fadeTo","fadeOut","filtersAppliedCounter","calculateFilters","filterCounter","sortCounter","showFilterButton","hideFilterButton","showSortButtons","updateCounter","$sortbarIcon","filtersApplied","counter","$counter","showingFilter","startForm","hasStartForm","executeProcessAction","refreshTemplateData","loadTemplateData","isRefresh","executeFormAction","refresh","filter","grep","multiplicity","mode","isEvent","unsub","mysearchfilter","mysearchfilter-item","filterItem","initializeMySearchFilter","criteriaSearchApplied","filterControlArray","orderBy","toggleWidget","openCloseWidget","setFiltersData","setOrderBy","setRecordsPerPage","defaultFilterApplied","filtersAppliedWithProperties","$listContent","defaultFilter","tmplid","filterApplied","buildFilter","setFilterData","$element","buildFilterMultiple","buildFilterNumber","buildFilterMoney","buildFilterDate","buildFilterBoolean","multiple","number","money","dateFilter","booleanFilter","moneyFilter","addFilterSelection","triggerFilter","removeFilterApplied","numberFilter","multipleFilter","len","filtersToSend","filterBarFilters","defineFilterObject","filterParams","level"],"mappings":"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","sourcesContent":["/**\r\n * Filter multiple plugin creates a tooltip control to show related entity information and select multiple values\r\n *\r\n * @author Andrs Fernando Muoz\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.multiple', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpath) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n            self.isDefaultFilter = false;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindDefaultFilter();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindDefaultFilter: function () {\r\n            var self = this;\r\n            var data = self.options.data || [];\r\n            var filtersText = ': ';\r\n            var a, i = -1;\r\n\r\n            while (a = data.defaultValues[++i]) {\r\n                if (a.applied) {\r\n                    self.isDefaultFilter = true;\r\n                    self.returnObject.value.push({\"id\": a.id});\r\n                    filtersText += a.displayName;\r\n                }\r\n            }\r\n\r\n            if (self.isDefaultFilter) {\r\n                var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n                var displayText = $displayNameControl.text().split(':');\r\n\r\n                $displayNameControl.text(displayText[0] + filtersText);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            self.returnObject = {\r\n                properties: {\r\n                    xpath: self.options.properties.attribute,\r\n                    type: \"entity\",\r\n                    typeSearch: \"exact\"\r\n                },\r\n                value: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.container = function (item, opt, root) {\r\n                $('<div id=\"'+item.id+'\" class=\"menu-container\"></div>').appendTo(this);\r\n            };\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\" disabled>' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply([self.returnObject]);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _buildContextMenuItems: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var items = {};\r\n\r\n            if(self.options.showButtonClearFilter !== true) {\r\n                items[\"key\"] = {\r\n                    name: options.getResource(\"workportal-my-search-remove-filter\"),\r\n                    className: \"ui-bizagi-clear-filters\",\r\n                    callback: function () {\r\n                        self._removeFilter();\r\n                        return true;// False -> To keep the context menu open\r\n                    }\r\n                };\r\n            }\r\n            items[\"container\"] = {\r\n                id: \"checks_container_\" + options.properties.attribute.replaceAll(\".\", \"_\"),\r\n                type: \"container\"\r\n            };\r\n            items[\"buttons\"] = {\r\n               type: \"contextMenuButtons\"\r\n            };\r\n\r\n            return items;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = \"#\" + $(\".wgd-my-search-filter-pluggin\", $opener).attr(\"id\");\r\n            var items = self._buildContextMenuItems();\r\n\r\n            $opener.click(function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            $opener.contextMenu({\r\n                selector: id,\r\n                trigger: \"none\",\r\n                items: items,\r\n                events: {\r\n                    show: function() {\r\n                        var div = $(\"#checks_container_\" + options.properties.attribute.replaceAll(\".\", \"_\"), self.$menuContext);\r\n\r\n                        self._disableApply();\r\n                        div.empty();\r\n\r\n                        return $.when(options.setData()).done(function (data) {\r\n                            var data = typeof data !== 'undefined' ? data.defaultValues : options.data.defaultValues;\r\n                            var i = -1, a;\r\n\r\n                            while (a = data[++i]) {\r\n                                var id = self.returnObject.value.find(function (el) { return el.id == a.id; });\r\n                                var checked = (id || a.applied ? \"checked\" : \"\");\r\n                                if (a.id != '' && a.displayName != '' && (!self.isDefaultFilter || (self.isDefaultFilter && checked === \"checked\"))) {\r\n                                    var checkbox = \"<li>\";\r\n                                    checkbox += \"<input data-displayname='\" + a.displayName + \"' type='checkbox' value='\" + a.id + \"'\" + \" \" + checked + \">\";\r\n                                    checkbox += \"<span class='context-menu-item-label-check'>\" + a.displayName + \"</span>\";\r\n                                    checkbox += \"</li>\";\r\n\r\n                                    div.append(checkbox);\r\n                                }\r\n                            }\r\n                            self._bindHandlers();\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            self.filterValue = self.filterValue || [];\r\n\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    if(self.filterValue.length !== 0){\r\n                        var $container = $(\"<div>\");\r\n                        $.each(self.filterValue, function( index, value ) {\r\n                            $container.append($(\"<div><label>\" + value + \"</label></div>\"));\r\n                        });\r\n                        return $container;\r\n                    }\r\n                    else {\r\n                        return \"\";\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function () {\r\n            var self = this;\r\n\r\n            $(\"input:checkbox\", self.$menuContext).on(\"click\", function (ev){\r\n                ev.stopImmediatePropagation(); //stopping jquery click event handler to be call twice for a checkbox\r\n                var $target = $(ev.target);\r\n                var id = $target.attr(\"value\");\r\n                var isChecked = $target.is(':checked');\r\n\r\n                if (isChecked) {\r\n                    self.returnObject.value.push({\"id\": id});\r\n                    self._enableApply();\r\n                }\r\n                else {\r\n                    var val = self.returnObject.value.find(function (el) {return el.id == id;});\r\n                    if (val) {\r\n                        self.returnObject.value.splice(self.returnObject.value.indexOf(val), 1);\r\n                    }\r\n                    if (self.returnObject.value.length === 0) {\r\n                        self._disableApply();\r\n                    }\r\n                    else {\r\n                        self._enableApply();\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function (){\r\n            var self = this;\r\n            self.returnObject.value = [];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var $displayNameControl = $(\".wgd-my-search-filter-pluggin span\", self.element);\r\n            var displayText = $displayNameControl.text().split(\":\");\r\n            var filtersText = displayText[0] + \": \";\r\n            var cont = self.returnObject.value.length;\r\n            self.filterValue = [];\r\n\r\n            $(\"input:checked\", self.$menuContext).each(function () {\r\n                cont--;\r\n                self.filterValue.push($(this).data(\"displayname\"));\r\n                filtersText = filtersText + $(this).data(\"displayname\") + (cont == 0 ? '' : \", \");\r\n            });\r\n\r\n            $displayNameControl.text(filtersText);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $(\".wgd-my-search-filter-pluggin span\", self.element);\r\n            var displayName = $displayNameControl.text().split(\":\");\r\n\r\n            self.isDefaultFilter = false;\r\n            self.filterValue = [];\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $(\"#ui-bizagi-apply-filter\", self.$menuContext);\r\n\r\n            $applyControl.removeAttr(\"disabled\");\r\n            $applyControl.removeClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $(\"#ui-bizagi-apply-filter\", self.$menuContext);\r\n\r\n            $applyControl.attr(\"disabled\", \"disabled\");\r\n            $applyControl.addClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self.options.onClear([self.returnObject.properties.xpath]);\r\n            self._setDisplayNameToDefault();\r\n            self._resetValue();\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param filterData\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n Document   : bizagi.filterMoney\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andres Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a money control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.money', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpaths) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n            self.numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n\r\n            self.returnObject = [\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@from\",\r\n                        type: \"money\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"from\"\r\n                    }\r\n                },\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@to\",\r\n                        type: \"money\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"to\"\r\n                    }\r\n                }\r\n            ];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._setValue();\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply(self.returnObject, self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {\r\n                        name: options.getResource('workportal-my-search-remove-filter'),\r\n                        className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    min: {\r\n                        name: options.getResource('bz-rp-components-time-from-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-money-filter-min'\r\n                    },\r\n                    max: {\r\n                        name: options.getResource('bz-rp-components-time-to-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-money-filter-max'\r\n                    },\r\n                    notification: {\r\n                        name: options.getResource('workportal-my-search-limit-notification'),\r\n                        className: 'ui-bizagi-money-filter-notification'\r\n                    },\r\n                    buttons: {\r\n                        type: 'contextMenuButtons' // Self structure - see _bindContextMenuButtons\r\n                    }\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        return $.when(self.options.setData()).done(function (data) {\r\n                            var $input = $('<input type=\"text\">');\r\n                            self.options.data = (typeof data !== 'undefined') ? data : self.options.data;\r\n\r\n                            $input.val(self.options.data.min);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-money-filter-min span\", self.$menuContext).html(options.getResource('bz-rp-components-time-from-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            $input.val(self.options.data.max);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-money-filter-max span\", self.$menuContext).html(options.getResource('bz-rp-components-time-to-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            self._enableNotification(false);\r\n\r\n                            var $minValue = $('.ui-bizagi-money-filter-min .select-value', self.$menuContext);\r\n                            var $maxValue = $('.ui-bizagi-money-filter-max .select-value', self.$menuContext);\r\n                            $minValue.on('click', $.proxy(self._onClickMinValue, self));\r\n                            $maxValue.on('click', $.proxy(self._onClickMaxValue, self));\r\n\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                        self.removeHandlersValuesMinMax();\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $opener.contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    return self.filterValue;\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayValue: function (){\r\n            var self = this;\r\n            var min = (typeof(self.returnObject[0].value) === \"undefined\") ? \"\" : self.returnObject[0].value ;\r\n            var max = (typeof(self.returnObject[1].value) === \"undefined\") ? \"\" : self.returnObject[1].value ;\r\n\r\n            $('.ui-bizagi-money-filter-min input', self.$menuContext).val(min);\r\n            $('.ui-bizagi-money-filter-max input', self.$menuContext).val(max);\r\n            $('.ui-bizagi-money-filter-min input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n            $('.ui-bizagi-money-filter-max input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setFormatValue: function($input){\r\n            var self = this;\r\n\r\n            var value = self._getObjectValueByString($input.val());\r\n\r\n            if(value !== 0){\r\n                $input.val(value);\r\n                $input.formatCurrency(self._getFormatOptions());\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param stringValue\r\n         * @return {*}\r\n         * @param asFloatType\r\n         */\r\n        _getObjectValueByString: function(stringValue, asFloatType){\r\n            var self = this;\r\n\r\n            var value = stringValue,\r\n                regexString = \"/[\" + self.numericFormat.symbol + self.numericFormat.digitGroupSymbol + \"]/g\",\r\n                regex = eval(regexString);\r\n\r\n            value = value.replace(regex, \"\");\r\n            if(asFloatType){\r\n                value = value.replace(\",\", \".\");\r\n                value = parseFloat(value);\r\n            }\r\n\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var minVal = $('.ui-bizagi-money-filter-min input', self.$menuContext).val();\r\n            var maxVal = $('.ui-bizagi-money-filter-max input', self.$menuContext).val();\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue =  minVal + ' ' + self.options.getResource('bz-rp-components-time-to-label') + ' ' + maxVal;\r\n            $displayNameControl.text(displayName[0] + ': ' + self.filterValue);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue = \"\";\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValue: function () {\r\n            var self = this;\r\n            var minVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-min input\", self.$menuContext).val(), true);\r\n            var maxVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-max input\", self.$menuContext).val(), true);\r\n\r\n            self.returnObject[0].value = (minVal === '') ? maxVal : minVal;\r\n            self.returnObject[1].value = (maxVal === '') ? minVal : maxVal;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function () {\r\n            var self = this;\r\n\r\n            self._setReturnObject();\r\n            $('.ui-bizagi-money-filter-min input', self.$menuContext).val('');\r\n            $('.ui-bizagi-money-filter-max input', self.$menuContext).val('');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n            var options = self.options;\r\n            var $minControl = $('.ui-bizagi-money-filter-min input', self.$menuContext);\r\n            var $maxControl = $('.ui-bizagi-money-filter-max input', self.$menuContext);\r\n\r\n            $minControl.keyup( function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-max input\", self.$menuContext).val(), true);\r\n                    var minVal = self._getObjectValueByString($(this).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n\r\n            $maxControl.keyup(function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(this).val(), true);\r\n                    var minVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-min input\", self.$menuContext).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param event\r\n         */\r\n        _onClickMinValue: function(event){\r\n            var self = this;\r\n            var $minControl = $('.ui-bizagi-money-filter-min input', self.$menuContext);\r\n            $minControl.val($(event.target).text());\r\n            $minControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param event\r\n         * @private\r\n         */\r\n        _onClickMaxValue: function(event){\r\n            var self = this;\r\n            var $maxControl = $('.ui-bizagi-money-filter-max input', self.$menuContext);\r\n            $maxControl.val($(event.target).text());\r\n            $maxControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param isLowerLimitInvalid\r\n         * @param isUpperLimitInvalid\r\n         * @param isRangeInvalid\r\n         * @private\r\n         */\r\n        _checkNotification: function (isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if ((isRangeInvalid || isLowerLimitInvalid || isUpperLimitInvalid)){\r\n                var notification = options.getResource('workportal-my-search-limit-notification');\r\n                if (isLowerLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-lower-limit-notification');\r\n                }\r\n                else if(isUpperLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-upper-limit-notification');\r\n                }\r\n                else if (isRangeInvalid) {\r\n                    notification = options.getResource('workportal-my-search-max-min-notification');\r\n                }\r\n                self._enableNotification(true, notification);\r\n            }\r\n            else{\r\n                self._disableNotification();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param showLabel\r\n         * @param notification\r\n         * @private\r\n         */\r\n        _enableNotification: function (showLabel, notification) {\r\n            var self = this;\r\n\r\n            if(showLabel){\r\n                $(\".ui-bizagi-money-filter-notification span\", self.$menuContext).text(notification);\r\n                $(\".ui-bizagi-money-filter-notification\", self.$menuContext).show();\r\n            }\r\n            else{\r\n                $(\".ui-bizagi-money-filter-notification\", self.$menuContext).hide();\r\n            }\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).attr(\"disabled\", \"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).addClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableNotification: function () {\r\n            var self = this;\r\n\r\n            $(\".ui-bizagi-money-filter-notification\", self.$menuContext).hide();\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeAttr(\"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{symbol: string, roundToDecimalPlace: number, eventOnDecimalsEntered: boolean}}\r\n         * @private\r\n         */\r\n        _getFormatOptions: function (){\r\n            var self = this;\r\n            return formatOptions = {\r\n                symbol: \"\",\r\n                roundToDecimalPlace: -1,\r\n                eventOnDecimalsEntered: true,\r\n                digitGroupSymbol: self.numericFormat.digitGroupSymbol,\r\n                decimalSymbol: self.numericFormat.decimalSymbol\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self._resetValue();\r\n            self._enableNotification(false);\r\n            self._setDisplayNameToDefault();\r\n            self.options.onClear([self.returnObject[0].properties.xpath, self.returnObject[1].properties.xpath]);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        removeHandlersValuesMinMax: function(){\r\n            var self = this;\r\n            var $minValue = $('.ui-bizagi-money-filter-min .select-value', self.$menuContext);\r\n            var $maxValue = $('.ui-bizagi-money-filter-max .select-value', self.$menuContext);\r\n            $minValue.off('click', $.proxy(self._onClickMinValue, self));\r\n            $maxValue.off('click', $.proxy(self._onClickMaxValue, self));\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            var self = this;\r\n            self.removeHandlersValuesMinMax();\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n Document   : bizagi.filterNumber\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andres Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a number control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.number', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpaths) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n            self.numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n\r\n            self.returnObject = [\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@from\",\r\n                        type: \"number\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"from\"\r\n                    }\r\n                },\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@to\",\r\n                        type: \"number\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"to\"\r\n                    }\r\n                }\r\n            ];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._setValue();\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply(self.returnObject);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {\r\n                        name: options.getResource('workportal-my-search-remove-filter'),\r\n                        className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    min: {\r\n                        name: options.getResource('bz-rp-components-time-from-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-number-filter-min'\r\n                    },\r\n                    max: {\r\n                        name: options.getResource('bz-rp-components-time-to-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-number-filter-max'\r\n                    },\r\n                    notification: {\r\n                        name: options.getResource('workportal-my-search-limit-notification'),\r\n                        className: 'ui-bizagi-number-filter-notification'\r\n                    },\r\n                    buttons: {\r\n                        type: 'contextMenuButtons' // Self structure - see _bindContextMenuButtons\r\n                    }\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        return $.when(self.options.setData()).done(function (data) {\r\n                            var $input = $('<input type=\"text\">');\r\n                            self.options.data = (typeof data !== 'undefined') ? data : self.options.data;\r\n\r\n                            $input.val(self.options.data.min);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-number-filter-min span\", self.$menuContext).html(options.getResource('bz-rp-components-time-from-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            $input.val(self.options.data.max);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-number-filter-max span\", self.$menuContext).html(options.getResource('bz-rp-components-time-to-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            self._enableNotification(false);\r\n\r\n                            var $minValue = $('.ui-bizagi-number-filter-min .select-value', self.$menuContext);\r\n                            var $maxValue = $('.ui-bizagi-number-filter-max .select-value', self.$menuContext);\r\n                            $minValue.on('click', $.proxy(self._onClickMinValue, self));\r\n                            $maxValue.on('click', $.proxy(self._onClickMaxValue, self));\r\n\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                        self.removeHandlersValuesMinMax();\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $opener.contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    return self.filterValue;\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayValue: function (){\r\n            var self = this;\r\n            var min = (typeof(self.returnObject[0].value) === \"undefined\") ? \"\" : self.returnObject[0].value ;\r\n            var max = (typeof(self.returnObject[1].value) === \"undefined\") ? \"\" : self.returnObject[1].value ;\r\n\r\n            $('.ui-bizagi-number-filter-min input', self.$menuContext).val(min);\r\n            $('.ui-bizagi-number-filter-max input', self.$menuContext).val(max);\r\n            $('.ui-bizagi-number-filter-min input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n            $('.ui-bizagi-number-filter-max input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setFormatValue: function($input){\r\n            var self = this;\r\n\r\n            var value = self._getObjectValueByString($input.val());\r\n\r\n            if(value !== 0){\r\n                $input.val(value);\r\n                $input.formatCurrency(self._getFormatOptions());\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param stringValue\r\n         * @return {*}\r\n         * @param asFloatType\r\n         */\r\n        _getObjectValueByString: function(stringValue, asFloatType){\r\n            var self = this;\r\n\r\n            var value = stringValue,\r\n                regexString = \"/[\" + self.numericFormat.symbol + self.numericFormat.digitGroupSymbol + \"]/g\",\r\n                regex = eval(regexString);\r\n\r\n            value = value.replace(regex, \"\");\r\n            if(asFloatType){\r\n                value = value.replace(\",\", \".\");\r\n                value = parseFloat(value);\r\n            }\r\n\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var minVal = $('.ui-bizagi-number-filter-min input', self.$menuContext).val();\r\n            var maxVal = $('.ui-bizagi-number-filter-max input', self.$menuContext).val();\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue =  minVal + ' ' + self.options.getResource('bz-rp-components-time-to-label') + ' ' + maxVal;\r\n            $displayNameControl.text(displayName[0] + ': ' + self.filterValue);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue = \"\";\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValue: function () {\r\n            var self = this;\r\n            var minVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-min input\", self.$menuContext).val(), true);\r\n            var maxVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-max input\", self.$menuContext).val(), true);\r\n\r\n            self.returnObject[0].value = (minVal === '') ? maxVal : minVal;\r\n            self.returnObject[1].value = (maxVal === '') ? minVal : maxVal;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function () {\r\n            var self = this;\r\n\r\n            self._setReturnObject();\r\n            $('.ui-bizagi-number-filter-min input', self.$menuContext).val('');\r\n            $('.ui-bizagi-number-filter-max input', self.$menuContext).val('');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n            var options = self.options;\r\n            var $minControl = $('.ui-bizagi-number-filter-min input', self.$menuContext);\r\n            var $maxControl = $('.ui-bizagi-number-filter-max input', self.$menuContext);\r\n\r\n\r\n            $minControl.keyup(function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-max input\", self.$menuContext).val(), true);\r\n                    var minVal = self._getObjectValueByString($(this).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n\r\n            $maxControl.keyup(function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(this).val(), true);\r\n                    var minVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-min input\", self.$menuContext).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param event\r\n         */\r\n        _onClickMinValue: function(event){\r\n            var self = this;\r\n            var $minControl = $('.ui-bizagi-number-filter-min input', self.$menuContext);\r\n            $minControl.val($(event.target).text());\r\n            $minControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param event\r\n         * @private\r\n         */\r\n        _onClickMaxValue: function(event){\r\n            var self = this;\r\n            var $maxControl = $('.ui-bizagi-number-filter-max input', self.$menuContext);\r\n            $maxControl.val($(event.target).text());\r\n            $maxControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param isLowerLimitInvalid\r\n         * @param isUpperLimitInvalid\r\n         * @param isRangeInvalid\r\n         * @private\r\n         */\r\n        _checkNotification: function (isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if ((isRangeInvalid || isLowerLimitInvalid || isUpperLimitInvalid)){\r\n                var notification = options.getResource('workportal-my-search-limit-notification');\r\n                if (isLowerLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-lower-limit-notification');\r\n                }\r\n                else if(isUpperLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-upper-limit-notification');\r\n                }\r\n                else if (isRangeInvalid) {\r\n                    notification = options.getResource('workportal-my-search-max-min-notification');\r\n                }\r\n                self._enableNotification(true, notification);\r\n            }\r\n            else{\r\n                self._disableNotification();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param showLabel\r\n         * @param notification\r\n         * @private\r\n         */\r\n        _enableNotification: function (showLabel, notification) {\r\n            var self = this;\r\n\r\n            if(showLabel){\r\n                $(\".ui-bizagi-number-filter-notification span\", self.$menuContext).text(notification);\r\n                $(\".ui-bizagi-number-filter-notification\", self.$menuContext).show();\r\n            }\r\n            else{\r\n                $(\".ui-bizagi-number-filter-notification\", self.$menuContext).hide();\r\n            }\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).attr(\"disabled\", \"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).addClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableNotification: function () {\r\n            var self = this;\r\n\r\n            $(\".ui-bizagi-number-filter-notification\", self.$menuContext).hide();\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeAttr(\"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{symbol: string, roundToDecimalPlace: number, eventOnDecimalsEntered: boolean}}\r\n         * @private\r\n         */\r\n        _getFormatOptions: function (){\r\n            var self = this;\r\n            return formatOptions = {\r\n                symbol: '',\r\n                roundToDecimalPlace: -1,\r\n                eventOnDecimalsEntered: true,\r\n                digitGroupSymbol: self.numericFormat.digitGroupSymbol,\r\n                decimalSymbol: self.numericFormat.decimalSymbol\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self._resetValue();\r\n            self._enableNotification(false);\r\n            self._setDisplayNameToDefault();\r\n            self.options.onClear([self.returnObject[0].properties.xpath, self.returnObject[1].properties.xpath]);\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n\r\n        /**\r\n         * Remove min and max handlers\r\n         */\r\n        removeHandlersValuesMinMax: function(){\r\n            var self = this;\r\n            var $minValue = $('.ui-bizagi-number-filter-min .select-value', self.$menuContext);\r\n            var $maxValue = $('.ui-bizagi-number-filter-max .select-value', self.$menuContext);\r\n            $minValue.off('click', $.proxy(self._onClickMinValue, self));\r\n            $maxValue.off('click', $.proxy(self._onClickMaxValue, self));\r\n        },\r\n\r\n        destroy: function() {\r\n            var self = this;\r\n            self.removeHandlersValuesMinMax();\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n Document   : bizagi.filterDate\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andres Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a date control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.dateFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpaths) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            var attribute = self.options.properties.attribute;\r\n\r\n            self.returnObject = [\r\n                {\r\n                    properties: {\r\n                        xpath: attribute + '@from',\r\n                        type: 'date',\r\n                        typeSearch: 'range',\r\n                        rangeQuery: 'from'\r\n                    }\r\n                },\r\n                {\r\n                    properties: {\r\n                        xpath: attribute + '@to',\r\n                        type: 'date',\r\n                        typeSearch: 'range',\r\n                        rangeQuery: 'to'\r\n                    }\r\n                }\r\n            ];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if($(this).text() == options.getResource('workportal-general-button-label-apply')){\r\n                        self._setValuesOfReturnObject();\r\n                        self._setDisplayTitle(false);\r\n                        options.onApply(self.returnObject, self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {\r\n                        name: options.getResource('workportal-my-search-remove-filter'),\r\n                        className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    from: {\r\n                        name: options.getResource('bz-rp-components-time-from-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-date-filter-from'\r\n                    },\r\n                    to: {\r\n                        name: options.getResource('bz-rp-components-time-to-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-date-filter-to'\r\n                    },\r\n                    buttons: {\r\n                        type: 'contextMenuButtons' // Self structure - see _bindContextMenuButtons\r\n                    }\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        self._disableApply();\r\n                        self._setDisplayLabels();\r\n                    },\r\n                    hide: function() {\r\n                        self._getFromControl().datepicker('hide');\r\n                        self._getToControl().datepicker('hide');\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $opener.contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    return self.filterValue;\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n            var $minDate = self._getFromControl();\r\n            var $maxDate = self._getToControl();\r\n            var minDate = new Date(self._getDateFromInvariant(self.options.properties.data.min));\r\n            var maxDate = new Date(self._getDateFromInvariant(self.options.properties.data.max));\r\n            var dateFormat = bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI().toLowerCase();\r\n\r\n            $minDate.datepicker({\r\n                defaultDate: minDate,\r\n                dateFormat: dateFormat,\r\n                changeMonth: true,\r\n                changeYear: true,\r\n                numberOfMonths: 1,\r\n                yearRange: '-100:+0',\r\n                minDate: minDate,\r\n                maxDate: maxDate,\r\n                onClose: function(selectedDate) {\r\n                    if(selectedDate) {\r\n                        $maxDate.datepicker('option', 'minDate', selectedDate);\r\n                        if($maxDate.datepicker(\"getDate\")){\r\n                            self._enableApply();\r\n                        }\r\n                    }\r\n                    else{\r\n                        self._disableApply();\r\n                    }\r\n                }\r\n            });\r\n            $maxDate.datepicker({\r\n                defaultDate: maxDate,\r\n                dateFormat: dateFormat,\r\n                changeMonth: true,\r\n                changeYear: true,\r\n                numberOfMonths: 1,\r\n                yearRange: '-100:+0',\r\n                minDate: minDate,\r\n                maxDate: maxDate,\r\n                onSelect: function(selectedDate) {\r\n                    if(selectedDate) {\r\n                        $minDate.datepicker('option', 'maxDate', selectedDate);\r\n                        if($minDate.datepicker(\"getDate\")){\r\n                            self._enableApply();\r\n                        }\r\n                    }\r\n                    else{\r\n                        self._disableApply();\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValues: function (){\r\n            var self = this;\r\n\r\n            self._getFromControl().datepicker(\"setDate\", null);\r\n            self._getToControl().datepicker(\"setDate\", null);\r\n            self._setReturnObject();\r\n            self._disableApply();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValuesOfReturnObject: function (){\r\n            var self = this;\r\n            var minDate = self._getFromControl().datepicker(\"getDate\"); //returns null when there is no date\r\n            var maxDate = self._getToControl().datepicker(\"getDate\"); //returns null when there is no date\r\n            var dateFormatter = bizagi.util.dateFormatter;\r\n\r\n            self.returnObject[0].value = (minDate !== null) ? dateFormatter.formatInvariant(minDate, false) : dateFormatter.formatInvariant(maxDate, false);\r\n            self.returnObject[1].value = (maxDate !== null) ? dateFormatter.formatInvariant(maxDate, false) : dateFormatter.formatInvariant(minDate, false);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param toDefault\r\n         * @private\r\n         */\r\n        _setDisplayTitle: function (toDefault) {\r\n            var self = this;\r\n            var $displayTitleControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayTitle = $displayTitleControl.text().split(':');\r\n\r\n            if (toDefault) {\r\n                self.filterValue = \"\";\r\n                $displayTitleControl.text(displayTitle[0]);\r\n            }\r\n            else {\r\n                var options = self.options;\r\n                var minDateObj = self._getDateFromInvariant(self.returnObject[0].value);\r\n                var maxDateObj = self._getDateFromInvariant(self.returnObject[1].value);\r\n\r\n                self.filterValue =\r\n                    self._formatDate(minDateObj, options.getResource(\"dateFormat\")) + ' ' +\r\n                    options.getResource('bz-rp-components-time-to-label') + ' ' +\r\n                    self._formatDate(maxDateObj, options.getResource(\"dateFormat\"));\r\n                $displayTitleControl.text(displayTitle[0] + ': ' + self.filterValue);\r\n            }\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayLabels: function (){\r\n            var self = this;\r\n            var options = self.options;\r\n            var minDateObj = self._getDateFromInvariant(self.options.properties.data.min);\r\n            var maxDateObj = self._getDateFromInvariant(self.options.properties.data.max);\r\n\r\n            $('.ui-bizagi-date-filter-from span', self.$menuContext).text(\r\n                options.getResource('bz-rp-components-time-from-label') + ' (' + self._formatDate(minDateObj, options.getResource(\"dateFormat\")) + '):'\r\n            );\r\n            $('.ui-bizagi-date-filter-to span',  self.$menuContext).text(\r\n                options.getResource('bz-rp-components-time-to-label') + ' (' + self._formatDate(maxDateObj, options.getResource(\"dateFormat\")) + '):'\r\n            );\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.removeAttr('disabled');\r\n            $applyControl.removeClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.attr('disabled', 'disabled');\r\n            $applyControl.addClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param dateObj\r\n         * @param dateFormat\r\n         * @private\r\n         */\r\n        _formatDate: function (dateObj, dateFormat) {\r\n            return bizagi.util.dateFormatter.formatDate(dateObj, dateFormat);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {*|HTMLElement}\r\n         * @private\r\n         */\r\n        _getFromControl: function () {\r\n            var self = this;\r\n            return $('.ui-bizagi-date-filter-from input', self.$menuContext);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {*|HTMLElement}\r\n         * @private\r\n         */\r\n        _getToControl: function () {\r\n            var self = this;\r\n            return $('.ui-bizagi-date-filter-to input', self.$menuContext);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param date\r\n         * @param date\r\n         * @private\r\n         */\r\n        _getDateFromInvariant: function (date) {\r\n            return bizagi.util.dateFormatter.getDateFromInvariant(date);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self.options.onClear([self.returnObject[0].properties.xpath, self.returnObject[1].properties.xpath]);\r\n            self._setDisplayTitle(true);\r\n            self._resetValues();\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n            self.options.properties.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.properties.data : data;\r\n\r\n            var $minDate = self._getFromControl();\r\n            var $maxDate = self._getToControl();\r\n            var minDate = new Date(self._getDateFromInvariant(self.options.properties.data.min));\r\n            var maxDate = new Date(self._getDateFromInvariant(self.options.properties.data.max));\r\n\r\n            $minDate.datepicker('option', 'minDate', minDate);\r\n            $minDate.datepicker('option', 'maxDate', maxDate);\r\n            $maxDate.datepicker('option', 'minDate', minDate);\r\n            $maxDate.datepicker('option', 'maxDate', maxDate);\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n Document   : bizagi.filterMoney\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andrs Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a money control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.textFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpath) {}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if($(this).text() == options.getResource('workportal-general-button-label-apply')){\r\n                        self._setValue();\r\n                        self._setFilterToDisplayName();\r\n                        options.onApply(self.returnObject, self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $('.wgd-my-search-filter-pluggin', self.element);\r\n            var id = '#' + $opener.attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {name: options.getResource('workportal-my-search-remove-filter'), className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    min: {name: options.getResource('workportal-my-search-text'), type: 'text', className: 'ui-bizagi-text-filter'},\r\n                    buttons: {type: 'contextMenuButtons'}\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        self._disableApply();\r\n                    },\r\n                    hide: function() {\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $(self.element).contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {*|HTMLElement}\r\n         * @private\r\n         */\r\n        _getTextControl: function () {\r\n            var self = this;\r\n\r\n            return $('.ui-bizagi-text-filter input', self.$menuContext);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n\r\n            self._getTextControl().keyup( function () {\r\n                if($(this).val() && $(this).val().indexOf(' ') != 0)\r\n                    self._enableApply();\r\n                else\r\n                    self._disableApply();\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            self.returnObject = {\r\n                'properties': {\r\n                    'xpath': self.options.properties.attribute,\r\n                    'type': 'text',\r\n                    'typeSearch': 'approx'\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function (){\r\n            var self = this;\r\n\r\n            self._setReturnObject();\r\n            self._disableApply();\r\n            self._getTextControl().val('');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValue: function (){\r\n            var self = this;\r\n            var textValue = self._getTextControl().val();\r\n\r\n            if (textValue){\r\n                self.returnObject.value = textValue;\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.removeAttr('disabled');\r\n            $applyControl.removeClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.attr('disabled', 'disabled');\r\n            $applyControl.addClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setFilterToDisplayName: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            $displayNameControl.text(displayName[0] + ': ' + self.returnObject.value);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self._resetValue();\r\n            var xpaths = [self.returnObject.properties.xpath];\r\n            self._setDisplayNameToDefault();\r\n            self.options.onClear(xpaths);\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            console.log(data);\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function () {\r\n            $(this.element).contextMenu( 'destroy' );\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/**\r\n * Filter multiple plugin creates a tooltip control to show related entity information and select multiple values\r\n *\r\n * @author Andrs Fernando Muoz\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.booleanFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpath) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            self.returnObject =\r\n            {\r\n                properties: {\r\n                    xpath: self.options.properties.attribute,\r\n                    type: \"boolean\",\r\n                    typeSearch: \"exact\"\r\n                },\r\n                value: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.container = function (item, opt, root) {\r\n                $('<div id=\"'+item.id+'\" class=\"menu-container\"></div>').appendTo(this);\r\n            };\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\" disabled>' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply([self.returnObject], self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _buildContextMenuItems: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var items = {};\r\n\r\n            if(self.options.showButtonClearFilter !== true){\r\n                items['key'] = {\r\n                    name: options.getResource('workportal-my-search-remove-filter'),\r\n                    className: 'ui-bizagi-clear-filters',\r\n                    callback: function() {\r\n                        self._removeFilter();\r\n                        return true;// False -> To keep the context menu open\r\n                    }};\r\n            }\r\n            items['container'] = {\r\n                'id': 'checks_container',\r\n                type: 'container'\r\n            };\r\n            items['buttons'] = {\r\n                type: \"contextMenuButtons\"\r\n            };\r\n\r\n            return items;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n            var items = self._buildContextMenuItems();\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            $opener.contextMenu({\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: items,\r\n                events: {\r\n                    show: function() {\r\n                        self._disableApply();\r\n                        var div = $('#checks_container', self.$menuContext);\r\n                        div.empty();\r\n                        return $.when(self.options.setData()).done(function (data) {\r\n                            var data = typeof data !== 'undefined' ? data.defaultValues : self.options.data.defaultValues;\r\n                            var i = -1, a;\r\n\r\n                            while(a = data[++i]){\r\n                                var id = (self.returnObject.value === a.id);\r\n                                if(a.id != '' && a.displayName != '') {\r\n                                    div.append('<li><input data-displayname=\"' + a.displayName + '\" type=\"radio\" name=\"boolFilter\" value=\"' + a.id + '\" ' + (id ? 'checked' : '') + '><span class=\"context-menu-item-label-check\">' + self.parseBoolean(a.displayName) + '</span></li>');\r\n                                }\r\n                            }\r\n                            self._bindHandlers();\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            self.filterValue = self.filterValue || [];\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    if(self.filterValue.length !== 0){\r\n                        var $container = $(\"<div>\");\r\n                        $.each(self.filterValue, function( index, value ) {\r\n                            $container.append($('<div><label>' + self.parseBoolean(value) + '</label></div>'));\r\n                        });\r\n                        return $container;\r\n                    }\r\n                    else{\r\n                        return \"\";\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        parseBoolean: function(value){\r\n            var valueToLocalize = bizagi.clone(value);\r\n\r\n            if(valueToLocalize === 0){\r\n                valueToLocalize = \"0\";\r\n            }\r\n            if(valueToLocalize === 1){\r\n                valueToLocalize = \"1\";\r\n            }\r\n\r\n            if(!valueToLocalize.toLowerCase){\r\n                valueToLocalize = valueToLocalize.toString();\r\n            }\r\n\r\n            switch(valueToLocalize.toLowerCase()){\r\n                case \"not specified\":\r\n                    valueToLocalize = bizagi.localization.getResource(\"workportal-general-value-undefined\");\r\n                    break;\r\n                default:\r\n                    valueToLocalize = bizagi.util.formatBoolean(valueToLocalize);\r\n                    break;\r\n            }\r\n            return valueToLocalize;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function () {\r\n            var self = this;\r\n\r\n            $('input:radio', self.$menuContext).on('click', function (ev){\r\n                ev.stopImmediatePropagation(); //stopping jquery click event handler to be call twice for a checkbox\r\n                var $target = $(ev.target);\r\n\r\n                self.returnObject.value = $target.attr(\"value\");\r\n                self._enableApply();\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function (){\r\n            var self = this;\r\n            self.returnObject.value = [];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayText = $displayNameControl.text().split(':');\r\n            var filtersText = displayText[0] + ': ';\r\n            self.filterValue = [];\r\n\r\n            $(\"input:checked\", self.$menuContext).each(function () {\r\n                self.filterValue.push($(this).data(\"displayname\"));\r\n                filtersText = filtersText + self.parseBoolean($(this).data('displayname'));\r\n            });\r\n\r\n            $displayNameControl.text(filtersText);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue = [];\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.removeAttr('disabled');\r\n            $applyControl.removeClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.attr('disabled', 'disabled');\r\n            $applyControl.addClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            var xpath = self.returnObject.properties.xpath;\r\n            self.options.onClear([xpath]);\r\n            self._setDisplayNameToDefault();\r\n            self._resetValue();\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n * Control to search users for Bizagi rendering\r\n * @author: Andrs fernando Muoz\r\n */\r\n(function ($) {\r\n    $.fn.bizagiSearchUser = function (options) {\r\n        var self = this;\r\n        options = options || {};\r\n        var filterData = {};\r\n        var maxPages = 10;\r\n        var maxRows = 9;\r\n        var usersResults = [];\r\n        var currentPage = 1\r\n        var totalPages = 0;\r\n        var dBox = {};\r\n        var editingUser = options.editingUser;\r\n\r\n        var methods = {\r\n            \"init\":function(){\r\n                var filterData = {};\r\n                methods.bindElements();\r\n            },\r\n            \"bindElements\":function(){\r\n                self.click(function () {\r\n                    methods.openUploadDialog();\r\n                });\r\n            },\r\n            \"openUploadDialog\":function(){\r\n                var self = this;\r\n                var doc = window.document;\r\n                var dialogBox = self.dialogBox = $(\"<div class='ui-bizagi-component-search-user'/>\");\r\n                dBox = dialogBox.dialog({\r\n                    width: 950,\r\n                    maximize: false,\r\n                    resize: false,\r\n                    draggable: false,\r\n                    height: 650,\r\n                    title: options.title,\r\n                    modal: true\r\n                });\r\n                methods.showFilters();\r\n                methods.showButtons();\r\n                methods.addHandlers();\r\n            },\r\n            \"showFilters\":function(){\r\n                var filtersContainer = $(\"<div id='filtersContainer' class='filters-container clearfix'></div>\");\r\n                $.each(options.filters, function(index, value){\r\n                    $(filtersContainer, dBox).append(\"<div class='filters-row clearfix'><div class='filters-cell'><span>\" + options.displayNames[index] + \"</span></div><div class='filters-cell'><input id=\" + value + \" type='text'> </input></div></div>\");\r\n                });\r\n                filtersContainer.appendTo(dBox);\r\n            },\r\n            \"showButtons\":function(){\r\n                var buttonsContainer = $(\"<div id='buttonsContainer'class='biz-wp-buttonset'></div>\");\r\n                $(buttonsContainer,dBox).append(\"<button id='btnSearchUsers' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover' role='button' aria-disabled='false'><span class='ui-button-text'>\" + options.searchButtonName + \"</span></button>\");\r\n                $(buttonsContainer,dBox).append(\"<button id='btnClear' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover' role='button' aria-disabled='false'><span class='ui-button-text'>\" + options.clearButtonName + \"</span></button>\");\r\n\r\n                // Append new user Button\r\n                if (options.allowAddUser) {\r\n                    var newUserBtn =\r\n                        \"<button id='btnNew' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover' role='button' aria-disabled='false'>\" +\r\n                            \"<span class='ui-button-text'>\" +\r\n                                bizagi.localization.getResource(\"workportal-widget-admin-user-profiles-button-label-newUserProfiles\") +\r\n                            \"</span>\" +\r\n                        \"</button>\";\r\n\r\n                    $(buttonsContainer, dBox).append(newUserBtn);\r\n                    buttonsContainer.appendTo(dBox);\r\n\r\n                    $(\"#btnNew\", dBox).bizagiCreateUser(options.dataService, options.renderFactory, {\r\n                            canvas: $(dBox),\r\n                            onCreate: options.selectItem(),\r\n                            onCancel: function () {\r\n                                $(dBox).dialog('option', 'title', options.title);\r\n                                $(dBox).empty();\r\n\r\n                                methods.showFilters();\r\n                                methods.showButtons();\r\n                                methods.addHandlers();\r\n                            }\r\n                        }\r\n                    );\r\n                }\r\n                else {\r\n                    buttonsContainer.appendTo(dBox);\r\n                }\r\n            },\r\n            \"addHandlers\":function(){\r\n                $(\"#btnSearchUsers\", dBox).click(function() {\r\n                    methods.getUsersTableData();\r\n                 });\r\n\r\n                $(\"#btnClear\", dBox).click(function() {\r\n                    methods.clickClearPluginValues();\r\n                });\r\n                return this;\r\n            },\r\n            \"clickClearPluginValues\":function(){\r\n                $.each(options.filters, function(index, value){\r\n                    $('#'+value, dBox).val('');\r\n                });\r\n                $(\"#searchResults\", dBox).remove();\r\n            },\r\n            \"getUsersTableData\": function () {\r\n                var self = this;\r\n                methods.updateFiltersInformation();\r\n                var deferred = options.searchUsers(filterData);\r\n                $.when(deferred).done(function (data) {\r\n                    if (!Array.isArray(data.users)) {\r\n                        bizagi.showMessageBox(data.message, data.status, \"\", \"warning\");\r\n                        return;\r\n                    }\r\n                    usersResults = data.users;\r\n                    totalPages = data.total;\r\n                    methods.showUsersTable();\r\n                }).fail(function (error) {\r\n                    options.showError(error);\r\n                });\r\n            },\r\n            \"updateFiltersInformation\":function(){\r\n                $.each(options.filters, function(index, value){\r\n                    filterData[value] = $('#'+value,dBox).val();\r\n                });\r\n                filterData['pag'] = currentPage;\r\n                filterData['pagSize'] = maxRows;\r\n                if (typeof (editingUser) !== \"undefined\" && editingUser !== \"\") {\r\n                    filterData['editingUser'] = editingUser;\r\n                }\r\n            },\r\n            \"showUsersTable\": function () {\r\n                if (usersResults.length > 0) {\r\n                    var pagination = (totalPages > 1) ? true : false;\r\n                    var pagesArray = methods.getPagesArray();\r\n                    $(\"#searchResults\",dBox).remove();\r\n                    var usersTableTmpl = options.getTableTemplate(usersResults,currentPage,pagination,pagesArray);\r\n                    $(dBox).append(usersTableTmpl);\r\n                    methods.addTableHandlers();\r\n                    methods.setUpPagination();\r\n                } else {\r\n                    options.showMessageBox(\"workportal-widget-usertable-empty\");\r\n                    $(\"#searchResults\", dBox).remove();\r\n                }\r\n            },\r\n            \"addTableHandlers\":function(){\r\n                $('table :button', dBox).click(function () {\r\n                    var buttonSelf = $(this);\r\n                    var itemSelected = {};\r\n                    $.each(options.valuesToSelect, function(index, value){\r\n                        itemSelected[value] = buttonSelf.data(value);\r\n                    });\r\n                    var selItemDeferred = options.selectItem();\r\n                    selItemDeferred.resolve(itemSelected);\r\n                    dBox.remove();\r\n                })\r\n            },\r\n            \"getPagesArray\": function () {\r\n                var pagesToShow = (maxPages > totalPages) ? totalPages : maxPages;\r\n                var aux = [];\r\n                for (var a = 0; a < pagesToShow; a++) {\r\n                    aux.push(a + 1);\r\n                }\r\n                return aux;\r\n            },\r\n            \"setUpPagination\": function () {\r\n                var self = this;\r\n                var $pager = $(\"#biz-wp-userstable-pager ul\", dBox);\r\n                $pager.bizagiPagination({\r\n                    maxElemShow: maxRows,\r\n                    totalPages: totalPages,\r\n                    actualPage: currentPage,\r\n                    listElement: $pager,\r\n                    clickCallBack: function (options) {\r\n                        filterData.pag = currentPage = parseInt(options.page);\r\n                        self.getUsersTableData();\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        methods.init();\r\n        return methods;\r\n    }\r\n\r\n})(jQuery);\r\n","/**\r\n * Name: Bizagi Workportal Desktop Paginator Controller\r\n * Author: Mauricio Snchez\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.paginator\", {}, {\r\n\r\n    /**\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"paginator\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.paginator\").concat(\"#paginator-wrapper\"),\r\n            \"content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.paginator\").concat(\"#paginator-content\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var hide = self.params.referenceType === \"ENTITY\";\r\n        var template = self.getTemplate(\"paginator\" + self.getSuffixWidget());\r\n        self.content = template.render({hide:hide});\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        self.sub(\"PAGINATOR-UPDATE\", $.proxy(self.updateView, self));\r\n        self.configureHandlers();\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @returns {string}\r\n     */\r\n    getSuffixWidget: function(){\r\n        return \"\";\r\n    },\r\n\r\n    /**\r\n     * Updates la view with the data related to entity:\r\n     * Name entity\r\n     * Number of records\r\n     * Number of pages\r\n     * */\r\n    updateView: function (ev, params) {\r\n        var self = this;\r\n        var args = params.args;\r\n        var hide = args.referenceType === \"ENTITY\";\r\n        var $content = self.getContent();\r\n\r\n        self.setModel(args);\r\n        $content.empty();\r\n\r\n        if (args.fromActionLauncher){\r\n            if (self.totalRecords > 1) {\r\n                renderTemplate();\r\n            }\r\n            else {\r\n                self.clean();\r\n            }\r\n        }\r\n        else {\r\n            renderTemplate();\r\n        }\r\n\r\n        /**\r\n         *\r\n         */\r\n        function renderTemplate( ){\r\n            var contentTemplate = self.getTemplate(\"content\" + self.getSuffixWidget());\r\n\r\n            contentTemplate.render({\r\n                totalRecords: self.totalRecords,\r\n                totalPages: self.totalPages,\r\n                displayName: self.displayName,\r\n                currentPage: self.currentPage,\r\n                hide: hide\r\n            }).appendTo($content);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Builds the navigation model\r\n     */\r\n    setModel: function (args) {\r\n        var self = this;\r\n\r\n        self.totalRecords = typeof(args.totalRecords) == \"undefined\" ?  self.totalRecords : args.totalRecords;\r\n        self.totalPages = args.totalPages || self.totalPages;\r\n        self.displayName = args.histName || self.displayName;\r\n        self.currentPage = args.currentPage || self.currentPage;\r\n        self.action = args.action;\r\n        self.reference = args.reference || self.reference;\r\n        self.surrogateKey = args.surrogateKey || self.surrogateKey;\r\n        self.referenceType = args.referenceType;\r\n        self.event = args.event;\r\n        self.guidSearch = args.guidSearch;\r\n    },\r\n\r\n    /**\r\n     *  Gets the current model\r\n     */\r\n    getModel: function () {\r\n        var self = this;\r\n\r\n        return {\r\n            page: self.currentPage,\r\n            totalRecords: self.totalRecords,\r\n            action: self.action,\r\n            reference: self.reference,\r\n            surrogateKey: self.surrogateKey,\r\n            referenceType: self.referenceType,\r\n            stopNavigation : true,\r\n            guidSearch: self.guidSearch\r\n        };\r\n    },\r\n\r\n    /**\r\n     *  Binds events to handles\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this,\r\n            $content = self.getContent();\r\n\r\n        $content.on(\"click\", $.proxy(self.onPageBreak, self));\r\n    },\r\n\r\n    /**\r\n     * This event get a new page\r\n     */\r\n    onPageBreak: function (ev) {\r\n        var self = this,\r\n            $target = $(ev.target),\r\n            $content = self.getContent();\r\n\r\n        if ($target.hasClass(\"control-icon\") && !$target.hasClass(\"ui-state-disabled\")) {\r\n            var type = $target.data(\"type\");\r\n\r\n            if (type == \"forward\") {\r\n                self.currentPage += 1;\r\n            }\r\n            else if (type == \"rewind\") {\r\n                self.currentPage -= 1;\r\n            }\r\n            else if (type == \"fastrewind\") {\r\n                self.currentPage = 1;\r\n            }\r\n            else {\r\n                self.currentPage = self.totalPages;\r\n            }\r\n\r\n            self.disabledPaginatorButtonsByLimits();\r\n            $content.find(\".paginator-controls__currentPage\").text(self.currentPage);\r\n\r\n            self.pub(\"notify\", { type: \"UPDATE-DATATEMPLATE-VIEW\", args: self.getModel() });\r\n        }\r\n    },\r\n\r\n    disabledPaginatorButtonsByLimits: function (){\r\n        var self = this;\r\n        var $buttonFastRewind = $(\"[data-type='fastrewind']\", self.content);\r\n        var $buttonRewind = $(\"[data-type='rewind']\", self.content);\r\n        var $buttonFordward = $(\"[data-type='forward']\", self.content);\r\n        var $buttonFastFordward = $(\"[data-type='fastforward']\", self.content);\r\n\r\n        if(self.totalPages === 1){\r\n            $buttonFastRewind.addClass(\"ui-state-disabled\");\r\n            $buttonRewind.addClass(\"ui-state-disabled\");\r\n            $buttonFordward.addClass(\"ui-state-disabled\");\r\n            $buttonFastFordward.addClass(\"ui-state-disabled\");\r\n        }else{\r\n            // The first page\r\n            if(self.currentPage === 1){\r\n                $buttonFastRewind.addClass(\"ui-state-disabled\");\r\n                $buttonRewind.addClass(\"ui-state-disabled\");\r\n                $buttonFordward.removeClass(\"ui-state-disabled\");\r\n                $buttonFastFordward.removeClass(\"ui-state-disabled\");\r\n            }\r\n            // the last page\r\n            else if(self.currentPage === self.totalPages){\r\n                $buttonFastRewind.removeClass(\"ui-state-disabled\");\r\n                $buttonRewind.removeClass(\"ui-state-disabled\");\r\n                $buttonFordward.addClass(\"ui-state-disabled\");\r\n                $buttonFastFordward.addClass(\"ui-state-disabled\");\r\n            }\r\n            // other page\r\n            else{\r\n                $buttonFastRewind.removeClass(\"ui-state-disabled\");\r\n                $buttonRewind.removeClass(\"ui-state-disabled\");\r\n                $buttonFordward.removeClass(\"ui-state-disabled\");\r\n                $buttonFastFordward.removeClass(\"ui-state-disabled\");\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    clean: function(){\r\n        var self = this;\r\n        var $content = self.getContent();\r\n\r\n        if($content){\r\n            $content.empty();\r\n        }\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.paginator\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.paginator]);","/**\r\n * Name: Bizagi Workportal Desktop Sort Bar Controller\r\n * Author: Danny Gonzalez\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sortbar\", {}, {\r\n    /**\r\n     * Constructor\r\n     * @param workportalFacade\r\n     * @param dataService\r\n     * @param processActionService\r\n     * @param accumulatedcontext\r\n     * @param params\r\n     */\r\n    init: function (workportalFacade, dataService, processActionService, accumulatedcontext, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"sortbar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-wrapper\"),\r\n            \"content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-content\"),\r\n            \"right-content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-right\"),\r\n            \"addButton\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-content-add-button\"),\r\n            \"sortMenu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-sort-menu\"),\r\n            \"actions\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-content-actions\"),\r\n            \"recordsPerPage\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-records-per-page\"),\r\n            \"recordsMenu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-records-menu\")\r\n        });\r\n\r\n        self.processActionService = processActionService;\r\n        self.accumulatedcontext = accumulatedcontext;\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"sortbar\");\r\n        self.content = template.render({ enableFilter: true });\r\n        self.$checkAll = self.content.find(\".sortbar-left-check-uncheck input\");\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        var template = self.getTemplate(\"right-content\");\r\n        self.configureHandlers();\r\n        $(\".sortbar-right\", self.content).append(template.render());\r\n        self.configureAfterPaintHandlers();\r\n    },\r\n\r\n    /**\r\n     * Binds events to handles\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this,\r\n            $content = self.getContent();\r\n\r\n        self.sub(\"TEMPLATEENGINE-VIEW\", $.proxy(self.initializeAndProcessFilterButton, self));\r\n        self.sub(\"SEARCH-ENGINE-VIEW\", $.proxy(self.initializeAndProcessFilterButton, self));\r\n        self.sub(\"SET-FILTERS-DATA\", $.proxy(self.setFiltersSortData, self));\r\n        self.sub(\"HIDE-FILTER-BUTTONANDBAR\", $.proxy(self.hideFilterButtonAndBar, self));\r\n        self.sub(\"HIDE-SORT-BUTTONS\", $.proxy(self.hideSortButtons, self));\r\n        self.sub(\"ENABLE-BATCHS-ACTIONS\", function(ev, args) { return self.enableBatchActions(args);});\r\n        self.sub(\"UPDATE-COUNTER-FILTERS-APPLIED\", function(ev, args) { return self.updateCounterByFilterApplied(args); });\r\n        self.sub(\"CASES-TEMPLATE-VIEW\", function(ev, args){ self.showingFiltering = false; self.setVisibleCheckAll(false);self.behaviorVisibleSortbar(); });\r\n        self.sub(\"SOME-ITEM-ALLOW-SELECT\", function(ev, args){ self.setVisibleCheckAll(true);self.behaviorVisibleSortbar(); });\r\n        self.sub(\"HIDE-CHECK-ALL\", function(ev, args){ self.setVisibleCheckAll(false); });\r\n        self.sub(\"BATCH-ACTIONS\", function(ev, args){ return self.validActions(args.args.actionsData); });\r\n\r\n        $content.find(\".wgd-sortbar-add-button\").tooltip();\r\n        self.$checkAll.on(\"click\", $.proxy(self.onCheckUncheck, self));\r\n    },\r\n\r\n    /**\r\n     * Configure Handlers\r\n     */\r\n    configureAfterPaintHandlers: function () {\r\n        var self = this,\r\n            $content = self.getContent();\r\n\r\n        // Show sort menu\r\n        $content.find(\".right-menu\").on(\"click\", function (ev) {\r\n            self.showSortMenu(ev, $(this));\r\n        });\r\n\r\n        // Show records menu\r\n        $content.find(\".records-menu\").on(\"click\", function (ev) {\r\n            self.showRecordsMenu(ev, $(this));\r\n        });\r\n\r\n        // Change sort type\r\n        $content.find(\".sortbar-az\").on(\"click\", function () {\r\n            if(self.sortSelection.attribute) {\r\n                self.setIconSortType($(this), self._sortType);\r\n\r\n                self.pub(\"notify\", { type: \"SET-ORDERBY\", args: {\r\n                    properties:{\r\n                        xpath: self.sortSelection.attribute,\r\n                        orderType: self._sortType,\r\n                        typeSearch: \"none\"\r\n                    }\r\n                }});\r\n            }\r\n        });\r\n        // Show filter bar\r\n        $content.find(\".filter-icon\").on(\"click\", function () {\r\n            self.pub(\"notify\", { type: \"OPENCLOSE-MYSEARCHFILTER\", args: {guidSearch: self.params.guidSearch, target: $(this) }});\r\n        });\r\n\r\n        $(\".remove-selected-items-collections\", $content).on(\"click\", $.proxy(self.onRemoveSelectedItemsCollections, self));\r\n    },\r\n\r\n    /**\r\n     * Behavior visible sortbar\r\n     */\r\n    behaviorVisibleSortbar: function(){\r\n        var self = this;\r\n        if(self.showingFiltering || self.showingSorting || self.showingCheckAll || self._haveAddButton){\r\n            self.setVisibleSortbar(true);\r\n        }\r\n        else{\r\n            self.setVisibleSortbar(false);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Shor or hide sortbar\r\n     * @param visible\r\n     */\r\n    setVisibleSortbar: function(visible){\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        if(visible){\r\n            $content.show();\r\n        }\r\n        else{\r\n            $content.hide();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show or hide check input (select all)\r\n     * @param visible\r\n     */\r\n    setVisibleCheckAll: function(visible){\r\n        var self = this;\r\n        if(visible){\r\n            self.$checkAll.closest(\".border-check-uncheck\").show();\r\n            self.showingCheckAll = true;\r\n        }\r\n        else{\r\n            self.$checkAll.closest(\".border-check-uncheck\").hide();\r\n            self.showingCheckAll = false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show number items selected from data items (from casetemplate or entityTemplates)\r\n     * @param numberCheckedItems\r\n     */\r\n    showSelectedItems: function(numberCheckedItems){\r\n        var self = this;\r\n        if(numberCheckedItems && numberCheckedItems > 0){\r\n            self.content.addClass(\"there-are-actions\");\r\n\r\n            var keywordSelected = self.getResource(\"workportal-general-word-selected-singular\");\r\n            if(numberCheckedItems > 1){\r\n                keywordSelected = self.getResource(\"workportal-general-word-selected-plural\");\r\n            }\r\n            $(\".actions-count-selected\", self.content).text(numberCheckedItems + \" \" + keywordSelected + \" \");\r\n        }\r\n        else{\r\n            self.content.removeClass(\"there-are-actions\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set icon descending or ascending\r\n     * @param button represents icon ascending or descending\r\n     * @param sortTypeBeforeChanged\r\n     */\r\n    setIconSortType: function(button, sortTypeBeforeChanged){\r\n        var self = this;\r\n        if (sortTypeBeforeChanged === \"asc\") {\r\n            self._sortType =\"desc\";\r\n            button.removeClass(\"bz-icon-order-ascendant-outline\").addClass(\"bz-icon-order-descendant-outline\");\r\n        }\r\n        else {\r\n            self._sortType =\"asc\";\r\n            button.removeClass(\"bz-icon-order-descendant-outline\").addClass(\"bz-icon-order-ascendant-outline\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param event\r\n     */\r\n    onClickBatchAction: function(event){\r\n        var self = this;\r\n        var $buttonLI = $(event.target).closest(\"li\");\r\n        var guidAction = $buttonLI.data(\"guid\");\r\n        var action = self.getAction(guidAction);\r\n\r\n        if(!self.requestsInProgressActionGuid[guidAction]){\r\n            self.requestsInProgressActionGuid[guidAction] = true;\r\n\r\n            self.addLoadingButtonAction($buttonLI);\r\n\r\n            $.when(self.processActionService.executeBatchAction({\r\n                action: action,\r\n                commonActionsmodel: self.commonActionsmodel\r\n            })).always(function(){\r\n                $buttonLI.find(\".wdg-tple-button\").removeClass(\"state-loading\");\r\n                $buttonLI.find(\".ui-bizagi-loading-button\").remove();\r\n                $buttonLI.find(\"i\").show();\r\n\r\n                self.requestsInProgressActionGuid[guidAction] = undefined;\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Add loading to button\r\n     */\r\n    addLoadingButtonAction: function($button){\r\n        $button.find(\".wdg-tple-button\").addClass(\"state-loading\");\r\n        $button.find(\".wdg-tple-button\").prepend(\"<div class=\\\"ui-bizagi-loading-icon ui-bizagi-loading-button\\\"></div>\").find(\"i\").hide();\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    onRemoveSelectedItemsCollections: function(){\r\n        var self = this;\r\n        var commonActions = self.pub(\"notify\", {type: \"SET-VALUES\", args: {value: false}})[0];\r\n        self.enableBatchActions({ args: { commonActions: commonActions } });\r\n    },\r\n\r\n    /**\r\n     * Show the sort menu\r\n     * @param ev\r\n     * @param $parent\r\n     */\r\n    showSortMenu: function (ev, $parent) {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var template = self.getTemplate(\"sortMenu\");\r\n        var tooltip = template.render({filters: self._filters}, {\r\n            displayValue: function (val) {\r\n                return val;\r\n            }});\r\n\r\n        if ($(\".sortbar-box-menu\", $parent).length) {\r\n            $(\".sortbar-box-menu\", $parent).remove();\r\n        }\r\n\r\n        $parent.append(tooltip);\r\n        tooltip.show(\"fast\", function () {\r\n            tooltip.click(function (e) {\r\n                e.stopPropagation();\r\n            });\r\n            $(document).one(\"click\", function () {\r\n                tooltip.hide(\"fast\");\r\n                tooltip.remove();\r\n            });\r\n        });\r\n\r\n        //Configure handler to each action\r\n        $content.find(\".sortbar-option\").on(\"click\", function (ev) {\r\n            var data = $(ev.currentTarget).data();\r\n            var sortSelection = self._filters[data.index];\r\n            $content.find(\".sortbar-az\").removeClass(\"disabled\");\r\n\r\n            if(self.sortSelection != sortSelection) {\r\n                self.sortSelection = sortSelection;\r\n                $(\".sortbar-selected\", $parent).text(self.sortSelection.display.split(\".\").pop());\r\n                self.pub(\"notify\", { type: \"SET-ORDERBY\", args: {\r\n                    properties:{\r\n                        xpath: sortSelection.attribute,\r\n                        orderType: self._sortType,\r\n                        typeSearch: \"none\"\r\n                    }\r\n                }});\r\n            }\r\n            tooltip.hide(\"fast\");\r\n        });\r\n    },\r\n\r\n    showRecordsMenu: function (ev, $parent) {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var template = self.getTemplate(\"recordsMenu\");\r\n        var tooltip = template.render({});\r\n\r\n        if ($(\".sortbar-records-box-menu\", $parent).length) {\r\n            $(\".sortbar-records-box-menu\", $parent).remove();\r\n        }\r\n\r\n        $parent.append(tooltip);\r\n        tooltip.show(\"fast\", function () {\r\n            tooltip.click(function (e) {\r\n                e.stopPropagation();\r\n            });\r\n            $(document).one(\"click\", function () {\r\n                tooltip.hide(\"fast\");\r\n                tooltip.remove();\r\n            });\r\n        });\r\n\r\n        //Configure handler to each action\r\n        $content.find(\".sortbar-records-option\").on(\"click\", function (ev) {\r\n\r\n            var pageSize = Number(bizagi.util.trim(this.textContent));\r\n\r\n            $(\".sortbar-records-selected\", $parent).text(pageSize);\r\n\r\n            self.pub(\"notify\", {\r\n                type: \"SET-RECORDS\", args: {\r\n                    pageSize: pageSize\r\n                }\r\n            });\r\n\r\n            tooltip.hide(\"fast\");\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Asigna los parametros iniciales de la busqueda e inicializa los objetos\r\n     * @param e\r\n     * @param params\r\n     */\r\n    initializeAndProcessFilterButton: function (e, params) {\r\n        var self = this;\r\n\r\n        self.showingFiltering = false;\r\n        self.setVisibleCheckAll(false);\r\n        self.behaviorVisibleSortbar();\r\n\r\n        self.restoreOrderSelected();\r\n        self.setIconSortType($(\".sortbar-az\", self.content), \"desc\");\r\n        self.params = params.args;\r\n        self.sortSelection = {};\r\n\r\n        self.processAddButton(e, params);\r\n    },\r\n\r\n    /**\r\n     *  Checks if the add button should be displayed\r\n     */\r\n    processAddButton: function (ev, params) {\r\n        var self = this,\r\n            $content = self.getContent(),\r\n            args = params.args,\r\n            action = args.action,\r\n            $buttonContainer = $content.find(\".sortbar-left .add-button\");\r\n        self._lastReferenceEntity = args.reference;\r\n        $buttonContainer.children().remove();\r\n        $(\".wrapper-sortbar-actions\", $content).remove();//Remove same time buttons batch actions\r\n        self._haveAddButton = false;\r\n        if (args.reference && args.referenceType !== \"ENTITY\") {\r\n            $buttonContainer.startLoading({ delay: 0, overlay: true });\r\n            self.dataService.getProcessAddAction(params).done(function (data) {\r\n                if(self._lastReferenceEntity === data.referenceEntity){\r\n                    if (typeof data !== \"undefined\" && Object.getOwnPropertyNames(data).length > 1 && data.guidEntity && data.id) {\r\n                        self.renderButton($buttonContainer, data);\r\n                    }\r\n                }\r\n            }).always(function () {\r\n                $buttonContainer.endLoading();\r\n            });\r\n        }\r\n        else if (action) {\r\n            self.renderButton($buttonContainer, action);\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    renderButton: function ($buttonContainer, action) {\r\n        var self = this,\r\n            template = self.getTemplate(\"addButton\"),\r\n            $addButton = template.render({ action: action });\r\n\r\n        $buttonContainer.empty();\r\n        $addButton.appendTo($buttonContainer);\r\n        self._haveAddButton = true;\r\n        self.behaviorVisibleSortbar();\r\n        $addButton.on(\"click\", function () { self.clickAddButton(action); });\r\n    },\r\n\r\n    /**\r\n     * Click on add Proccess btn\r\n     */\r\n    clickAddButton: function (action) {\r\n        var self = this;\r\n\r\n        $.when(self.dataService.getMapping({\r\n            guidEntity: action.guidEntity,\r\n            accumulatedContext: self.accumulatedcontext.getContext({}),\r\n            xpathContext: (action.type === \"Process\") ? action.xpathContext : \"\"\r\n        })).done(function (mappingData) {\r\n            if (action.type === \"Process\") {\r\n                self.onExecuteProcess(action, mappingData);\r\n            }\r\n            else {\r\n                self.onExecuteForm(action, mappingData);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Check or uncheck all registers related, could be cases or data\r\n     */\r\n    onCheckUncheck: function(ev){\r\n        var self = this;\r\n        var $target = $(ev.target);\r\n        var isChecked = $target.is(\":checked\");\r\n        var commonActions = self.pub(\"notify\", {type: \"SET-VALUES\", args: {value: isChecked}})[0];\r\n\r\n        self.enableBatchActions({ args: { commonActions: commonActions } });\r\n    },\r\n\r\n    /**\r\n     * Enabled / disables the batch actions. This method is called always update data\r\n     */\r\n    enableBatchActions: function (params) {\r\n        var self = this;\r\n        var args = params.args;\r\n        var commonActionsModel = self.commonActionsmodel = args.commonActions;\r\n        var actions = self.validActions(commonActionsModel.actions);\r\n        if(actions.length > 0 || self._haveAddButton ){\r\n            $(self.getContent()).show();\r\n        }\r\n        self.showBatchActions(actions, commonActionsModel, \"batchAction\");\r\n\r\n        if (commonActionsModel.checkAll !== undefined) {\r\n            self.$checkAll.prop(\"checked\", commonActionsModel.checkAll);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show batch actions\r\n     * @param actions\r\n     * @param commonActionsModel\r\n     * @param typeActions\r\n     */\r\n    showBatchActions: function (actions, commonActionsModel, typeActions){\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var template = self.getTemplate(\"actions\");\r\n\r\n        self.showSelectedItems(Object.keys(commonActionsModel.itemsSelected).length);\r\n\r\n        var moreActions = actions.slice(3, 9999);\r\n\r\n        var $actions = template.render({actions: actions.slice(0, 3), moreActions: moreActions, typeActions: typeActions});\r\n\r\n        $(\".wdg-tple-button.batchAction\", self.content).off(\"click\", $.proxy(self.onClickBatchAction, self));\r\n\r\n        $(\".wrapper-sortbar-actions\", $content).remove();\r\n        $(\".sortbar-left .sortbar-menu\", $content).append($actions);\r\n\r\n        $(\".wdg-tple-button.batchAction\", self.content).on(\"click\", $.proxy(self.onClickBatchAction, self));\r\n\r\n        if(moreActions.length > 0){\r\n            if(self.content.data('ui-tooltip')) {\r\n                $(self.content).tooltip(\"destroy\");\r\n            }\r\n\r\n            $(self.content).tooltip({\r\n                tooltipClass: \"sortbar-tooltip-more-actions\",\r\n                items: \".bz-actions-showmore\",\r\n                content: $(\".template-box-tooltip\", self.content).html(),\r\n                open: function(event, ui)\r\n                {\r\n                    $(\".wdg-tple-button.batchAction\", ui.tooltip).on(\"click\", $.proxy(self.onClickBatchAction, self));\r\n\r\n                    var uiTooltip = $('div.ui-tooltip');\r\n\r\n                    if (typeof(event.originalEvent) === 'undefined')\r\n                    {\r\n                        uiTooltip.remove();\r\n                        return false;\r\n                    }\r\n                    var $id = $(ui.tooltip).attr('id');\r\n                    // close any lingering tooltips\r\n                    uiTooltip.not('#' + $id).remove();\r\n                    // ajax function to pull in data and add it to the tooltip goes here\r\n\r\n                    for(var keyActionGuid in self.requestsInProgressActionGuid){\r\n                        if(self.requestsInProgressActionGuid[keyActionGuid]){\r\n                            var $buttonAction = $(\"li[data-guid='\" + keyActionGuid + \"']\", ui.tooltip);\r\n                            self.addLoadingButtonAction($buttonAction);\r\n                        }\r\n                    }\r\n                },\r\n                close: function(event, ui)\r\n                {\r\n                    ui.tooltip.hover(function()\r\n                        {\r\n                            $(this).stop(true).fadeTo(400, 1);\r\n                        },\r\n                        function()\r\n                        {\r\n                            $(this).fadeOut('400', function()\r\n                            {\r\n                                $(\".wdg-tple-button.batchAction\", this).off(\"click\", $.proxy(self.onClickBatchAction, self));\r\n                                $(this).remove();\r\n                            });\r\n                        });\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Define the data on order to show the sort options\r\n     * @param ev\r\n     * @param params\r\n     */\r\n    setFiltersSortData: function (ev, params) {\r\n        var self = this;\r\n        var filtersAppliedCounter = params.args.filtersAppliedCounter;\r\n        var totalRecords = params.args.totalRecords;\r\n        self._filters = params.args.calculateFilters ? params.args.filters : self._filters;\r\n\r\n        if (params.args.calculateFilters) {\r\n            var i = -1, a, filterCounter = 0, sortCounter = 0;\r\n            while (a = self._filters[++i]) {\r\n                if (a.type != \"Text\" && a.type !== \"Link\" && a.data && ((a.data.defaultValues && a.data.defaultValues.length > 0) || (a.data.min && a.data.max))) {\r\n                    filterCounter++;\r\n                }\r\n                if (a.display !== \"\") {\r\n                    sortCounter++;\r\n                }\r\n            }\r\n\r\n            if (totalRecords > 0) {\r\n                // Si existen filtros, muestre el boton\r\n                if (filterCounter > 0) {\r\n                    self.showFilterButton();\r\n                }\r\n                else {\r\n                    self.hideFilterButton();\r\n                }\r\n                // Si existen filtros que tienen display name, muestre los botones de sort\r\n                if (sortCounter > 0) {\r\n                    self.showSortButtons();\r\n                }\r\n                else {\r\n                    self.hideSortButtons();\r\n                }\r\n            }\r\n            // Si no hay registros y ni se ha aplicado ningun filtro ocultar\r\n            // los botones del sortbar\r\n            else if (filtersAppliedCounter === 0) {\r\n                self.hideFilterButton();\r\n                self.hideSortButtons();\r\n            }\r\n        }\r\n        self.updateCounter(filtersAppliedCounter);\r\n    },\r\n\r\n    /**\r\n     * Show Filter Button\r\n     */\r\n    showFilterButton: function () {\r\n        var self = this;\r\n        $(\".filter-icon\", self.getContent()).show();\r\n    },\r\n\r\n    /**\r\n     * Hide Filter Button\r\n     */\r\n    hideFilterButton: function () {\r\n        var self = this;\r\n        $(\".filter-icon\", self.getContent()).hide();\r\n        self.showingFiltering = false;\r\n        self.behaviorVisibleSortbar();\r\n    },\r\n\r\n    /**\r\n     * Show Sort Buttons\r\n     */\r\n    showSortButtons: function () {\r\n        var self = this;\r\n        $(\".sortbar-text\", self.getContent()).show();\r\n        $(\".sortbar-icon\", self.getContent()).show();\r\n        $(\".sortbar-az\", self.getContent()).show();\r\n\r\n        self.showingSorting = true;\r\n        self.showingFiltering = true;\r\n        self.behaviorVisibleSortbar();\r\n    },\r\n\r\n    /**\r\n     * Hide Sort Buttons\r\n     */\r\n    hideSortButtons: function () {\r\n        var self = this;\r\n        var $sortbarIcon = $(\".sortbar-az\", self.getContent());\r\n\r\n        // Restore initial settings\r\n        $(\".sortbar-text\", self.getContent()).hide();\r\n\r\n        $sortbarIcon.addClass(\"disabled\");\r\n        $sortbarIcon.removeClass(\"bz-icon-order-ascendant-outline\");\r\n        $sortbarIcon.removeClass(\"bz-icon-order-descendant-outline\");\r\n        $sortbarIcon.addClass(\"bz-icon-order-ascendant-outline\");\r\n        $sortbarIcon.hide();\r\n\r\n        self.showingSorting = false;\r\n        self.behaviorVisibleSortbar();\r\n    },\r\n\r\n    /**\r\n     * Restore Order by Option\r\n     */\r\n    restoreOrderSelected: function(){\r\n        var self = this;\r\n        $(\".sortbar-selected\", self.getContent()).text(self.getResource(\"workportal-my-search-order-by\"));\r\n    },\r\n\r\n    /**\r\n     * Set number filters\r\n     * @param params\r\n     */\r\n    updateCounterByFilterApplied: function(params){\r\n        var self = this;\r\n        if(params.args.filtersApplied){\r\n            self.updateCounter(params.args.filtersApplied.length);\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param counter\r\n     */\r\n    updateCounter: function (counter) {\r\n        var self = this,\r\n            $content = self.getContent(),\r\n            $counter = $(\".counter-filters-applied\", $content);\r\n\r\n        if (counter > 0) {\r\n            $counter.html(counter);\r\n            $counter.show();\r\n        }\r\n        else {\r\n            $counter.hide();\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    hideFilterButtonAndBar: function () {\r\n        var self = this;\r\n        self.showingFilter = false;\r\n        $(\".filter-icon\", self.getContent()).hide();\r\n        self.pub(\"notify\", { type: \"CLOSE-MYSEARCHFILTER\", args: {\"show\": false, \"$target\": null}});\r\n    },\r\n\r\n    /**\r\n     * Creates a new case, it could has start form or not\r\n     */\r\n    onExecuteProcess: function (action, mappingData) {\r\n        var self = this;\r\n\r\n        if (action.startForm) {\r\n            action.hasStartForm = action.startForm;\r\n        }\r\n\r\n        $.when(self.processActionService.executeProcessAction({\r\n            action: action,\r\n            mappingData: mappingData\r\n        })).done( function (params) {\r\n            var params = params || {};\r\n\r\n            if(!!params && params.refreshTemplateData !== false){\r\n                self.loadTemplateData(action);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param action\r\n     */\r\n    loadTemplateData: function (action) {\r\n        var self = this;\r\n        self.pub(\"notify\", { type: \"TEMPLATEENGINE-VIEW\", args: {action: action, isRefresh: true}});\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    onExecuteForm: function (action, mappingData) {\r\n        var self = this;\r\n\r\n        $.when(self.processActionService.executeFormAction({\r\n            action: action,\r\n            mappingData: mappingData\r\n        })).done(function (data) {\r\n            if (data.refresh) {\r\n                self.pub(\"notify\", { type: \"UPDATE-DATATEMPLATE-VIEW\", args: { action: action, isRefresh: true, calculateFilters: true }});\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Returns the action required\r\n     */\r\n    getAction: function (guidAction) {\r\n        var self = this;\r\n        return self.commonActionsmodel.actions.filter( function (action) {\r\n            return action.id == guidAction;\r\n        })[0];\r\n    },\r\n\r\n    /**\r\n     * Returns an array with the valid actions\r\n     * @param actions\r\n     * @return {*}\r\n     */\r\n    validActions: function (actions) {\r\n        return $.grep(actions, function (action) {\r\n            if (action.multiplicity == 2) { return true; }\r\n            if (action.mode == \"Collection\") { return false; }\r\n            if (action.type == \"Form\") { return false; }\r\n            if (action.isEvent) { return false; }\r\n            if (action.type == \"Process\" && action.hasStartForm) { return false; }\r\n            return true;\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Detach handlers\r\n     */\r\n    clean: function () {\r\n        var self = this,\r\n            $content = self.getContent();\r\n        self.requestsInProgressActionGuid = {};\r\n\r\n        if ($content) {\r\n            self.unsub(\"TEMPLATEENGINE-VIEW\");\r\n            self.unsub(\"ENABLE-BATCHS-ACTIONS\");\r\n            self.unsub(\"SEARCH-ENGINE-VIEW\");\r\n            self.unsub(\"SET-FILTERS-DATA\");\r\n            self.unsub(\"HIDE-FILTER-BUTTONANDBAR\");\r\n            self.unsub(\"HIDE-SORT-BUTTONS\");\r\n\r\n            self.$checkAll.off(\"click\");\r\n            $content.find(\".right-menu\").off(\"click\");\r\n            $content.find(\".sortbar-az\").off(\"click\");\r\n            $content.find(\".filter-icon\").off(\"click\");\r\n            $content.find(\".sortbar-action\").off(\"click\");\r\n            $(\".wdg-tple-button.batchAction\", $content).off(\"click\", $.proxy(self.onClickBatchAction, self));\r\n            $(\".remove-selected-items-collections\", $content).off(\"click\", $.proxy(self.onRemoveSelectedItemsCollections, self));\r\n        }\r\n    }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.sortbar\", [\"workportalFacade\", \"dataService\", \"processActionService\", \"accumulatedcontext\", bizagi.workportal.widgets.sortbar]);\r\n","/**\r\n * Document   : Bizagi Workportal Desktop My Search Filter Controller\r\n * Created on : May 20, 2015, 11:24:00 AM\r\n * Author     : Andrs Felipe Arenas Vargas\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.mysearchfilter\", {\r\n\r\n    /**\r\n     *\r\n     * @param workportalFacade\r\n     * @param dataService\r\n     * @param processActionService\r\n     * @param params\r\n     */\r\n    init: function(workportalFacade, dataService, processActionService, params) {\r\n        var self = this;\r\n        self.params = {};\r\n        self._super(workportalFacade, dataService, params);\r\n        self.loadTemplates({\r\n            \"mysearchfilter\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mysearchfilter\").concat(\"#mysearchfilter-wrapper\"),\r\n            \"mysearchfilter-item\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mysearchfilter\").concat(\"#mysearchfilter-item\")\r\n        }).done(function () {\r\n            self.filterItem = self.getTemplate(\"mysearchfilter-item\");\r\n        });\r\n\r\n        self.processActionService = processActionService;\r\n        self.filtersApplied = [];\r\n        self.filters = [];\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        self.content = self.getTemplate(\"mysearchfilter\").render({});\r\n        self.content.hide();\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        self.configureHandlers();\r\n    },\r\n\r\n    /**\r\n     * Asigna los parametros iniciales de la busqueda e inicializa los objetos\r\n     * @param e\r\n     * @param params\r\n     */\r\n    initializeMySearchFilter: function (e, params) {\r\n        var self = this,\r\n            $content = self.getContent();\r\n\r\n        self.criteriaSearchApplied = (params.args.filters) ? bizagi.clone(params.args.filters) : [];\r\n        self.filtersApplied = [];\r\n        self.filterControlArray = [];\r\n        self.orderBy = {};\r\n        $(\".mysearchfilter-list\", $content).empty();\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        self.sub(\"TEMPLATEENGINE-VIEW\", $.proxy(self.initializeMySearchFilter, self));\r\n        self.sub(\"SEARCH-ENGINE-VIEW\", $.proxy(self.initializeMySearchFilter, self));\r\n        self.sub(\"OPENCLOSE-MYSEARCHFILTER\", $.proxy(self.toggleWidget, self));\r\n        self.sub(\"CLOSE-MYSEARCHFILTER\", $.proxy(self.openCloseWidget, self));\r\n        self.sub(\"SET-FILTERS-DATA\", $.proxy(self.setFiltersData, self));\r\n        self.sub(\"SET-ORDERBY\", $.proxy(self.setOrderBy, self));\r\n        self.sub(\"SET-RECORDS\", $.proxy(self.setRecordsPerPage, self));\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param ev\r\n     * @param params\r\n     */\r\n    setFiltersData: function (ev, params) {\r\n        var self = this;\r\n\r\n        if (params.args.defaultFilterApplied) {\r\n            params.args.filtersApplied = params.args.filtersApplied || [];\r\n            var filtersAppliedWithProperties = params.args.filtersApplied.filter(function(filter){\r\n                return typeof filter.properties !== \"undefined\";\r\n            });\r\n            self.filtersApplied = filtersAppliedWithProperties;\r\n        }\r\n\r\n        if (params.args.calculateFilters) {\r\n            var $content = self.getContent();\r\n            var $listContent = $(\".mysearchfilter-list\", $content);\r\n            var filters = params.args.filters;\r\n            var filtersAppliedCounter = params.args.filtersAppliedCounter;\r\n\r\n            var i = -1, a, counter = 0;\r\n            while (a = filters[++i]) {\r\n                if (a.type != \"Text\" && a.type !== \"Link\" && a.data && ((a.data.defaultValues && a.data.defaultValues.length > 0) || (a.data.min && a.data.max))) {\r\n                    counter++;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            //Si no hay registros y no hay filtros oculta\r\n            if (params.args.totalRecords === 0 && filtersAppliedCounter === 0) {\r\n                self.openCloseWidget({show: false});\r\n            }\r\n            else if (counter === 0) {\r\n                self.openCloseWidget({show: false});\r\n            }\r\n            else {\r\n                self.openCloseWidget({show: true});\r\n            }\r\n\r\n\r\n            if (self.filterControlArray && self.filterControlArray.length === 0) {\r\n                var i = -1, a;\r\n\r\n                while (a = filters[++i]) {\r\n                    a[\"tmplid\"] = a.attribute.replaceAll(\".\", \"-\"); //used in mysearchfilter.tmpl.html\r\n\r\n                    var foundDefaultFilter = self.filtersApplied.filter(function(defaultFilter){\r\n                        return defaultFilter.properties.type === a.type.toLowerCase() && defaultFilter.properties.xpath === a.tmplid\r\n                    });\r\n\r\n                    if(foundDefaultFilter.length > 0){\r\n                        a.filterApplied = \"filter-applied\";\r\n                    }\r\n                    else{\r\n                        a.filterApplied = \"\";\r\n                    }\r\n                    var filterItem = self.filterItem.render(a);\r\n\r\n                    if (a.type !== \"Text\" && a.type !== \"Link\" && a.data && ((a.data.defaultValues && a.data.defaultValues.length > 0) || (a.data.min && a.data.max))) {\r\n                        $listContent.append(filterItem);\r\n                        self.buildFilter(filterItem, a);\r\n                        if(a.filterApplied === \"filter-applied\"){\r\n                            $(\".remove-filter\", filterItem).show();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (self.filterControlArray && self.filterControlArray.length > 0) {\r\n                var i = -1, a;\r\n                while (a = self.filterControlArray[++i]) {\r\n                    var filter = filters.find(function (el) {\r\n                        return el.attribute === a.xpath;\r\n                    });\r\n                    if (filter) {\r\n                        self.setFilterData(a, filter);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        $(\".filters-loading\", self.content).hide();\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param e\r\n     * @param params\r\n     */\r\n    toggleWidget: function (e, params) {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var status = $content.is(\":visible\");\r\n\r\n        self.openCloseWidget({show: !status, $target:  params.args.target});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param params\r\n     */\r\n    openCloseWidget: function (params) {\r\n        var self = this,\r\n            $content = self.getContent(),\r\n            $target = params.$target || $(\"<div>\");\r\n\r\n        if (params.show){\r\n            $target.addClass(\"opened\");\r\n            $content.show();\r\n        }\r\n        else{\r\n            $target.removeClass(\"opened\");\r\n            $content.hide();\r\n            $(\"button#ui-bizagi-cancel-filter\").click();\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilter: function ($element, filter) {\r\n        var self = this;\r\n        switch (filter.type) {\r\n            case \"Entity\":\r\n                self.buildFilterMultiple($element, filter);\r\n                break;\r\n            case \"Number\":\r\n                self.buildFilterNumber($element, filter);\r\n                break;\r\n            case \"Money\":\r\n                self.buildFilterMoney($element, filter);\r\n                break;\r\n            case \"Datetime\":\r\n                self.buildFilterDate($element, filter);\r\n                break;\r\n            /*case \"Text\":\r\n                self.buildFilterText($element, filter);\r\n                break;*/\r\n            case \"Boolean\":\r\n                self.buildFilterBoolean($element, filter);\r\n                break;\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param filter\r\n     * @param data\r\n     */\r\n    setFilterData: function (filter, filterData) {\r\n        switch (filter.type) {\r\n            case \"Entity\":\r\n                filter.widget.multiple(\"setData\", filterData.data);\r\n                break;\r\n            case \"Number\":\r\n                filter.widget.number(\"setData\", filterData.data);\r\n                break;\r\n            case \"Money\":\r\n                filter.widget.money(\"setData\", filterData.data);\r\n                break;\r\n            case \"Datetime\":\r\n                filter.widget.dateFilter(\"setData\", filterData.data);\r\n                break;\r\n            /*case \"Text\":\r\n                filter.widget.textFilter(\"setData\", data);\r\n                break;*/\r\n            case \"Boolean\":\r\n                filter.widget.booleanFilter(\"setData\", filterData.data);\r\n                break;\r\n\r\n        }\r\n    },\r\n\r\n    /*buildFilterText: function ($element, filter) {\r\n        var self = this;\r\n        var textFilter = $element.textFilter({\r\n            properties: filter,\r\n            onApply: function (data) {\r\n                if (data.length !== 0) {\r\n                    self.addFilterSelection(data);\r\n                    self.triggerFilter({calculateFilters: true});\r\n                }\r\n            },\r\n            onClear: function (xpaths) {\r\n                self.removeFilterApplied(xpaths);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return bizagi.localization.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget: textFilter});\r\n    },*/\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilterMoney: function ($element, filter) {\r\n        var self = this;\r\n\r\n        var moneyFilter = $element.money({\r\n            showButtonClearFilter: true,\r\n            numericFormat: self.getResource(\"numericFormat\"),\r\n            properties: filter,\r\n            data: filter.data,\r\n            onApply: function (data, element) {\r\n                self.addFilterSelection(data);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            onClear: function (xpath) {\r\n                self.removeFilterApplied(xpath);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return bizagi.localization.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget: moneyFilter});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilterNumber: function ($element, filter) {\r\n        var self = this;\r\n        var numberFilter = $element.number({\r\n            showButtonClearFilter: true,\r\n            numericFormat: self.getResource(\"numericFormat\"),\r\n            properties: filter,\r\n            data: filter.data,\r\n            onApply: function (data, element) {\r\n                if (data.length !== 0) {\r\n                    self.addFilterSelection(data);\r\n                    self.triggerFilter({calculateFilters: true});\r\n                }\r\n            },\r\n            onClear: function (xpath) {\r\n                self.removeFilterApplied(xpath);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return bizagi.localization.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget: numberFilter});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilterDate: function ($element, filter) {\r\n        var self = this;\r\n        var dateFilter = $element.dateFilter({\r\n            showButtonClearFilter: true,\r\n            properties: filter,\r\n            onApply: function (data, element) {\r\n                self.addFilterSelection(data);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            onClear: function (xpaths) {\r\n                self.removeFilterApplied(xpaths);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return self.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget: dateFilter});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilterMultiple: function ($element, filter) {\r\n        var self = this;\r\n        var multipleFilter = $element.multiple({\r\n            showButtonClearFilter: true,\r\n            properties: filter,\r\n            data: filter.data,\r\n            onApply: function (data, element) {\r\n                self.addFilterSelection(data);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            onClear: function (xpath) {\r\n                self.removeFilterApplied(xpath);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return bizagi.localization.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget:multipleFilter});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilterBoolean: function ($element, filter) {\r\n        var self = this;\r\n        var booleanFilter = $element.booleanFilter({\r\n            showButtonClearFilter: true,\r\n            properties: filter,\r\n            data: filter.data,\r\n            onApply: function (data, element) {\r\n                self.addFilterSelection(data);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            onClear: function (xpath) {\r\n                self.removeFilterApplied(xpath);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return bizagi.localization.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget: booleanFilter});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param data\r\n     */\r\n    addFilterSelection: function (data) {\r\n        var self = this;\r\n        $(\".filters-loading\", self.content).show();\r\n        for (var i = 0, len = data.length ; i < len; i++) {\r\n            self.removeFilterApplied([data[i].properties.xpath]);\r\n            self.filtersApplied.push(data[i]);\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param xpaths\r\n     */\r\n    removeFilterApplied: function (xpaths) {\r\n        var self = this;\r\n\r\n        $(\".filters-loading\", self.content).show();\r\n\r\n        var i = -1, a;\r\n        while(a = xpaths[++i]){\r\n            var filter = self.filtersApplied.find(function (el) {\r\n                return el.properties.xpath === a;\r\n            });\r\n            if (filter){\r\n                self.filtersApplied.splice(self.filtersApplied.indexOf(filter), 1);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param ev\r\n     * @param params\r\n     */\r\n    setOrderBy: function (ev, params) {\r\n        var self = this;\r\n        self.orderBy = params.args;\r\n        self.triggerFilter({calculateFilters: false});\r\n    },\r\n\r\n    setRecordsPerPage: function (ev, params) {\r\n        var self = this;\r\n        self.triggerFilter({ calculateFilters: false, pageSize: params.args && params.args.pageSize });\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param params\r\n     */\r\n    triggerFilter: function (params) {\r\n        var self = this;\r\n        var filtersToSend = self.criteriaSearchApplied ?  bizagi.clone(self.criteriaSearchApplied) : [];\r\n        var filtersApplied = self.filtersApplied.slice();\r\n        var filterBarFilters = [];\r\n\r\n        var i = -1, a;\r\n        while(a = filtersApplied[++i]){\r\n            self.dataService.defineFilterObject(a, filtersToSend);\r\n            self.dataService.defineFilterObject(a, filterBarFilters);\r\n        }\r\n\r\n        var filtersAppliedCounter = filterBarFilters.length;\r\n\r\n        //Set sort in json to send\r\n        if(self.orderBy.properties){\r\n            self.dataService.defineFilterObject(self.orderBy, filtersToSend);\r\n        }\r\n\r\n        var filterParams = {\r\n            type: \"UPDATE-DATATEMPLATE-VIEW\",\r\n            args: {\r\n                filters: filtersToSend,\r\n                page: 1,\r\n                level: 1,\r\n                calculateFilters: params.calculateFilters || false,\r\n                defaultFilterApplied: false,\r\n                typeSearch: \"filter\",\r\n                filtersAppliedCounter: filtersAppliedCounter,\r\n                pageSize: params.pageSize || 10\r\n            }\r\n        };\r\n\r\n        self.pub(\"notify\", filterParams);\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.mysearchfilter\", [\"workportalFacade\", \"dataService\", \"processActionService\", bizagi.workportal.widgets.mysearchfilter], false);"]}