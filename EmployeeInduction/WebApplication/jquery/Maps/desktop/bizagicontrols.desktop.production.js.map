{"version":3,"sources":["jquery/common/bizagi.ui.controls/jquery.ui.controls.definition.js","jquery/workportal/js/bizagi.workportal.facade.js","jquery/workportal/js/base/bizagi.workportal.controllers.controller.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.widget.js","jquery/common/base/js/lib/jquery.imageZoom.js","jquery/common/jquery.ui/js/desktop/jquery.ui.check.js","jquery/common/jquery.ui/js/desktop/jquery.ui.selectmenu.js","jquery/rendering/js/plugins/desktop/jquery.timeEntry.js","jquery/common/jquery.ui/js/desktop/jquery.ui.selectable2.js","jquery/common/jquery.ui/js/desktop/jquery.ui.option.js","jquery/common/bizagi.grid/js/bizagi.grid.js","jquery/common/bizagi.grid/js/desktop/bizagi.grid.desktop.js","jquery/common/bizagi.grid/js/desktop/bizagi.grid.grouped.desktop.js","jquery/common/bizagi.pagination/js/jquery.bizagi.pagination.js","jquery/common/bizagi.timepicker/js/jquery.bizagi.timepicker.js","jquery/common/bizagi.upload/js/jquery.bizagi.upload.js","jquery/common/bizagi.upload/js/jquery.bizagi.fileupload.js","jquery/common/bizagi.filters/js/bizagi.filters.js","jquery/common/bizagi.overflowMenu/js/desktop/bizagi.menuOverflow.js","jquery/rendering/js/plugins/desktop/nicEdit.js","jquery/common/jquery.ui/js/desktop/jquery.ui.searchList.js","jquery/common/bizagi.ui.controls/table/js/jquery.ui.table.js","jquery/common/bizagi.ui.controls/combo/js/jquery.ui.combo.js","jquery/common/bizagi.ui.controls/checkbox/js/jquery.ui.checkbox.js","jquery/common/bizagi.ui.controls/radio/js/jquery.ui.radio.js","jquery/common/bizagi.ui.controls/treeview/js/jquery.ui.treeview.js","jquery/common/bizagi.ui.controls/multiselect/js/jquery.ui.multiselect.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.async.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.asyncecm.upload.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.asyncecm.upload.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.processtree.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.entitiestree.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.userstable.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.tree.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.processtree.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.entitiestree.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.userstable.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.tree.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.entities.js","jquery/common/bizagi.filterMoney/js/bizagi.filterMoney.js","jquery/common/bizagi.filterNumber/js/bizagi.filterNumber.js","jquery/common/bizagi.filterDate/js/bizagi.filterDate.js","jquery/common/bizagi.filterText/js/bizagi.filterText.js","jquery/common/bizagi.filterMultiple/js/bizagi.filterMultiple.js","jquery/common/bizagi.filterBoolean/js/bizagi.filterBoolean.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.async.js"],"names":["$","bizagi","ui","controls","uitable","namespace","availableComponents","css","tmpl","tmpl2","tmpl3","uicombo","uicheckbox","uiradio","uitreeview","uimultiselect","workportal","currentInboxView","state","Class","extend","init","params","this","deviceFactory","device","factory","dataService","services","service","routing","defaultParams","timeoutID","loadDefaultWidget","defaultWidget","util","isEmpty","window","location","hash","hashParams","getHashParams","search","queryString","getQueryString","widget","isMobileDevice","caseLink","BIZAGI_DEFAULT_WIDGET","cookie","detectDevice","widgets","BIZAGI_WORKPORTAL_WIDGET_INBOX","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","expires","online","isTabletDevice","execute","canvas","self","doc","ownerDocument","body","appendTo","executionDeferred","Deferred","process","done","content","replaceSelector","resolve","createWebpart","executeWebpart","creating","testWebpartConfiguration","webpartConfiguration","url","webparts","addConfigurationMessage","processWebpart","result","append","ready","promise","defer","facade","getWorkportalFacade","processOfflineData","when","pipe","workportalFacade","processWorkportal","fetchOfflineData","pushOfflineData","always","webpartController","detectRealDevice","deferTemplates","loadWebpart","getWebpart","webpart","render","controller","mainController","getMainController","then","menu","isRendered","widgetNameToLoad","getWidgetByDataUser","actionObject","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","idCase","guid","idWorkItem","idWorkitem","publish","setWidget","widgetName","performResizeLayout","bizagiDefaultWidget","propertyLandingPage","userDisplayOptions","JSON","parse","startPage","key","value","currentUser","sUserProperties","i","j","length","BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL","getWidgetByCookieAndStakeholders","currentUserHaveStakeholderAssociated","getWidgetByCookie","associatedStakeholders","forceInboxOrGrid","resources","localization","componentContainers","subscribers","disposed","templatesDeferred","getWorkportal","eventName","document","triggerHandler","subscribe","callback","bind","push","event","subscribeOneTime","one","unsubscribe","unbind","renderingDeferred","areTemplatedLoaded","renderContent","postRender","getContent","getResource","getComponentSelector","component","getComponentContainer","resizeLayout","dispose","each","item","setTimeout","override","disposeTime","loadTemplates","templates","def","tmplPromises","useNewEngine","undefined","name","loadTemplate","path","apply","data","templateService","getTemplateWidget","getTemplate","hasOwnProperty","controllers","BIZAGI_WORKPORTAL_WIDGET_INTEGRATION","BIZAGI_WORKPORTAL_WIDGET_WEBPART","BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY","BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD","BIZAGI_WORKPORTAL_WIDGET_ROUTING","BIZAGI_WORKPORTAL_WIDGET_SEARCH","BIZAGI_WORKPORTAL_WIDGET_RENDER","BIZAGI_WORKPORTAL_WIDGET_START_FORM","BIZAGI_WORKPORTAL_WIDGET_RENDERFORM","BIZAGI_WORKPORTAL_WIDGET_NEWCASE","BIZAGI_WORKPORTAL_WIDGET_QUERIES","BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION","BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT","BIZAGI_WORKPORTAL_WIDGET_QUERYFORM","BIZAGI_WORKPORTAL_WIDGET_LISTCASES","BIZAGI_WORKPORTAL_WIDGET_ASYNC","BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME","BIZAGI_WORKPORTAL_WIDGET_SUBMENU","BIZAGI_WORKPORTAL_WIDGET_PRINT","BIZAGI_WORKPORTAL_WIDGET_FONTSIZE","BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION","BIZAGI_WORKPORTAL_WIDGET_PAGE","BIZAGI_WORKPORTAL_WIDGET_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_REPORTS","BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU","BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART","BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES","BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE","BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD","BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE","BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE","BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG","BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES","BIZAGI_WORKPORTAL_WIDGET_START_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS","BIZAGI_WORKPORTAL_WIDGET_TREE","BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY","BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS","BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS","BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE","BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER","BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP","BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY","BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST","BIZAGI_WORKPORTAL_WIDGET_LOADFORM","BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE","BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV","BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME","BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES","BIZAGI_WORKPORTAL_WIDGET_TIMELINE","BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP","BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUP_REPORT","BIZAGI_WORKPORTAL_WIDGET_PROFLY","BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT","BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED","BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY","BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES","BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL","BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT","_super","observableElement","widgetReadyDeferred","isBlocked","referrer","getWidgetName","changeWidget","widgetParams","executeAction","actionName","actionParams","showGraphicQuery","isAdhoc","loader","start","modalParameters","title","refreshInbox","maximizeOnly","onClose","desktop","dialogStack","pop","isProcessOnTheFlyCase","showTimeLine","startAndThen","routingExecute","element","find","val","idWorkflow","parent","idTask","eventAsTasks","fullName","sub","off","arguments","on","unsub","pub","pubDeadLockDetection","reject","pubDef","queueDef","Array","isArray","clean","events","_data","isReady","setWidgetReady","jQuery","fn","imageZoom","conf","config","speed","dontFadeIn","hideClicked","imageMargin","className","loading","doubleSpeed","click","e","clickedElement","target","clickedLink","is","parents","clickedImg","oldText","text","setLoadingImg","opacity","setNotLoadingImg","displayImgSrc","attr","preloadOnload","pload","dimElement","offset","imgzoomBefore","width","outerWidth","height","outerHeight","left","top","imgzoom","imgzoomAfter","windowDim","nWidth","nHeight","scrollLeft","scrollTop","closeButton","hide","addClass","animate","fadeIn","zIndex","hideImgzoom","fadeOut","remove","preload","Image","src","complete","onload","keydown","keyCode","_create","label","options","input","detach","wrap","insertBefore","hover","removeClass","ev","args","triggerChange","_trigger","trigger","focus","blur","alert","checkItem","prop","uncheckItem","check","version","eventPrefix","getter","transferClasses","style","menuWidth","handleWidth","maxHeight","icons","format","o","ids","_safemouseup","newelement","widgetFullName","insertAfter","tabindex","selectmenuIcon","prependTo","_toggle","ret","ENTER","SPACE","UP","LEFT","list","_moveSelection","open","DOWN","RIGHT","TAB","_typeAhead","mousedown","close","_refreshValue","cornerClass","selectOptionData","_formatText","selected","classes","parentOptGroup","activeClass","thisLi","mouseup","changed","_selectedIndex","index","select","change","_selectedOptionLi","_focusedOptionLi","browser","msie","optGroupName","replace","size","iconClass","icon","prepend","add","clonedSelect","clone","selectWidth","position","visibility","display","_optionLis","HOME","_moveFocus","PAGE_UP","_scrollPage","PAGE_DOWN","END","ESCAPE","disable","_refreshPosition","resize","destroy","removeData","removeAttr","show","code","eventType","_prevChar","C","String","fromCharCode","c","toLowerCase","focusFound","focusOpt","elem","ind","thisText","indexOf","_uiHash","option","get","_closeOthers","activeID","Math","round","random","eq","retainFocus","not","selectmenu","selectedIndex","amt","newIndex","parseInt","isNaN","filter","direction","numPerPage","floor","_setData","_scrollPageInternal","newValue","currentOptionClasses","newOptionClasses","html","menuTop","scrolledAmt","TimeEntry","_disabledInputs","regional","show24Hours","separator","ampmPrefix","ampmNames","spinnerTexts","_defaults","appendText","showSeconds","showZeroInHour","timeSteps","initialField","useMouseWheel","defaultTime","minTime","maxTime","spinnerImage","spinnerSize","spinnerBigImage","spinnerBigSize","spinnerIncDecOnly","spinnerRepeat","beforeShow","beforeSetTime","PROP_NAME","extendRemove","props","prototype","markerClassName","setDefaults","_connectTimeEntry","hasClass","inst","_selectedHour","_selectedMinute","_selectedSecond","_field","_get","spinner","mozilla","after","_doFocus","_doBlur","_doClick","_doKeyDown","_doKeyPress","timeEntry","_parseTime","mousewheel","_doMouseWheel","_handleSpinner","_endSpinner","mouseover","_expandSpinner","mouseout","mousemove","_describeSpinner","_enableTimeEntry","_enableDisable","_disableTimeEntry","disabled","nextSibling","nodeName","_changeSpinner","map","_isDisabledTimeEntry","inArray","_changeTimeEntry","currentTime","_extractTime","_setTime","Date","_destroyTimeEntry","$input","unmousewheel","replaceWith","_setTimeTimeEntry","time","getTime","_getTimeTimeEntry","_getOffsetTimeEntry","_lastInput","_focussed","_blurredInput","_showField","fieldSize","selectionStart","field","max","_secondField","_ampmField","end","createTextRange","srcElement","range","offsetX","clientX","documentElement","thin","medium","thick","offsetLeft","collapse","moveEnd","boundingWidth","shiftKey","_changeField","ctrlKey","_setValue","_adjustField","chr","charCode","_handleKeyPress","delta","opera","abs","safari","preventDefault","_getSpinnerTarget","_getInput","_expanded","relative","_endExpand","siblings","_getSpinnerRegion","region","_actionSpinner","_timer","_handlingSpinner","_repeatSpinner","_releaseSpinner","clearTimeout","pos","_findPos","scrolled","_findScroll","clientY","right","bottom","min","obj","curLeft","curTop","offsetParent","offsetTop","origCurLeft","isFixed","parentNode","now","_constrainTime","_lastChr","_showTime","split","substring","isAM","isPM","hour","minute","second","fields","_determineTime","getHours","getMinutes","getSeconds","reset","isNow","_formatNumber","setSelectionRange","moveStart","moveOut","atFirstLast","_normaliseTime","setFullYear","setMonth","setDate","setting","pattern","matches","exec","test","getDate","offsetString","setTime","saveField","getters","otherArgs","slice","call","concat","inlineSettings","metadata","single","mouse","closest","keyboard","multiple","lasso","cancel","delay","distance","tolerance","_init","items","currentFocus","refresh","disableSelection","_mouseInit","_targetIsItem","_selection","_listenForMouseUp","_mouseSelect","selectClosest","next","previous","metaKey","_toggleSelection","helper","createElement","current","overlap","selfOffset","$this","x","offsetWidth","y","offsetHeight","currentIndex","_selectAdjacent","_mouseDestroy","_previousSelection","_mouseCapture","clickedOnItem","_mouseStart","opos","pageX","pageY","startSelected","_removeFromSelection","_mouseDrag","x1","y1","x2","y2","tmp","hit","_addToSelection","_mouseStop","newlySelected","newlyDeselected","wasAlreadyPartOfPreviousSelection","uiHash","added","removed","_select","found","addBack","_endSelection","_triggerDeselection","triggerItems","_clearSelection","triggerEvent","latestSelection","splice","_updateSelectionMouse","updateEvents","latestWithoutModifier","previousFocus","_updateSelection","index2","fromInside","deselect","specialKey","selection","allInputs","orientation","checked","isIE","prev","setValue","optionGroup","id","columns","sortBy","sortType","showSummary","collapseState","indexedData","maxColumns","buttonsPst","tableCssClass","headerStyles","floatingHeader","template","grid","waiting","table","emptyTable","column","specialColumn","row","rowButtons","cell","specialCell","pager","buttons","dynamicPager","summary","summaryCell","edit","details","allowMore","enableXlsExport","enablePdfExport","mode","page","changes","totalRows","totalPages","selectedRow","components","asyncCells","scrollableArea","columnByIndex","columnByName","columnKeyIndex","tooltip","calculateKeyIndex","startLoading","bUseTimeout","waitingFn","waitingTimeout","fasttmpl","endLoading","empty","setData","getData","rows","getChanges","_cleanComponents","_cleanButtons","draw","refreshSummary","columnIndex","_getComponent","drawing","refreshSummaryCell","drawSummary","postRenderSummary","getCell","cells","children","drawSummaryCell","onCellReady","changeCellValue","deleteCellExclusiveValues","gridRtl","isDesign","drawTable","attachPaginator","attachHandlers","$tableContainer","$table","stickyTableHeaders","fixedOffset","cacheHeaderHeight","_getButton","_replaceElement","drawHeader","drawBody","drawPager","drawButtons","drawGridExportOptions","drawRowButtons","drawDynamicPager","isExactMatch","exactMatch","drawColumn","_canShowButtons","drawSpecialColumn","columnProperties","bizAgiProperties","cssClass","cssclass","header","columntitlealign","isKey","sortActive","sortOrder","columnCssClass","headerLabelStyles","drawRow","rowData","isNewRow","newRow","rnd","businessKey","drawCell","_canShowRowButtons","drawSpecialCell","cellAlign","columnAlign","hidden","summarizeBy","onDrawCell","calculateSummary","resolveResult","messageValidation","drawGroupHeader","drawFooter","pages","total","number","active","records","tooltips","parameters","buttonsRtl","exportOptions","rtl","postRenderRow","_triggerHandler","asyncResult","selectDynamicPager","onDynamicPager","changePage","currentPage","Number","newPage","onPageRequested","isValid","type","sortAttribute","sortColumn","onSortRequested","selectRow","onRowUnselected","selectedBusinessKey","onRowSelected","unselectRow","operation","defaultvalue","columnValues","columnValue","processAction","onEditRow","onDeleteRow","onShowMore","onShowDetails","onAddRow","onShowExportGridOptions","_buildRefreshParameters","onCollapseGrid","onDrawControl","onDrawGroupHeader","sortColumnIndex","foundComponent","button","bizagi_grid","smartPagination","isPropagationStopped","stopPropagation","pageNumber","xpath","context","isOfflineForm","onSaveAddedRows","onCancelEdition","gridExportOptionsContent","mouseleave","disposition","exportType","evt","_deleteDraft","ul","bizagiPagination","maxElemShow","actualPage","listElement","pdata","pagination","pageToshowRtl","pageToshow","previousPage","nextPage","addInlineRow","createAddRowData","ceil","inlineAdd","addFormDialog","keys","getNewRowKeys","newRowKeys","getCellHeader","rowHeader","isNewRecord","updateCollapseState","getDraftRow","newRecords","bizagi_grid_desktop","groupByValues","groupByPreviousValues","rowsGroupData","summaryGroup","isNewGroup","isNewSummarygroup","drawSummaryRows","drawGroupingRows","addRowGroupData","groupByColumns","showColumn","drawEmptyCells","conectorV","bSpecialCellAdded","drawTotalizer","levels","getGroupLevels","setGroupByValues","l","level","drawGroupRow","deep","areIdenticalValues","groupByColumn","getColumnValue","groupLevel","getValidColumns","validColumns","grep","emptyCells","groupData","totalizer","realColumnsData","getRowsGroupData","calculateSummaryGroup","getFormatedValue","headerRow","columnTitle","getColumnTitle","colspan","emptyCell","conectorCorner","conectorH","columnName","getColumnName","displayType","displayTypeHeader","properties","allowDecimals","numDecimals","BIZAGI_DEFAULT_CURRENCY_INFO","decimalDigits","positiveFormat","negativeFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","groupDigits","colorize","roundToDecimalPlace","symbol","formatCurrency","parseBoolean","dataType","percentage","dateObj","defaultDateFormat","defaultTimeFormat","dateFormat","timeFormat","fullFormat","timePickerFormat","dateFormatter","getDateFromInvariant","showTime","INVARIANT_FORMAT","setHours","formatDate","i18n","displayName","getColSpan","valuesGroup","values","getNestedRows","group","drawSummaryRow","drawSummaryGroupCell","summaryKey","dataRowsgroup","postRenderGroupedSummary","nextUntil","groupedLevel","summaryLevel","opt","limInf","first","firstClass","prevClass","nextClass","last","lastClass","liClass","arrowClass","selectedFocus","clickCallBack","pageScroll","increment","displace","firstPageValue","lastPageValue","displaceElements","firstElementValue","pageData","totalElements","trim","setInterval","clearInterval","back","halfDisplace","timepicker","Timepicker","currentText","closeText","amNames","pmNames","timeSuffix","timeOnlyTitle","timeText","hourText","minuteText","secondText","millisecText","microsecText","timezoneText","isRTL","showButtonPanel","timeOnly","showHour","showMinute","showSecond","showMillisec","showMicrosec","showTimezone","stepHour","stepMinute","stepSecond","stepMillisec","stepMicrosec","millisec","microsec","timezone","hourMin","minuteMin","secondMin","millisecMin","microsecMin","hourMax","minuteMax","secondMax","millisecMax","microsecMax","minDateTime","maxDateTime","onSelect","hourGrid","minuteGrid","secondGrid","millisecGrid","microsecGrid","alwaysSetTime","altFieldTimeOnly","altTimeFormat","altSeparator","altTimeSuffix","pickerTimeFormat","pickerTimeSuffix","showTimepicker","timezoneList","addSliderAccess","sliderAccessArgs","controlType","defaultValue","$altInput","$timeObj","hour_slider","minute_slider","second_slider","millisec_slider","microsec_slider","timezone_select","hourMinOriginal","minuteMinOriginal","secondMinOriginal","millisecMinOriginal","microsecMinOriginal","hourMaxOriginal","minuteMaxOriginal","secondMaxOriginal","millisecMaxOriginal","microsecMaxOriginal","ampm","formattedDate","formattedTime","formattedDateTime","units","support","control","settings","_newInst","opts","tp_inst","fns","overrides","attrName","attrValue","eval","err","dp_inst","isFunction","evnts","onChangeMonthYear","year","month","_updateDateTime","dateText","timeDefined","toUpperCase","detectSupport","_controls","tzl","tzi","tzv","timezoneOffsetString","iso8601","timezoneOffsetNumber","getTimezoneOffset","altField","cursor","minDate","maxDate","_onFocus","_addTimePicker","currDT","_limitMinMaxDateTime","_injectTimePicker","timeString","withDate","datepicker","_getInst","dp_dateFormat","parseRes","parseDateTimeInternal","_getFormatConfig","timeObj","log","parseTime","$dp","dpDiv","litem","uitem","gridSize","noDisplay","substr","h","tmph","formatTime","m","showTz","$tp","create","marginLeft","marginRight","borderCollapse","$t","n","ap","f","_onTimeChange","_onSelectHandler","textAlign","overflow","idx","selectedYear","selectedMonth","selectedDay","selectLocalTimezone","$buttonPanel","before","sliderAccess","sliderAccessWidth","$g","oldWidth","oldMarginLeft","toString","newWidth","newMarginLeft","adjustSliders","dp_date","minDateTimeDate","getFullYear","getMonth","getMilliseconds","getMicroseconds","maxDateTimeDate","minMax","secMax","hasChanged","inputEl","dtTmp","currentYear","currentMonth","currentDay","dt","_daylightSavingAdjust","dateFmt","formatCfg","timeAvailable","lastVa","altFormattedDateTime","altFormat","lastVal","_updateDatepicker","slider","unit","step","slide","stop","sel","tmp_args","datetimepicker","parseDateTime","dateTimeString","dateSettings","timeSettings","t","date","setMicroseconds","strictParse","s","treg","regstr","match","markers","ml","charAt","merge","join","order","finds","orders","z","getFormatPositions","resTime","RegExp","d","err2","looseParse","tmptime","ampmName","convert24to12","_base_selectDate","_selectDate","dateStr","inline","stay_open","_notifyChange","_base_updateDatepicker","_curInst","_datepickerShowing","_base_doKeyPress","tz","dateChars","_possibleChars","datetimeChars","_base_updateAlternate","_updateAlternate","_getDate","_base_doKeyUp","_doKeyUp","_base_gotoToday","_gotoToday","_disableTimepickerDatepicker","_enableTimepickerDatepicker","defaults","_setTimeDatepicker","tp_date","_setDateFromField","_base_setDateDatepicker","_setDateDatepicker","timezoneAdjust","_base_getDateDatepicker","_getDateDatepicker","noDefault","_base_parseDate","parseDate","shortYearCutoff","dayNamesShort","dayNames","monthNamesShort","monthNames","_base_formatDate","_formatDate","day","_base_optionDatepicker","_optionDatepicker","name_clone","onselect","isEmptyObject","tf","isIn","computeEffectiveSetting","property","splitDateTime","timePartsLen","allParts","allPartsLen","dateString","parts","parsedTime","tzMinutes","minutes","hours","iso","tzString","normalized","toTimezone","toTz","setMinutes","timeRange","startTime","endTime","handleRange","datetimeRange","dateRange","method","checkDates","other","startdt","enddt","changeddt","setMilliseconds","minInterval","maxInterval","selectedDateTime","console","_util","_extendRemove","_isEmptyObject","_convert24to12","_detectSupport","_selectLocalTimezone","_computeEffectiveSetting","_splitDateTime","_parseDateTimeInternal","microseconds","bizagiUpload","controlReference","EXTENSIONS_INVALID","renderReference","dialogTemplate","uploadedFiles","maxAllowedFiles","isECM","isUpdatingECM","onUploadFileCompletedCallback","onChangeFile","onCheckMaxSize","dialogBox","fileControl","files","maxSize","showError","onValidate","dialogTitle","onUploadFileProcess","onUploadDialogReady","openUploadDialog","reverseButtons","getFormContainer","isClicked","file","fileName","lastIndexOf","extension","replaceAll","validExtensions","stringToCheck","acceptableExtensionsArray","required","endsWith","validateFilenameExtension","checkFileTypes","maxfiles","dialobBox","isIE11","isIE10","$statusElement","xhr","XMLHttpRequest","FormData","upload","addEventListener","progress","percent","loaded","message","responseText","setRequestHeader","getXSRFToken","send","processUploadFileModernBrowsers","uploadForm","uploadIFrame","netSpeed","networkSpeed","estimatedTime","getEstimatedTimeByNetworkSpeed","$estimatedTime","$statusContainer","interval","timeoutFn","response","contentWindow","windoFrameObj","isIE8","iframeContent","closeUploadDialog","getCurrentUser","responseLogin","submit","fail","processUploadFileOldBrowsers","xPath","idPageCache","filename","idAttrib","idFileUpload","xpathContext","alertAfterUpload","showMessageBox","reverse","dialog","modal","draggable","resizable","maximize","contentDialog","timeout","errorContainer","enabled","extensionList","processedFileExtension","formatExtensions","bizagiFileUpload","contentFormUpload","contentForm","formTemplate","onUploadFileFailCallback","onUploadFormReady","extForm","$extForm","formData","ajax","contentType","processData","success","responseJSON","error","delayQuestionFileUpload","processUploadFile","alerFailtAfterUpload","bindSubmitButton","entity","filterWrapper","filterString","filterNumber","filterDate","filterBoolean","operators","equals","appliesTo","operator","like","is-null","isUnary","less-equals-than","greater-equals-than","testPrivateFunction","nameFunction","_on","buildFilter","filterType","getFilterType","$filter","addOperators","configureHandlers","getPosition","$button","buttonType","applyFilter","$operators","operatorsData","getOperators","initialValue","getInitialValue","combo","initValue","itemValue","itemText","onChange","setControlVisibility","update","getOperator","enableButton","$inputTextControl","disableButton","$parent","validateLimitsNumbersByType","maxValue","sign","buildCurrencyFilter","$control","numeric","numericFormat","collectDataValue","regexString","regex","auxInput","validationNumber","asNumber","updateValue","parseFloat","proxy","configureHandlerInputTypeText","buildEntityFilter","overlay","entityData","auxValue","isNumeric","getAdminEntityData","idEntity","idAttribute","attribute","displayAttrib","buildRelatedEntityFilter","buildDateTimeFilter","getDateFormatByDatePickerJqueryUI","dateFormatDisplay","displayDate","changeMonth","changeYear","numberOfMonths","yearRange","buildBooleanFilter","optiongroup","buildIntegerFilter","buildNumberFilter","buildTextFilter","buildTextExtendedFilter","oper","keyup","which","nextId","_elements","_iconTemplate","overflowMenu","setAttribute","forEach","li","innerHTML","textContent","itemId","getAttribute","appendChild","getZIndex","currentTarget","delegateTarget","originalEvent","client","W","xx","H","yy","removeMenu","clientWidth","clientHeight","el","$context","bkExtend","bkClass","construct","classDef","proto","bkElement","elm","$BK","appendBefore","addEvent","bkLib","setContent","curleft","curtop","b","getStyle","border","noSelect","parentTag","cls","setStyle","st","elmStyle","itm","cssRule","defaultView","nodeType","getComputedStyle","getPropertyValue","currentStyle","camelize","removeChild","setAttributes","at","isMSIE","navigator","appVersion","attachEvent","toArray","iterable","results","childNodes","arr","cancelEvent","domLoad","domLoaded","callee","onDomLoaded","fireThis","write","protocol","onreadystatechange","readyState","getElementById","bkEvent","evType","evFunc","eventList","fireEvent","shift","__","Function","closure","__method","closureListener","object","nicEditorConfig","bold","command","tags","font-weight","italic","font-style","underline","text-decoration","noActive","center","justify","ol","subscript","superscript","strikethrough","removeformat","indent","outdent","hr","iconsPath","buttonList","iconList","bgcolor","forecolor","save","image","link","unlink","arrow","smile","print","nicEditors","nicPlugins","editors","registerPlugin","plugin","p","allTextAreas","nicOptions","textareas","getElementsByTagName","nicEditor","panelInstance","findEditor","instanceById","getFirstEditor","nicInstances","loadedPlugins","plugins","selectCheck","checkReplace","panelElm","setPanel","addInstance","r","removeInstance","removePanel","contentEditable","newInstance","nicEditorInstance","nicEditorIFrameInstance","instances","nicPanel","nicEditorPanel","nicCommand","cmd","selectedInstance","getIcon","iconName","iconFiles","backgroundImage","backgroundPosition","lastSelectedInstance","isSelected","ne","newX","newY","initialHeight","isTextarea","hasPanel","ie7s","compatMode","borderTop","overflowY","overflowX","backgroundColor","editorContain","editorElm","margin","minHeight","copyElm","saveContent","instanceDoc","keyDown","getSel","getSelection","getRng","rangeCount","getRangeAt","createRange","selRng","rng","removeAllRanges","addRange","selElm","startContainer","contain","cloneContents","selectNode","compareBoundaryPoints","Range","START_TO_START","END_TO_END","parentElement","saveRng","savedRange","savedSel","restoreRng","selInstance","isFocused","getElm","execCommand","savedStyles","initialContent","elmFrame","frameBorder","allowTransparency","scrolling","initFrame","fd","designMode","externalCSS","frameDoc","frameWin","frameContent","heightUpdate","panelButtons","panelContain","marginTop","zoom","addButton","reorder","buttonName","noOrder","nicEditorButton","hasButton","fullPanel","findButton","bl","float","hoverOn","hoverOff","mouseClick","onmousedown","onclick","enable","updateState","isDisabled","setBg","isHover","isActive","stateStyle","checkNodes","activate","deactivate","ins","toggleActive","commandArgs","nicInstance","nicPlugin","loadPanel","np","nicPaneOptions","nicEditorPane","openButton","pane","fontSize","padding","noClose","removePane","newLeft","toggle","isVisible","nicEditorAdvancedButton","addPane","addForm","form","inputs","txt","fontWeight","clear","for","lineHeight","onsubmit","findElm","tag","nicButtonTips","timer","nicSelectOptions","fontFamily","fontFormat","nicEditorSelect","selOptions","paddingLeft","setDisplay","borderLeft","borderRight","borderBottom","itmContain","over","out","k","v","nicEditorFontSizeSelect","1","2","3","4","5","6","nicEditorFontFamilySelect","arial","comic sans ms","courier new","georgia","helvetica","impact","times new roman","trebuchet ms","verdana","nicEditorFontFormatSelect","pre","h6","h5","h4","h3","h2","h1","nicLinkOptions","nicLinkButton","ln","","href","_blank","nicColorOptions","nicEditorColorButton","colorList","0","colorItems","g","colorCode","colorSquare","colorBorder","colorInner","colorSelect","nicEditorBgColorButton","nicImageOptions","nicImageButton","im","alt","align","none","nicSaveOptions","nicEditorSaveButton","onSave","smileOptions","nicEditorSmileButton","smileList","smileItems","smileClass","smileElement","smileSquare","smileBorder","smileInner","smileSelect","span","insertNode","pasteHTML","nicPrintOptions","nicEditorPrintButton","container","printElement","printMode","cases","SEARCH_MAX_LENGTH","autocomplete","source","_getLabels","minLength","messages","noResults","_prependCases","_eventRemove","lastElement","labels","plg","cssComponent","asTable","nameTemplate","rowTemplate","cellValue","oddClass","onComplete","headerClick","arr2","methods","op","a","nData","recursiveRows","fValue","testValue","addHandlers","createComponents","comps","dataComp","validateComponent","datasource","indexCol","indexRow","jquery","outerHTML","comp","rValue","addRow","nPosition","elPos","nPosRow","tmplRow","countCols","addCols","cols","completeTask","addColumn","internalData","ascombo","isSearchable","isEditable","nameSubTemplate","initializeTemplates","tmpl1","onComboDropDown","IE","appName","userAgent","tmplloader","subTemplateHTML","inputCombo","getControl","findDataByValue","compareValIn","validateValueInDatasource","idDropdown","comboDropDown","dropDownDestroy","keyUpFunction","keyDownFunction","internalComboDropDown","selectTmp","objSelected","containerDropdown","containerControl","containerRender","selectedValue","scrollPosition","repositionInterval","selfControl","dropDown","my","of","collision","recalculateComboOffset","onComboItemSelected","makeArray","dropDownReposition","tg","dropDownValidClose","etarget","activeElement","containerForm","selectedKey","setDisplayValue","altKey","selectPreviousElement","selectNextElement","selectFirstElement","selectLastElement","selectItemByKeyUp","actual","valValue","selectedLabel","controlProperties","clearDisplayValue","getSelectedValue","dropDwn","objParent","getInternetExplorerVersion","selectItem","itemChecked","checkboxGroup","generateNamecheckboxGroup","checkbox","isChecked","radioGroup","generateNameRadioGroup","radio","_dataItems","_config","_template","_cssClass","_namespace","_setDefaults","_initializeTemplates","_renderContent","_eventHandlers","$element","$target","_slideSubItems","$checkbox","toggleClass","slideToggle","dataItems","getDataItems","setList","_refresh","getList","itemsTemplate","_itemValue","_itemText","renderSubItems","_renderSubItems","subitems","subItemsTemplate","_destroy","SEARCH_MIN_LENGTH","_getDataSource","_prependElements","multiselect","ASYNC_CHECK_TIMER","checkAsycnExecutionState","getAsynchExecutionState","errorMessage","asyncecm","async.ecm.upload","async.ecm.pending.jobs","enableUI","renderAsyncECMUpload","asyncECMUploadTypes","NOT_RUNNED","RUNNING","RUN_FINNISHED_OK","RUN_FINNISHED_WITH_ERROR","updateEcmAllScheduledJobs","loadingMessage","getEcmAllScheduledJobs","renderAllScheduledJobs","ecmAsyncTemplate","jobs","failureMessageHoverIn","retryECMPendingScheduledJob","idJob","customMessage","loadtemplates","processtree","showTitle","searchKeyResource","svgIconsMode","processesTreeNew","newDesign","processTree.links","processTree.wrapper","processTree","processTree.selected","setupData","applicationTreeWrapperTmpl","applicationTreeTmpl","applicationTreeSelectedTmpl","treeRouteSelected","treeRouteText","setupInitialData","setupLinks","treeWrapper","processSelected","userId","showSelectedProcessLabelWhenAllApplicationsSelected","selectAllApplications","hideSelectedProcessLabelWhenAllApplicationsNotSelected","selectOneAplication","changeRadioIcon","param","idSelected","getTreeRouteSelected","selector","expandOrCollapseArrows","expand","itemSelected","byUser","getApplicationCategoriesList","applicationList","appTree","svg","setTreeEvents","idApp","parentType","selectedRoute","selectedRouteText","parentDef","idItem","idParent","idCategory","filterStartEvent","authorizationContext","filterCaseSecurity","categoriesList","processes","down","getTreeRouteText","entitiestree","EntitiesTree.wrapper","EntitiesTree.tree","entitiesTreeTmpl","pathNodeType","idNode","nodeDisplayPath","nodePath","idWfClass","entityPathChildNodesAction","entitiesTree","nodes","hasParent","paramsChilds","userstable","filterData","maxRows","maxPages","$canvas","showBackButton","users","orderType","orderField","tableHeaders","fieldValue","usersTable.wrapper","usersTable.form","usersTable.table","usersTable.message","usersTableFormTmpl","usersTableTmpl","usersTableMessage","getOrganizationsList","rps","orgList","resultTemplate","unshift","setupOrgCombo","setupEventsHandler","$content","$userForm","domain","elements","userName","organization","pag","pagSize","getUsersTableData","cleanForm","excecuteQuery","fillUserInformation","showUsersTable","$wrapperList","pagesArray","getPagesArray","links","userLinkLabel","Object","headers","setUpPagination","setUpSortColumnLinks","msg","pagesToShow","aux","$pager","assignEventReassign","attributes","resultStatus","sortUsersTableByColumn","sortJSON","tree","tree.wrapper","tree.content","decisionTableContent","entities","deferred","getAllAdministrableEntities","idForm","renderEntityData","renderStaticForm","rendering","customHandlers","onGridAdd","showCloseButton","afterFormButtonClick","onGridEdit","surrogateKey","getEntitiesList","showButtonClearFilter","onApply","onClear","xpaths","_addButtonClearFilter","_setReturnObject","_bindContextMenuButtons","_bindContextMenu","_bindTooltip","_bindHandlers","btnRemoveFilter","returnObject","typeSearch","rangeQuery","contextMenu","types","contextMenuButtons","root","$menuContext","$menu","htmlButtons","_addFilterToDisplayName","$opener","_removeFilter","paramsContextMenu","notification","_getFormatOptions","_enableNotification","$minValue","$maxValue","_onClickMinValue","_onClickMaxValue","removeHandlersValuesMinMax","filterValue","_setDisplayValue","_setFormatValue","_getObjectValueByString","stringValue","asFloatType","minVal","maxVal","$displayNameControl","_setDisplayNameToDefault","_resetValue","$minControl","$maxControl","isLowerLimitInvalid","isUpperLimitInvalid","isRangeInvalid","_checkNotification","_disableNotification","showLabel","formatOptions","eventOnDecimalsEntered","getOwnPropertyNames","Widget","_setValuesOfReturnObject","_setDisplayTitle","from","to","_disableApply","_setDisplayLabels","_getFromControl","_getToControl","$minDate","$maxDate","_getDateFromInvariant","defaultDate","selectedDate","_enableApply","_resetValues","formatInvariant","toDefault","$displayTitleControl","displayTitle","minDateObj","maxDateObj","$applyControl","_setFilterToDisplayName","_getTextControl","textValue","isDefaultFilter","_bindDefaultFilter","filtersText","defaultValues","applied","displayText","_buildContextMenuItems","div","$container","stopImmediatePropagation","cont","valueToLocalize","formatBoolean","async"],"mappings":"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","sourcesContent":["if(!$.bizagi){\r\n\t$.bizagi = {ui:{}};\r\n}\r\n\r\n$.bizagi.ui = {\r\n\tcontrols:{\r\n\t\t\tuitable:{\r\n\t\t\t\tnamespace : 'bizagi.ui.controls.uitable',\r\n\t\t\t\tavailableComponents:['uicombo','uiradio', 'uicheckbox'],\r\n\t\t\t\tcss:'biz-ui-controls-table',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.table.template',\r\n\t\t\t\ttmpl2: 'bizagi.ui.controls.table.tr.template',\r\n\t\t\t\ttmpl3: 'bizagi.ui.controls.table.list.template'\r\n\t\t\t},\r\n\t\t\tuicombo:{\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uicombo',\r\n\t\t\t\tcss: 'biz-ui-controls-combo',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.combo.template',\r\n\t\t\t\ttmpl2: 'bizagi.ui.controls.combo.list.template'\r\n\t\t\t},\r\n\t\t\tuicheckbox:{\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uicheckbox',\r\n\t\t\t\tcss: 'biz-ui-controls-checkbox',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.checkbox.template'\r\n\t\t\t},\r\n\t\t\tuiradio:{\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uiradio',\r\n\t\t\t\tcss: 'biz-ui-controls-radio',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.radio.template'\r\n\t\t\t},\r\n\t\t\tuitreeview: {\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uitreeview',\r\n\t\t\t\tcss: 'biz-ui-controls-treeview',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.treeview.template'\r\n\t\t\t},\r\n\t\t\tuimultiselect: {\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.multiselect',\r\n\t\t\t\tcss: 'biz-ui-controls-multiselect',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.multiselect.template'\r\n\t\t\t}\r\n\t\t}\r\n};","/*\r\n *   Name: BizAgi Workportal\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will process a workportal page using a device factory to use the adequate rendering\r\n *       to create the layout\r\n */\r\n\r\n// Define BizAgi Workportal namespace\r\nbizagi.workportal = bizagi.workportal || {};\r\n\r\n// Define global variables\r\nif (!bizagi.workportal.currentInboxView)\r\n    bizagi.workportal.currentInboxView = \"inbox\";\r\n\r\n// Define state variables\r\nbizagi.workportal.state = bizagi.workportal.state || {};\r\n\r\n\r\n/*\r\n *   Renders the workportal\r\n */\r\n$.Class.extend(\"bizagi.workportal.facade\", {}, {\r\n\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function (params) {\r\n\r\n        // Defines a device factory for all rendering\r\n        this.deviceFactory = new bizagi.workportal.device.factory(this);\r\n\r\n        // Creates a data service instance\r\n        this.dataService = new bizagi.workportal.services.service(params);\r\n\r\n        // Create instance of routing service\r\n        this.dataService.routing = new bizagi.workportal.services.routing({dataService: this.dataService});\r\n\r\n        // Set default params\r\n        this.defaultParams = params || {};\r\n\r\n        // Set default params\r\n        this.timeoutID;\r\n\r\n    },\r\n\r\n    /*\r\n     *   Loads the default widget when executing the workportal\r\n     */\r\n    loadDefaultWidget: function () {\r\n        if (!this.defaultWidget && !bizagi.util.isEmpty(window.location.hash)) {\r\n            // Check in the hash\r\n            var hashParams = bizagi.util.getHashParams();\r\n            if (hashParams[0] != \"/\")\r\n                this.defaultWidget = hashParams[0];\r\n        }\r\n        if (!this.defaultWidget && !bizagi.util.isEmpty(window.location.search)) {\r\n            // Check in the query string\r\n            var queryString = bizagi.util.getQueryString();\r\n            if ((queryString[\"widget\"] === \"activityform\" || this.defaultParams.widget === \"activityform\")\r\n                && !bizagi.util.isMobileDevice()) {\r\n                this.defaultWidget = \"projectDashboard\";\r\n                this.defaultParams.caseLink = true;\r\n            } else {\r\n                this.defaultWidget = queryString[\"widget\"];\r\n            }\r\n        }\r\n        if (!this.defaultWidget && !bizagi.util.isEmpty(this.defaultParams.widget)) {\r\n            // Check in the default params\r\n            this.defaultWidget = this.defaultParams.widget;\r\n        }\r\n        if (!this.defaultWidget && typeof (BIZAGI_DEFAULT_WIDGET) != \"undefined\"\r\n            && !bizagi.util.isEmpty(BIZAGI_DEFAULT_WIDGET)) {\r\n            // Check with overriding variable in html\r\n            this.defaultWidget = BIZAGI_DEFAULT_WIDGET;\r\n        }\r\n        if (!this.defaultWidget && bizagi.cookie(\"bizagiDefaultWidget\")) {\r\n            // Check with cookie\r\n            this.defaultWidget = bizagi.cookie(\"bizagiDefaultWidget\");\r\n        }\r\n        if (!this.defaultWidget) {\r\n            // Set a default widget based on the current device\r\n            this.defaultWidget = (bizagi.util.detectDevice() == \"smartphone_ios\"\r\n            || bizagi.util.detectDevice() == \"smartphone_android\")\r\n                ? bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX\r\n                : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n        }\r\n\r\n        // Save in cookie for next executions\r\n        if (this.defaultWidget !== \"projectDashboard\" && this.defaultWidget !== \"homeportal\") {\r\n            bizagi.cookie(\"bizagiDefaultWidget\", this.defaultWidget, {expires: 30});\r\n        }\r\n\r\n        if (this.defaultWidget === \"homeportal\") {\r\n            bizagi.cookie(\"bizagiDefaultWidget\", bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,\r\n                {expires: 30});\r\n        }\r\n\r\n        if ((this.dataService && !this.dataService.online) && bizagi.util.isTabletDevice()) {\r\n            bizagi.cookie(\"bizagiDefaultWidget\", bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\r\n                {expires: 30});\r\n        }\r\n    },\r\n\r\n    /*\r\n     *   Start point method to use in the main javascript pages\r\n     *   This method will process everything and attach the html directly to the dom\r\n     */\r\n    execute: function (canvas) {\r\n        var self = this;\r\n        var doc = this.ownerDocument;\r\n        var body = $(\"body\", doc);\r\n        canvas = canvas || $(\"<div/>\").appendTo(body);\r\n\r\n        // Loads the default Widget\r\n        self.loadDefaultWidget();\r\n\r\n\r\n        // Creates ready deferred\r\n        self.executionDeferred = new $.Deferred();\r\n        return self.process().done(function (content) {\r\n\r\n            // Replace canvas with content\r\n            bizagi.util.replaceSelector(body, canvas, content);\r\n            self.executionDeferred.resolve();            \r\n        });\r\n    },\r\n\r\n    /*\r\n     *   Creates a webpart inside a canvas but don't execute it\r\n     */\r\n    createWebpart: function (params) {\r\n        return this.executeWebpart($.extend(params, {\r\n            creating: true\r\n        }));\r\n    },\r\n    /*\r\n     * Verifies that the webpart configuration parameters are ok, before processing the webpart\r\n     */\r\n    testWebpartConfiguration: function (params) {\r\n\r\n        var self = this;\r\n        var webpartConfiguration = params.webpartConfiguration;\r\n        var doc = this.ownerDocument;\r\n        var body = $(\"body\", doc);\r\n        var canvas = params.canvas || $(\"<div/>\").appendTo(body);\r\n        if (!webpartConfiguration.url || webpartConfiguration.url == \"\") {\r\n            bizagi.webparts.addConfigurationMessage(params, \"bizagi-sharepoint-configuration-error\");\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    /*\r\n     *   Executes a webpart inside a canvas\r\n     */\r\n    executeWebpart: function (params) {\r\n        var self = this;\r\n        var doc = this.ownerDocument;\r\n        var body = $(\"body\", doc);\r\n\r\n        // Creates ready deferred\r\n        var canvas = params.canvas || $(\"<div/>\").appendTo(body);\r\n        var processWebpart = true;\r\n        if (params.webpartConfiguration) {\r\n            processWebpart = self.testWebpartConfiguration(params);\r\n        }\r\n        if (processWebpart) {\r\n            // Process the webpart asynchonous\r\n            return self.processWebpart(params).done(function (result) {\r\n\r\n                // Append content to canvas\r\n                canvas.append(result.content);\r\n            });\r\n        }\r\n    },\r\n\r\n\r\n    /*\r\n     *   Returns the execution deferred to determine if the component is ready or not\r\n     */\r\n    ready: function () {\r\n\r\n        return this.executionDeferred.promise();\r\n    },\r\n\r\n    /*\r\n     *   Loads a workportal facade to delegate rendering based on device detection\r\n     *   Returns a deferred to set callbacks when the process is done\r\n     */\r\n    process: function () {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        // Create a workportal facade\r\n        var facade = this.deviceFactory.getWorkportalFacade(self.dataService);\r\n        //process offline data\r\n        self.processOfflineData();\r\n\r\n        // Set callback when requests have been done\r\n        $.when(facade)\r\n            .pipe(function (workportalFacade) {\r\n                // Creates workportal component\r\n                return self.processWorkportal(workportalFacade);\r\n\r\n            }).done(function (content) {\r\n            // Resolve deferred\r\n            defer.resolve(content);\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    processOfflineData: function () {\r\n        var self = this;\r\n\r\n        if (typeof self.dataService.fetchOfflineData != \"undefined\" && self.dataService.online == true) {\r\n            $.when(self.dataService.pushOfflineData()).always(function () {\r\n                self.dataService.fetchOfflineData();\r\n            });\r\n        }\r\n\r\n    },\r\n\r\n    /*\r\n     *   Process a webpart\r\n     */\r\n    processWebpart: function (params) {\r\n        var self = this;\r\n        var facade;\r\n        var defer = new $.Deferred();\r\n        var webpartController;\r\n        var realDevice = bizagi.detectRealDevice();\r\n\r\n     \r\n            facade = this.deviceFactory.getWorkportalFacade(self.dataService, false);\r\n\r\n        // Combine workportal params with call params\r\n        $.extend(params, this.defaultParams);\r\n\r\n        // Set callback when requests have been done\r\n        $.when(facade)\r\n            .pipe(function (workportalFacade) {\r\n\r\n                var deferTemplates = new $.Deferred();\r\n\r\n                // Load webpart templates\r\n                $.when(workportalFacade.loadWebpart(params))\r\n                    .done(function () {\r\n                        deferTemplates.resolve(workportalFacade);\r\n                    });\r\n\r\n                return deferTemplates.promise();\r\n            })\r\n            .pipe(function (workportalFacade) {\r\n                webpartController = workportalFacade.getWebpart(params.webpart, params);\r\n\r\n                // Render the full content\r\n                return webpartController.render(params);\r\n            }).done(function (content) {\r\n\r\n            // Resolve deferred \r\n            defer.resolve({webpart: webpartController, content: content});\r\n      \r\n        });\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Process the workportal layout\r\n     */\r\n    processWorkportal: function (workportalFacade) {\r\n        var self = this;\r\n        var controller = this.mainController = workportalFacade.getMainController();\r\n        var defer = new $.Deferred();\r\n        // Render the full content\r\n        return controller.render().then(function (result) {\r\n            $.when(controller.menu.isRendered()).then(function () {\r\n                var widgetNameToLoad = self.getWidgetByDataUser(self.defaultParams);\r\n                if (widgetNameToLoad === \"projectDashboard\" && self.defaultParams.caseLink) {\r\n                    var actionObject = {\r\n                        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                        idCase: bizagi.util.getQueryString().idCase,\r\n                        guid: bizagi.util.getQueryString().guid,\r\n                        caseLink: true\r\n                    };\r\n                    if (typeof (bizagi.util.getQueryString().idWorkitem) != \"undefined\") actionObject.idWorkItem = bizagi.util.getQueryString().idWorkitem;\r\n                    controller.publish(\"executeAction\", actionObject);\r\n                }\r\n                else {\r\n                    controller.setWidget($.extend(self.defaultParams, {\r\n                        widgetName: widgetNameToLoad\r\n                    }, bizagi.util.getQueryString()));\r\n                }\r\n\r\n                // Perform resize\r\n                if (controller.menu) {\r\n                    controller.menu.performResizeLayout();\r\n                    if (widgetNameToLoad === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX ||\r\n                        widgetNameToLoad === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID) {\r\n                        self.mainController.publish(\"showMainMenu\");\r\n                    }\r\n                }\r\n            });\r\n            return result;\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Get widget to load\r\n     * @returns {bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID|*}\r\n     */\r\n    getWidgetByDataUser: function () {\r\n        var self = this;\r\n        var widget = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n        var bizagiDefaultWidget = self.defaultWidget !== \"projectDashboard\" ? bizagi.cookie(\"bizagiDefaultWidget\") : \"projectDashboard\";\r\n\r\n        var propertyLandingPage = \"\";\r\n        var userDisplayOptions = JSON.parse(bizagi.cookie(\"bizagiUserDisplayOptions\"));\r\n        if(userDisplayOptions && userDisplayOptions.startPage){\r\n            propertyLandingPage = {key: \"userstartpage\", value: userDisplayOptions.startPage};\r\n        }else if (bizagi.currentUser.sUserProperties) {\r\n            for (var i = 0, j = bizagi.currentUser.sUserProperties.length; i < j; i++) {\r\n                if (bizagi.currentUser.sUserProperties[i].key === \"userstartpage\") {\r\n                    propertyLandingPage = bizagi.currentUser.sUserProperties[i];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        if (bizagiDefaultWidget != bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX && bizagiDefaultWidget != bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID && bizagiDefaultWidget != bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL) {\r\n            widget = bizagiDefaultWidget;\r\n        }\r\n        else {\r\n            /*\r\n             Values userstartpage property\r\n             1. “” -> El usuario no ha configurado esta opción(usuario viejo).\r\n             2. “1” -> Automatic\r\n             3. “2” -> Me\r\n             4. “3” -> Inbox\r\n             */\r\n            if (typeof propertyLandingPage === \"undefined\" || propertyLandingPage === \"\" || propertyLandingPage.value === \"\" || propertyLandingPage.value === \"1\") {\r\n                widget = self.getWidgetByCookieAndStakeholders();\r\n            }\r\n            else if (propertyLandingPage.value === \"2\" && self.currentUserHaveStakeholderAssociated()) {\r\n                widget = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\r\n            }\r\n            else if (propertyLandingPage.value === \"2\" && !self.currentUserHaveStakeholderAssociated()) {\r\n                widget = self.getWidgetByCookie(true);\r\n            }\r\n            else if (propertyLandingPage.value === \"3\") {\r\n                widget = self.getWidgetByCookie(true);\r\n            }\r\n        }\r\n        return widget;\r\n    },\r\n\r\n    /**\r\n     * Get widget considering stakeholders\r\n     * @returns {*}\r\n     */\r\n    getWidgetByCookieAndStakeholders: function () {\r\n        var self = this;\r\n        return self.getWidgetByCookie(false);\r\n    },\r\n\r\n    /**\r\n     * Validate if current user have stakeholder associated\r\n     * @returns {bizagi.currentUser.associatedStakeholders|*|boolean}\r\n     */\r\n    currentUserHaveStakeholderAssociated: function () {\r\n        return (bizagi.currentUser.associatedStakeholders && bizagi.currentUser.associatedStakeholders.length > 0);\r\n    },\r\n\r\n    /**\r\n     * Get widget by cookie\r\n     * @param forceInboxOrGrid\r\n     * @returns {*}\r\n     */\r\n    getWidgetByCookie: function (forceInboxOrGrid) {\r\n        var self = this;\r\n        var bizagiDefaultWidget = bizagi.cookie(\"bizagiDefaultWidget\");\r\n        var response;\r\n        if (forceInboxOrGrid) {\r\n            if (bizagiDefaultWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX ||\r\n                bizagiDefaultWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID) {\r\n\r\n                response = bizagiDefaultWidget;\r\n\r\n            } else {\r\n                response = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n            }\r\n        }\r\n        else {\r\n            if (self.currentUserHaveStakeholderAssociated()) {\r\n                response = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\r\n            }\r\n            else {\r\n                if (bizagiDefaultWidget &&\r\n                    bizagiDefaultWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX ||\r\n                    bizagiDefaultWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID) {\r\n                    response = bizagiDefaultWidget;\r\n                }\r\n                else {\r\n                    response = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n                }\r\n            }\r\n        }\r\n        return response;\r\n    },\r\n\r\n    /**\r\n     * Returns the main controller\r\n     */\r\n    getMainController: function () {\r\n        return this.mainController;\r\n    },\r\n\r\n\r\n    \r\n});\r\n","/*\r\n*   Name: BizAgi Workportal Main Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle workportal layouts for any device\r\n*/\r\n\r\n$.Class.extend(\"bizagi.workportal.controllers.controller\", {}, {\r\n\r\n    /**\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService) {\r\n        // Set workportal facade\r\n        this.workportalFacade = workportalFacade;\r\n\r\n        // Set data service\r\n        this.dataService = dataService;\r\n\r\n        // Set l10n service\r\n        this.resources = bizagi.localization;\r\n\r\n        // Set a component container hash to use with templates\r\n        this.componentContainers = {};\r\n\r\n        // Define an object to hold the subscribe collection\r\n        this.subscribers = [];\r\n\r\n        // Flag to check if the element is disposed\r\n        this.disposed = false;\r\n\r\n        // Define an object to hold the templates used in the widget\r\n        this.tmpl = {};\r\n\r\n        //Define deferred to know if the templates were loaded\r\n        this.templatesDeferred = null;\r\n    },\r\n\r\n    /*\r\n    *   Returns the current workportal\r\n    */\r\n    getWorkportal: function () {\r\n        return this.workportalFacade.workportal;\r\n    },\r\n\r\n    /**\r\n    *   Publish an event so any controller can subscribe to it\r\n    */\r\n    publish: function (eventName, params) {\r\n        if (this.disposed) return null;\r\n        return $(document).triggerHandler(eventName, params);\r\n    },\r\n\r\n    /**\r\n    *   Subscribe to an event that any controller could trigger\r\n    */\r\n    subscribe: function (eventName, callback) {\r\n        if (this.disposed) return null;\r\n        $(document).bind(eventName, callback);\r\n        this.subscribers.push({ event: eventName });\r\n    },\r\n\r\n    /**\r\n    *   Subscribe to one time event that any controller could trigger\r\n    */\r\n    subscribeOneTime: function (eventName, callback) {\r\n        if (this.disposed) return null;\r\n        $(document).one(eventName, callback);\r\n        this.subscribers.push({ event: eventName });\r\n    },\r\n\r\n    /**\r\n    *   Un Subscribe to an event that any controller could trigger in this document\r\n    */\r\n    unsubscribe: function (eventName, callback) {\r\n        if (this.disposed) return null;\r\n        if (callback) {\r\n            $(document).unbind(eventName, callback);\r\n        }\r\n        else { $(document).unbind(eventName); }\r\n    },\r\n\r\n    /**\r\n    *   Makes the base processing of the layout (mix templates + data)\r\n    *   after all that processing will call a post-render method to\r\n    *   be implemented in each device to apply custom plugins\r\n    *   Returns a promise because the rendering could be asynchronous\r\n    */\r\n    render: function () {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n        self.renderingDeferred = new $.Deferred();\r\n\r\n        // Render content\r\n        $.when(self.areTemplatedLoaded())\r\n        .pipe(function () {\r\n            return self.renderContent();\r\n        })\r\n        .done(function () {\r\n\r\n            // Call post-render method\r\n            self.postRender();\r\n\r\n            // Resolve deferred\r\n            defer.resolve(self.getContent());\r\n            self.renderingDeferred.resolve();\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Returs the rendered content\r\n    */\r\n    getContent: function () {\r\n        return this.content;\r\n    },\r\n\r\n    /*\r\n    *   Returns the mapped resource\r\n    */\r\n    getResource: function (key) {\r\n        return this.resources.getResource(key);\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *\r\n    */\r\n    renderContent: function () {\r\n        // Override on implementations\r\n        return \"\";\r\n    },\r\n\r\n\r\n    /*\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n    postRender: function () { },\r\n\r\n    /*\r\n    *   Returns the component replaced tag selector\r\n    */\r\n    getComponentSelector: function (component) {\r\n        return \"[data-bizagi-component=\" + component + \"]\";\r\n    },\r\n\r\n    /*\r\n    *   Returns the component replaced tag selector\r\n    */\r\n    getComponentContainer: function (component) {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        if (!content || content.length == 0) return null;\r\n\r\n        // Find component parent and cache it\r\n        //var componentElement = self.componentContainers[component];\r\n        //if (componentElement == null) {\r\n            // Find the component inside the main content\r\n            //componentElement = $(self.getComponentSelector(component), content);\r\n\r\n            // If still not found, try to check if content element is the component\r\n          //  if (componentElement.length == 0 && content.is(self.getComponentSelector(component))) {\r\n          //      componentElement = content;\r\n          //  }\r\n\r\n            // Cache the component\r\n           // self.componentContainers[component] = componentElement;\r\n        //}\r\n        //return self.componentContainers[component];\r\n        return $(self.getComponentSelector(component), content);\r\n    },\r\n\r\n    /*\r\n    *   Asks for a full resize\r\n    */\r\n    resizeLayout: function () {\r\n        this.publish(\"resizeLayout\");\r\n    },\r\n\r\n    /*\r\n    * Do stuff when a resize has been triggered\r\n    */\r\n    performResizeLayout: function () { },\r\n\r\n    /*\r\n    *   Disposes the widget\r\n    */\r\n    dispose: function () {\r\n        var self = this;\r\n        \r\n        if (self.subscribers != null) {\r\n            // Remove all subcriptions\r\n            $.each(self.subscribers, function (i, item) {\r\n                self.unsubscribe(item.event);\r\n            });\r\n        }\r\n        \r\n        setTimeout(function () {\r\n            bizagi.util.dispose(self);\r\n            self.disposed = true;\r\n        }, bizagi.override.disposeTime || 50);\r\n    },\r\n\r\n\r\n    /*\r\n    * Loads dinamically a set of templates\r\n    */\r\n    loadTemplates: function (templates) {\r\n        var self = this,\r\n            def = self.templatesDeferred = new $.Deferred(),\r\n            tmplPromises = [];\r\n\r\n        var useNewEngine = (templates.useNewEngine != undefined) ?  templates.useNewEngine : true;\r\n\r\n        for (var name in templates) {\r\n            if (name != \"useNewEngine\") {\r\n                tmplPromises.push(\r\n                    self.loadTemplate({\r\n                        \"name\" : name,\r\n                        \"path\" : templates[name],\r\n                        \"useNewEngine\" :useNewEngine\r\n                   })\r\n                );\r\n            }\r\n        }\r\n\r\n        $.when.apply($, tmplPromises)\r\n            .done(function () {\r\n                def.resolve();\r\n            });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n\r\n    /*\r\n    * Loads template \r\n    */\r\n    loadTemplate: function (data) {\r\n        var self = this;\r\n\r\n        if (self.tmpl[data.name]) {\r\n            return self.tmpl[data.name];\r\n        } else {\r\n            if (data.useNewEngine){\r\n                return bizagi.templateService.getTemplateWidget(data.path)\r\n                    .done(function (tmpl) {\r\n                        self.tmpl[data.name] = tmpl;\r\n                    });\r\n            }\r\n\r\n            return bizagi.templateService.getTemplate(data.path)\r\n                .done(function (tmpl) {\r\n                    self.tmpl[data.name] = tmpl;\r\n                });\r\n\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Gets template \r\n    */\r\n    getTemplate: function (name) {\r\n        if (this.tmpl.hasOwnProperty(name)) {\r\n            return this.tmpl[name];\r\n        }\r\n        return null;\r\n\r\n    },\r\n\r\n    /*\r\n    * Returns a promise, it is resoved when the widget is rendered\r\n    */\r\n    isRendered: function () {\r\n        var self = this;\r\n\r\n        if (!self.renderingDeferred) {\r\n            return false;\r\n        }\r\n        return self.renderingDeferred.promise();\r\n    },\r\n\r\n    /*\r\n    *\r\n    */\r\n    areTemplatedLoaded: function () {\r\n        return this.templatesDeferred;\r\n    }\r\n\r\n});\r\n","\r\n/*\r\n*   Name: BizAgi Workportal Widget Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to all widgets\r\n*/\r\n\r\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.widgets.widget\", {\r\n    BIZAGI_WORKPORTAL_WIDGET_INTEGRATION: \"widgetIntegration\",\r\n    BIZAGI_WORKPORTAL_WIDGET_WEBPART: \"webpart\",\r\n    BIZAGI_WORKPORTAL_WIDGET_INBOX: \"inbox\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH: \"advanceSearch\",\r\n    BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL: \"homeportal\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ACTIVITY: \"project.activity\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD: \"projectDashboard\",\r\n    BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID: \"inboxGrid\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ROUTING: \"routing\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SEARCH: \"search\",\r\n    BIZAGI_WORKPORTAL_WIDGET_RENDER: \"activityform\",\r\n    BIZAGI_WORKPORTAL_WIDGET_START_FORM: \"startForm\",\r\n    BIZAGI_WORKPORTAL_WIDGET_RENDERFORM: \"renderform\",\r\n    BIZAGI_WORKPORTAL_WIDGET_NEWCASE: \"newCase\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES: \"queries\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION: \"queriesDefinition\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT: \"queriesShortcut\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERYFORM: \"queryform\",\r\n    BIZAGI_WORKPORTAL_WIDGET_LISTCASES: \"listCases\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ASYNC: \"async\",\r\n    BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME: \"genericiframe\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SUBMENU: \"subMenu\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PRINT: \"print\",\r\n    BIZAGI_WORKPORTAL_WIDGET_FONTSIZE: \"fontsize\",\r\n    BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION: \"oldrenderintegration\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PAGE: \"page\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ENTITIES: \"entities\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REPORTS: \"reports\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU: \"reportsMenu\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART: \"reportsChart\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS: \"smartfolders\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES: \"adminReassignCases\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE: \"reassignCase\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD: \"asyncECMUpload\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE: \"processTree\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE: \"entitiesTree\",\r\n    BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE: \"usersTable\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG: \"activityLog\",\r\n    BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG: \"authenticationLog\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES: \"entityAdmin\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS: \"encryptPasswords\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS: \"userPendingRequests\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH: \"adminCaseSearch\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES: \"asyncActivities\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER: \"defaultsAssignUser\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS: \"transferCaseSecurityPermissions\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES: \"userProfiles\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS: \"adminAlarms\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES: \"userlicenses\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS: \"dimensions\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES: \"documentTemplates\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES: \"processes\",\r\n    BIZAGI_WORKPORTAL_WIDGET_START_PROCESS: \"startProcess\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES: \"businessPolicies\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE: \"languageAdmin\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE: \"businessPoliciesDecisionTable\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS: \"businessPoliciesPolitics\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES: \"businessPoliciesRules\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS: \"businessPoliciesTabs\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES: \"businessPoliciesVocabularies\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES: \"adminPreferences\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS: \"adminDisplayOptions\",\r\n    BIZAGI_WORKPORTAL_WIDGET_TREE: \"tree\",\r\n    BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY: \"graphicquery\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW: \"processModeler\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION: \"adminUsers\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION: \"usersDelegation\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER: \"usersDelegationSearchUser\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS: \"adminStakeholders\",\r\n    BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS: \"events\",\r\n    BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE: \"release\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER: \"processDiagramHelper\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP: \"activityMapTooltip\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY: \"usersummary\",\r\n    BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST: \"mySearchList\",\r\n    BIZAGI_WORKPORTAL_WIDGET_LOADFORM: \"loadForm\",\r\n    BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE: \"templates\",\r\n    BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV: \"dialognav\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS: \"holidays\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME: \"projectName\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS: \"oauth2Applications\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES: \"adhocProcesses\",\r\n    BIZAGI_WORKPORTAL_WIDGET_TIMELINE: \"timeline\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER: \"adhocProcessModeler\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES: \"adhocEntities\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS: \"adhocUserGroups\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS: \"adhocCreateProcess\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP: \"adhocBooleanExp\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS: \"adhocCreateProcess\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUP_REPORT: \"adhocUserGroupReport\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROFLY: \"adhocprofly\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT: \"sessionTimeOut\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED: \"sessionTimeOutExpired\",\r\n    BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY: \"userPrivacy\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED: \"accessDenied\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES: \"adminBusinessPolices\",\r\n    BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL: \"usersModal\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT: \"queriesManagement\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT: \"userPermissionReport\"\r\n}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n        // Call base\r\n        this._super(workportalFacade, dataService);\r\n\r\n        // Set params\r\n        this.params = params;\r\n        if (params && params.menu) {\r\n            this.menu = params.menu;\r\n        }\r\n\r\n        this.observableElement = $({});\r\n\r\n        this.widgetReadyDeferred = new $.Deferred();\r\n\r\n        this.isBlocked = false;\r\n    },\r\n\r\n    /*\r\n    *   Publish an event so any controller can subscribe to it\r\n    */\r\n    publish: function (eventName, params) {\r\n        if (this.disposed) return null;\r\n        // Overrides base method to add referrer\r\n        $(document).triggerHandler(eventName, $.extend(params, {\r\n            referrer: this.getWidgetName()\r\n        }));\r\n    },\r\n\r\n\r\n    /*\r\n    *   Change the current widget\r\n    */\r\n    changeWidget: function (widgetName, params) {\r\n        var self = this;\r\n        params = params || {};\r\n        var widgetParams = $.extend(params, {\r\n            widgetName: widgetName\r\n        });\r\n        self.publish(\"changeWidget\", widgetParams);\r\n    },\r\n\r\n    /*\r\n    *   Executes a workportal action\r\n    */\r\n    executeAction: function (actionName, params) {\r\n        var self = this;\r\n        params = params || {};\r\n        var actionParams = $.extend(params, {\r\n            action: actionName\r\n        });\r\n        self.publish(\"executeAction\", actionParams);\r\n    },\r\n\r\n    /*\r\n    * Show graphic query\r\n    */\r\n    showGraphicQuery: function (data) {\r\n        var self = this;\r\n        /*This method is used for validate if the request is referd to process on the fly */\r\n        var processOnTheFly = data.isAdhoc;\r\n        if(processOnTheFly === true){\r\n            bizagi.loader.start(\"processmodelerview\").then(function () {\r\n                self.publish(\"showDialogWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW,\r\n                    data: data,\r\n                    modalParameters: {\r\n                        title: \"Process viewer\",\r\n                        refreshInbox: false\r\n                    },\r\n                    maximizeOnly: true,\r\n                    onClose: function () {\r\n                        bizagi.workportal.desktop.dialogStack.pop();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else{\r\n            bizagi.loader.start(\"processviewer\").then(function () {\r\n                self.publish(\"showDialogWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY,\r\n                    data: data,\r\n                    modalParameters: {\r\n                        title: self.getResource(\"render-graphic-query\"),\r\n                        refreshInbox: false\r\n                    },\r\n                    maximizeOnly: true,\r\n                    onClose: function () {\r\n                        bizagi.workportal.desktop.dialogStack.pop();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    },\r\n\r\n    isProcessOnTheFlyCase: function () {\r\n        return true;\r\n    },\r\n\r\n    showTimeLine: function (data) {\r\n        var self = this;\r\n        bizagi.loader.startAndThen(\"timeline\").then(function () {\r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TIMELINE,\r\n                data: data,\r\n                modalParameters: {\r\n                    title: self.getResource(\"workportal-project-casedashboard-timeline\"),\r\n                    refreshInbox: false\r\n                },\r\n                maximizeOnly: true,\r\n                onClose: function () {\r\n                    bizagi.workportal.desktop.dialogStack.pop();\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    routingExecute: function (element) {\r\n        // Executes routing action\r\n        if (element == undefined) {\r\n            return false;\r\n        }\r\n\r\n        var self = this;\r\n\r\n        var idCase = element.find(\"#idCase\").val() || self.params.idCase;\r\n        var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\r\n        var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\r\n        var idTask = element.find(\"#idTask\").val();\r\n        var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\r\n\r\n        self.publish(\"executeAction\", {\r\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n            idCase: idCase,\r\n            idWorkflow: idWorkflow,\r\n            idWorkItem: idWorkItem,\r\n            idTask: idTask,\r\n            eventAsTasks: eventAsTasks\r\n        });\r\n\r\n        return true;\r\n    },\r\n\r\n\r\n    /*\r\n    * Gets the name of widget, Override on implementations\r\n     */\r\n    getWidgetName: function(){\r\n        return this.Class.fullName;\r\n    },\r\n\r\n\r\n    /*\r\n    *\r\n    */\r\n    sub: function (event) {\r\n        // Gets events registered\r\n        //var events = $._data(this.observableElement[0], \"events\");\r\n        // If the events exist, ignore it\r\n        //if (!events || !events[event]) {\r\n        this.observableElement.off.apply(this.observableElement, arguments);\r\n        this.observableElement.on.apply(this.observableElement, arguments);\r\n        //}\r\n    },\r\n\r\n    /*\r\n    *\r\n    */\r\n    unsub: function () {\r\n        this.observableElement.off.apply(this.observableElement, arguments);\r\n    },\r\n\r\n    /*\r\n    *\r\n    */\r\n    pub: function () {\r\n        return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\r\n    },\r\n\r\n    /**\r\n     * This method must be used when i need to wait to all observers has been resolved\r\n     */\r\n    pubDeadLockDetection: function () {\r\n        var def = new $.Deferred();\r\n        if (!self.isBlocked) {\r\n            self.isBlocked = true;\r\n            var pubDef = this.pub.apply(this, arguments);\r\n            var queueDef = Array.isArray(pubDef) ? pubDef : [pubDef];\r\n            $.when.apply($, queueDef).done(function (data) {\r\n                self.isBlocked = false;\r\n                def.resolve();\r\n            });\r\n        } else {\r\n            def.reject()\r\n        }\r\n        return def.promise();\r\n    },\r\n\r\n    /*\r\n    * Clean the widget, removing events asociated with it.\r\n    */\r\n    clean: function(){\r\n        var self = this;\r\n\r\n        //remove events\r\n        if (this.observableElement) {\r\n            var events = $._data(this.observableElement[0], \"events\");\r\n\r\n            if (events) {\r\n                for (var event in events) {\r\n                    if (event != \"notify\" &&\r\n                         event != 'showDialogWidget' &&\r\n                         event != 'showNotification') {\r\n                        self.unsub(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    isReady: function(){\r\n        return this.widgetReadyDeferred.promise();\r\n    },\r\n\r\n    setWidgetReady: function(){\r\n        this.widgetReadyDeferred.resolve();\r\n    }\r\n\r\n});\r\n","/***\r\n@title:\r\nImage Zoom\r\n\r\n@version:\r\n2.0\r\n\r\n@author:\r\nAndreas Lagerkvist\r\n\r\n@date:\r\n2008-08-31\r\n\r\n@url:\r\nhttp://andreaslagerkvist.com/jquery/image-zoom/\r\n\r\n@license:\r\nhttp://creativecommons.org/licenses/by/3.0/\r\n\r\n@copyright:\r\n2008 Andreas Lagerkvist (andreaslagerkvist.com)\r\n\r\n@requires:\r\njquery, jquery.imageZoom.css, jquery.imageZoom.png\r\n\r\n@does:\r\nThis plug-in makes links pointing to images open in the \"Image Zoom\". Clicking a link will zoom out the clicked image to its target-image. Click anywhere on the image or the close-button to zoom the image back in. Only ~3k minified.\r\n\r\n@howto:\r\njQuery(document.body).imageZoom(); Would make every link pointing to an image in the document open in the zoom.\r\n\r\n@exampleHTML:\r\n<ul>\r\n\t<li><a href=\"http://exscale.se/__files/3d/bloodcells.jpg\">Bloodcells</a></li>\r\n\t<li><a href=\"http://exscale.se/__files/3d/x-wing.jpg\">X-Wing</a></li>\r\n\t<li><a href=\"http://exscale.se/__files/3d/weve-moved.jpg\">We've moved</a></li>\r\n</ul>\r\n\r\n<ul>\r\n\t<li><a href=\"http://exscale.se/__files/3d/lamp-and-mates/lamp-and-mates-01.jpg\"><img src=\"http://exscale.se/__files/3d/lamp-and-mates/lamp-and-mates-01_small.jpg\" alt=\"Lamp and Mates\" /></a></li>\r\n\t<li><a href=\"http://exscale.se/__files/3d/stugan-winter.jpg\"><img src=\"http://exscale.se/__files/3d/stugan-winter_small.jpg\" alt=\"The Cottage - Winter time\" /></a></li>\r\n\t<li><a href=\"http://exscale.se/__files/3d/ps2.jpg\"><img src=\"http://exscale.se/__files/3d/ps2_small.jpg\" alt=\"PS2\" /></a></li>\r\n</ul>\r\n\r\n@exampleJS:\r\n// I don't run it because my site already uses imgZoom\r\n// jQuery(document.body).imageZoom();\r\n***/\r\njQuery.fn.imageZoom = function (conf) {\r\n    // Some config. If you set dontFadeIn: 0 and hideClicked: 0 imgzoom will act exactly like fancyzoom\r\n    var config = jQuery.extend({\r\n        speed:\t\t\t200,\t// Animation-speed of zoom\r\n        dontFadeIn:\t\t1,\t\t// 1 = Do not fade in, 0 = Do fade in\r\n        hideClicked:\t1,\t\t// Whether to hide the image that was clicked to bring up the imgzoom\r\n        imageMargin:\t30,\t\t// Margin from image-edge to window-edge if image is larger than screen\r\n        className:\t\t'jquery-image-zoom', \r\n        loading:\t\t'Loading...'\r\n    }, conf);\r\n    config.doubleSpeed = config.speed / 4; // Used for fading in the close-button\r\n\r\n    return this.click(function(e) {\r\n        // Make sure the target-element is a link (or an element inside a link)\r\n        var clickedElement\t= jQuery(e.target); // The element that was actually clicked\r\n        var clickedLink\t\t= clickedElement.is('a') ? clickedElement : clickedElement.parents('a'); // If it's not an a, check if any of its parents is\r\n        clickedLink\t\t= (clickedLink && clickedLink.is('a')) ? clickedLink : false; // If it was an a or child of an a, make sure it points to an image\r\n        \r\n        if(!clickedLink){\r\n            // Check if its image with src\r\n            clickedLink = clickedElement || false;\r\n        }\r\n        var clickedImg\t\t= clickedElement;// || (clickedLink && clickedLink.find('img').length) ? clickedLink.find('img') : false; // See if the clicked link contains and image\r\n\r\n        // Only continue if a link pointing to an image was clicked\r\n        if (clickedLink) {\r\n            // These functions are used when the imaeg starts and stops loading (displays either 'loading..' or fades out the clicked img slightly)\r\n            clickedLink.oldText\t= clickedLink.text();\r\n\r\n            clickedLink.setLoadingImg = function () {\r\n                if (clickedImg) {\r\n                    clickedImg.css({\r\n                        opacity: '0.5'\r\n                    });\r\n                }\r\n                else {\r\n                    clickedLink.text(config.loading);\r\n                }\r\n            };\r\n\r\n            clickedLink.setNotLoadingImg = function () {\r\n                if (clickedImg) {\r\n                    clickedImg.css({\r\n                        opacity: '1'\r\n                    });\r\n                }\r\n                else {\r\n                    clickedLink.text(clickedLink.oldText);\r\n                }\r\n            };\r\n\r\n            // The URI to the image we are going to display\r\n            var displayImgSrc = clickedLink.attr('href') || clickedLink.attr('src');\r\n\r\n            // If an imgzoom wiv this image is already open dont do nathin\r\n            if (jQuery('div.' + config.className + ' img[src=\"' + displayImgSrc + '\"]').length) {\r\n                return false;\r\n            }\r\n\r\n            // This function is run once the displayImgSrc-img has loaded (below)\r\n            var preloadOnload = function (pload) {\r\n                // The clicked-link is faded out during loading, fade it back in\r\n                clickedLink.setNotLoadingImg();\r\n\r\n                // Now set some vars we need\r\n                var dimElement\t\t= clickedImg ? clickedImg : clickedLink; // The element used to retrieve dimensions of imgzoom before zoom (either clicked link or img inside)\r\n                var hideClicked\t\t= clickedImg ? config.hideClicked : 0; // Whether to hide clicked link (set in config but always true for non-image-links)\r\n                var offset\t\t\t= dimElement.offset(); // Offset of clicked link (or image inside)\r\n                var imgzoomBefore\t= { // The dimensions of the imgzoom _before_ it is zoomed out\r\n                    width:\t\tdimElement.outerWidth(), \r\n                    height:\t\tdimElement.outerHeight(), \r\n                    left:\t\toffset.left, \r\n                    top:\t\toffset.top/*, \r\n\t\t\t\t\topacity:\tconfig.dontFadeIn*/\r\n                };\r\n                var imgzoom\t\t\t= jQuery('<div><img src=\"' + displayImgSrc + '\" alt=\"\"/></div>').css('position', 'absolute').appendTo(document.body); // We don't want any class-name or any other contents part from the image when we calculate the new dimensions of the imgzoom\r\n                var imgzoomAfter\t= { // The dimensions of the imgzoom _after_ it is zoomed out\r\n                    width:\t\tpload.width, \r\n                    height:\t\tpload.height/*, \r\n\t\t\t\t\topacity:\t1*/\r\n                };\r\n                var windowDim = {\r\n                    width:\tjQuery(window).width(), \r\n                    height:\tjQuery(window).height()\r\n                };\r\n                // Make sure imgzoom isn't wider than screen\r\n                if (imgzoomAfter.width > (windowDim.width - config.imageMargin * 2)) {\r\n                    var nWidth\t\t\t= windowDim.width - config.imageMargin * 2;\r\n                    imgzoomAfter.height\t= (nWidth / imgzoomAfter.width) * imgzoomAfter.height;\r\n                    imgzoomAfter.width\t= nWidth;\r\n                }\r\n                // Now make sure it isn't taller\r\n                if (imgzoomAfter.height > (windowDim.height - config.imageMargin * 2)) {\r\n                    var nHeight\t\t\t= windowDim.height - config.imageMargin * 2;\r\n                    imgzoomAfter.width\t= (nHeight / imgzoomAfter.height) * imgzoomAfter.width;\r\n                    imgzoomAfter.height\t= nHeight;\r\n                }\r\n                // Center imgzoom\r\n                imgzoomAfter.left\t= (windowDim.width - imgzoomAfter.width) / 2 + jQuery(window).scrollLeft();\r\n                imgzoomAfter.top\t= (windowDim.height - imgzoomAfter.height) / 2 + jQuery(window).scrollTop();\r\n                var closeButton\t\t= jQuery('<a href=\"#\">Close</a>').appendTo(imgzoom).hide(); // The button that closes the imgzoom (we're adding this after the calculation of the dimensions)\r\n\r\n                // Hide the clicked link if set so in config\r\n                if (hideClicked) {\r\n                    clickedLink.css('visibility', 'hidden');\r\n                }\r\n\r\n                // Now animate the imgzoom from its small size to its large size, and then fade in the close-button\r\n                imgzoom.addClass(config.className).css(imgzoomBefore).animate(imgzoomAfter, config.speed, function () {\r\n                    closeButton.fadeIn(config.doubleSpeed);\r\n                });\r\n\r\n                if (typeof(config.zIndex) === \"number\"){\r\n                    $(imgzoom).css(\"z-index\",config.zIndex);\r\n                }\r\n\r\n                // This function closes the imgzoom\r\n                var hideImgzoom = function() {\r\n                    closeButton.fadeOut(config.doubleSpeed, function() {\r\n                        imgzoom.animate(imgzoomBefore, config.speed, function() {                            \r\n                            $(\"body\", window.document).off(\"click\");                           \r\n\r\n                            clickedLink.css('visibility', 'visible');\r\n                            imgzoom.remove();\r\n                        });\r\n                    });\r\n\r\n                    return false;\r\n                };\r\n\r\n                // Close imgzoom when you click the closeButton or the imgzoom                \r\n                imgzoom.click(hideImgzoom);\r\n                closeButton.click(hideImgzoom);\r\n                $(\"body\", window.document).on(\"click\", hideImgzoom);\r\n\r\n            };\r\n\r\n            // Preload image\r\n            var preload = new Image();\r\n\r\n            preload.src = displayImgSrc;\r\n\r\n            if (preload.complete) {\r\n                preloadOnload(preload);\r\n            } else {\r\n                clickedLink.setLoadingImg();\r\n\r\n                preload.onload = function() {\r\n                    preloadOnload(preload);\r\n                };\r\n            }\r\n\r\n            // Finally return false from the click so the browser doesn't actually follow the link...\r\n            return false;\r\n        }\r\n    });\r\n};\r\n\r\n// Close image zooms when user hits esc\r\n$(document).keydown(function (e) {\r\n    if (e.keyCode == 27) {\r\n        $(\"div.jquery-image-zoom a\").click();\r\n    }\r\n});\r\n","/*\r\n* jQuery UI Check @VERSION\r\n* Author: Diego Parra\r\n* Based on http://www.filamentgroup.com/lab/accessible_custom_designed_checkbox_radio_button_inputs_styled_css_jquery/ plugin\r\n* Copyright (c) 2010 (http://www.bizagi.com)\r\n*\r\n* Depends:\r\n*  ui.core.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.check', {\r\n        _create: function () {\r\n            var self = this,\r\n                    element = this.element,\r\n                    options = self.options;\r\n\r\n            // Get the associated label using the input's id\r\n            var label = this.element;\r\n            var input = self.input = $(\"input[type=checkbox]\", label);\r\n\r\n            if (label.attr(\"for\") != input.attr(\"id\")) {\r\n                alert(\"label and input element are not related in label:\" + label.attr(\"id\"));\r\n                return;\r\n            }\r\n\r\n            // Wrap the input + label in a div \r\n            input.detach();\r\n            label.wrap('<div class=\"ui-checkbox\"></div>');\r\n            input.insertBefore(label);\r\n\r\n            // Necessary for browsers that don't support the :hover pseudo class on labels\r\n            label.hover(\r\n\t\t\t        function () {\r\n\t\t\t            $(this).addClass('ui-checkbox-state-hover');\r\n\t\t\t            if (input.is(':checked')) {\r\n\t\t\t                $(this).addClass('ui-checkbox-state-checked');\r\n\t\t\t            }\r\n\t\t\t        },\r\n\t\t\t        function () {\r\n\t\t\t            $(this).removeClass('ui-checkbox-state-hover');\r\n\t\t\t        }\r\n\t\t        );\r\n\r\n            // Bind custom event, trigger it, bind click,focus,blur events\t\t\t\t\t\r\n            input.bind('update', function (ev, args) {\r\n                var triggerChange = args && args.triggerChange !== undefined ? args.triggerChange : true;\r\n\r\n                if (input.is(':checked')) {\r\n                    label.addClass('ui-checkbox-state-checked');\r\n                } else {\r\n                    label.removeClass('ui-checkbox-state-highlight ui-checkbox-state-checked ui-checkbox-state-hover');\r\n                }\r\n\r\n                // Trigger change event\r\n                if (triggerChange) self._trigger(\"change\", window.event, { value: input.is(':checked') });\r\n            })\r\n\t\t    .trigger('update')\r\n\t\t    .click(function () {\r\n\t\t        $(this).trigger('update');\r\n\t\t    })\r\n\t\t    .focus(function () {\r\n\t\t        if (input.is(':checked')) {\r\n\t\t            label.addClass('ui-checkbox-state-highlight');\r\n\t\t        }\r\n\t\t    })\r\n\t\t    .blur(function () {\r\n\t\t        label.removeClass('ui-checkbox-state-highlight');\r\n\t\t    });\r\n        },\r\n\r\n        checkItem: function (triggerChange) {\r\n            var self = this;\r\n            self.input.attr(\"checked\", true);\r\n            self.input.prop(\"checked\", true);\r\n            self.input.trigger('update', { triggerChange: triggerChange });\r\n        },\r\n\r\n        uncheckItem: function (triggerChange) {\r\n            var self = this;\r\n            self.input.attr(\"checked\", false);\r\n            self.input.prop(\"checked\", false);\r\n            self.input.trigger('update', { triggerChange: triggerChange });\r\n        }\r\n    });\r\n\r\n    $.extend($.ui.check, {\r\n        version: \"@VERSION\",\r\n        eventPrefix: \"check\"\r\n    });\r\n\r\n})(jQuery);","/*\r\n* jQuery UI selectmenu\r\n*\r\n* Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)\r\n* Dual licensed under the MIT (MIT-LICENSE.txt)\r\n* and GPL (GPL-LICENSE.txt) licenses.\r\n*\r\n* http://docs.jquery.com/UI\r\n*/\r\n\r\n\r\n\r\n\r\n\r\n(function ($) {\r\n    $.widget(\"ui.selectmenu\", {\r\n        getter: \"value\",\r\n        version: \"1.8\",\r\n        eventPrefix: \"selectmenu\",\r\n        options: {\r\n            transferClasses: true,\r\n            style: 'popup',\r\n            width: null,\r\n            menuWidth: null,\r\n            handleWidth: 26,\r\n            maxHeight: null,\r\n            icons: null,\r\n            format: null\r\n        },\r\n\r\n        _create: function () {\r\n            var self = this, o = this.options;\r\n\r\n            //quick array of button and menu id's\r\n            this.ids = [this.element.attr('id') + '-' + 'button', this.element.attr('id') + '-' + 'menu'];\r\n\r\n            //define safe mouseup for future toggling\r\n            this._safemouseup = true;\r\n\r\n            //create menu button wrapper\r\n            this.newelement = $('<a class=\"' + this.widgetFullName + ' ui-widget ui-state-default ui-corner-all\" id=\"' + this.ids[0] + '\" role=\"button\" href=\"#\" aria-haspopup=\"true\" aria-owns=\"' + this.ids[1] + '\"></a>')\r\n\t\t\t.insertAfter(this.element);\r\n\r\n            //transfer tabindex\r\n            var tabindex = this.element.attr('tabindex');\r\n            if (tabindex) { this.newelement.attr('tabindex', tabindex); }\r\n\r\n            //save reference to select in data for ease in calling methods\r\n            this.newelement.data('selectelement', this.element);\r\n\r\n            //menu icon\r\n            this.selectmenuIcon = $('<span class=\"' + this.widgetFullName + '-icon ui-icon\"></span>')\r\n\t\t\t.prependTo(this.newelement)\r\n\t\t\t.addClass((o.style == \"popup\") ? 'ui-icon-triangle-2-n-s' : 'ui-icon-triangle-1-s');\r\n\r\n\r\n            //make associated form label trigger focus\r\n                \r\n            $('label[for=' + this.element.attr('id') + ']')\r\n\t\t\t.attr('for', this.ids[0])\r\n\t\t\t.bind('click', function () {\r\n\t\t\t    try {\r\n\t\t\t        self.newelement[0].focus();\r\n\t\t\t    } catch (e) { }\r\n\t\t\t    return false;\r\n\t\t\t});\r\n\r\n            //click toggle for menu visibility\r\n            this.newelement\r\n\t\t\t.bind('mousedown', function (event) {\r\n\t\t\t    self._toggle(event);\r\n\t\t\t    //make sure a click won't open/close instantly\r\n\t\t\t    if (o.style == \"popup\") {\r\n\t\t\t        self._safemouseup = false;\r\n\t\t\t        setTimeout(function () { self._safemouseup = true; }, 300);\r\n\t\t\t    }\r\n\t\t\t    return false;\r\n\t\t\t})\r\n\t\t\t.bind('click', function () {\r\n\t\t\t    return false;\r\n\t\t\t})\r\n\t\t\t.keydown(function (event) {\r\n\t\t\t    var ret = true;\r\n\t\t\t      switch (event.keyCode) {\r\n\t\t\t        case $.ui.keyCode.ENTER:\r\n\t\t\t            ret = true;\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.SPACE:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._toggle(event);\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.UP:\r\n\t\t\t        case $.ui.keyCode.LEFT:\r\n\t\t\t            ret = false;\r\n\t\t\t            // Next conditional prevents to close the combo\r\n\t\t\t            if (self.list.is('.ui-selectmenu-open'))  {\r\n\t\t\t                self._moveSelection(-1);\r\n\t\t\t                self.open();\r\n\t\t\t            } else self._moveSelection(-1);\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.DOWN:\r\n\t\t\t        case $.ui.keyCode.RIGHT:\r\n\t\t\t            ret = false;\r\n\t\t\t            // Next conditional prevents to close the combo\r\n\t\t\t            if (self.list.is('.ui-selectmenu-open'))  {\r\n\t\t\t                self._moveSelection(1);\r\n\t\t\t                self.open();\r\n\t\t\t            } else self._moveSelection(1);\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.TAB:\r\n\t\t\t            ret = true;\r\n\t\t\t            break;\r\n\t\t\t        default:\r\n\t\t\t            ret = false;\r\n\t\t\t            //self._typeAhead(event.keyCode, 'mouseup');\r\n\t\t\t            // Mouseup creates a problem on the first selectmenuOpen\r\n\t\t\t             self._typeAhead(event.keyCode, 'focus');\r\n\t\t\t            break;\r\n\t\t\t    }\r\n\t\t\t    return ret;\r\n\t\t\t})\r\n\t\t\t.bind('mouseover focus', function () {\r\n\t\t\t    $(this).addClass(self.widgetFullName + '-focus ui-state-hover');\r\n\t\t\t})\r\n\t\t\t.bind('mouseout blur', function () {\r\n\t\t\t    $(this).removeClass(self.widgetFullName + '-focus ui-state-hover');\r\n\t\t\t});\r\n\r\n            //document click closes menu\r\n            $(document)\r\n\t\t\t.mousedown(function (event) {\r\n\t\t\t    self.close(event);\r\n\t\t\t});\r\n\r\n            //change event on original selectmenu\r\n            this.element\r\n\t\t\t.click(function () { this._refreshValue(); })\r\n            // newelement can be null under unclear circumstances in IE8 \r\n\t\t\t.focus(function () { if (this.newelement) { this.newelement[0].focus(); } });\r\n            \r\n            //create menu portion, append to body\r\n            var cornerClass = (o.style == \"dropdown\") ? \" ui-corner-bottom\" : \" ui-corner-all\"\r\n            this.list = $('<ul class=\"' + self.widgetFullName + '-menu ui-widget ui-widget-content' + cornerClass + '\" aria-hidden=\"true\" role=\"listbox\" aria-labelledby=\"' + this.ids[0] + '\" id=\"' + this.ids[1] + '\"></ul>').appendTo('body');\r\n            //serialize selectmenu element options\t\r\n            var selectOptionData = [];\r\n            this.element\r\n\t\t\t.find('option')\r\n\t\t\t.each(function () {\r\n\t\t\t    selectOptionData.push({\r\n\t\t\t        value: $(this).attr('value'),\r\n\t\t\t        text: self._formatText(jQuery(this).text()),\r\n\t\t\t        selected: $(this).attr('selected'),\r\n\t\t\t        classes: $(this).attr('class'),\r\n\t\t\t        parentOptGroup: $(this).parent('optgroup').attr('label')\r\n\t\t\t    });\r\n\t\t\t});\r\n\r\n            //active state class is only used in popup style\r\n            var activeClass = (self.options.style == \"popup\") ? \" ui-state-active\" : \"\";\r\n\r\n            //write li's\r\n            for (var i = 0; i < selectOptionData.length; i++) {\r\n                var thisLi = $('<li role=\"presentation\"><a href=\"#\" tabindex=\"-1\" role=\"option\" aria-selected=\"false\">' + selectOptionData[i].text + '</a></li>')\r\n\t\t\t\t.data('index', i)\r\n\t\t\t\t.addClass(selectOptionData[i].classes)\r\n\t\t\t\t.data('optionClasses', selectOptionData[i].classes || '')\r\n\t\t\t\t.mouseup(function (event) {\r\n\t\t\t\t    if (self._safemouseup) {\r\n\t\t\t\t        var changed = $(this).data('index') != self._selectedIndex();\r\n\t\t\t\t        self.index($(this).data('index'));\r\n\t\t\t\t        self.select(event);\r\n\t\t\t\t        if (changed) { self.change(event); }\r\n\t\t\t\t        self.close(event, true);\r\n\t\t\t\t    }\r\n\t\t\t\t    return false;\r\n\t\t\t\t})\r\n\t\t\t\t.click(function () {\r\n\t\t\t\t    return false;\r\n\t\t\t\t})\r\n\t\t\t\t.bind('mouseover focus', function () {\r\n\t\t\t\t    self._selectedOptionLi().addClass(activeClass);\r\n\t\t\t\t    self._focusedOptionLi().removeClass(self.widgetFullName + '-item-focus ui-state-hover');\r\n                    $(this).removeClass('ui-state-active').addClass(self.widgetFullName + '-item-focus ui-state-hover');\r\n\t\t\t\t})\r\n\t\t\t\t.bind('mouseout blur', function () {\r\n\t\t\t\t    if ($(this).is(self._selectedOptionLi())) { $(this).addClass(activeClass); }\r\n\t\t\t\t    if (!$.browser.msie) $(this).removeClass(self.widgetFullName + '-item-focus ui-state-hover');\r\n\t\t\t\t});\r\n\r\n                //optgroup or not...\r\n                if (selectOptionData[i].parentOptGroup) {\r\n                    // whitespace in the optgroupname must be replaced, otherwise the li of existing optgroups are never found\r\n                    var optGroupName = self.widgetFullName + '-group-' + selectOptionData[i].parentOptGroup.replace(/[^a-zA-Z0-9]/g, \"\");\r\n                    if (this.list.find('li.' + optGroupName).size()) {\r\n                        this.list.find('li.' + optGroupName + ':last ul').append(thisLi);\r\n                    }\r\n                    else {\r\n                        $('<li role=\"presentation\" class=\"' + self.widgetFullName + '-group ' + optGroupName + '\"><span class=\"' + self.widgetFullName + '-group-label\">' + selectOptionData[i].parentOptGroup + '</span><ul></ul></li>')\r\n\t\t\t\t\t\t.appendTo(this.list)\r\n\t\t\t\t\t\t.find('ul')\r\n\t\t\t\t\t\t.append(thisLi);\r\n                    }\r\n                }\r\n                else {\r\n                    thisLi.appendTo(this.list);\r\n                }\r\n\r\n                //this allows for using the scrollbar in an overflowed list\r\n                this.list.bind('mousedown mouseup', function () { return false; });\r\n\r\n                //append icon if option is specified\r\n                if (o.icons) {\r\n                    for (var j in o.icons) {\r\n                        if (thisLi.is(o.icons[j].find)) {\r\n                            thisLi\r\n\t\t\t\t\t\t\t.data('optionClasses', selectOptionData[i].classes + ' ' + self.widgetFullName + '-hasIcon')\r\n\t\t\t\t\t\t\t.addClass(self.widgetFullName + '-hasIcon');\r\n                            var iconClass = o.icons[j].icon || \"\";\r\n\r\n                            thisLi\r\n\t\t\t\t\t\t\t.find('a:eq(0)')\r\n\t\t\t\t\t\t\t.prepend('<span class=\"' + self.widgetFullName + '-item-icon ui-icon ' + iconClass + '\"></span>');\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            //add corners to top and bottom menu items\r\n            this.list.find('li:last').addClass(\"ui-corner-bottom\");\r\n            if (o.style == 'popup') { this.list.find('li:first').addClass(\"ui-corner-top\"); }\r\n\r\n            //transfer classes to selectmenu and list\r\n            if (o.transferClasses) {\r\n                var transferClasses = this.element.attr('class') || '';\r\n                this.newelement.add(this.list).addClass(transferClasses);\r\n            }\r\n\r\n            //original selectmenu width\r\n            var clonedSelect = this.element.clone().appendTo(\"body\");\r\n            var selectWidth = clonedSelect.css({ position: \"absolute\", visibility: \"hidden\", display: \"block\" }).width();\r\n            clonedSelect.remove();\r\n\r\n            //set menu button width\r\n            this.newelement.width((o.width) ? o.width : selectWidth);\r\n\r\n            //set menu width to either menuWidth option value, width option value, or select width \r\n            if (o.style == 'dropdown') { this.list.width((o.menuWidth) ? o.menuWidth : ((o.width) ? o.width : selectWidth)); }\r\n            else { this.list.width((o.menuWidth) ? o.menuWidth : ((o.width) ? o.width - o.handleWidth : selectWidth - o.handleWidth)); }\r\n\r\n            //set max height from option \r\n            if (o.maxHeight && o.maxHeight < this.list.height()) { this.list.height(o.maxHeight); }\r\n\r\n            //save reference to actionable li's (not group label li's)\r\n            this._optionLis = this.list.find('li:not(.' + self.widgetFullName + '-group)');\r\n\r\n            //transfer menu click to menu button\r\n            this.list\r\n\t\t\t.keydown(function (event) {\r\n\t\t\t    var ret = true;\r\n\t\t\t    switch (event.keyCode) {\r\n\t\t\t        case $.ui.keyCode.UP:\r\n\t\t\t        case $.ui.keyCode.LEFT:\r\n\t\t\t            ret = false;\r\n\t\t\t            //self._moveFocus(-1);\r\n\t\t\t            self._moveSelection(-1);\r\n\t\t\t            self.open();\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.DOWN:\r\n\t\t\t        case $.ui.keyCode.RIGHT:\r\n\t\t\t            ret = false;\r\n\t\t\t            //self._moveFocus(1);\r\n\t\t\t            self._moveSelection(1);\r\n\t\t\t            self.open();\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.HOME:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._moveFocus(':first');\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.PAGE_UP:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._scrollPage('up');\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.PAGE_DOWN:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._scrollPage('down');\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.END:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._moveFocus(':last');\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.ENTER:\r\n\t\t\t        case $.ui.keyCode.SPACE:\r\n\t\t\t            ret = false;\r\n\t\t\t            self.close(event, true);\r\n\t\t\t            $(event.target).parents('li:eq(0)').trigger('mouseup');\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.TAB:\r\n\t\t\t            ret = true;\r\n\t\t\t            self.close(event, true);\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.ESCAPE:\r\n\t\t\t            ret = false;\r\n\t\t\t            self.close(event, true);\r\n\t\t\t            break;\r\n\t\t\t        default:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._typeAhead(event.keyCode, 'focus');\r\n\t\t\t            break;\r\n\t\t\t    }\r\n\t\t\t    return ret;\r\n\t\t\t});\r\n\r\n            //selectmenu style\r\n            if (o.style == 'dropdown') {\r\n                this.newelement\r\n\t\t\t\t.addClass(self.widgetFullName + \"-dropdown\");\r\n                this.list\r\n\t\t\t\t.addClass(self.widgetFullName + \"-menu-dropdown\");\r\n            }\r\n            else {\r\n                this.newelement\r\n\t\t\t\t.addClass(self.widgetFullName + \"-popup\");\r\n                this.list\r\n\t\t\t\t.addClass(self.widgetFullName + \"-menu-popup\");\r\n            }\r\n\r\n            //append status span to button\r\n            if (this._selectedIndex() && this._selectedIndex() != -1) {\r\n                this.newelement.prepend('<span class=\"' + self.widgetFullName + '-status\">' + selectOptionData[this._selectedIndex()].text + '</span>');\r\n            } else {\r\n                this.newelement.prepend('<span class=\"' + self.widgetFullName + '-status\"></span>');\r\n            }\r\n\r\n            //hide original selectmenu element\r\n            this.element.hide();\r\n\r\n            //transfer disabled state\r\n            if (this.element.attr('disabled') == true) { this.disable(); }\r\n\r\n            //update value\r\n            this.index(this._selectedIndex());\r\n\r\n            // needed to make menu work when placed at the very bottom of a site\r\n            setTimeout(function () { self._refreshPosition(); }, 200);\r\n\r\n            // needed when window is resized\r\n            $(window).resize(function () {\r\n                self._refreshPosition();\r\n            });\r\n        },\r\n        destroy: function () {\r\n            this.element.removeData(this.widgetName)\r\n\t\t\t.removeClass(this.widgetFullName + '-disabled' + ' ' + this.namespace + '-state-disabled')\r\n\t\t\t.removeAttr('aria-disabled');\r\n\r\n            //unbind click on label, reset its for attr\r\n            var label = $('label[for=' + this.newelement.attr('id') + ']')\r\n\t\t\t             .attr('for', this.element.attr('id'));\r\n\t\t\tif (label) label.unbind('click');\r\n            this.newelement.remove();\r\n            this.list.remove();\r\n            this.element.show();\r\n        },\r\n        _typeAhead: function (code, eventType) {\r\n            var self = this;\r\n            //define self._prevChar if needed\r\n            if (!self._prevChar) { self._prevChar = ['', 0]; }\r\n            var C = String.fromCharCode(code);\r\n            c = C.toLowerCase();\r\n            var focusFound = false;\r\n            function focusOpt(elem, ind) {\r\n                focusFound = true;\r\n                $(elem).trigger(eventType);\r\n                self._prevChar[1] = ind;\r\n            };\r\n            this.list.find('li a').each(function (i) {\r\n                if (!focusFound) {\r\n                    var thisText = $(this).text();\r\n                    if (thisText.indexOf(C) == 0 || thisText.indexOf(c) == 0) {\r\n                        if (self._prevChar[0] == C) {\r\n                            if (self._prevChar[1] < i) { focusOpt(this, i); }\r\n                        }\r\n                        else { focusOpt(this, i); }\r\n                    }\r\n                }\r\n            });\r\n            this._prevChar[0] = C;\r\n        },\r\n        \r\n        _uiHash: function () {\r\n            var index = this.index();\r\n            return {\r\n                index: index,\r\n                option: $(\"option\", this.element).get(index),\r\n                value: this.element[0].value\r\n            };\r\n        },\r\n        \r\n        open: function (event) {\r\n            var self = this;\r\n            var disabledStatus = this.newelement.attr(\"aria-disabled\");\r\n            if (disabledStatus != 'true') {\r\n                this._refreshPosition();\r\n                this._closeOthers(event);\r\n                this.newelement\r\n\t\t\t\t.addClass('ui-state-active');\r\n            \tthis.list\r\n\t\t\t\t.appendTo('body')\r\n\t\t\t\t.addClass(self.widgetFullName + '-open')\r\n\t\t\t\t.attr('aria-hidden', false);\r\n            \tif (this._selectedIndex() > 0) {\r\n                    this.list.find('li:not(.' + self.widgetFullName + '-group):eq(' + this._selectedIndex() + ') a')[0].focus();\r\n                }\r\n                if (this.options.style == \"dropdown\") { this.newelement.removeClass('ui-corner-all').addClass('ui-corner-top'); }\r\n                this._refreshPosition();\r\n                this._trigger(\"open\", event, this._uiHash());\r\n                // Added to focus the chosen element always you open\r\n                var activeID = this.widgetFullName + '-item-' + Math.round(Math.random() * 1000);\r\n\t\t\t    self._optionLis.eq(self._selectedIndex()).find('a:eq(0)').attr('id', activeID).focus();\r\n            }\r\n        },\r\n        close: function (event, retainFocus) {\r\n            if (this.newelement.is('.ui-state-active')) {\r\n                this.newelement\r\n\t\t\t\t.removeClass('ui-state-active');\r\n                this.list\r\n\t\t\t\t.attr('aria-hidden', true)\r\n\t\t\t\t.removeClass(this.widgetFullName + '-open');\r\n                if (this.options.style == \"dropdown\") { this.newelement.removeClass('ui-corner-top').addClass('ui-corner-all'); }\r\n                if (retainFocus) { this.newelement[0].focus(); }\r\n                this._trigger(\"close\", event, this._uiHash());\r\n            }\r\n        },\r\n        change: function (event) {\r\n            this.element.trigger('changeSelection');\r\n            this._trigger(\"changeSelection\", event, this._uiHash());\r\n        },\r\n        select: function (event) {\r\n            this._trigger(\"select\", event, this._uiHash());\r\n        },\r\n        _closeOthers: function (event) {\r\n            $('.' + this.widgetFullName + '.ui-state-active').not(this.newelement).each(function () {\r\n                $(this).data('selectelement').selectmenu('close', event);\r\n            });\r\n            $('.' + this.widgetFullName + '.ui-state-hover').trigger('mouseout');\r\n        },\r\n        _toggle: function (event, retainFocus) {\r\n            if (this.list.is('.' + this.widgetFullName + '-open')) { this.close(event, retainFocus); }\r\n            else { this.open(event); }\r\n        },\r\n        _formatText: function (text) {\r\n            return this.options.format ? this.options.format(text) : text;\r\n        },\r\n        _selectedIndex: function () {\r\n            return this.element[0].selectedIndex;\r\n        },\r\n        _selectedOptionLi: function () {\r\n            // negative indexes are not supported\r\n            if (this._selectedIndex() < 0)\r\n                return $();\r\n\r\n            return this._optionLis.eq(this._selectedIndex());\r\n        },\r\n        _focusedOptionLi: function () {\r\n            return this.list.find('.' + this.widgetFullName + '-item-focus');\r\n        },\r\n        _moveSelection: function (amt) {\r\n            var currIndex = parseInt(this._selectedOptionLi().data('index'), 10);\r\n            var newIndex = currIndex + amt;\r\n            return this._optionLis.eq(newIndex).trigger('mouseup');\r\n        },\r\n        _moveFocus: function (amt) {\r\n            if (!isNaN(amt)) {\r\n                var currIndex = parseInt(this._focusedOptionLi().data('index'), 10);\r\n                var newIndex = currIndex + amt;\r\n            }\r\n            else { var newIndex = parseInt(this._optionLis.filter(amt).data('index'), 10); }\r\n\r\n            if (newIndex < 0) { newIndex = 0; }\r\n            if (newIndex > this._optionLis.size() - 1) {\r\n                newIndex = this._optionLis.size() - 1;\r\n            }\r\n            var activeID = this.widgetFullName + '-item-' + Math.round(Math.random() * 1000);\r\n    \r\n            this._focusedOptionLi().find('a:eq(0)').attr('id', '');\r\n            this._optionLis.eq(newIndex).find('a:eq(0)').attr('id', activeID)[0].focus();\r\n            this.list.attr('aria-activedescendant', activeID);\r\n        },\r\n        \r\n        \r\n        _scrollPage: function (direction) {\r\n        \r\n            var numPerPage = Math.floor(this.list.outerHeight() / this.list.find('li:first').outerHeight());\r\n            numPerPage = (direction == 'up') ? -numPerPage : numPerPage;\r\n            this._moveFocus(numPerPage);\r\n        },\r\n        _setData: function (key, value) {\r\n            this.options[key] = value;\r\n            if (key == 'disabled') {\r\n                this.close();\r\n                this.element\r\n\t\t\t\t.add(this.newelement)\r\n\t\t\t\t.add(this.list)\r\n\t\t\t\t\t[value ? 'addClass' : 'removeClass'](\r\n\t\t\t\t\t\tthis.widgetFullName + '-disabled' + ' ' +\r\n\t\t\t\t\t\tthis.namespace + '-state-disabled')\r\n\t\t\t\t\t.attr(\"aria-disabled\", value);\r\n            }\r\n        },\r\n        _scrollPageInternal: function ()\r\n        {  \r\n        },\r\n        index: function (newValue) {\r\n            if (arguments.length) {\r\n                this.element[0].selectedIndex = newValue;\r\n                this._refreshValue();\r\n            } else {\r\n                return this._selectedIndex();\r\n            }\r\n        },\r\n\r\n        value: function (newValue) {\r\n            if (arguments.length) {\r\n                this.element[0].value = newValue;\r\n                this._refreshValue();\r\n                this.select();\r\n            } else {\r\n                return this.element[0].value;\r\n            }\r\n        },\r\n\r\n        _refreshValue: function () {\r\n            var activeClass = (this.options.style == \"popup\") ? \" ui-state-active\" : \"\";\r\n            var activeID = this.widgetFullName + '-item-' + Math.round(Math.random() * 1000);\r\n            //deselect previous\r\n            this.list\r\n\t\t\t.find('.' + this.widgetFullName + '-item-selected')\r\n\t\t\t.removeClass(this.widgetFullName + \"-item-selected\" + activeClass)\r\n\t\t\t.find('a')\r\n\t\t\t.attr('aria-selected', 'false')\r\n\t\t\t.attr('id', '');\r\n            //select new\r\n            this._selectedOptionLi()\r\n\t\t\t.addClass(this.widgetFullName + \"-item-selected\" + activeClass)\r\n\t\t\t.find('a')\r\n\t\t\t.attr('aria-selected', 'true')\r\n\t\t\t.attr('id', activeID);\r\n\r\n            //toggle any class brought in from option\r\n            var currentOptionClasses = this.newelement.data('optionClasses') ? this.newelement.data('optionClasses') : \"\";\r\n            var newOptionClasses = this._selectedOptionLi().data('optionClasses') ? this._selectedOptionLi().data('optionClasses') : \"\";\r\n            this.newelement\r\n\t\t\t.removeClass(currentOptionClasses)\r\n\t\t\t.data('optionClasses', newOptionClasses)\r\n\t\t\t.addClass(newOptionClasses)\r\n\t\t\t.find('.' + this.widgetFullName + '-status')\r\n\t\t\t.html(\r\n\t\t\t\tthis._selectedOptionLi()\r\n\t\t\t\t\t.find('a:eq(0)')\r\n\t\t\t\t\t.html()\r\n\t\t\t);\r\n\r\n            this.list.attr('aria-activedescendant', activeID)\r\n        },\r\n        _refreshPosition: function () {\r\n            //set left value\r\n            this.list.css('left', this.newelement.offset().left);\r\n\r\n            //set top value\r\n            var menuTop = this.newelement.offset().top;\r\n            var scrolledAmt = this.list[0].scrollTop;\r\n            this.list.find('li:lt(' + this._selectedIndex() + ')').each(function () {\r\n                scrolledAmt -= $(this).outerHeight();\r\n            });\r\n\r\n            if (this.newelement.is('.' + this.widgetFullName + '-popup')) {\r\n                menuTop += scrolledAmt;\r\n                this.list.css('top', menuTop);\r\n            }\r\n            else {\r\n                menuTop += this.newelement.height();\r\n                this.list.css('top', menuTop);\r\n            }\r\n        }\r\n    });\r\n})(jQuery);","/* http://keith-wood.name/timeEntry.html\r\nTime entry for jQuery v1.4.8.\r\nWritten by Keith Wood (kbwood{at}iinet.com.au) June 2007.\r\nDual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and \r\nMIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses. \r\nPlease attribute the author if you use it. */\r\n\r\n/* Turn an input field into an entry point for a time value.\r\nThe time can be entered via directly typing the value,\r\nvia the arrow keys, or via spinner buttons.\r\nIt is configurable to show 12 or 24-hour time, to show or hide seconds,\r\nto enforce a minimum and/or maximum time, to change the spinner image,\r\nand to constrain the time to steps, e.g. only on the quarter hours.\r\nAttach it with $('input selector').timeEntry(); for default settings,\r\nor configure it with options like:\r\n$('input selector').timeEntry(\r\n{spinnerImage: 'spinnerSquare.png', spinnerSize: [20, 20, 0]}); */\r\n\r\n(function ($) { // Hide scope, no $ conflict\r\n\r\n    /* TimeEntry manager.\r\n    Use the singleton instance of this class, $.timeEntry, to interact with the time entry\r\n    functionality. Settings for (groups of) fields are maintained in an instance object\r\n    (TimeEntryInstance), allowing multiple different settings on the same page. */\r\n    function TimeEntry() {\r\n        this._disabledInputs = []; // List of time entry inputs that have been disabled\r\n        this.regional = []; // Available regional settings, indexed by language code\r\n        this.regional[''] = { // Default regional settings\r\n            show24Hours: false, // True to use 24 hour time, false for 12 hour (AM/PM)\r\n            separator: ':', // The separator between time fields\r\n            ampmPrefix: '', // The separator before the AM/PM text\r\n            ampmNames: ['AM', 'PM'], // Names of morning/evening markers\r\n            spinnerTexts: ['Now', 'Previous field', 'Next field', 'Increment', 'Decrement']\r\n            // The popup texts for the spinner image areas\r\n        };\r\n        this._defaults = {\r\n            appendText: '', // Display text following the input box, e.g. showing the format\r\n            showSeconds: false, // True to show seconds as well, false for hours/minutes only\r\n            showZeroInHour: true, //True to show 0 when hour < 10\r\n            timeSteps: [1, 1, 1], // Steps for each of hours/minutes/seconds when incrementing/decrementing\r\n            initialField: 0, // The field to highlight initially, 0 = hours, 1 = minutes, ...\r\n            useMouseWheel: true, // True to use mouse wheel for increment/decrement if possible,\r\n            // false to never use it\r\n            defaultTime: null, // The time to use if none has been set, leave at null for now\r\n            minTime: null, // The earliest selectable time, or null for no limit\r\n            maxTime: null, // The latest selectable time, or null for no limit\r\n            spinnerImage: 'spinnerDefault.png', // The URL of the images to use for the time spinner\r\n            // Seven images packed horizontally for normal, each button pressed, and disabled\r\n            spinnerSize: [20, 20, 8], // The width and height of the spinner image,\r\n            // and size of centre button for current time\r\n            spinnerBigImage: '', // The URL of the images to use for the expanded time spinner\r\n            // Seven images packed horizontally for normal, each button pressed, and disabled\r\n            spinnerBigSize: [40, 40, 16], // The width and height of the expanded spinner image,\r\n            // and size of centre button for current time\r\n            spinnerIncDecOnly: false, // True for increment/decrement buttons only, false for all\r\n            spinnerRepeat: [500, 250], // Initial and subsequent waits in milliseconds\r\n            // for repeats on the spinner buttons\r\n            beforeShow: null, // Function that takes an input field and\r\n            // returns a set of custom settings for the time entry\r\n            beforeSetTime: null // Function that runs before updating the time,\r\n            // takes the old and new times, and minimum and maximum times as parameters,\r\n            // and returns an adjusted time if necessary\r\n        };\r\n        $.extend(this._defaults, this.regional['']);\r\n    }\r\n\r\n    var PROP_NAME = 'timeEntry';\r\n\r\n    $.extend(TimeEntry.prototype, {\r\n        /* Class name added to elements to indicate already configured with time entry. */\r\n        markerClassName: 'hasTimeEntry',\r\n\r\n        /* Override the default settings for all instances of the time entry.\r\n        @param  options  (object) the new settings to use as defaults (anonymous object)\r\n        @return  (DateEntry) this object */\r\n        setDefaults: function (options) {\r\n            extendRemove(this._defaults, options || {});\r\n            return this;\r\n        },\r\n\r\n        /* Attach the time entry handler to an input field.\r\n        @param  target   (element) the field to attach to\r\n        @param  options  (object) custom settings for this instance */\r\n        _connectTimeEntry: function (target, options) {\r\n            var input = $(target);\r\n            if (input.hasClass(this.markerClassName)) {\r\n                return;\r\n            }\r\n            var inst = {};\r\n            inst.options = $.extend({}, options);\r\n            inst._selectedHour = 0; // The currently selected hour\r\n            inst._selectedMinute = 0; // The currently selected minute\r\n            inst._selectedSecond = 0; // The currently selected second\r\n            inst._field = 0; // The selected subfield\r\n            inst.input = $(target); // The attached input field\r\n            $.data(target, PROP_NAME, inst);\r\n            var spinnerImage = this._get(inst, 'spinnerImage');\r\n            var spinnerText = this._get(inst, 'spinnerText');\r\n            var spinnerSize = this._get(inst, 'spinnerSize');\r\n            var appendText = this._get(inst, 'appendText');\r\n            var spinner = (!spinnerImage ? null :\r\n\t\t\t$('<span class=\"timeEntry_control\" style=\"display: table-cell; bottom: 25%;' +\r\n\t\t\t'width: ' + spinnerSize[0] + 'px; height: ' + spinnerSize[1] + 'px;' +\r\n\t\t\t($.browser.mozilla && $.browser.version < '1.9' ? // FF 2- (Win)\r\n\t\t\t' padding-left: ' + spinnerSize[0] + 'px; padding-bottom: ' +\r\n\t\t\t(spinnerSize[1] - 18) + 'px;' : '') + '\"></span>'));\r\n            input.wrap('<span class=\"timeEntry_wrap\" style=\"display: table; position: relative\"></span>').\r\n\t\t\tafter(appendText ? '<span class=\"timeEntry_append\">' + appendText + '</span>' : '').\r\n\t\t\tafter(spinner || '');\r\n            input.addClass(this.markerClassName).bind('focus.timeEntry', this._doFocus).\r\n\t\t\tbind('blur.timeEntry', this._doBlur).bind('click.timeEntry', this._doClick).\r\n\t\t\tbind('keydown.timeEntry', this._doKeyDown).bind('keypress.timeEntry', this._doKeyPress);\r\n            // Check pastes\r\n            if ($.browser.mozilla) {\r\n                input.bind('input.timeEntry', function (event) { $.timeEntry._parseTime(inst); });\r\n            }\r\n            if ($.browser.msie) {\r\n                input.bind('paste.timeEntry',\r\n\t\t\t\tfunction (event) { setTimeout(function () { $.timeEntry._parseTime(inst); }, 1); });\r\n            }\r\n            // Allow mouse wheel usage\r\n            if (this._get(inst, 'useMouseWheel') && $.fn.mousewheel) {\r\n                input.mousewheel(this._doMouseWheel);\r\n            }\r\n            if (spinner) {\r\n                spinner.mousedown(this._handleSpinner).mouseup(this._endSpinner).\r\n\t\t\t\tmouseover(this._expandSpinner).mouseout(this._endSpinner).\r\n\t\t\t\tmousemove(this._describeSpinner);\r\n            }\r\n        },\r\n\r\n        /* Enable a time entry input and any associated spinner.\r\n        @param  input  (element) single input field */\r\n        _enableTimeEntry: function (input) {\r\n            this._enableDisable(input, false);\r\n        },\r\n\r\n        /* Disable a time entry input and any associated spinner.\r\n        @param  input  (element) single input field */\r\n        _disableTimeEntry: function (input) {\r\n            this._enableDisable(input, true);\r\n        },\r\n\r\n        /* Enable or disable a time entry input and any associated spinner.\r\n        @param  input    (element) single input field\r\n        @param  disable  (boolean) true to disable, false to enable */\r\n        _enableDisable: function (input, disable) {\r\n            var inst = $.data(input, PROP_NAME);\r\n            if (!inst) {\r\n                return;\r\n            }\r\n            input.disabled = disable;\r\n            if (input.nextSibling && input.nextSibling.nodeName.toLowerCase() == 'span') {\r\n                $.timeEntry._changeSpinner(inst, input.nextSibling, (disable ? 5 : -1));\r\n            }\r\n            $.timeEntry._disabledInputs = $.map($.timeEntry._disabledInputs,\r\n\t\t\tfunction (value) { return (value == input ? null : value); }); // Delete entry\r\n            if (disable) {\r\n                $.timeEntry._disabledInputs.push(input);\r\n            }\r\n        },\r\n\r\n        /* Check whether an input field has been disabled.\r\n        @param  input  (element) input field to check\r\n        @return  (boolean) true if this field has been disabled, false if it is enabled */\r\n        _isDisabledTimeEntry: function (input) {\r\n            return $.inArray(input, this._disabledInputs) > -1;\r\n        },\r\n\r\n        /* Reconfigure the settings for a time entry field.\r\n        @param  input    (element) input field to change\r\n        @param  options  (object) new settings to add or\r\n        (string) an individual setting name\r\n        @param  value    (any) the individual setting's value */\r\n        _changeTimeEntry: function (input, options, value) {\r\n            var inst = $.data(input, PROP_NAME);\r\n            if (inst) {\r\n                if (typeof options == 'string') {\r\n                    var name = options;\r\n                    options = {};\r\n                    options[name] = value;\r\n                }\r\n                var currentTime = this._extractTime(inst);\r\n                extendRemove(inst.options, options || {});\r\n                if (currentTime) {\r\n                    this._setTime(inst, new Date(0, 0, 0,\r\n\t\t\t\t\tcurrentTime[0], currentTime[1], currentTime[2]));\r\n                }\r\n            }\r\n            $.data(input, PROP_NAME, inst);\r\n        },\r\n\r\n        /* Remove the time entry functionality from an input.\r\n        @param  input  (element) input field to affect */\r\n        _destroyTimeEntry: function (input) {\r\n            $input = $(input);\r\n            if (!$input.hasClass(this.markerClassName)) {\r\n                return;\r\n            }\r\n            $input.removeClass(this.markerClassName).unbind('.timeEntry');\r\n            if ($.fn.mousewheel) {\r\n                $input.unmousewheel();\r\n            }\r\n            this._disabledInputs = $.map(this._disabledInputs,\r\n\t\t\tfunction (value) { return (value == input ? null : value); }); // Delete entry\r\n            $input.parent().replaceWith($input);\r\n            $.removeData(input, PROP_NAME);\r\n        },\r\n\r\n        /* Initialise the current time for a time entry input field.\r\n        @param  input  (element) input field to update\r\n        @param  time   (Date) the new time (year/month/day ignored) or null for now */\r\n        _setTimeTimeEntry: function (input, time) {\r\n            var inst = $.data(input, PROP_NAME);\r\n            if (inst) {\r\n                this._setTime(inst, time ? (typeof time == 'object' ?\r\n\t\t\t\tnew Date(time.getTime()) : time) : null);\r\n            }\r\n        },\r\n\r\n        /* Retrieve the current time for a time entry input field.\r\n        @param  input  (element) input field to examine\r\n        @return  (Date) current time (year/month/day zero) or null if none */\r\n        _getTimeTimeEntry: function (input) {\r\n            var inst = $.data(input, PROP_NAME);\r\n            var currentTime = (inst ? this._extractTime(inst) : null);\r\n            return (!currentTime ? null :\r\n\t\t\tnew Date(0, 0, 0, currentTime[0], currentTime[1], currentTime[2]));\r\n        },\r\n\r\n        /* Retrieve the millisecond offset for the current time.\r\n        @param  input  (element) input field to examine\r\n        @return  (number) the time as milliseconds offset or zero if none */\r\n        _getOffsetTimeEntry: function (input) {\r\n            var inst = $.data(input, PROP_NAME);\r\n            var currentTime = (inst ? this._extractTime(inst) : null);\r\n            return (!currentTime ? 0 :\r\n\t\t\t(currentTime[0] * 3600 + currentTime[1] * 60 + currentTime[2]) * 1000);\r\n        },\r\n\r\n        /* Initialise time entry.\r\n        @param  target  (element) the input field or\r\n        (event) the focus event */\r\n        _doFocus: function (target) {\r\n            var input = (target.nodeName && target.nodeName.toLowerCase() == 'input' ? target : this);\r\n            if ($.timeEntry._lastInput == input || $.timeEntry._isDisabledTimeEntry(input)) {\r\n                $.timeEntry._focussed = false;\r\n                return;\r\n            }\r\n            var inst = $.data(input, PROP_NAME);\r\n            $.timeEntry._focussed = true;\r\n            $.timeEntry._lastInput = input;\r\n            $.timeEntry._blurredInput = null;\r\n            var beforeShow = $.timeEntry._get(inst, 'beforeShow');\r\n            extendRemove(inst.options, (beforeShow ? beforeShow.apply(input, [input]) : {}));\r\n            $.data(input, PROP_NAME, inst);\r\n            $.timeEntry._parseTime(inst);\r\n            setTimeout(function () { $.timeEntry._showField(inst); }, 10);\r\n        },\r\n\r\n        /* Note that the field has been exited.\r\n        @param  event  (event) the blur event */\r\n        _doBlur: function (event) {\r\n            $.timeEntry._blurredInput = $.timeEntry._lastInput;\r\n            $.timeEntry._lastInput = null;\r\n        },\r\n\r\n        /* Select appropriate field portion on click, if already in the field.\r\n        @param  event  (event) the click event */\r\n        _doClick: function (event) {\r\n            var input = event.target;\r\n            var inst = $.data(input, PROP_NAME);\r\n            if (!$.timeEntry._focussed) {\r\n                var fieldSize = $.timeEntry._get(inst, 'separator').length + 2;\r\n                inst._field = 0;\r\n                if (input.selectionStart != null) { // Use input select range\r\n                    for (var field = 0; field <= Math.max(1, inst._secondField, inst._ampmField); field++) {\r\n                        var end = (field != inst._ampmField ? (field * fieldSize) + 2 :\r\n\t\t\t\t\t\t(inst._ampmField * fieldSize) + $.timeEntry._get(inst, 'ampmPrefix').length +\r\n\t\t\t\t\t\t$.timeEntry._get(inst, 'ampmNames')[0].length);\r\n                        inst._field = field;\r\n                        if (input.selectionStart < end) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                else if (input.createTextRange) { // Check against bounding boxes\r\n                    var src = $(event.srcElement);\r\n                    var range = input.createTextRange();\r\n                    var convert = function (value) {\r\n                        return { thin: 2, medium: 4, thick: 6}[value] || value;\r\n                    };\r\n                    var offsetX = event.clientX + document.documentElement.scrollLeft -\r\n\t\t\t\t\t(src.offset().left + parseInt(convert(src.css('border-left-width')), 10)) -\r\n\t\t\t\t\trange.offsetLeft; // Position - left edge - alignment\r\n                    for (var field = 0; field <= Math.max(1, inst._secondField, inst._ampmField); field++) {\r\n                        var end = (field != inst._ampmField ? (field * fieldSize) + 2 :\r\n\t\t\t\t\t\t(inst._ampmField * fieldSize) + $.timeEntry._get(inst, 'ampmPrefix').length +\r\n\t\t\t\t\t\t$.timeEntry._get(inst, 'ampmNames')[0].length);\r\n                        range.collapse();\r\n                        range.moveEnd('character', end);\r\n                        inst._field = field;\r\n                        if (offsetX < range.boundingWidth) { // And compare\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            $.data(input, PROP_NAME, inst);\r\n            $.timeEntry._showField(inst);\r\n            $.timeEntry._focussed = false;\r\n        },\r\n\r\n        /* Handle keystrokes in the field.\r\n        @param  event  (event) the keydown event\r\n        @return  (boolean) true to continue, false to stop processing */\r\n        _doKeyDown: function (event) {\r\n            if (event.keyCode >= 48) { // >= '0'\r\n                return true;\r\n            }\r\n            var inst = $.data(event.target, PROP_NAME);\r\n            switch (event.keyCode) {\r\n                case 9: return (event.shiftKey ?\r\n                    // Move to previous time field, or out if at the beginning\r\n\t\t\t\t\t\t$.timeEntry._changeField(inst, -1, true) :\r\n                    // Move to next time field, or out if at the end\r\n\t\t\t\t\t\t$.timeEntry._changeField(inst, +1, true));\r\n                case 35: if (event.ctrlKey) { // Clear time on ctrl+end\r\n                        $.timeEntry._setValue(inst, '');\r\n                    }\r\n                    else { // Last field on end\r\n                        inst._field = Math.max(1, inst._secondField, inst._ampmField);\r\n                        $.timeEntry._adjustField(inst, 0);\r\n                    }\r\n                    break;\r\n                case 36: if (event.ctrlKey) { // Current time on ctrl+home\r\n                        $.timeEntry._setTime(inst);\r\n                    }\r\n                    else { // First field on home\r\n                        inst._field = 0;\r\n                        $.timeEntry._adjustField(inst, 0);\r\n                    }\r\n                    break;\r\n                case 37: $.timeEntry._changeField(inst, -1, false); break; // Previous field on left\r\n                case 38: $.timeEntry._adjustField(inst, +1); break; // Increment time field on up\r\n                case 39: $.timeEntry._changeField(inst, +1, false); break; // Next field on right\r\n                case 40: $.timeEntry._adjustField(inst, -1); break; // Decrement time field on down\r\n                case 46: $.timeEntry._setValue(inst, ''); break; // Clear time on delete\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /* Disallow unwanted characters.\r\n        @param  event  (event) the keypress event\r\n        @return  (boolean) true to continue, false to stop processing */\r\n        _doKeyPress: function (event) {\r\n            var chr = String.fromCharCode(event.charCode == undefined ? event.keyCode : event.charCode);\r\n            if (chr < ' ') {\r\n                return true;\r\n            }\r\n            var inst = $.data(event.target, PROP_NAME);\r\n            $.timeEntry._handleKeyPress(inst, chr);\r\n            return false;\r\n        },\r\n\r\n        /* Increment/decrement on mouse wheel activity.\r\n        @param  event  (event) the mouse wheel event\r\n        @param  delta  (number) the amount of change */\r\n        _doMouseWheel: function (event, delta) {\r\n            if ($.timeEntry._isDisabledTimeEntry(event.target)) {\r\n                return;\r\n            }\r\n            delta = ($.browser.opera ? -delta / Math.abs(delta) :\r\n\t\t\t($.browser.safari ? delta / Math.abs(delta) : delta));\r\n            var inst = $.data(event.target, PROP_NAME);\r\n            inst.input.focus();\r\n            if (!inst.input.val()) {\r\n                $.timeEntry._parseTime(inst);\r\n            }\r\n            $.timeEntry._adjustField(inst, delta);\r\n            event.preventDefault();\r\n        },\r\n\r\n        /* Expand the spinner, if possible, to make it easier to use.\r\n        @param  event  (event) the mouse over event */\r\n        _expandSpinner: function (event) {\r\n            var spinner = $.timeEntry._getSpinnerTarget(event);\r\n            var inst = $.data($.timeEntry._getInput(spinner), PROP_NAME);\r\n            var spinnerBigImage = $.timeEntry._get(inst, 'spinnerBigImage');\r\n            if (spinnerBigImage) {\r\n                inst._expanded = true;\r\n                var offset = $(spinner).offset();\r\n                var relative = null;\r\n                $(spinner).parents().each(function () {\r\n                    var parent = $(this);\r\n                    if (parent.css('position') == 'relative' ||\r\n\t\t\t\t\t\tparent.css('position') == 'absolute') {\r\n                        relative = parent.offset();\r\n                    }\r\n                    return !relative;\r\n                });\r\n                var spinnerSize = $.timeEntry._get(inst, 'spinnerSize');\r\n                var spinnerBigSize = $.timeEntry._get(inst, 'spinnerBigSize');\r\n                $('<div class=\"timeEntry_expand\" style=\"position: absolute; left: ' +\r\n\t\t\t\t(offset.left - (spinnerBigSize[0] - spinnerSize[0]) / 2 -\r\n\t\t\t\t(relative ? relative.left : 0)) + 'px; top: ' + (offset.top -\r\n\t\t\t\t(spinnerBigSize[1] - spinnerSize[1]) / 2 - (relative ? relative.top : 0)) +\r\n\t\t\t\t'px; width: ' + spinnerBigSize[0] + 'px; height: ' +\r\n\t\t\t\tspinnerBigSize[1] + 'px; background: transparent url(' +\r\n\t\t\t\tspinnerBigImage + ') no-repeat 0px 0px; z-index: 10;\"></div>').\r\n\t\t\t\tmousedown($.timeEntry._handleSpinner).mouseup($.timeEntry._endSpinner).\r\n\t\t\t\tmouseout($.timeEntry._endExpand).mousemove($.timeEntry._describeSpinner).\r\n\t\t\t\tinsertAfter(spinner);\r\n            }\r\n        },\r\n\r\n        /* Locate the actual input field from the spinner.\r\n        @param  spinner  (element) the current spinner\r\n        @return  (element) the corresponding input */\r\n        _getInput: function (spinner) {\r\n            return $(spinner).siblings('.' + $.timeEntry.markerClassName)[0];\r\n        },\r\n\r\n        /* Change the title based on position within the spinner.\r\n        @param  event  (event) the mouse move event */\r\n        _describeSpinner: function (event) {\r\n            var spinner = $.timeEntry._getSpinnerTarget(event);\r\n            var inst = $.data($.timeEntry._getInput(spinner), PROP_NAME);\r\n            spinner.title = $.timeEntry._get(inst, 'spinnerTexts')\r\n\t\t\t[$.timeEntry._getSpinnerRegion(inst, event)];\r\n        },\r\n\r\n        /* Handle a click on the spinner.\r\n        @param  event  (event) the mouse click event */\r\n        _handleSpinner: function (event) {\r\n            var spinner = $.timeEntry._getSpinnerTarget(event);\r\n            var input = $.timeEntry._getInput(spinner);\r\n            if ($.timeEntry._isDisabledTimeEntry(input)) {\r\n                return;\r\n            }\r\n            if (input == $.timeEntry._blurredInput) {\r\n                $.timeEntry._lastInput = input;\r\n                $.timeEntry._blurredInput = null;\r\n            }\r\n            var inst = $.data(input, PROP_NAME);\r\n            $.timeEntry._doFocus(input);\r\n            var region = $.timeEntry._getSpinnerRegion(inst, event);\r\n            $.timeEntry._changeSpinner(inst, spinner, region);\r\n            $.timeEntry._actionSpinner(inst, region);\r\n            $.timeEntry._timer = null;\r\n            $.timeEntry._handlingSpinner = true;\r\n            var spinnerRepeat = $.timeEntry._get(inst, 'spinnerRepeat');\r\n            if (region >= 3 && spinnerRepeat[0]) { // Repeat increment/decrement\r\n                $.timeEntry._timer = setTimeout(\r\n\t\t\t\tfunction () { $.timeEntry._repeatSpinner(inst, region); },\r\n\t\t\t\tspinnerRepeat[0]);\r\n                $(spinner).one('mouseout', $.timeEntry._releaseSpinner).\r\n\t\t\t\tone('mouseup', $.timeEntry._releaseSpinner);\r\n            }\r\n        },\r\n\r\n        /* Action a click on the spinner.\r\n        @param  inst    (object) the instance settings\r\n        @param  region  (number) the spinner \"button\" */\r\n        _actionSpinner: function (inst, region) {\r\n            if (!inst.input.val()) {\r\n                $.timeEntry._parseTime(inst);\r\n            }\r\n            switch (region) {\r\n                case 0: this._setTime(inst, undefined, true); break;\r\n                case 1: this._changeField(inst, -1, false); break;\r\n                case 2: this._changeField(inst, +1, false); break;\r\n                case 3: this._adjustField(inst, +1); break;\r\n                case 4: this._adjustField(inst, -1); break;\r\n            }\r\n        },\r\n\r\n        /* Repeat a click on the spinner.\r\n        @param  inst    (object) the instance settings\r\n        @param  region  (number) the spinner \"button\" */\r\n        _repeatSpinner: function (inst, region) {\r\n            if (!$.timeEntry._timer) {\r\n                return;\r\n            }\r\n            $.timeEntry._lastInput = $.timeEntry._blurredInput;\r\n            this._actionSpinner(inst, region);\r\n            this._timer = setTimeout(\r\n\t\t\tfunction () { $.timeEntry._repeatSpinner(inst, region); },\r\n\t\t\tthis._get(inst, 'spinnerRepeat')[1]);\r\n        },\r\n\r\n        /* Stop a spinner repeat.\r\n        @param  event  (event) the mouse event */\r\n        _releaseSpinner: function (event) {\r\n            clearTimeout($.timeEntry._timer);\r\n            $.timeEntry._timer = null;\r\n        },\r\n\r\n        /* Tidy up after an expanded spinner.\r\n        @param  event  (event) the mouse event */\r\n        _endExpand: function (event) {\r\n            $.timeEntry._timer = null;\r\n            var spinner = $.timeEntry._getSpinnerTarget(event);\r\n            var input = $.timeEntry._getInput(spinner);\r\n            var inst = $.data(input, PROP_NAME);\r\n            $(spinner).remove();\r\n            inst._expanded = false;\r\n        },\r\n\r\n        /* Tidy up after a spinner click.\r\n        @param  event  (event) the mouse event */\r\n        _endSpinner: function (event) {\r\n            $.timeEntry._timer = null;\r\n            var spinner = $.timeEntry._getSpinnerTarget(event);\r\n            var input = $.timeEntry._getInput(spinner);\r\n            var inst = $.data(input, PROP_NAME);\r\n            if (!$.timeEntry._isDisabledTimeEntry(input)) {\r\n                $.timeEntry._changeSpinner(inst, spinner, -1);\r\n            }\r\n            if ($.timeEntry._handlingSpinner) {\r\n                $.timeEntry._lastInput = $.timeEntry._blurredInput;\r\n            }\r\n            if ($.timeEntry._lastInput && $.timeEntry._handlingSpinner) {\r\n                $.timeEntry._showField(inst);\r\n            }\r\n            $.timeEntry._handlingSpinner = false;\r\n        },\r\n\r\n        /* Retrieve the spinner from the event.\r\n        @param  event  (event) the mouse click event\r\n        @return  (element) the target field */\r\n        _getSpinnerTarget: function (event) {\r\n            return event.target || event.srcElement;\r\n        },\r\n\r\n        /* Determine which \"button\" within the spinner was clicked.\r\n        @param  inst   (object) the instance settings\r\n        @param  event  (event) the mouse event\r\n        @return  (number) the spinner \"button\" number */\r\n        _getSpinnerRegion: function (inst, event) {\r\n            var spinner = this._getSpinnerTarget(event);\r\n            var pos = ($.browser.opera || $.browser.safari ?\r\n\t\t\t$.timeEntry._findPos(spinner) : $(spinner).offset());\r\n            var scrolled = ($.browser.safari ? $.timeEntry._findScroll(spinner) :\r\n\t\t\t[document.documentElement.scrollLeft || document.body.scrollLeft,\r\n\t\t\tdocument.documentElement.scrollTop || document.body.scrollTop]);\r\n            var spinnerIncDecOnly = this._get(inst, 'spinnerIncDecOnly');\r\n            var left = (spinnerIncDecOnly ? 99 : event.clientX + scrolled[0] -\r\n\t\t\tpos.left - ($.browser.msie ? 2 : 0));\r\n            var top = event.clientY + scrolled[1] - pos.top - ($.browser.msie ? 2 : 0);\r\n            var spinnerSize = this._get(inst, (inst._expanded ? 'spinnerBigSize' : 'spinnerSize'));\r\n            var right = (spinnerIncDecOnly ? 99 : spinnerSize[0] - 1 - left);\r\n            var bottom = spinnerSize[1] - 1 - top;\r\n            if (spinnerSize[2] > 0 && Math.abs(left - right) <= spinnerSize[2] &&\r\n\t\t\t\tMath.abs(top - bottom) <= spinnerSize[2]) {\r\n                return 0; // Centre button\r\n            }\r\n            var min = Math.min(left, top, right, bottom);\r\n            return (min == left ? 1 : (min == right ? 2 : (min == top ? 3 : 4))); // Nearest edge\r\n        },\r\n\r\n        /* Change the spinner image depending on button clicked.\r\n        @param  inst     (object) the instance settings\r\n        @param  spinner  (element) the spinner control\r\n        @param  region   (number) the spinner \"button\" */\r\n        _changeSpinner: function (inst, spinner, region) {\r\n            $(spinner).css('background-position', '-' + ((region + 1) *\r\n\t\t\tthis._get(inst, (inst._expanded ? 'spinnerBigSize' : 'spinnerSize'))[0]) + 'px 0px');\r\n        },\r\n\r\n        /* Find an object's position on the screen.\r\n        @param  obj  (element) the control\r\n        @return  (object) position as .left and .top */\r\n        _findPos: function (obj) {\r\n            var curLeft = curTop = 0;\r\n            if (obj.offsetParent) {\r\n                curLeft = obj.offsetLeft;\r\n                curTop = obj.offsetTop;\r\n                while (obj = obj.offsetParent) {\r\n                    var origCurLeft = curLeft;\r\n                    curLeft += obj.offsetLeft;\r\n                    if (curLeft < 0) {\r\n                        curLeft = origCurLeft;\r\n                    }\r\n                    curTop += obj.offsetTop;\r\n                }\r\n            }\r\n            return { left: curLeft, top: curTop };\r\n        },\r\n\r\n        /* Find an object's scroll offset on the screen.\r\n        @param  obj  (element) the control\r\n        @return  (number[]) offset as [left, top] */\r\n        _findScroll: function (obj) {\r\n            var isFixed = false;\r\n            $(obj).parents().each(function () {\r\n                isFixed |= $(this).css('position') == 'fixed';\r\n            });\r\n            if (isFixed) {\r\n                return [0, 0];\r\n            }\r\n            var scrollLeft = obj.scrollLeft;\r\n            var scrollTop = obj.scrollTop;\r\n            while (obj = obj.parentNode) {\r\n                scrollLeft += obj.scrollLeft || 0;\r\n                scrollTop += obj.scrollTop || 0;\r\n            }\r\n            return [scrollLeft, scrollTop];\r\n        },\r\n\r\n        /* Get a setting value, defaulting if necessary.\r\n        @param  inst  (object) the instance settings\r\n        @param  name  (string) the setting name\r\n        @return  (any) the setting value */\r\n        _get: function (inst, name) {\r\n            return (inst.options[name] != null ?\r\n\t\t\tinst.options[name] : $.timeEntry._defaults[name]);\r\n        },\r\n\r\n        /* Extract the time value from the input field, or default to now.\r\n        @param  inst  (object) the instance settings */\r\n        _parseTime: function (inst) {\r\n            var currentTime = this._extractTime(inst);\r\n            var showSeconds = this._get(inst, 'showSeconds');\r\n            if (currentTime) {\r\n                inst._selectedHour = currentTime[0];\r\n                inst._selectedMinute = currentTime[1];\r\n                inst._selectedSecond = currentTime[2];\r\n            }\r\n            else {\r\n                var now = this._constrainTime(inst);\r\n                inst._selectedHour = now[0];\r\n                inst._selectedMinute = now[1];\r\n                inst._selectedSecond = (showSeconds ? now[2] : 0);\r\n            }\r\n            inst._secondField = (showSeconds ? 2 : -1);\r\n            inst._ampmField = (this._get(inst, 'show24Hours') ? -1 : (showSeconds ? 3 : 2));\r\n            inst._lastChr = '';\r\n            inst._field = Math.max(0, Math.min(\r\n\t\t\tMath.max(1, inst._secondField, inst._ampmField), this._get(inst, 'initialField')));\r\n            if (inst.input.val() != '') {\r\n                this._showTime(inst);\r\n            }\r\n        },\r\n\r\n        /* Extract the time value from a string as an array of values, or default to null.\r\n        @param  inst   (object) the instance settings\r\n        @param  value  (string) the time value to parse\r\n        @return  (number[3]) the time components (hours, minutes, seconds)\r\n        or null if no value */\r\n        _extractTime: function (inst, value) {\r\n            value = value || inst.input.val();\r\n            var separator = this._get(inst, 'separator');\r\n            var currentTime = value.split(separator);\r\n            if (separator == '' && value != '') {\r\n                currentTime[0] = value.substring(0, 2);\r\n                currentTime[1] = value.substring(2, 4);\r\n                currentTime[2] = value.substring(4, 6);\r\n            }\r\n            var ampmNames = this._get(inst, 'ampmNames');\r\n            var show24Hours = this._get(inst, 'show24Hours');\r\n            if (currentTime.length >= 2) {\r\n                var isAM = !show24Hours && (value.indexOf(ampmNames[0]) > -1);\r\n                var isPM = !show24Hours && (value.indexOf(ampmNames[1]) > -1);\r\n                var hour = parseInt(currentTime[0], 10);\r\n                hour = (isNaN(hour) ? 0 : hour);\r\n                hour = ((isAM || isPM) && hour == 12 ? 0 : hour) + (isPM ? 12 : 0);\r\n                var minute = parseInt(currentTime[1], 10);\r\n                minute = (isNaN(minute) ? 0 : minute);\r\n                var second = (currentTime.length >= 3 ?\r\n\t\t\t\tparseInt(currentTime[2], 10) : 0);\r\n                second = (isNaN(second) || !this._get(inst, 'showSeconds') ? 0 : second);\r\n                return this._constrainTime(inst, [hour, minute, second]);\r\n            }\r\n            return null;\r\n        },\r\n\r\n        /* Constrain the given/current time to the time steps.\r\n        @param  inst    (object) the instance settings\r\n        @param  fields  (number[3]) the current time components (hours, minutes, seconds)\r\n        @return  (number[3]) the constrained time components (hours, minutes, seconds) */\r\n        _constrainTime: function (inst, fields) {\r\n            var specified = (fields != null);\r\n            if (!specified) {\r\n                var now = this._determineTime(inst, this._get(inst, 'defaultTime')) || new Date();\r\n                fields = [now.getHours(), now.getMinutes(), now.getSeconds()];\r\n            }\r\n            var reset = false;\r\n            var timeSteps = this._get(inst, 'timeSteps');\r\n            for (var i = 0; i < timeSteps.length; i++) {\r\n                if (reset) {\r\n                    fields[i] = 0;\r\n                }\r\n                else if (timeSteps[i] > 1) {\r\n                    fields[i] = Math.round(fields[i] / timeSteps[i]) * timeSteps[i];\r\n                    reset = true;\r\n                }\r\n            }\r\n            return fields;\r\n        },\r\n\r\n        /* Set the selected time into the input field.\r\n        @param  inst  (object) the instance settings */\r\n        _showTime: function (inst, isNow) {\r\n            var isNow = isNow || false;\r\n            var show24Hours = this._get(inst, 'show24Hours');\r\n            var separator = this._get(inst, 'separator');\r\n            var currentTime = (this._formatNumber(inst, show24Hours ? inst._selectedHour :\r\n\t\t\t((inst._selectedHour + 11) % 12) + 1) + separator +\r\n\t\t\tthis._formatNumber(inst, inst._selectedMinute) +\r\n\t\t\t(this._get(inst, 'showSeconds') ? separator +\r\n\t\t\tthis._formatNumber(inst, inst._selectedSecond) : '') +\r\n\t\t\t(show24Hours ? '' : this._get(inst, 'ampmPrefix') +\r\n\t\t\tthis._get(inst, 'ampmNames')[(inst._selectedHour < 12 ? 0 : 1)]));\r\n            this._setValue(inst, currentTime, isNow);\r\n            this._showField(inst);\r\n        },\r\n\r\n        /* Highlight the current time field.\r\n        @param  inst  (object) the instance settings */\r\n        _showField: function (inst) {\r\n            var input = inst.input[0];\r\n            if (inst.input.is(':hidden') || $.timeEntry._lastInput != input) {\r\n                return;\r\n            }\r\n            var separator = this._get(inst, 'separator');\r\n            var fieldSize = separator.length + 2;\r\n            var start = (inst._field != inst._ampmField ? (inst._field * fieldSize) :\r\n\t\t\t(inst._ampmField * fieldSize) - separator.length + this._get(inst, 'ampmPrefix').length);\r\n            var end = start + (inst._field != inst._ampmField ? 2 : this._get(inst, 'ampmNames')[0].length);\r\n            if (input.setSelectionRange) { // Mozilla\r\n                input.setSelectionRange(start, end);\r\n            }\r\n            else if (input.createTextRange) { // IE\r\n                var range = input.createTextRange();\r\n                range.moveStart('character', start);\r\n                range.moveEnd('character', end - inst.input.val().length);\r\n                range.select();\r\n            }\r\n            if (!input.disabled) {\r\n                input.focus();\r\n            }\r\n        },\r\n\r\n        /* Ensure displayed single number has a leading zero.\r\n        @param  value  (number) current value\r\n        @return  (string) number with at least two digits */\r\n        _formatNumber: function (inst, value) {\r\n            return ((value < 10 && this._get(inst, 'showZeroInHour')) ? '0' : '') + value;\r\n        },\r\n\r\n        /* Update the input field and notify listeners.\r\n        @param  inst   (object) the instance settings\r\n        @param  value  (string) the new value */\r\n        _setValue: function (inst, value, isNow) {\r\n            var isNow = isNow || false;\r\n            if (value != inst.input.val() || isNow) {\r\n                inst.input.val(value).trigger('change',isNow);\r\n            }\r\n        },\r\n\r\n        /* Move to previous/next field, or out of field altogether if appropriate.\r\n        @param  inst     (object) the instance settings\r\n        @param  offset   (number) the direction of change (-1, +1)\r\n        @param  moveOut  (boolean) true if can move out of the field\r\n        @return  (boolean) true if exitting the field, false if not */\r\n        _changeField: function (inst, offset, moveOut) {\r\n            var atFirstLast = (inst.input.val() == '' || inst._field ==\r\n\t\t\t(offset == -1 ? 0 : Math.max(1, inst._secondField, inst._ampmField)));\r\n            if (!atFirstLast) {\r\n                inst._field += offset;\r\n            }\r\n            this._showField(inst);\r\n            inst._lastChr = '';\r\n            $.data(inst.input[0], PROP_NAME, inst);\r\n            return (atFirstLast && moveOut);\r\n        },\r\n\r\n        /* Update the current field in the direction indicated.\r\n        @param  inst    (object) the instance settings\r\n        @param  offset  (number) the amount to change by */\r\n        _adjustField: function (inst, offset) {\r\n            if (inst.input.val() == '') {\r\n                offset = 0;\r\n            }\r\n            var timeSteps = this._get(inst, 'timeSteps');\r\n            this._setTime(inst, new Date(0, 0, 0,\r\n\t\t\tinst._selectedHour + (inst._field == 0 ? offset * timeSteps[0] : 0) +\r\n\t\t\t(inst._field == inst._ampmField ? offset * 12 : 0),\r\n\t\t\tinst._selectedMinute + (inst._field == 1 ? offset * timeSteps[1] : 0),\r\n\t\t\tinst._selectedSecond + (inst._field == inst._secondField ? offset * timeSteps[2] : 0)));\r\n        },\r\n\r\n        /* Check against minimum/maximum and display time.\r\n        @param  inst  (object) the instance settings\r\n        @param  time  (Date) an actual time or\r\n        (number) offset in seconds from now or\r\n        (string) units and periods of offsets from now */\r\n        _setTime: function (inst, time, isNow) {\r\n            var isNow = isNow || false;\r\n            time = this._determineTime(inst, time);\r\n            var fields = this._constrainTime(inst, time ?\r\n\t\t\t[time.getHours(), time.getMinutes(), time.getSeconds()] : null);\r\n            time = new Date(0, 0, 0, fields[0], fields[1], fields[2]);\r\n            // Normalise to base date\r\n            var time = this._normaliseTime(time);\r\n            var minTime = this._normaliseTime(this._determineTime(inst, this._get(inst, 'minTime')));\r\n            var maxTime = this._normaliseTime(this._determineTime(inst, this._get(inst, 'maxTime')));\r\n            // Ensure it is within the bounds set\r\n            time = (minTime && time < minTime ? minTime :\r\n\t\t\t(maxTime && time > maxTime ? maxTime : time));\r\n            var beforeSetTime = this._get(inst, 'beforeSetTime');\r\n            // Perform further restrictions if required\r\n            if (beforeSetTime) {\r\n                time = beforeSetTime.apply(inst.input[0],\r\n\t\t\t\t[this._getTimeTimeEntry(inst.input[0]), time, minTime, maxTime]);\r\n            }\r\n            inst._selectedHour = time.getHours();\r\n            inst._selectedMinute = time.getMinutes();\r\n            inst._selectedSecond = time.getSeconds();\r\n            this._showTime(inst, isNow);\r\n            $.data(inst.input[0], PROP_NAME, inst);\r\n        },\r\n\r\n        /* Normalise time object to a common date.\r\n        @param  time  (Date) the original time\r\n        @return  (Date) the normalised time */\r\n        _normaliseTime: function (time) {\r\n            if (!time) {\r\n                return null;\r\n            }\r\n            time.setFullYear(1900);\r\n            time.setMonth(0);\r\n            time.setDate(0);\r\n            return time;\r\n        },\r\n\r\n        /* A time may be specified as an exact value or a relative one.\r\n        @param  inst     (object) the instance settings\r\n        @param  setting  (Date) an actual time or\r\n        (number) offset in seconds from now or\r\n        (string) units and periods of offsets from now\r\n        @return  (Date) the calculated time */\r\n        _determineTime: function (inst, setting) {\r\n            var offsetNumeric = function (offset) { // E.g. +300, -2\r\n                var time = new Date();\r\n                time.setTime(time.getTime() + offset * 1000);\r\n                return time;\r\n            };\r\n            var offsetString = function (offset) { // E.g. '+2m', '-4h', '+3h +30m' or '12:34:56PM'\r\n                var fields = $.timeEntry._extractTime(inst, offset); // Actual time?\r\n                var time = new Date();\r\n                var hour = (fields ? fields[0] : time.getHours());\r\n                var minute = (fields ? fields[1] : time.getMinutes());\r\n                var second = (fields ? fields[2] : time.getSeconds());\r\n                if (!fields) {\r\n                    var pattern = /([+-]?[0-9]+)\\s*(s|S|m|M|h|H)?/g;\r\n                    var matches = pattern.exec(offset);\r\n                    while (matches) {\r\n                        switch (matches[2] || 's') {\r\n                            case 's': case 'S':\r\n                                second += parseInt(matches[1], 10); break;\r\n                            case 'm': case 'M':\r\n                                minute += parseInt(matches[1], 10); break;\r\n                            case 'h': case 'H':\r\n                                hour += parseInt(matches[1], 10); break;\r\n                        }\r\n                        matches = pattern.exec(offset);\r\n                    }\r\n                }\r\n                time = new Date(0, 0, 10, hour, minute, second, 0);\r\n                if (/^!/.test(offset)) { // No wrapping\r\n                    if (time.getDate() > 10) {\r\n                        time = new Date(0, 0, 10, 23, 59, 59);\r\n                    }\r\n                    else if (time.getDate() < 10) {\r\n                        time = new Date(0, 0, 10, 0, 0, 0);\r\n                    }\r\n                }\r\n                return time;\r\n            };\r\n            return (setting ? (typeof setting == 'string' ? offsetString(setting) :\r\n\t\t\t(typeof setting == 'number' ? offsetNumeric(setting) : setting)) : null);\r\n        },\r\n\r\n        /* Update time based on keystroke entered.\r\n        @param  inst  (object) the instance settings\r\n        @param  chr   (ch) the new character */\r\n        _handleKeyPress: function (inst, chr) {\r\n            if (chr == this._get(inst, 'separator')) {\r\n                this._changeField(inst, +1, false);\r\n            }\r\n            else if (chr >= '0' && chr <= '9') { // Allow direct entry of time\r\n                var key = parseInt(chr, 10);\r\n                var value = parseInt(inst._lastChr + chr, 10);\r\n                var show24Hours = this._get(inst, 'show24Hours');\r\n                var hour = (inst._field != 0 ? inst._selectedHour :\r\n\t\t\t\t(show24Hours ? (value < 24 ? value : key) :\r\n\t\t\t\t(value >= 1 && value <= 12 ? value :\r\n\t\t\t\t(key > 0 ? key : inst._selectedHour)) % 12 +\r\n\t\t\t\t(inst._selectedHour >= 12 ? 12 : 0)));\r\n                var minute = (inst._field != 1 ? inst._selectedMinute :\r\n\t\t\t\t(value < 60 ? value : key));\r\n                var second = (inst._field != inst._secondField ? inst._selectedSecond :\r\n\t\t\t\t(value < 60 ? value : key));\r\n                var fields = this._constrainTime(inst, [hour, minute, second]);\r\n                this._setTime(inst, new Date(0, 0, 0, fields[0], fields[1], fields[2]));\r\n                inst._lastChr = chr;\r\n            }\r\n            else if (!this._get(inst, 'show24Hours')) { // Set am/pm based on first char of names\r\n                chr = chr.toLowerCase();\r\n                var ampmNames = this._get(inst, 'ampmNames');\r\n                if ((chr == ampmNames[0].substring(0, 1).toLowerCase() &&\r\n\t\t\t\t\tinst._selectedHour >= 12) ||\r\n\t\t\t\t\t(chr == ampmNames[1].substring(0, 1).toLowerCase() &&\r\n\t\t\t\t\tinst._selectedHour < 12)) {\r\n                    var saveField = inst._field;\r\n                    inst._field = inst._ampmField;\r\n                    this._adjustField(inst, +1);\r\n                    inst._field = saveField;\r\n                    this._showField(inst);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    /* jQuery extend now ignores nulls!\r\n    @param  target  (object) the object to update\r\n    @param  props   (object) the new settings \r\n    @return  (object) the updated object */\r\n    function extendRemove(target, props) {\r\n        $.extend(target, props);\r\n        for (var name in props) {\r\n            if (props[name] == null) {\r\n                target[name] = null;\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n\r\n    // Commands that don't return a jQuery object\r\n    var getters = ['getOffset', 'getTime', 'isDisabled'];\r\n\r\n    /* Attach the time entry functionality to a jQuery selection.\r\n    @param  command  (string) the command to run (optional, default 'attach')\r\n    @param  options  (object) the new settings to use for these countdown instances (optional)\r\n    @return  (jQuery) for chaining further calls */\r\n    $.fn.timeEntry = function (options) {\r\n        var otherArgs = Array.prototype.slice.call(arguments, 1);\r\n        if (typeof options == 'string' && $.inArray(options, getters) > -1) {\r\n            return $.timeEntry['_' + options + 'TimeEntry'].apply($.timeEntry, [this[0]].concat(otherArgs));\r\n        }\r\n        return this.each(function () {\r\n            var nodeName = this.nodeName.toLowerCase();\r\n            if (nodeName == 'input') {\r\n                if (typeof options == 'string') {\r\n                    $.timeEntry['_' + options + 'TimeEntry'].apply($.timeEntry, [this].concat(otherArgs));\r\n                }\r\n                else {\r\n                    // Check for settings on the control itself\r\n                    // DiegoP\": Remove conflict with other plugins using metadata plugin\r\n                    //var inlineSettings = ($.fn.metadata ? $(this).metadata() : {});\r\n                    var inlineSettings = ($.fn.metadata ? $(this).metadata({ single: 'timePicker' }) : {});\r\n\r\n                    $.timeEntry._connectTimeEntry(this, $.extend(inlineSettings, options));\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    /* Initialise the time entry functionality. */\r\n    $.timeEntry = new TimeEntry(); // Singleton instance\r\n\r\n})(jQuery);\r\n","/*\r\n* jQuery UI Selectable @VERSION\r\n*\r\n* Copyright (c) 2009 AUTHORS.txt (http://ui.jquery.com/about)\r\n* Dual licensed under the MIT (MIT-LICENSE.txt)\r\n* and GPL (GPL-LICENSE.txt) licenses.\r\n*\r\n* http://docs.jquery.com/UI/Selectables\r\n*\r\n* Depends:\r\n*\tjquery.ui.core.js\r\n*\tjquery.ui.mouse.js\r\n*\tjquery.ui.widget.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.selectable2', $.ui.mouse, {\r\n\r\n        options: {\r\n            closest: true,\r\n            filter: '> *',            \r\n            keyboard: true,\r\n            multiple: true,            \r\n            lasso: {\r\n                cancel: \":input,option\",\r\n                delay: 0,\r\n                distance: 1,\r\n                tolerance: 'touch',\r\n                appendTo: 'body'\r\n            }\r\n        },\r\n\r\n        _init: function () {\r\n\r\n            var self = this;\r\n            this.items = $(this.options.filter, this.element);\r\n\r\n            this.element.addClass(\"ui-selectable ui-widget\");\r\n\r\n            //Set the currentFocus to the first item\r\n            this.currentFocus = this.items.eq(0).attr('tabindex', 0);\r\n\r\n            //Refresh item positions\r\n            this.refresh(1);\r\n\r\n            //Disable text selection\r\n            this.element.disableSelection();\r\n\r\n            //Prepare caret selection\r\n            if (this.options.lasso) {\r\n\r\n                // we need to move the lasso options onto the root options for the mouse class\r\n                if (this.options.lasso !== true) {\r\n                    $.extend(this.options, this.options.lasso);\r\n                }\r\n\r\n                this._mouseInit();\r\n            }\r\n\r\n            this.element\r\n\t\t\t\t.bind('mousedown.selectable', function (event) {\r\n\r\n\t\t\t\t    if (self.options.disabled)\r\n\t\t\t\t        return;\r\n\r\n\t\t\t\t    var item = self._targetIsItem(event.target);\r\n\t\t\t\t    if (!item) return;\r\n\r\n\t\t\t\t    // If item is part of current selection and current\r\n\t\t\t\t    // selection is multiple, return and allow mouseup\r\n\t\t\t\t    // to fire (Windows gets this right too, OSX doesn't)\r\n\t\t\t\t    if (self._selection.length > 1 && $(item).hasClass('ui-selected')) {\r\n\t\t\t\t        return (self._listenForMouseUp = 1);\r\n\t\t\t\t    }\r\n\r\n                    // Select the current item\r\n                    if (self._mouseSelect(event, item) === true)\r\n                        return true;\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.bind('mouseup.selectable', function (event) {\r\n\r\n\t\t\t\t    if (self._listenForMouseUp) {\r\n\t\t\t\t        self._listenForMouseUp = 0;\r\n\t\t\t\t        var item = self._targetIsItem(event.target);\r\n\t\t\t\t        if (item && self._mouseSelect(event, item) === true)\r\n\t\t\t\t            return true;\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.bind('focus.selectable', function () {\r\n\r\n\t\t\t\t    if (!self.options.disabled) self.currentFocus.addClass('ui-state-focus');\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.bind('blur.selectable', function () {\r\n\r\n\t\t\t\t    if (!self.options.disabled) self.currentFocus.removeClass('ui-state-focus');\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.bind('keydown.selectable', function (event) {\r\n\r\n\t\t\t\t    if (!self.options.keyboard || self.options.disabled || self._trigger('beforeselect', event) === false)\r\n\t\t\t\t        return true;\r\n\r\n\t\t\t\t    if (event.keyCode == $.ui.keyCode.DOWN) {\r\n\t\t\t\t        self.options.closest ? self.selectClosest('down', event) : self.next(event);\r\n\t\t\t\t        event.preventDefault();\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    if (event.keyCode == $.ui.keyCode.RIGHT) {\r\n\t\t\t\t        self.options.closest ? self.selectClosest('right', event) : self.next(event);\r\n\t\t\t\t        event.preventDefault();\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    if (event.keyCode == $.ui.keyCode.UP) {\r\n\t\t\t\t        self.options.closest ? self.selectClosest('up', event) : self.previous(event);\r\n\t\t\t\t        event.preventDefault();\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    if (event.keyCode == $.ui.keyCode.LEFT) {\r\n\t\t\t\t        self.options.closest ? self.selectClosest('left', event) : self.previous(event);\r\n\t\t\t\t        event.preventDefault();\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    if (event.ctrlKey || event.metaKey) {\r\n\r\n\t\t\t\t        if (event.keyCode == $.ui.keyCode.SPACE) {\r\n\t\t\t\t            self._toggleSelection(self.currentFocus, event);\r\n\t\t\t\t            event.preventDefault();\r\n\t\t\t\t        }\r\n\r\n\t\t\t\t        if (event.keyCode == 65) { // A is pressed, for select all\r\n\t\t\t\t            self.select('*');\r\n\t\t\t\t            event.preventDefault();\r\n\t\t\t\t        }\r\n\r\n\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t});\r\n\r\n            this.helper = $(document.createElement('div'))\r\n\t\t\t\t.addClass(\"ui-selectable-lasso\");\r\n\r\n        },\r\n\r\n        selectClosest: function (direction, event) {\r\n\r\n            var current = [/(down|right)/.test(direction) ? 10000 : -10000, null],\r\n\t\t\t\toverlap = 10000,\r\n\t\t\t\tselfOffset = this.currentFocus.data('selectable-item');\r\n\r\n            this.items.not(this.currentFocus).filter(':visible').each(function () {\r\n\r\n                var $this = $(this),\r\n\t\t\t\t\toffset = $this.data('selectable-item'),\r\n\t\t\t\t\tdistance = {\r\n\t\t\t\t\t    x: Math.abs(selfOffset.left - offset.left) + Math.abs((offset.left + this.offsetWidth) - (selfOffset.left + this.offsetWidth)),\r\n\t\t\t\t\t    y: Math.abs(selfOffset.top - offset.top) + Math.abs((offset.top + this.offsetHeight) - (selfOffset.top + this.offsetHeight))\r\n\t\t\t\t\t};\r\n\r\n                switch (direction) {\r\n\r\n                    case 'up':\r\n                        if ((selfOffset.top > offset.top && offset.top >= current[0]) && (offset.top != current[0] || distance.x < overlap)) {\r\n                            current = [offset.top, $this];\r\n                            overlap = distance.x;\r\n                        }\r\n                        break;\r\n\r\n                    case 'down':\r\n                        if ((selfOffset.top < offset.top && offset.top <= current[0]) && (offset.top != current[0] || distance.x < overlap)) {\r\n                            current = [offset.top, $this];\r\n                            overlap = distance.x;\r\n                        }\r\n                        break;\r\n\r\n                    case 'left':\r\n                        if ((selfOffset.left > offset.left && offset.left >= current[0]) && (offset.left != current[0] || distance.y < overlap)) {\r\n                            current = [offset.left, $this];\r\n                            overlap = distance.y;\r\n                        }\r\n                        break;\r\n\r\n                    case 'right':\r\n                        if ((selfOffset.left < offset.left && offset.left <= current[0]) && (offset.left != current[0] || distance.y < overlap)) {\r\n                            current = [offset.left, $this];\r\n                            overlap = distance.y;\r\n                        }\r\n                        break;\r\n\r\n                }\r\n\r\n            });\r\n\r\n            // if nothing close is found, bail\r\n            if (!current[1])\r\n                return false;\r\n\r\n            //We need to find the index of the current, and the index of the new one to call selectAdjacent\r\n            // - calling _select doesn't work, since it's only for mouse interaction (no ctrl focus move!)\r\n            var currentIndex = this.items.index(this.currentFocus[0]);\r\n            var newIndex = this.items.index(current[1]);\r\n\r\n            return this._selectAdjacent(event, newIndex - currentIndex);\r\n\r\n        },\r\n\r\n        destroy: function () {\r\n            this.items.removeClass(\"ui-selectable-item ui-selected ui-state-active\");\r\n            this.element\r\n\t\t\t\t.removeClass(\"ui-selectable ui-selectable-disabled ui-widget\")\r\n\t\t\t\t.removeData(\"selectable\")\r\n\t\t\t\t.unbind(\".selectable\");\r\n            this._mouseDestroy();\r\n            this._selection = [];\r\n            this._previousSelection = [];\r\n        },\r\n\r\n        _mouseCapture: function (event) {\r\n            //If the item we start dragging on is a selectable, we bail (if keyboard is used)\r\n            this.clickedOnItem = this._targetIsItem(event.target);\r\n            return true; // TODO: this starts the lasso on items as well - we might want to introduce an option to disable this\r\n        },\r\n\r\n        _mouseStart: function(event) {\r\n\r\n            var self = this, o = this.options;\r\n            this.opos = [event.pageX, event.pageY];\r\n\r\n            if (o.disabled)\r\n                return;\r\n\r\n            // cache positions\r\n            this.refresh(1);\r\n\r\n            // trigger start event\r\n            this._trigger(\"start\", event, this._uiHash());\r\n\r\n            // save the current selection as previous\r\n            this._previousSelection = this._selection.slice();\r\n\r\n            // append and position helper (lasso)\r\n            this.helper.appendTo('body').css({\r\n                zIndex: 100,\r\n                position: \"absolute\",\r\n                left: event.clientX,\r\n                top: event.clientY,\r\n                width: 0,\r\n                height: 0\r\n            });\r\n\r\n            // tell the intersection that some start selected\r\n            for (var i = this._selection.length - 1; i >= 0; i--) {\r\n                if (event.metaKey || event.ctrlKey) {\r\n                    if (this != self.clickedOnItem) $(this._selection[i]).data(\"selectable-item\").startSelected = true;\r\n                } else if (o.multiple) {\r\n                    self._removeFromSelection($(this._selection[i]), event);\r\n                }\r\n            };\r\n\r\n        },\r\n\r\n        _mouseDrag: function (event) {\r\n\r\n            var self = this, o = this.options;\r\n\r\n            if (o.disabled || !o.multiple)\r\n                return;\r\n\r\n            // do the lasso magic\r\n            var x1 = this.opos[0], y1 = this.opos[1], x2 = event.pageX, y2 = event.pageY;\r\n            if (x1 > x2) { var tmp = x2; x2 = x1; x1 = tmp; }\r\n            if (y1 > y2) { var tmp = y2; y2 = y1; y1 = tmp; }\r\n            this.helper.css({ left: x1, top: y1, width: x2 - x1, height: y2 - y1 });\r\n\r\n            // loop through all items and check overlaps\r\n            this.items.each(function () {\r\n\r\n                var item = $.data(this, \"selectable-item\");\r\n\r\n                //prevent helper from being selected if appendTo: selectable\r\n                if (!item || item.element == self.element[0])\r\n                    return;\r\n\r\n                var hit = false;\r\n                if (o.lasso && o.lasso.tolerance == 'touch') {\r\n                    hit = (!(item.left > x2 || item.right < x1 || item.top > y2 || item.bottom < y1));\r\n                } else if (o.lasso && o.lasso.tolerance == 'fit') {\r\n                    hit = (item.left > x1 && item.right < x2 && item.top > y1 && item.bottom < y2);\r\n                }\r\n\r\n\r\n                hit ?\r\n\t\t\t\t\titem.startSelected ? self._removeFromSelection($(this), event) : self._addToSelection($(this), event)\r\n\t\t\t\t: !item.startSelected ? self._removeFromSelection($(this), event) : self._addToSelection($(this), event);\r\n\r\n            });\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n        _mouseStop: function (event) {\r\n\r\n            var newlySelected = [];\r\n            var newlyDeselected = [];\r\n\r\n            // Find out the delta of the newly selected items\r\n            for (var i = 0; i < this._selection.length; i++) {\r\n                var wasAlreadyPartOfPreviousSelection = false;\r\n                for (var j = 0; j < this._previousSelection.length; j++) {\r\n                    if (this._selection[i][0] == this._previousSelection[j][0])\r\n                        wasAlreadyPartOfPreviousSelection = true;\r\n                };\r\n                if (!wasAlreadyPartOfPreviousSelection) newlySelected.push(this._selection[i]);\r\n            };\r\n\r\n            // Find out the delta of the newly unselected items\r\n            for (var i = this._previousSelection.length - 1; i >= 0; i--) {\r\n                if (!this._previousSelection[i].data('selectable-item').selected) newlyDeselected.push(this._previousSelection[i]);\r\n            };\r\n\r\n\r\n            // Transform both deltas into jQuery objects\r\n            newlySelected = $($.map(newlySelected, function (i) { return i[0]; }));\r\n            newlyDeselected = $($.map(newlyDeselected, function (i) { return i[0]; }));\r\n\r\n            var uiHash = $.extend(this._uiHash(), {\r\n                added: newlySelected || [],\r\n                removed: newlyDeselected || []\r\n            });\r\n            this._trigger(\"stop\", event, uiHash);\r\n\r\n            // Trigger change event if anything has changed\r\n            if ((newlySelected && newlySelected.length) || (newlyDeselected && newlyDeselected.length)) {\r\n                this._trigger('change', event, uiHash);\r\n            }\r\n\r\n            this.helper.remove();\r\n            return false;\r\n        },\r\n\r\n        _mouseSelect: function (event, item) {\r\n\r\n            if (this._trigger('beforeselect', event) === false)\r\n                return true;\r\n\r\n            this._select(event, item);\r\n            this.element[0].focus();\r\n            event.preventDefault();\r\n\r\n        },\r\n\r\n        _targetIsItem: function (item) {\r\n            var found = $(item).parents().addBack().filter(':data(selectable-item)');\r\n            return found.length && found;\r\n        },\r\n\r\n        _selection: [],\r\n\r\n        _endSelection: function (event, newlySelected) {\r\n\r\n            //Only trigger the 'deselect' event if items have been removed from the selection\r\n            var newlyDeselected = this._triggerDeselection(event);\r\n\r\n            //Only trigger 'select' event if items have been added to the selection\r\n            if (newlySelected && newlySelected.length)\r\n                this._trigger('select', event, this._uiHash(newlySelected, 'added'));\r\n\r\n            // Trigger change event if anything has changed\r\n            if ((newlySelected && newlySelected.length) || (newlyDeselected && newlyDeselected.length)) {\r\n                var uiHash = $.extend(this._uiHash(), {\r\n                    added: newlySelected || [],\r\n                    removed: newlyDeselected || []\r\n                });\r\n                this._trigger('change', event, uiHash);\r\n            }\r\n\r\n        },\r\n\r\n        _triggerDeselection: function (event) {\r\n\r\n            var triggerItems = [];\r\n\r\n            for (var i = this._previousSelection.length - 1; i >= 0; i--) {\r\n                var data = this._previousSelection[i].data('selectable-item');\r\n                if (!data || !data.selected) triggerItems.push(this._previousSelection[i]);\r\n            };\r\n\r\n            this._previousSelection = [];\r\n            triggerItems = $($.map(triggerItems, function (i) { return i[0]; }));\r\n            if (triggerItems.length) this._trigger('deselect', event, this._uiHash(triggerItems, 'removed'));\r\n\r\n            return triggerItems;\r\n\r\n        },\r\n\r\n        _clearSelection: function (triggerEvent) {\r\n\r\n            var triggerItems = [];\r\n\r\n            for (var i = this._selection.length - 1; i >= 0; i--) {\r\n                if (triggerEvent && this._selection[i].data('selectable-item').selected) triggerItems.push(this._selection[i]);\r\n                this._selection[i].removeClass('ui-selected ui-state-active');\r\n                this._selection[i].data('selectable-item').selected = false;\r\n            };\r\n\r\n            this._previousSelection = this._selection.slice();\r\n            this._selection = [];\r\n            if (triggerEvent && triggerItems.length) this._trigger('deselect', triggerEvent, this._uiHash($($.map(triggerItems, function (i) { return i[0]; })), 'removed'));\r\n\r\n        },\r\n\r\n        _toggleSelection: function (item, event) {\r\n            var selected = item.data('selectable-item').selected;\r\n            selected ? this._removeFromSelection(item, event) : this._addToSelection(item);\r\n            return !selected;\r\n        },\r\n\r\n        _addToSelection: function (item, triggerEvent) {\r\n\r\n            if (!item.data('selectable-item') || item.data('selectable-item').selected)\r\n                return null;\r\n\r\n            this._selection.push(item);\r\n            this.latestSelection = item;\r\n            item.addClass('ui-selected ui-state-active');\r\n            item.data('selectable-item').selected = true;\r\n\r\n            if (triggerEvent) {\r\n                this._trigger('select', triggerEvent, $.extend({ lasso: true }, this._uiHash(item)));\r\n            }\r\n\r\n            return item;\r\n\r\n        },\r\n\r\n        _removeFromSelection: function (item, triggerEvent) {\r\n\r\n            for (var i = 0; i < this._selection.length; i++) {\r\n                if (this._selection[i][0] == item[0]) {\r\n                    this._selection[i].removeClass('ui-selected ui-state-active');\r\n                    this._selection[i].data('selectable-item').selected = false;\r\n                    this._selection.splice(i, 1);\r\n                    if (triggerEvent) this._trigger('deselect', triggerEvent, this._uiHash($(item), 'removed'));\r\n                    break;\r\n                }\r\n            };\r\n\r\n        },\r\n\r\n        _updateSelectionMouse: function (event) {            \r\n            var newlySelected = [];\r\n\r\n            this.updateEvents(event);\r\n\r\n            if (event && event.shiftKey) {\r\n\r\n                //Clear the previous selection to make room for a shift selection\r\n                this._clearSelection();\r\n\r\n                var index = this.items.index(this.latestWithoutModifier[0]) > this.items.index(this.currentFocus[0]) ? -1 : 1;\r\n                var i = this.latestWithoutModifier.data('selectable-item').selected ? this.items.eq(this.items.index(this.latestWithoutModifier[0]) + index) : this.latestWithoutModifier;\r\n                while (i.length && i[0] != this.currentFocus[0]) {\r\n                    i[0] == this.previousFocus[0] ? this._addToSelection(i) : newlySelected.push(this._addToSelection(i));\r\n                    i = this.items.eq(this.items.index(i[0]) + index);\r\n                }\r\n\r\n                //Readd the item with the current focus\r\n                newlySelected.push(this._addToSelection(this.currentFocus));\r\n\r\n            } else {\r\n\r\n                if (event && (event.metaKey || event.ctrlKey)) {\r\n                    var withMetaIsNewlySelected = this._toggleSelection(this.currentFocus, event);\r\n                    if (withMetaIsNewlySelected) newlySelected.push(this.currentFocus);\r\n                } else {\r\n                    this._clearSelection();\r\n                    newlySelected.push(this._addToSelection(this.currentFocus));\r\n                    this.latestWithoutModifier = this.currentFocus;\r\n                }\r\n\r\n            }\r\n\r\n            return $($.map(newlySelected, function (i) { return i[0]; }));\r\n\r\n        },\r\n\r\n        _updateSelection: function (event, index) {\r\n            var newlySelected = [];\r\n\r\n            this.updateEvents(event);            \r\n\r\n            if (event && event.shiftKey) {\r\n\r\n                if (this.currentFocus.data('selectable-item').selected) {\r\n                    this._removeFromSelection(this.previousFocus, event);\r\n                } else {\r\n\r\n                    var index2 = this.items.index(this.latestSelection[0]) > this.items.index(this.currentFocus[0]) ? 1 : -1;\r\n                    if (!this.previousFocus.data('selectable-item').selected) {\r\n                        var i = index == index2 ? this.items.eq(this.items.index(this.previousFocus[0]) + index2) : this.previousFocus;\r\n                        while (i.length && !i.data('selectable-item').selected) {\r\n                            newlySelected.push(this._addToSelection(i));\r\n                            i = this.items.eq(this.items.index(i[0]) + index2);\r\n                        }\r\n                    }\r\n\r\n                    newlySelected.push(this._addToSelection(this.currentFocus));\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                //If the CTRL or Apple/Win key is pressed, only set focus\r\n                if (event && (event.metaKey || event.ctrlKey))\r\n                    return;\r\n\r\n                this._clearSelection(event);\r\n                newlySelected.push(this._addToSelection(this.currentFocus));\r\n                this.latestWithoutModifier = this.currentFocus;\r\n\r\n            }\r\n\r\n            return $($.map(newlySelected, function (i) { if (i) return i[0]; }));\r\n\r\n        },\r\n\r\n        _select: function (event, item) {\r\n\r\n            //Set the current selection to the previous/next item\r\n            this.previousFocus = this.currentFocus.attr('tabindex', -1);\r\n            this.currentFocus = $(item).attr('tabindex', 0);\r\n\r\n            this.previousFocus.removeClass('ui-state-focus');\r\n            this.currentFocus.addClass('ui-state-focus');\r\n\r\n            //Set and update the selection\r\n            var newlySelected = this._updateSelectionMouse(event);\r\n\r\n            // Ending the selection does a diff and then triggers appropriate events\r\n            this._endSelection(event, newlySelected);\r\n\r\n        },\r\n\r\n        _selectAdjacent: function (event, index) {\r\n\r\n            var item = this.items.eq(this.items.index(this.currentFocus[0]) + index);\r\n\r\n            //Bail if there's no previous/next item\r\n            if (!item.length) return;\r\n\r\n            //Set the current selection to the previous/next item\r\n            this.previousFocus = this.currentFocus.attr('tabindex', -1);\r\n            this.currentFocus = item.attr('tabindex', 0);\r\n\r\n            this.previousFocus.removeClass('ui-state-focus');\r\n            this.currentFocus.addClass('ui-state-focus');\r\n\r\n            //Set and update the selection\r\n            this._previousSelection = this._selection.slice();\r\n            var newlySelected = this._updateSelection(event, index);\r\n\r\n            // Ending the selection does a diff and then triggers appropriate events\r\n            this._endSelection(event, newlySelected);\r\n\r\n        },\r\n\r\n        previous: function (event) {\r\n            this._selectAdjacent(event, -1);\r\n        },\r\n\r\n        next: function (event) {\r\n            this._selectAdjacent(event, 1);\r\n        },\r\n\r\n        refresh: function (fromInside) {\r\n\r\n            var o = this.options, self = this;\r\n            this.items = $(o.filter, this.element);\r\n            this.items.addClass('ui-selectable-item');\r\n            this.items.each(function () {\r\n\r\n                var $this = $(this);\r\n                var pos = $this.offset();\r\n\r\n                if (self.currentFocus && self.currentFocus[0] != this)\r\n                    $this.attr('tabindex', -1);\r\n\r\n                $.data(this, \"selectable-item\", {\r\n                    left: pos.left,\r\n                    top: pos.top,\r\n                    right: pos.left + $this.width(),\r\n                    bottom: pos.top + $this.height(),\r\n                    startSelected: false,\r\n                    selected: $this.hasClass('ui-selected')\r\n                });\r\n            });\r\n\r\n\r\n            if (!fromInside) {\r\n                this._previousSelection = this._selection.slice();\r\n                this._selection = [];\r\n                for (var i = 0; i < this._previousSelection.length; i++) {\r\n                    if (this._previousSelection[i][0].parentNode) this._selection.push(this._previousSelection[i]);\r\n                };\r\n\r\n                this._endSelection();\r\n            }\r\n\r\n        },\r\n\r\n        select: function (item) {\r\n\r\n            item = !isNaN(parseInt(item)) ? this.items.eq(item) : $(item, this.element);\r\n            if (!item.length) return;\r\n\r\n            // clear the current selection\r\n            this._clearSelection();\r\n\r\n            // select all found\r\n            var newlySelected = [], self = this;\r\n            item.each(function (i) {\r\n                if (i == 0) { //Setting the focus on the first item in the list\r\n                    self.previousFocus = self.currentFocus.attr('tabindex', -1);\r\n                    self.currentFocus = $(this).attr('tabindex', 0);\r\n                    self.previousFocus.removeClass('ui-state-focus');\r\n                    self.currentFocus.addClass('ui-state-focus');\r\n                }\r\n                newlySelected.push(self._addToSelection($(this)));\r\n            });\r\n\r\n            // Ending the selection does a diff and then triggers appropriate events\r\n            this._endSelection(window.event, $($.map(newlySelected, function (i) { return i ? i[0] : false; })));\r\n\r\n        },\r\n\r\n        deselect: function (item) {\r\n\r\n            // if no item was specified, deselect all\r\n            if (!item)\r\n                this._clearSelection(true);\r\n\r\n            item = !isNaN(parseInt(item)) ? this.items.eq(item) : $(item, this.element);\r\n            if (!item.length) return;\r\n\r\n            //store the current selection\r\n            this._previousSelection = this._selection.slice();\r\n\r\n            // deselect all found\r\n            var self = this;\r\n            item.each(function () {\r\n                self._removeFromSelection($(this));\r\n            });\r\n\r\n            // Ending the selection does a diff and then triggers appropriate events\r\n            this._endSelection(event);\r\n\r\n        },\r\n\r\n        _uiHash: function (items, specialKey) {\r\n            var uiHash = {\r\n                previousFocus: this.previousFocus,\r\n                currentFocus: this.currentFocus,\r\n                selection: $($.map(this._selection, function (i) { return i[0]; }))\r\n            };\r\n            if (specialKey) uiHash[specialKey] = items;\r\n            return uiHash;\r\n        },\r\n\r\n        updateEvents: function(event) {\r\n            var o = this.options;\r\n\r\n            event.shiftKey = o.multiple ? event.shiftKey : false;\r\n            event.metaKey = o.multiple ? event.metaKey : false;\r\n            event.ctrlKey = o.multiple ? event.ctrlKey : false;\r\n        }\r\n\r\n    });\r\n\r\n})(jQuery);\r\n","/*\r\n* jQuery UI Option @VERSION\r\n* Author: Diego Parra\r\n* Based on http://www.filamentgroup.com/lab/accessible_custom_designed_checkbox_radio_button_inputs_styled_css_jquery/ plugin\r\n* Copyright (c) 2010 (http://www.bizagi.com)\r\n*\r\n* Depends:\r\n*  ui.core.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.optiongroup', {\r\n        _create: function () {\r\n            var self = this,\r\n                    element = this.element,\r\n                    options = self.options;\r\n\r\n            // Find all inputs in this set \r\n            var allInputs = $('input[type=radio]', element);\r\n\r\n            // Skin each element\r\n            $(\"label\", element).each(function (i) {\r\n                // Get the associated label using the input's id\r\n                var label = $(this);\r\n                var text = label.text();\r\n                var input = $(\"input[type=radio]\", label);\r\n\r\n                if (label.attr(\"for\") != input.attr(\"id\")) {\r\n                    alert(\"label and input element are not related in label:\" + label.attr(\"id\"));\r\n                    return;\r\n                }\r\n\r\n                // Wrap the input + label in a div \r\n                input.detach();\r\n                (self.options.orientation == \"rtl\") ? label.wrap('<div class=\"ui-radio ui-bizagi-rtl\"></div>') : label.wrap('<div class=\"ui-radio\"></div>');\r\n                // Wrap the input + label in a div \r\n                (self.options.orientation == \"rtl\") ? input.insertAfter(label) : input.insertBefore(label);\r\n                label.text(text);\r\n\r\n                // Necessary for browsers that don't support the :hover pseudo class on labels\r\n                label.hover(\r\n\t\t\t        function () {\r\n\t\t\t            $(this).addClass('ui-radio-state-hover');\r\n\t\t\t        },\r\n\t\t\t        function () {\r\n\t\t\t            $(this).removeClass('ui-radio-state-hover');\r\n\t\t\t        }\r\n\t\t        ).click(function(){\r\n\t\t            var checked = input.prop(\"checked\");\r\n\t\t            input.prop(\"checked\", !checked);\r\n\t\t            !checked ? input.attr(\"checked\", \"checked\") : input.removeAttr(\"checked\");\r\n\t\t            // Alignment fix on Click\r\n\t\t            if (bizagi.util.isIE()) window.setTimeout(function () {\r\n\t\t                label.css(\"display\", \"inline-block\");\r\n\t\t                $(\".ui-bizagi-rtl table .ui-bizagi-render-boolean-yesno .ui-radio input\").css(\"height\", \"1px\");\r\n\t\t            }, 0);\r\n\t\t        });\r\n\r\n                // Bind custom event, trigger it, bind click,focus,blur events\t\t\t\t\t\r\n                input.bind('update', function () {\r\n                    if ($(this).is(':checked')) {\r\n                        allInputs.each(function () {\r\n                            // Remove class from each label\r\n                            var next = (self.options.orientation == \"rtl\") ? $(this).prev() : $(this).next();\r\n                            next.removeClass('ui-radio-state-checked');\r\n                        });\r\n\r\n                        label.addClass('ui-radio-state-checked');\r\n\r\n                    } else {\r\n                        label.removeClass('ui-radio-state-checked ui-radio-state-hover ui-radio-state-highlight');\r\n                    }\r\n\r\n                    if ($(this).is(':checked')) {\r\n                        // Trigger change event\r\n                        self._trigger(\"change\", window.event, { value: $(this).val(), text: label.text() });\r\n                    }\r\n                })\r\n\t\t        .trigger('update')\r\n\t\t        .click(function () {\r\n\t\t            $(this).trigger('update');\r\n\t\t            // Alignment fix on Click\r\n\t\t            if (bizagi.util.isIE()) window.setTimeout(function () {\r\n\t\t                label.css(\"display\", \"inline-block\");\r\n\t\t                $(\".ui-bizagi-rtl table .ui-bizagi-render-boolean-yesno .ui-radio input\").css(\"height\", \"1px\");\r\n\t\t            }, 0);\r\n\t\t        })\r\n\t\t        .focus(function () {\r\n\t\t            //label.addClass('ui-radio-state-highlight');TODO: revisar una mejor manera de marcar el foco en el control\r\n\t\t        })\r\n\t\t        .blur(function () {\r\n\t\t            //label.removeClass('ui-radio-state-highlight');TODO: revisar una mejor manera de marcar el foco en el control\r\n\t\t        });\r\n            });\r\n        },\r\n\r\n        setValue: function (value) {\r\n            var self = this,\r\n                    element = this.element,\r\n                    options = self.options;\r\n\r\n            // Find all inputs in this set \r\n            var allInputs = $('input[type=radio]', element);\r\n\r\n            $.each(allInputs, function (i) {\r\n                var option = $(this);\r\n                if (option.val() == value) {\r\n                    option.prop(\"checked\", true);\r\n                    option.attr(\"checked\", \"checked\");\r\n                    option.trigger(\"update\");\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    $.extend($.ui.optionGroup, {\r\n        version: \"@VERSION\",\r\n        eventPrefix: \"optiongroup\"\r\n    });\r\n\r\n})(jQuery);","/*\r\n *   Name: \r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This widget will implement a custom grid for bizagi rendering module\r\n *\r\n *   Markup: <div></div>\r\n *\r\n *   Styles:\r\n *   - Desktop: css/bizagi/desktop/controls/bizagi.grid.css\r\n *   - Tablet: css/bizagi/tablet/controls/bizagi.grid.css\r\n */\r\n\r\n// TODO: Create templates\r\n\r\n(function ($) {\r\n    $.widget(\"ui.bizagi_grid\", {\r\n        options: {\r\n            id: \"no-id\",\r\n            columns: [],\r\n            sortBy: \"\",\r\n            sortType: \"asc\",\r\n            showSummary: false,\r\n            collapse: false,\r\n            collapseState: false,\r\n            data: {},\r\n            indexedData: {},\r\n            maxColumns: 0,\r\n            buttonsPst: false,\r\n            title: '',\r\n            tableCssClass: '', // Style for entire table              \r\n            headerStyles: '',\r\n            floatingHeader: false,\r\n            template: {\r\n                grid: \"\",\r\n                waiting: \"\",\r\n                table: \"\",\r\n                emptyTable: \"\",\r\n                column: \"\",\r\n                specialColumn: \"\",\r\n                row: \"\",\r\n                rowButtons: \"\",\r\n                cell: \"\",\r\n                specialCell: \"\",\r\n                pager: \"\",\r\n                buttons: \"\",\r\n                dynamicPager: \"\",\r\n                summary: \"\",\r\n                summaryCell: \"\"\r\n            },\r\n            actions: {\r\n                add: true,\r\n                edit: true,\r\n                remove: true,\r\n                details: true,\r\n                allowMore: false,\r\n                enableXlsExport: false,\r\n                enablePdfExport: false\r\n            },\r\n            mode: \"execution\"\r\n        },\r\n        /*\r\n        *   Constructor\r\n        */\r\n        _init: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var element = self.element;\r\n\r\n            // Set object variables\r\n            self.page = 1;\r\n            self.changes = {};\r\n            self.totalRows = 0;\r\n            self.totalPages = 0;\r\n            self.data = options.data;\r\n            self.selectedRow = 0;\r\n            self.components = {};\r\n            self.buttons = {};\r\n            self.asyncCells = {};\r\n            self.scrollableArea = options.scrollableArea || self;\r\n\r\n            // Build column indexes\r\n            self.columnByIndex = {};\r\n            self.columnByName = {};\r\n            self.columnKeyIndex = 0;\r\n            $.each(options.columns, function (i, column) {\r\n                // Fix non-present properties\r\n                column.key = typeof (column.key) !== \"undefined\" ? column.key : false;\r\n                column.label = typeof (column.label) !== \"undefined\" ? column.label : column.name;\r\n                column.sortType = \"asc\";\r\n                column.tooltip = typeof (column.tooltip) !== \"undefined\" ? column.tooltip : \"\";\r\n\r\n                // Index the column\r\n                self.columnByIndex[column.index] = column;\r\n                self.columnByName[column.name] = column;\r\n                if (column.key) {\r\n                    self.columnKeyIndex = column.index;\r\n                }\r\n            });\r\n\r\n            // Set sort options\r\n            options.sortBy = options.sortBy || self.columnByIndex[0].name;\r\n            if (self.columnByName[options.sortBy]) {\r\n                self.columnByName[options.sortBy].sortType = options.sortType;\r\n            } else {\r\n                if (self.columnByName[options.sortBy.split(\".\")[0]]) {\r\n                    self.columnByName[options.sortBy.split(\".\")[0]].sortType = options.sortType;\r\n                }\r\n            }\r\n\r\n            // Add base classes\r\n            element.addClass(\"ui-bizagi-grid-wrapper\");\r\n            element.attr(\"data-bizagi-id\", options.id);\r\n\r\n            // Calculate\r\n            self.calculateKeyIndex();\r\n\r\n            //collapse state\r\n            self.collapseState = options.collapseState;\r\n\r\n            // Start waiting signal \r\n            self.startLoading(false);\r\n        },\r\n        /*\r\n        *   Method to start loading for ajax data and update the ui\r\n        */\r\n        startLoading: function (bUseTimeout) {\r\n            var self = this;\r\n            bUseTimeout = typeof (bUseTimeout) !== \"undefined\" ? bUseTimeout : true;\r\n\r\n            if (self.options.mode !== \"execution\" || typeof self.options.sortBy === \"undefined\") {\r\n                return;\r\n            }\r\n\r\n            // Draw the waiting template when the endLoading delays more than 250ms\r\n            var waitingFn = function () {\r\n                var element = self.element;\r\n                var options = self.options;\r\n\r\n                // Set null to timeout\r\n                self.waitingTimeout = null;\r\n\r\n                element.append($.fasttmpl(options.template.waiting));\r\n            };\r\n\r\n            if (bUseTimeout) {\r\n                self.waitingTimeout = setTimeout(waitingFn, 250);\r\n            } else {\r\n                waitingFn();\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Method to remove the loading message\r\n        */\r\n        endLoading: function () {\r\n            var self = this;\r\n            var element = self.element;\r\n\r\n            // Remove waiting timeout\r\n            if (self.waitingTimeout) {\r\n                clearTimeout(self.waitingTimeout);\r\n                self.waitingTimeout = null;\r\n            }\r\n\r\n            // Remove everything\r\n            element.empty();\r\n        },\r\n\r\n        /*\r\n        *   This method updates the data and refreshes the grid\r\n        */\r\n        setData: function (data) {\r\n            var self = this;\r\n\r\n            // Set internal data\r\n            self.data = data;\r\n            self.calculateKeyIndex();\r\n\r\n            // Call refresh\r\n            self.refresh();\r\n        },\r\n        /*\r\n        *   This method retrieves the actual data from the grid\r\n        */\r\n        getData: function () {\r\n            var self = this;\r\n\r\n            // Return internal data\r\n            return self.data;\r\n        },\r\n\r\n        /*\r\n        *   Calculate key index\r\n        */\r\n        calculateKeyIndex: function () {\r\n            var self = this;\r\n            var columns = self.options.columns;\r\n            var data = self.data;\r\n\r\n            indexedData = {};\r\n\r\n            if (data.rows) {\r\n                $.each(data.rows, function (i, row) {\r\n                    var key;\r\n                    var row\r\n                    $.each(columns, function (j, column) {\r\n                        if (column.key) key = row[j];\r\n                    });\r\n                    indexedData[key] = row;\r\n                });\r\n            }\r\n            self.indexedData = indexedData;\r\n        },\r\n\r\n        /*\r\n        *   This method retrieves the changes made by the user\r\n        */\r\n        getChanges: function () {\r\n        },\r\n\r\n        /*\r\n        *   This method refreshes the grid\r\n        */\r\n        refresh: function () {\r\n            var self = this;\r\n\r\n            // Cleans components\r\n            self._cleanComponents();\r\n            self._cleanButtons();\r\n\r\n            // Call the draw method\r\n            self.components = {};\r\n            self.draw();\r\n        },\r\n\r\n        /*\r\n        *   This method refreshes only the summary\r\n        */\r\n        refreshSummary: function (columnIndex) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var summary = self._getComponent(\"summary\");\r\n\r\n            // Do nothing if the component is drawing or there is no summary\r\n            if (self.drawing) return;\r\n            if (!summary) return;\r\n\r\n            // Resolve summary\r\n            if (options.showSummary) {\r\n\r\n                if (columnIndex) {\r\n                    // Refresh an specific summary\r\n                    self.refreshSummaryCell(columnIndex);\r\n\r\n                } else {\r\n                    // Clean and re-draw summary\r\n                    summary.empty();\r\n                    summary.append(self.drawSummary());\r\n\r\n                    // Execute post-render\r\n                    self.postRenderSummary(summary);\r\n                }\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Refresh a single summary cell\r\n        */\r\n        refreshSummaryCell: function (columnIndex) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var summary = self._getComponent(\"summary\");\r\n            var getCell = function (summary, columnIndex) {\r\n                var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\r\n                return $(cells[columnIndex]);\r\n            };\r\n            var cell = getCell(summary, columnIndex);\r\n\r\n            // Omit index key\r\n            var column = self.columnByIndex[columnIndex];\r\n            if (column.key) return; // Omit key column\r\n\r\n            // Clean and Execute render\r\n            var html = self.drawSummaryCell(column);\r\n            cell.replaceWith(html);\r\n\r\n            // Recalculate cell\r\n            cell = getCell(summary, columnIndex);\r\n\r\n            // Execute post-render\r\n            self.onCellReady(column, \"summary\", cell, false);\r\n        },\r\n\r\n        /*\r\n        *   This method changes a cell value in the grid\r\n        */\r\n        changeCellValue: function (key, columnIndex, value) {\r\n            var self = this;\r\n            if (self.indexedData[key]) {\r\n                self.indexedData[key][columnIndex] = value;\r\n            }\r\n        },\r\n\r\n        deleteCellExclusiveValues: function(columnIndex) {\r\n            var self = this;\r\n            if (self.indexedData) {\r\n                $.each(self.indexedData, function (key) {\r\n                    self.indexedData[key][columnIndex] = false;\r\n                });\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   This method draws the full grid associated with the data\r\n        */\r\n        draw: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var element = self.element;\r\n\r\n            // Start global drawing flag\r\n            self.drawing = true;\r\n\r\n            // Ends waiting signal\r\n            self.endLoading();\r\n\r\n            if (options.orientation === \"rtl\") {\r\n\r\n                // Resolve grid template\r\n                var html = $.fasttmpl(options.template.gridRtl, {\r\n                    label: options.title,\r\n                    buttonsPst: options.buttonsPst,\r\n                    collapse: options.collapse,\r\n                    collapseState: self.collapseState,\r\n                    isDesign: (options.mode === \"design\")\r\n                });\r\n\r\n            } else {\r\n                // Resolve grid template\r\n                var html = $.fasttmpl(options.template.grid, {\r\n                    label: options.title,\r\n                    buttonsPst: options.buttonsPst,\r\n                    collapse: options.collapse,\r\n                    collapseState: self.collapseState,\r\n                    isDesign: (options.mode === \"design\")\r\n                });\r\n            }\r\n\r\n            // Call sub-drawers\r\n            html = self.drawTable(html);\r\n            self.grid = $(html).appendTo(element);\r\n\r\n            // Post render the grid\r\n            self.postRender(self.grid);\r\n\r\n            if (options.mode !== \"design\") {\r\n                // Attach paginator desktop\r\n                self.attachPaginator();\r\n\r\n                // Attach handlers\r\n                self.attachHandlers();\r\n            }\r\n\r\n            if (options.mode === \"execution\" && options.floatingHeader) {\r\n                var $tableContainer = self._getComponent(\"table\");\r\n                var $table = $(\"table\", $tableContainer);\r\n                var offset = parseInt($(self.scrollableArea).css(\"padding-top\").replace(/[^\\d.]/g, '')) || 0;\r\n\r\n                $table.stickyTableHeaders({\r\n                    fixedOffset: offset > 0 ? offset - 1 : offset,\r\n                    scrollableArea: self.scrollableArea,\r\n                    zIndex: 1000,\r\n                    cacheHeaderHeight: true\r\n                });\r\n                $tableContainer.bind(\"scroll\", function () {\r\n                    $table.trigger(\"resize.stickyTableHeaders\");\r\n                });\r\n            }\r\n\r\n            // Toggle visibility depending from row count\r\n            if (self.data.rows.length === 0) {\r\n                self._getComponent(\"table\").hide();\r\n                self._getComponent(\"pager\").hide();\r\n                self._getButton(\"remove\").hide();\r\n                self._getButton(\"edit\").hide();\r\n                self._getComponent(\"dynamicPager\").hide();\r\n                self._getComponent(\"emptyTable\").show();\r\n\r\n            } else {\r\n                self._getComponent(\"table\").show();\r\n                self._getButton(\"remove\").show();\r\n                self._getButton(\"edit\").show();\r\n                self._getComponent(\"emptyTable\").hide();\r\n\r\n                if (options.actions.allowMore) {\r\n                    self._getComponent(\"dynamicPager\").show();\r\n                    self._getComponent(\"pager\").hide();\r\n                } else {\r\n                    self._getComponent(\"pager\").show();\r\n                    self._getComponent(\"dynamicPager\").hide();\r\n                }\r\n\r\n                if (options.actions.edit) {\r\n                    self._getButton(\"edit\").show();\r\n                }\r\n\r\n                if (options.actions.enableXlsExport || options.actions.enablePdfExport) {\r\n                    self._getButton('show-grid-export-options').show();\r\n                } else {\r\n                    self._getButton('show-grid-export-options').css('display', 'none');\r\n                }\r\n\r\n            }          \r\n\r\n            // End global drawing flag\r\n            self.drawing = false;\r\n        },\r\n\r\n        attachPaginator: function () {\r\n        },\r\n\r\n        /*\r\n        *   This method draws the table associated with the data\r\n        */\r\n        drawTable: function (html) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve table template\r\n            var table = $.fasttmpl(options.template.table, {\r\n                showSummary: options.showSummary,\r\n                tableCssClass: options.tableCssClass\r\n            });\r\n            var emptyTable = $.fasttmpl(options.template.emptyTable);\r\n\r\n            // Resolve header\r\n            table = self._replaceElement(table, \"columns\", self.drawHeader());\r\n\r\n            // Resolve body\r\n            table = self._replaceElement(table, \"rows\", self.drawBody());\r\n\r\n            // Resolve summary\r\n            if (options.showSummary) {\r\n                table = self._replaceElement(table, \"summary\", self.drawSummary());\r\n            }\r\n\r\n            // Resolve pager\r\n            html = self._replaceElement(html, \"pager\", self.drawPager());\r\n\r\n            // Resolve buttons\r\n            html = self._replaceElement(html, \"buttons\", self.drawButtons());\r\n\r\n            //Resolve export options menu\r\n            html = self._replaceElement(html, \"gridExportOptions\", self.drawGridExportOptions());\r\n\r\n            // Resolve row buttons\r\n            html = self._replaceElement(html, \"rowButtons\", self.drawRowButtons());\r\n\r\n            // Resolve dynamic Pager\r\n            html = self._replaceElement(html, \"dynamicPager\", self.drawDynamicPager());\r\n\r\n            // Perform grid replaces\r\n            html = self._replaceElement(html, \"table\", table);\r\n            html = self._replaceElement(html, \"emptyTable\", emptyTable);\r\n            return html;\r\n        },\r\n        /*\r\n        * Find if a column has a exact match for sort it\r\n        */\r\n        isExactMatch: function () {\r\n            var self = this;\r\n            var columns = self.options.columns;\r\n            var sortBy = self.options.sortBy;\r\n            var i = 0, length = columns.length;\r\n            for (; i < length;) {\r\n                if (sortBy == columns[i++].name) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the grid header\r\n        */\r\n        drawHeader: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve columns\r\n            var columns = \"\";\r\n\r\n            self.exactMatch = self.isExactMatch();\r\n\r\n            $.each(options.columns, function (i, column) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i <= self.options.maxColumns) {\r\n                        // Draw normal column\r\n                        columns += self.drawColumn(column);\r\n                    }\r\n                } else {\r\n                    // Draw normal column\r\n                    columns += self.drawColumn(column);\r\n                }\r\n            });\r\n\r\n            if (self.options.maxColumns > 0 && self._canShowButtons()){\r\n                // Draw special column\r\n                columns += self.drawSpecialColumn();\r\n            }\r\n\r\n            return columns;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a column header\r\n        */\r\n        drawColumn: function (column) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            var columnProperties = column.bizAgiProperties || {}\r\n            var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\r\n            var headerStyles = (options.headerStyles ? options.headerStyles.header : \"\");\r\n            headerStyles += (headerStyles !== \"\" ? \"; text-align:\" : \"text-align:\") + (columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\");\r\n\r\n            // Resolve column template\r\n            return $.fasttmpl(options.template.column, $.extend({}, column, {\r\n                isKey: column.key,\r\n                sortActive: column.name === options.sortBy ? column.name === options.sortBy : column.name === options.sortBy.split(\".\")[0] && !self.exactMatch ? column.name === options.sortBy.split(\".\")[0] : false,\r\n                sortType: options.sortOrder,\r\n                tooltip: column.tooltip || \"\",\r\n                columnCssClass: cssClass,\r\n                headerLabelStyles: options.headerStyles ? options.headerStyles.label : \"\",\r\n                headerStyles: headerStyles\r\n            }));\r\n        },\r\n        /*\r\n        *   This method draws a special column header that will be drawn when the grid can't show more columns\r\n        */\r\n        drawSpecialColumn: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve column template\r\n            return $.fasttmpl(options.template.specialColumn);\r\n        },\r\n\r\n        drawDynamicPager: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve column template\r\n            return $.fasttmpl(options.template.dynamicPager);\r\n        },\r\n\r\n        /*\r\n        *   This method draws the table body\r\n        */\r\n        drawBody: function () {\r\n            var self = this;\r\n\r\n            // Resolve rows\r\n            var rows = \"\";\r\n            $.each(self.data.rows, function (i, row) {\r\n                rows += self.drawRow(row);\r\n            });\r\n\r\n            return rows;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a grid row\r\n        */\r\n        drawRow: function (rowData, isNewRow) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var key = rowData[self.columnKeyIndex];\r\n            var newRow = isNewRow || false;\r\n            var rnd = Math.floor(Math.random() * 10000);\r\n            var row = $.fasttmpl(options.template.row, {\r\n                key: rnd,\r\n                isNewRow: isNewRow,\r\n                businessKey: key\r\n            });\r\n\r\n            // Resolve cells\r\n            var cells = \"\";\r\n            $.each(rowData, function (i, cell) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i < self.options.maxColumns + 1) {\r\n                        // Draw normal cell\r\n                        cells += self.drawCell(i, key, cell, newRow);\r\n                    } \r\n                } else {\r\n                    // Draw normal cell\r\n                    cells += self.drawCell(i, key, cell, newRow);\r\n                }\r\n            });\r\n\r\n            if (self.options.maxColumns > 0 && self._canShowRowButtons()){\r\n                // Draw special column\r\n                cells += self.drawSpecialCell(self.options.maxColumns + 1);\r\n            }\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"cells\", cells);\r\n            return row;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the cells for summary\r\n        */\r\n        drawSummary: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var row = $.fasttmpl(options.template.summary);\r\n            var cells = \"\";\r\n\r\n            // Resolve summary cells\r\n            $.each(options.columns, function (i, column) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i <= self.options.maxColumns) {\r\n                        // Draw summary column\r\n                        cells += self.drawSummaryCell(column);\r\n                    }\r\n                } else {\r\n                    // Draw summary column\r\n                    cells += self.drawSummaryCell(column);\r\n                }\r\n            });\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"summary-cells\", cells);\r\n            return row;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a single summary cell\r\n        */\r\n        drawSummaryCell: function (column) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            var columnProperties = column.bizAgiProperties || {};\r\n            var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.summaryCell, {\r\n                hidden: column.hidden || false,\r\n                summarizeBy: column.summarizeBy,\r\n                cellAlign: cellAlign\r\n            });\r\n\r\n            var result = self.onDrawCell(column, \"summary\", self.calculateSummary(column), false);\r\n            result = (result != undefined && typeof (result) != \"number\") ? result.replace(\"summaryValue\", self.calculateSummary(column)) : result;\r\n\r\n            if (!result) {\r\n                result = \"\";\r\n            }\r\n\r\n            var async = typeof (result) === \"object\" && result.done;\r\n            if (async) {\r\n                if (result.state() === \"resolved\") {\r\n                    // Fetch resolved result\r\n                    cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\r\n                } else {\r\n                    // Wait for result\r\n                    cell = self._replaceElement(cell, \"cellContent\", \"\");\r\n                    self.asyncCells[key + \"-\" + columnIndex] = result;\r\n                }\r\n\r\n            } else {\r\n                // Resolve cell content\r\n                cell = self._replaceElement(cell, \"cellContent\", result);\r\n            }\r\n\r\n            return cell;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the grid cell\r\n        */\r\n        drawCell: function (columnIndex, key, value, isNewRow) {\r\n            var self = this;\r\n            var options = self.options;\r\n            isNewRow = isNewRow || false;\r\n            var messageValidation = \"\";\r\n\r\n            // Ensure that data is mapped into a column\r\n            if (!self.columnByIndex[columnIndex]) {\r\n                return \"\";\r\n            }\r\n\r\n            // Get message\r\n            if (columnIndex > 0) {\r\n                messageValidation = self.columnByIndex[columnIndex].bizAgiProperties && self.columnByIndex[columnIndex].bizAgiProperties.messageValidation;\r\n            }\r\n\r\n            var columnProperties = self.columnByIndex[columnIndex].bizAgiProperties || {};\r\n            var cssClass = (columnProperties.cssclass) ? columnProperties.cssclass : \"\";\r\n            var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.cell, {\r\n                isKey: self.columnByIndex[columnIndex].key,\r\n                hidden: options.columns[columnIndex].hidden || false,\r\n                isDesign: (options.mode === \"design\"),\r\n                messageValidation: messageValidation,\r\n                columnCssClass: cssClass,\r\n                id: options.columns[columnIndex].bizAgiProperties ? options.columns[columnIndex].bizAgiProperties.id : undefined,\r\n                cellAlign: cellAlign\r\n            });\r\n\r\n            var result = self.onDrawCell(self.columnByIndex[columnIndex], key, value, isNewRow);\r\n            if (!result) {\r\n                result = \"\";\r\n            }\r\n            var async = typeof (result) === \"object\" && result.done;\r\n            if (async) {\r\n                if (result.state() === \"resolved\") {\r\n                    // Fetch resolved result\r\n                    cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\r\n                } else {\r\n                    // Wait for result\r\n                    cell = self._replaceElement(cell, \"cellContent\", \"\");\r\n                    self.asyncCells[key + \"-\" + columnIndex] = result;\r\n                }\r\n\r\n            } else {\r\n                // Resolve cell content\r\n                cell = self._replaceElement(cell, \"cellContent\", result);\r\n            }\r\n\r\n            self.columnByIndex[columnIndex]['cell'] = $(cell);\r\n            return cell;\r\n        },\r\n        /*\r\n        *   Returns the resolved result from a promise when the promise has been executed already\r\n        */\r\n        resolveResult: function (promise) {\r\n            var result;\r\n\r\n            promise.done(function (data) {\r\n                result = data;\r\n            });\r\n\r\n            return result;\r\n        },\r\n        /*\r\n        *   This method draws a special cell that will be drawn when the grid can't show more columns\r\n        */\r\n        drawSpecialCell: function (columnIndex) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            /* // Ensure that data is mapped into a column\r\n            if (!self.columnByIndex[columnIndex]) {\r\n                return \"\";\r\n            } */\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.specialCell);\r\n\r\n            return cell;\r\n        },\r\n        /*\r\n        *   This method draws a group header\r\n        */\r\n        drawGroupHeader: function () {\r\n            // TODO: Implement for PC version\r\n        },\r\n        /*\r\n        *   This method draws a footer\r\n        */\r\n        drawFooter: function () {\r\n            // TODO: Implement for PC version\r\n        },\r\n        /*\r\n        *   This method draws a grid pager\r\n        */\r\n        drawPager: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Calculate pages\r\n            var pages = [];\r\n            for (var i = 1; i <= self.data.total; i++) {\r\n                pages.push({\r\n                    number: i,\r\n                    active: (i == self.data.page)\r\n                });\r\n            }\r\n\r\n            // Resolve pager template\r\n            return $.fasttmpl(options.template.pager, {\r\n                page: self.data.page,\r\n                pages: pages,\r\n                records: self.data.records\r\n            });\r\n        },\r\n        /*\r\n        *   This method draws a grid button actions\r\n        */\r\n        drawButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var tooltips = options.tooltips || {};\r\n\r\n            var parameters = $.extend(options.actions, tooltips);\r\n\r\n            if (self._canShowButtons()) {\r\n                // Resolve buttons template\r\n                if (options.orientation === \"rtl\") {\r\n                    return $.fasttmpl(options.template.buttonsRtl, parameters);\r\n                } else {\r\n                    return $.fasttmpl(options.template.buttons, parameters);\r\n                }\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n\r\n        /*\r\n        * This method draws the export options menu\r\n        */\r\n        drawGridExportOptions: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var actions = options.actions;\r\n\r\n            tooltips = options.tooltips || {};\r\n\r\n            var parameters = $.extend({ \r\n                enableXlsExport: actions.enableXlsExport,\r\n                enablePdfExport: actions.enablePdfExport \r\n            }, tooltips);\r\n\r\n            return $.fasttmpl(options.template.exportOptions, parameters);\r\n        },\r\n\r\n        /*\r\n        *   This method draws a row buttons,\r\n        *   those buttons will be invisible, and will be activated when the user selects a row\r\n        */\r\n        drawRowButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if (self._canShowRowButtons()) {\r\n                // Resolve row buttons template\r\n                if (options.orientation === \"rtl\") {\r\n                    return $.fasttmpl(options.template.rowButtons.rtl, options.actions);\r\n                } else {\r\n                    return $.fasttmpl(options.template.rowButtons, options.actions);\r\n                }\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n        /*\r\n        *   Execute post-renders in all the grid\r\n        */\r\n        postRender: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Get grid rows\r\n            var rows = self._getComponent(\"cells\");\r\n            if (rows) {\r\n                $.each(rows, function (i, row) {\r\n                    row = $(row);\r\n                    self.postRenderRow(row);\r\n                });\r\n            }\r\n\r\n            // Get summary row\r\n            if (options.showSummary) {\r\n                var summary = self._getComponent(\"summary\");\r\n                self.postRenderSummary(summary);\r\n            }\r\n\r\n            self._triggerHandler(\"gridControlReady\");\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in each cell after the element has been created\r\n        */\r\n        postRenderRow: function (row) {\r\n            var self = this;\r\n            var key = row.attr(\"data-business-key\");\r\n            var isNewRow = row.attr(\"data-new-row\");\r\n            var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\r\n\r\n            $.each(cells, function (i, cell) {\r\n                var column = self.columnByIndex[i];\r\n                if (typeof column == \"undefined\" || column.key) return; // Omit key column\r\n\r\n                // Check if the cell has an async result\r\n                var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                if (asyncResult) {\r\n                    $.when(asyncResult)\r\n                        .done(function (html) {\r\n                            // Append async result\r\n                            cell = $(cell);\r\n                            cell.append(html);\r\n                            self.onCellReady(column, key, cell, isNewRow);\r\n                        });\r\n                } else {\r\n                    self.onCellReady(column, key, $(cell), isNewRow);\r\n                }\r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in each summary cell after the element has been created\r\n        */\r\n        postRenderSummary: function (summary) {\r\n            var self = this;\r\n            var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\r\n\r\n            $.each(cells, function (i, cell) {\r\n                var column = self.columnByIndex[i];\r\n                if (column.key) return; // Omit key column\r\n\r\n                // Check if the cell has an async result\r\n                var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                if (asyncResult) {\r\n                    $.when(asyncResult)\r\n                        .done(function (html) {\r\n                            // Append async result\r\n                            cell = $(cell);\r\n                            cell.append(html);\r\n                            self.onCellReady(column, \"summary\", cell, false);\r\n                        });\r\n                } else {\r\n                    self.onCellReady(column, \"summary\", $(cell), false);\r\n                }\r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Method to attach any handler to the grid\r\n        */\r\n        attachHandlers: function () { },\r\n\r\n        //TODO IMPLEMENTANDO\r\n        selectDynamicPager: function () {\r\n            this.onDynamicPager();\r\n        },\r\n\r\n        /*\r\n        *   Changes the current page in the grid\r\n        */\r\n        changePage: function (page) {\r\n            var self = this;\r\n            var currentPage = Number(self.data.page);\r\n            var total = self.data.total;\r\n            var newPage = page;\r\n\r\n            // Process previous page\r\n            if (page === \"previous\") {\r\n                if (currentPage > 1) {\r\n                    newPage = currentPage - 1;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Process next page\r\n            if (page === \"next\") {\r\n                if (currentPage < total) {\r\n                    newPage = currentPage + 1;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            //refresh components cells and rows\r\n            self._cleanComponents();\r\n\r\n            // Update internal options\r\n            self.page = Number(newPage);\r\n\r\n            // Execute handler\r\n            self.onPageRequested();\r\n        },\r\n\r\n        /*\r\n        *  Verify cells before sumitonchange\r\n        */\r\n        isValid: function () {\r\n            // Trigger handler\r\n            return this._triggerHandler(\"isValid\");\r\n        },\r\n\r\n        /*\r\n        *   Sort the grid by a column\r\n        */\r\n        sortBy: function (columnIndex, sortType) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var column = self.columnByIndex[columnIndex];\r\n\r\n            if (typeof options.sortBy === \"undefined\") {\r\n                return true;\r\n            }\r\n\r\n            // Set new sort type reversed to current, if the sort column has not changed\r\n            if (typeof (column.name) === \"undefined\") column.name = column.label;\r\n            if (column.name == options.sortBy) {\r\n                sortType = sortType || (options.sortOrder == \"asc\" ? \"desc\" : \"asc\");\r\n            } else {\r\n                if (column.name == options.sortBy.split(\".\")[0]) {\r\n                    sortType = sortType || (options.sortType == \"asc\" ? \"desc\" : \"asc\");\r\n                } else {\r\n                    sortType = sortType || options.sortType;\r\n                }\r\n            }\r\n\r\n            // Update internal options\r\n            if (options.sortBy.split(\".\").length > 1) {\r\n                if (options.sortBy.split(\".\")[0] != column.name) {\r\n                    options.sortBy = column.name;\r\n                } else {\r\n                    options.sortBy = column.name;\r\n                }\r\n            } else {\r\n                options.sortBy = column.name;\r\n            }\r\n\r\n            if (typeof (column.bizAgiProperties.sortAttribute) !== \"undefined\" && column.bizAgiProperties.type.indexOf(\"column\") !== -1) {\r\n                options.sortBy = column.name + \".\" + column.bizAgiProperties.sortAttribute;\r\n            }\r\n\r\n            options.sortColumn = column;\r\n            options.sortType = sortType;\r\n            options.sortOrder = sortType;\r\n\r\n            //refresh components cells and rows\r\n            self._cleanComponents();\r\n\r\n            // Execute handler\r\n            self.onSortRequested();\r\n        },\r\n\r\n        /*\r\n        *   Selects a row in the grid\r\n        */\r\n        selectRow: function (key, businessKey) {\r\n            var self = this;\r\n\r\n            if (self.selectedRow == key) {\r\n                // Invoke un-select handler\r\n                self.onRowUnselected();\r\n\r\n                // Update internal options\r\n                self.selectedRow = 0;\r\n                self.selectedBusinessKey = 0;\r\n            } else {\r\n                if (self.selectedRow != 0) {\r\n                    // Invoke un-select handler\r\n                    self.onRowUnselected();\r\n                }\r\n\r\n                // Update internal options\r\n                self.selectedRow = key;\r\n                self.selectedBusinessKey = businessKey;\r\n\r\n                // Invoke select handler\r\n                self.onRowSelected();\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Unselects a row in the grid\r\n        */\r\n        unselectRow: function () {\r\n            var self = this;\r\n\r\n            if (self.selectedRow != 0) {\r\n                // Invoke un-select handler\r\n                self.onRowUnselected();\r\n                self.selectedRow = 0;\r\n                self.selectedBusinessKey = 0;\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Calculates the summary for a column given the data\r\n        */\r\n        calculateSummary: function (column) {\r\n            var self = this;\r\n            var operation = column.summarizeBy;\r\n\r\n            //Consider the default values in the operations\r\n            $.each(self.data.rows, function (i, value) {\r\n                if (typeof self.data.rows[i][column.index] !== \"undefined\" && self.data.rows[i][column.index] == null && column.bizAgiProperties.defaultvalue != null) {\r\n                    self.data.rows[i][column.index] = column.bizAgiProperties.defaultvalue;\r\n                }\r\n            });\r\n            var columnValues = $.map(self.data.rows, function (row, i) { return row[column.index]; });\r\n            var result;\r\n\r\n            // Don't calculate anything if there are no rows\r\n            if (columnValues.length == 0) return 0;\r\n\r\n            // Resolve operations\r\n            if (operation === \"sum\") {\r\n                result = 0;\r\n                $.each(columnValues, function (i, value) { if (value != null) result += Number(value); });\r\n\r\n            } else if (operation === \"min\") {\r\n                result = columnValues[0] || 0;\r\n                $.each(columnValues, function (i, value) { if (typeof (value) === \"number\" && value != null && (value < result)) result = Number(value); });\r\n                if (result === Math.max()) result = null;\r\n\r\n            } else if (operation === \"max\") {\r\n                result = columnValues[0] || 0;\r\n                $.each(columnValues, function (i, value) { if (typeof (value) === \"number\" && value != null && (value > result)) result = Number(value); });\r\n                if (result === Math.min()) result = null;\r\n\r\n            } else if (operation === \"avg\") {\r\n                result = 0;\r\n                $.each(columnValues, function (i, value) { if (value != null) result += Number(value); });\r\n                result = result / columnValues.length;\r\n\r\n            } else if (operation === \"count\") {\r\n                result = 0;\r\n                columnValues = self.data.rows;\r\n\r\n                for (i = 0; i < columnValues.length; i++) {\r\n                    var columnValue = columnValues[i][column.index];\r\n\r\n                    if (columnValue instanceof Array && columnValue.length > 0) {\r\n                        result += 1;\r\n                    }\r\n                    else if (!(columnValue instanceof Array) && columnValue !== null && columnValue !== \"\") {\r\n                        result += 1;\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n\r\n        /*\r\n        *   Process an action in order to do something with the grid\r\n        */\r\n        processAction: function (action, params) {\r\n            var self = this;\r\n\r\n            var key = params && params.key ? params.key : self.selectedBusinessKey;\r\n            if (action === \"edit\") {\r\n                self.onEditRow(key);\r\n            }\r\n            if (action === \"remove\") {\r\n                self.onDeleteRow(key);\r\n            }\r\n            if (action === \"more\") {\r\n                self.onShowMore(key);\r\n            }\r\n            if (action === \"details\") {\r\n                self.onShowDetails(key);\r\n            }\r\n            if (action === \"add\") {\r\n                self.onAddRow();\r\n            }\r\n\r\n            if (action === \"show-grid-export-options\") {\r\n                self.onShowExportGridOptions();\r\n            }\r\n        },\r\n        /*\r\n        *   Executes the page requested handler\r\n        */\r\n        onPageRequested: function () {\r\n            var self = this;\r\n\r\n            // Start loading signal \r\n            self.startLoading();\r\n\r\n            // Trigger handler\r\n            return self._triggerHandler(\"pageRequested\", self._buildRefreshParameters());\r\n        },\r\n        /*\r\n        *   Executes the sort requested handler\r\n        */\r\n        onSortRequested: function () {\r\n            var self = this;\r\n\r\n            // Start loading signal \r\n            self.startLoading();\r\n\r\n            // Trigger handler\r\n            return self._triggerHandler(\"sortRequested\", self._buildRefreshParameters());\r\n        },\r\n        /*\r\n        *   Executes the row selected handler\r\n        */\r\n        onRowSelected: function () {\r\n            var self = this;\r\n\r\n            return self._triggerHandler(\"rowSelected\", { key: self.selectedBusinessKey });\r\n        },\r\n        /*\r\n        *   Executes the row un-selected handler\r\n        */\r\n        onRowUnselected: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"rowUnselected\", { key: self.selectedBusinessKey });\r\n        },\r\n\r\n        /*\r\n        * Executes collapse grid\r\n        */\r\n        onCollapseGrid: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"performCollapseGrid\");\r\n        },\r\n\r\n        //TODO:llamar\r\n        onDynamicPager: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"moreRows\", { key: self.selectedBusinessKey });\r\n        },\r\n\r\n        /*\r\n        *   Executes the on draw cell handler\r\n        */\r\n        onDrawCell: function (column, key, value, isNewRow) {\r\n            var self = this;\r\n            return self._triggerHandler(\"drawCell\", { \r\n                column: column,\r\n                key: key,\r\n                value: value,\r\n                isNewRow: isNewRow \r\n            });\r\n        },\r\n        /*\r\n        *   Executes on cell ready handler\r\n        */\r\n        onCellReady: function (column, key, cell, isNewRow) {\r\n            var self = this;\r\n            return self._triggerHandler(\"cellReady\", { \r\n                column: column,\r\n                key: key,\r\n                cell: cell,\r\n                isNewRow: isNewRow \r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Executes the on draw control handler\r\n        */\r\n        onDrawControl: function () {\r\n            //TODO: Implement this\r\n        },\r\n        /*\r\n        *   Executes the on draw group header handler\r\n        */\r\n        onDrawGroupHeader: function () {\r\n            //TODO: Implement this\r\n        },\r\n        /*\r\n        *   Executes the on add row handler\r\n        */\r\n        onAddRow: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"addRow\");\r\n        },\r\n        /*\r\n        *   Executes the on edit row handler\r\n        */\r\n        onEditRow: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"editRow\", { key: key });\r\n        },\r\n        /*\r\n        *   Executes the on delete row handler\r\n        */\r\n        onDeleteRow: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"deleteRow\", { key: key });\r\n        },\r\n        /*\r\n        *   Executes the on show more handler\r\n        */\r\n        onShowMore: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"showMore\", { key: key });\r\n        },\r\n        /*\r\n        *   Executes the on show details handler\r\n        */\r\n        onShowDetails: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"showFormDetails\", { key: key });\r\n        },\r\n        /*\r\n        * Executes the on show export grid options \r\n        */\r\n        onShowExportGridOptions: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"showGridExportOptions\");\r\n        },\r\n\r\n        /*\r\n        *   Replaces a matched element in the container for the specified \"replace\" element\r\n        */\r\n        _replaceElement: function (html, element, replace) {\r\n            return html.replace(\"{{element \" + element + \"}}\", replace);\r\n        },\r\n\r\n        /*\r\n        *   Return the event handler parameters object\r\n        */\r\n        _buildRefreshParameters: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var sortColumn = (options.sortColumn != undefined) ? options.sortColumn.index : 1;\r\n            return { \r\n                page: self.page,\r\n                sortBy: options.sortBy,\r\n                sortType: options.sortOrder,\r\n                sortColumnIndex: sortColumn\r\n            };\r\n        },\r\n        /*\r\n        *   Calls directly to handler callback\r\n        */\r\n        _triggerHandler: function (type, data) {\r\n            var callback = this.options[type];\r\n            if (!callback) {\r\n                return null;\r\n            }\r\n            return callback.call(this.element[0], data);\r\n        },\r\n        /*\r\n        *   Gets the component\r\n        */\r\n        _getComponent: function (component) {\r\n            var self = this;\r\n            var element = self.element;\r\n            if (!self.components[component]) {\r\n                var foundComponent = $(\"[data-bizagi-component=\" + component + \"]\", element);\r\n                if (foundComponent != null && foundComponent.length > 0) {\r\n                    self.components[component] = foundComponent;\r\n                }\r\n            }\r\n            return self.components[component];\r\n        },\r\n        /*\r\n        *   Gets the specific Button\r\n        */\r\n        _getButton: function (button) {\r\n            var self = this;\r\n            var element = self.element;\r\n            if (!self.buttons[button])\r\n                self.buttons[button] = $(\"[data-action=\" + button + \"]\", element);\r\n            return self.buttons[button];\r\n        },\r\n        /*\r\n        * Cleans the components \r\n        */\r\n        _cleanComponents: function () {\r\n            var self = this;\r\n            self.components = {};\r\n        },\r\n        /*\r\n        * Cleans the buttons \r\n        */\r\n        _cleanButtons: function () {\r\n            var self = this;\r\n            self.buttons = {};\r\n        },\r\n        /*\r\n        *  Template method to check if buttons component must be rendered\r\n        */\r\n        _canShowButtons: function () {\r\n            return true;\r\n        },\r\n        /*\r\n        *  Template method to check if row buttons must be displayed when the row is selected\r\n        */\r\n        _canShowRowButtons: function(){\r\n            return true;\r\n        }\r\n\r\n    });\r\n})(jQuery);\r\n","/**\r\n *   Name:\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This widget will extend the bizagi grid widget to specialize into a desktop view\r\n *\r\n *   Markup: <div></div>\r\n *\r\n *   Styles:\r\n *   - css/bizagi/desktop/controls/bizagi.grid.css\r\n */\r\n\r\n(function ($) {\r\n    $.widget('ui.bizagi_grid_desktop', $.ui.bizagi_grid, {\r\n        options: $.extend($.ui.bizagi_grid.prototype.options, {\r\n            smartPagination: false\r\n        }),\r\n\r\n        /**\r\n         * Add event handlers\r\n         * @returns {}\r\n         */\r\n        attachHandlers: function () {\r\n            var self = this;\r\n\r\n            // Add paging events\r\n            self._getComponent(\"pager\").find(\"ul li:not(.prev):not(.next)\").bind(\"click\", function (e) {\r\n\r\n                if (e.isPropagationStopped()) {\r\n                    return;\r\n                }\r\n\r\n                e.stopPropagation();\r\n\r\n                var pageNumber = $(this).data(\"page\");\r\n                if (self.isValid()) {\r\n                    self.changePage(pageNumber);\r\n                }\r\n\r\n            });\r\n\r\n            // DynamicPager behavior\r\n            self._getComponent(\"dynamicPager\").find(\"input\").bind(\"click\", function () {\r\n                self.selectDynamicPager();\r\n            });\r\n\r\n            self._getComponent(\"header\").on(\"click\", function () {\r\n\r\n                if ($(this).hasClass(\"bz-rn-grid-header-collapse\") && self.options.mode === \"execution\") {\r\n                    self.onCollapseGrid();\r\n                }\r\n\r\n            });\r\n\r\n            // Add sort events\r\n            self._getComponent(\"columns\").find(\".ui-bizagi-grid-column\").bind(\"click\", function () {\r\n\r\n                var columnIndex = $(this).attr(\"data-column-index\");\r\n                var xpath;\r\n\r\n                try {\r\n                    xpath = (columnIndex >= 0 && self.columnByIndex[columnIndex].bizAgiProperties.xpath) ? self.columnByIndex[columnIndex].bizAgiProperties.xpath : false;\r\n                } catch (e) {\r\n                    return;\r\n                }\r\n\r\n                if (typeof bizagi.context.isOfflineForm === \"undefined\" || !bizagi.context.isOfflineForm && xpath) {\r\n                    self.onSaveAddedRows();\r\n                    self.sortBy(columnIndex);\r\n\r\n                    $(this).unbind(\"click\");\r\n\r\n                    //Execute cancel edition\r\n                    self.onCancelEdition();\r\n                }\r\n            });\r\n\r\n            // Add selection events\r\n            self._getComponent(\"rows\").find(\"tr\").bind(\"click\", function () {\r\n                var key = $(this).attr(\"data-key\");\r\n                var businessKey = $(this).attr(\"data-business-key\");\r\n\r\n                self.selectRow(key, businessKey);\r\n            }).bind(\"dblclick\",  function () {\r\n                var key = $(this).attr(\"data-key\");\r\n                var businessKey = $(this).attr(\"data-business-key\");\r\n\r\n                self._triggerHandler(\"rowdblclick\", {key: key, businessKey: businessKey});\r\n            });            \r\n\r\n            // Bind button actions\r\n            self._getComponent(\"buttons\").find(\"[data-action]\").bind(\"click\", function () {\r\n                self.processAction($(this).attr(\"data-action\"));\r\n                self.unselectRow();\r\n            });\r\n\r\n            //Grid Export Events\r\n            if (self.options.actions.enableXlsExport || self.options.actions.enablePdfExport) {\r\n\r\n                var gridExportOptionsContent = (self._getComponent(\"gridExportOptions\").find(\".ui-bizagi-grid-export-options-content\"));\r\n\r\n                self._getComponent(\"gridExportOptions\").find(\"[data-action]\").bind(\"click\", function () {\r\n                    self.processAction($(this).attr(\"data-action\"));\r\n                    self.unselectRow();\r\n                });\r\n\r\n                //bind mouseleave event just in desktop app\r\n                self._getComponent(\"gridExportOptions\").mouseleave(function () {\r\n                    gridExportOptionsContent.addClass('hidden');\r\n                });\r\n\r\n                if (self.options.actions.enableXlsExport) {\r\n\r\n                    self._getComponent(\"gridExportOptions\").find('#print-grid-xls').click(function (e) {\r\n                        self._triggerHandler(\"performExportGrid\", {disposition: \"attachment\", exportType: \"xlsExport\"});\r\n\r\n                        gridExportOptionsContent.hide();\r\n                    });\r\n\r\n                }\r\n\r\n                if (self.options.actions.enablePdfExport) {\r\n                    self._getComponent(\"gridExportOptions\").find('#print-grid-pdf').click(function (e) {\r\n                        self._triggerHandler(\"performExportGrid\", {disposition: \"inline\", exportType: \"pdfExport\"});\r\n\r\n                        gridExportOptionsContent.hide();\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Add selection events for thw draft rows\r\n            self._getComponent(\"rows\").on(\"delete-row\", \"tr[data-new-row='true']\", function (evt) {\r\n                var key = $(this).attr(\"data-key\");\r\n                var businessKey = $(this).attr(\"data-business-key\");\r\n\r\n                self._deleteDraft(key, businessKey);\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         * Template method to check if buttons component must be rendered\r\n         * @returns {}\r\n         */\r\n        _canShowButtons: function () {\r\n            var actions = this.options.actions;\r\n\r\n            return actions[\"add\"] || actions[\"remove\"] || actions[\"edit\"] || actions[\"inlineAdd\"] || actions[\"details\"] || actions[\"enablePdfExport\"] || actions[\"enableXlsExport\"];\r\n        },\r\n        /**\r\n         * Process an action in order to do something with the grid\r\n         * @param {} action\r\n         * @returns {}\r\n         */\r\n        processAction: function (action) {\r\n            // Call base\r\n            $.ui.bizagi_grid.prototype.processAction.apply(this, arguments);\r\n\r\n            if (action == \"save\") {\r\n                this.onSaveAddedRows();\r\n            }\r\n            if (action == \"cancel\") {\r\n                this.onCancelEdition();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Events to paginator\r\n         * @returns {}\r\n         */\r\n        attachPaginator: function () {\r\n            var self = this;\r\n\r\n            //Append navigation buttons for the pager\r\n            if (self.options.smartPagination) {\r\n\r\n                if (self.data.total > 1) {\r\n\r\n                    var ul = self._getComponent(\"pager\").find(\"ul\");\r\n\r\n                    // Create pagination control \r\n                    ul.bizagiPagination({\r\n                        maxElemShow: 50,\r\n                        totalPages: self.data.total,\r\n                        actualPage: self.data.page,\r\n                        listElement: ul\r\n                    });\r\n                } else {\r\n                    //Makes room to other elements in the grid footer\r\n                    self._getComponent(\"pager\").parent().hide();\r\n                }\r\n            } else {\r\n                if (self.data.total <= 1) {\r\n                    //Makes room to other elements in the grid footer\r\n                    self._getComponent(\"pager\").parent().hide();\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Draw Pagination Grid\r\n         * @returns {}\r\n         */\r\n        drawPager: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var pdata = {};\r\n\r\n            if (self.options.smartPagination) {\r\n                var nElemToShow = 10;\r\n\r\n                pdata.pagination = (self.data.total > 1) ? true : false;\r\n                pdata.page = self.data.page;\r\n\r\n                if (self.options.orientation == \"rtl\" && self.data.rows.length > 0) {\r\n                    // set total pages\r\n                    pdata.pages = {};\r\n\r\n                    var pageToshow = (nElemToShow > self.data.total) ? self.data.total : nElemToShow;\r\n                    var pageToshowRtl = pageToshow;\r\n\r\n                    for (var i = 1; i <= pageToshow; i++) {\r\n                        pdata.pages[i] = {\"pageNumber\": pageToshowRtl};\r\n                        pageToshowRtl--;\r\n                    }\r\n\r\n                } else {\r\n                    // set total pages\r\n                    pdata.pages = {};\r\n                    var pageToshow = (nElemToShow > self.data.total) ? self.data.total : nElemToShow;\r\n\r\n                    for (var i = 1; i <= pageToshow; i++) {\r\n                        pdata.pages[i] = {\"pageNumber\": i};\r\n                    }\r\n                }\r\n\r\n                // Set style pagination\r\n                pdata[\"gridPagination\"] = \"gridCasePagination\";\r\n                pdata.previousPage = (self.data.page > 1) ? self.data.page - 1 : 1;\r\n                pdata.nextPage = (self.data.page < self.data.total) ? self.data.page + 1 : self.data.total;\r\n                pdata.totalPages = self.data.total;\r\n\r\n                return $.fasttmpl(options.template.pager, pdata);\r\n            } else {\r\n                // Call base\r\n                return $.ui.bizagi_grid.prototype.drawPager.apply(self, arguments);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add inline row\r\n         * @returns {}\r\n         */\r\n        addInlineRow: function () {\r\n            var self = this;\r\n\r\n            // Draw the new row\r\n            self._triggerHandler(\"beforeInlineAdd\");\r\n            var html = self.drawRow(self.createAddRowData(), true);\r\n            var newRow = $(html);\r\n\r\n            // Execute the postrender\r\n            self.postRenderRow(newRow);\r\n\r\n            // Append to rows component\r\n            self._getComponent(\"rows\").append(newRow);\r\n\r\n            // Show save and cancel buttons\r\n            var buttons = self._getComponent(\"buttons\");\r\n            buttons.find(\"[data-action=save]\").css(\"display\", \"inline-block\");\r\n            buttons.find(\"[data-action=cancel]\").css(\"display\", \"inline-block\");\r\n            buttons.find(\"[data-action=remove]\").css(\"display\", \"none\");\r\n\r\n            // Show table component if there are no rows\r\n            if (self.data.rows.length == 0) {\r\n                self._getComponent(\"table\").show();\r\n                self._getComponent(\"emptyTable\").hide();\r\n            }\r\n\r\n            self._triggerHandler(\"afterInlineAdd\");\r\n        },\r\n\r\n        /**\r\n         * Creates a dummy data for the new row\r\n         * @returns {}\r\n         */\r\n        createAddRowData: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var row = [];\r\n\r\n            $.each(options.columns, function (i) {\r\n\r\n                if (i == self.columnKeyIndex) {\r\n                    // Add random key so we can identify them later\r\n                    var key = Math.ceil(Math.random() * 100000);\r\n                    row.push(key);\r\n                } else {\r\n                    // Add null value\r\n                    row.push(null);\r\n                }\r\n\r\n            });\r\n\r\n            return row;\r\n        },\r\n\r\n        /**\r\n         * Executes the on add row handler\r\n         * @returns {}\r\n         */\r\n        onAddRow: function () {\r\n            var self = this;\r\n\r\n            // Allow add\r\n            if (self.options.actions.add) {\r\n                if (self.options.actions.inlineAdd) {\r\n                    return self.addInlineRow();\r\n                } else {\r\n                    // Open dialog with addform\r\n                    self.options.addFormDialog = self.options.addFormDialog || {};\r\n                    return self._triggerHandler(\"addRow\", self.options.addFormDialog);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when the user presses the cancel button, after inline add edition\r\n         * @returns {}\r\n         */\r\n        onCancelEdition: function () {\r\n            var self = this;\r\n\r\n            // Remove zero key rows\r\n            var rows = self._getComponent(\"rows\").find(\"[data-new-row]\");\r\n            rows.detach();\r\n\r\n            // Hide buttons\r\n            var buttons = self._getComponent(\"buttons\");\r\n            buttons.find(\"[data-action=save]\").hide();\r\n            buttons.find(\"[data-action=cancel]\").hide();\r\n\r\n            // Show table component if there are no rows\r\n            if (self.data.rows.length == 0) {\r\n                self._getComponent(\"table\").hide();\r\n                self._getComponent(\"emptyTable\").show();\r\n            } else {\r\n                buttons.find(\"[data-action=remove]\").css(\"display\", \"inline-block\");\r\n            }\r\n\r\n            return self._triggerHandler(\"cancelEdition\", {keys: self.getNewRowKeys(rows)});\r\n        },\r\n        /**\r\n         * Executes when the user presses the save button, after inline add edition\r\n         * @returns {}\r\n         */\r\n        onSaveAddedRows: function () {\r\n            var self = this;\r\n\r\n            // Retrieve key of added rows\r\n            var newRowKeys = self.getNewRowKeys();\r\n            var buttons = self._getComponent(\"buttons\");\r\n\r\n            // Hide buttons         \r\n            if (newRowKeys.length >= 1 && self.isValid()) {\r\n                buttons.find(\"[data-action=save]\").hide();\r\n                buttons.find(\"[data-action=cancel]\").hide();\r\n                buttons.find(\"[data-action=remove]\").css(\"display\", \"inline-block\");\r\n\r\n                if (typeof bizagi.context.isOfflineForm === \"undefined\" || !bizagi.context.isOfflineForm) {\r\n                    self._triggerHandler(\"saveAddedRows\", {keys: newRowKeys});\r\n                    return self._triggerHandler(\"removeNewRecords\", {keys: newRowKeys});\r\n                } else {\r\n                    return true;\r\n                }\r\n            } else {\r\n                return;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Select row\r\n         * @returns {}\r\n         */\r\n        onRowSelected: function () {\r\n            // Call base\r\n            $.ui.bizagi_grid.prototype.onRowSelected.apply(this, arguments);\r\n\r\n            // Add selected style to row\r\n            var tr = this.element.find(\"[data-bizagi-component=rows] tr[data-key=\" + this.selectedRow + \"]\");\r\n            tr.addClass(\"ui-bizagi-state-selected\");\r\n        },\r\n\r\n        /**\r\n         * Unselect row\r\n         * @returns {}\r\n         */\r\n        onRowUnselected: function () {\r\n            // Call base\r\n            $.ui.bizagi_grid.prototype.onRowUnselected.apply(this, arguments);\r\n\r\n            // Hide row buttons\r\n            var tr = this._getComponent(\"rows\").find(\"tr[data-key=\" + this.selectedRow + \"]\");\r\n            tr.removeClass(\"ui-bizagi-state-selected\");\r\n        },\r\n\r\n        /**\r\n         * Return the new created ids\r\n         * @param {} rows\r\n         * @returns {}\r\n         */\r\n        getNewRowKeys: function (rows) {\r\n            rows = rows || this._getComponent(\"rows\").find(\"[data-new-row=true]\");\r\n\r\n            return $.map(rows, function (row, i) {\r\n                return $(row).data(\"business-key\");\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Collapse Grid\r\n         * @returns {}\r\n         */\r\n        onCollapseGrid: function () {\r\n            $.ui.bizagi_grid.prototype.onCollapseGrid.apply(this, arguments);\r\n        },\r\n\r\n        /**\r\n         * Return cell object\r\n         * @param {} key\r\n         * @param {} xpath\r\n         * @param {} index\r\n         * @returns {}\r\n         */\r\n        getCell: function (key, xpath, index) {\r\n            var row = this._getComponent(\"rows\").find(\"[data-business-key=\" + key + \"]\");\r\n            var allVisibleTd = $(\"td:visible\", $(row));\r\n            var cell = allVisibleTd[index];\r\n\r\n            return $(cell);\r\n        },\r\n\r\n        /**\r\n         * Return cell header object\r\n         * @param {} index\r\n         * @returns {}\r\n         */\r\n        getCellHeader: function (index) {\r\n            var rowHeader = this._getComponent(\"columns\");\r\n            var allVisibleTd = $(\"td:visible\", $(rowHeader));\r\n            var cell = allVisibleTd[index];\r\n\r\n            return $(cell);\r\n        },\r\n\r\n        /**\r\n         * Check if row its new\r\n         * @param {} businessKey\r\n         * @returns {}\r\n         */\r\n        isNewRecord: function (businessKey) {\r\n            var row = this._getComponent(\"rows\");\r\n\r\n            if (row) {\r\n                var businessKey = row.find(\"[data-business-key='\" + businessKey + \"']\");\r\n\r\n                if ($(businessKey).data('new-row')) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * This method allows update the collapse state\r\n         * @param {} collapseState\r\n         * @returns {}\r\n         */\r\n        updateCollapseState: function (collapseState) {\r\n            this.collapseState = collapseState;\r\n        },\r\n\r\n        /**\r\n         * Delete the draft row selected\r\n         * @param {} item\r\n         * @returns {}\r\n         */\r\n        _deleteDraft: function (key, businessKey) {\r\n            var self = this;\r\n\r\n            // Retrieve key of added rows\r\n            var newRowKeys = self.getNewRowKeys();\r\n\r\n            // Hide buttons         \r\n            if (newRowKeys.length > 1) {\r\n                var draftRow = self.getDraftRow(businessKey);\r\n                draftRow.detach();\r\n\r\n                // Remove pending changes of draft rows\r\n                if (self.changes && self.changes[key]) {\r\n                    delete self.changes[key];\r\n                }\r\n\r\n                // Remove draft rows\r\n                if (self.newRecords && self.newRecords[key]) {\r\n                    delete self.newRecords[key];\r\n                }\r\n\r\n                self._triggerHandler(\"removeNewRecords\", { keys: [businessKey] });\r\n\r\n            } else {\r\n                self.onCancelEdition();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get current draft row\r\n         * @param {} key\r\n         * @returns {}\r\n         */\r\n        getDraftRow: function (businessKey) {\r\n            var row = this._getComponent(\"rows\").find(\"[data-business-key=\" + businessKey + \"]\");\r\n\r\n            return $(row);\r\n        }\r\n\r\n    });\r\n\r\n})(jQuery);","/*\r\n*   Name:\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This widget will extend the bizagi grid widget to specialize into a desktop view\r\n*\r\n*   Markup: <div></div>\r\n*\r\n*   Styles:\r\n*   - css/bizagi/desktop/controls/bizagi.grid.css\r\n*/\r\n\r\n(function ($) {\r\n    $.widget('ui.bizagi_grid_grouped_desktop', $.ui.bizagi_grid_desktop, {\r\n        options: $.extend($.ui.bizagi_grid.prototype.options, {\r\n            smartPagination: false\r\n        }),\r\n\r\n        /*\r\n        *   This method draws the table body\r\n        */\r\n        drawBody: function () {\r\n            var self = this;\r\n            self.groupByValues = {};\r\n            self.groupByPreviousValues = {};\r\n            self.rowsGroupData = {};\r\n            self.summaryGroup = 0;\r\n\r\n            // Resolve rows\r\n            self.rows = \"\";\r\n            $.each(self.data.rows, function (i, row) {\r\n                if (self.isNewGroup(row)) {\r\n                    // Resolve summary\r\n                    if (self.isNewSummarygroup()) {\r\n                        self.drawSummaryRows(row);\r\n                    }\r\n\r\n                    self.rows += self.drawGroupingRows(row, false);\r\n                }\r\n\r\n                self.addRowGroupData(row);\r\n                self.rows += self.drawRow(row);\r\n            });\r\n\r\n            //Replace totalizer value\r\n            self.groupByValues = {};\r\n            $.each(self.data.rows, function (i, row) {\r\n                 self.drawGroupingRows(row, true);\r\n            });\r\n\r\n            return self.rows;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the table associated with the data\r\n        */\r\n        drawTable: function (html) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve table template\r\n            var table = $.fasttmpl(options.template.table, {\r\n                showSummary: options.showSummary,\r\n                tableCssClass: options.tableCssClass,\r\n                groupByColumns: options.groupByColumns || []\r\n            });\r\n            var emptyTable = $.fasttmpl(options.template.emptyTable);\r\n\r\n            // Resolve header\r\n            table = self._replaceElement(table, \"columns\", self.drawHeader());\r\n\r\n            // Resolve body\r\n            table = self._replaceElement(table, \"rows\", self.drawBody());\r\n\r\n            // Resolve summary\r\n            if (options.showSummary) {\r\n                table = self._replaceElement(table, \"summary\", self.drawSummary());\r\n            }\r\n\r\n            // Resolve pager\r\n            html = self._replaceElement(html, \"pager\", self.drawPager());\r\n\r\n            // Resolve buttons\r\n            html = self._replaceElement(html, \"buttons\", self.drawButtons());\r\n\r\n            //Resolve export options menu\r\n            html = self._replaceElement(html, \"gridExportOptions\", self.drawGridExportOptions());\r\n\r\n            // Resolve row buttons\r\n            html = self._replaceElement(html, \"rowButtons\", self.drawRowButtons());\r\n\r\n            // Resolve dynamic Pager\r\n            html = self._replaceElement(html, \"dynamicPager\", self.drawDynamicPager());\r\n\r\n            // Perform grid replaces\r\n            html = self._replaceElement(html, \"table\", table);\r\n            html = self._replaceElement(html, \"emptyTable\", emptyTable);\r\n            return html;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a column header\r\n        */\r\n        drawColumn: function (column) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var cssClass = (typeof column.bizAgiProperties != \"undefined\" && column.bizAgiProperties.cssclass) ? column.bizAgiProperties.cssclass : \"\";\r\n\r\n            if (self.showColumn(column)) {\r\n                // Resolve column template\r\n                return $.fasttmpl(options.template.column, $.extend({}, column, {\r\n                    sortActive: column.name == options.sortBy ? column.name == options.sortBy : column.name == options.sortBy.split(\".\")[0] && !self.exactMatch ? column.name == options.sortBy.split(\".\")[0] : false,\r\n                    sortType: options.sortOrder,\r\n                    columnCssClass: cssClass,\r\n                    headerLabelStyles: options.headerStyles ? options.headerStyles.label : '',\r\n                    headerStyles: options.headerStyles ? options.headerStyles.header : ''\r\n                }));\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   This method draws a grid row\r\n        */\r\n        drawRow: function (rowData, isNewRow) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var key = rowData[self.columnKeyIndex];\r\n            var groupByColumns = options.groupByColumns ? options.groupByColumns.length : 0;\r\n            var newRow = isNewRow || false;\r\n            var rnd = Math.floor(Math.random() * 10000);\r\n            var row = $.fasttmpl(options.template.row, {\r\n                key: rnd,\r\n                isNewRow: isNewRow,\r\n                businessKey: key\r\n            });\r\n\r\n            row = self._replaceElement(row, \"empty-cells\", self.drawEmptyCells({ cells: groupByColumns, conectorV: true }));\r\n\r\n            // Resolve cells\r\n            var cells = \"\";\r\n            var bSpecialCellAdded = false;\r\n            $.each(rowData, function (i, cell) {\r\n                if (bSpecialCellAdded) {\r\n                    return;\r\n                }\r\n\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i < self.options.maxColumns + 1) {\r\n                        // Draw normal cell\r\n                        cells += self.drawCell(i, key, cell, newRow);\r\n                    } else {\r\n                        // Draw special cell\r\n                        cells += self.drawSpecialCell(i, key, cell);\r\n                        bSpecialCellAdded = true;\r\n                    }\r\n                } else {\r\n                    // Draw normal cell\r\n                    cells += self.drawCell(i, key, cell, newRow);\r\n                }\r\n            });\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"cells\", cells);\r\n            return row;\r\n        },\r\n\r\n\r\n        /*\r\n        *   This method draws the grid cell\r\n        */\r\n        drawCell: function (columnIndex, key, value, isNewRow) {\r\n            var self = this;\r\n\r\n            if (self.showColumn(self.columnByIndex[columnIndex])) {\r\n                return self._super(columnIndex, key, value, isNewRow);\r\n            }\r\n\r\n            return \"\";\r\n        },\r\n        /*\r\n        * This method draws the rows of grouping\r\n        */\r\n        drawGroupingRows: function (row, drawTotalizer) {\r\n            var self = this;\r\n            var levels = self.getGroupLevels(row);\r\n            var rows = \"\";\r\n\r\n            if(drawTotalizer)self.setGroupByValues(row);\r\n\r\n            for (var i = 0, l = levels.length; i < l; i++) {\r\n                var level = levels[i];\r\n                rows += self.drawGroupRow(level.deep, l - i, level.position, row, drawTotalizer);\r\n            }\r\n\r\n            if(!drawTotalizer)self.setGroupByValues(row);\r\n            return rows;\r\n        },\r\n\r\n        /*\r\n        * This method returns true if the current row, begins a new row grouped\r\n        */\r\n        isNewGroup: function (row) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var groupByColumns = options.groupByColumns;\r\n\r\n            if (groupByColumns.length == 0) {\r\n                return false;\r\n            }\r\n\r\n            if (self.areIdenticalValues(row)) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n\r\n        /*\r\n        * This method returns true if the current row, begins a new summary row grouped\r\n        */\r\n        isNewSummarygroup: function () {\r\n            var self = this,\r\n                options = self.options;\r\n\r\n            if (!options.showSummary) {\r\n                return false;\r\n            }\r\n\r\n            if (!self.areIdenticalValues(self.groupByPreviousValues)) {\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /*\r\n        * This method sets the values for row grouped\r\n        */\r\n        setGroupByValues: function (row) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var groupByColumns = options.groupByColumns;\r\n\r\n            self.groupByPreviousValues = bizagi.clone(self.groupByValues);\r\n\r\n            for (var i = 0, l = groupByColumns.length; i < l; i++) {\r\n                var groupByColumn = groupByColumns[i];\r\n                self.groupByValues[groupByColumn] = self.getColumnValue(row[groupByColumn]);\r\n            }\r\n        },\r\n\r\n        /*\r\n        * This method returns true if the values of current row are identical to values group\r\n        * otherwise it returns false\r\n        */\r\n        areIdenticalValues: function (row) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var result = true;\r\n            var groupByColumns = options.groupByColumns;\r\n\r\n            for (var i = 0, l = groupByColumns.length; i < l; i++) {\r\n                var groupByColumn = groupByColumns[i];\r\n                result &= (self.groupByValues[groupByColumn] === self.getColumnValue(row[groupByColumn]));\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /*\r\n        * This method returns an array with the level of grouping\r\n        */\r\n        getGroupLevels: function (row) {\r\n            var self = this,\r\n                options = self.options,\r\n                groupLevel = [],\r\n                reset = false,\r\n                groupByColumns = options.groupByColumns;\r\n\r\n            for (var i = 0, l = groupByColumns.length; i < l; i++) {\r\n                var groupByColumn = groupByColumns[i];\r\n\r\n                if (reset || (self.groupByValues[groupByColumn] != self.getColumnValue(row[groupByColumn]))) {\r\n                    groupLevel.push({ deep: i, position: groupByColumn });\r\n                    reset = true;\r\n                }\r\n            }\r\n\r\n            return groupLevel;\r\n        },\r\n\r\n        /*\r\n        * This method returns true id the current columns should be displayed\r\n        */\r\n        showColumn: function (column) {\r\n\r\n            if (typeof column.bizAgiProperties == \"undefined\") {\r\n                return true;\r\n            }\r\n\r\n            return column.bizAgiProperties.showColumn;\r\n\r\n        },\r\n\r\n        /*\r\n        *   This method gets the columns enabled to dispay\r\n        */\r\n        getValidColumns: function () {\r\n            var self = this,\r\n                options = self.options;\r\n\r\n            self.validColumns = self.validColumns || [];\r\n\r\n            if (self.validColumns.length == 0) {\r\n                self.validColumns = $.grep(options.columns, function (column) {\r\n                    return self.showColumn(column);\r\n                });\r\n            }\r\n\r\n            return self.validColumns;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a grid grouped row\r\n        */\r\n        drawGroupRow: function (emptyCells, level, position, row, drawTotalizer) {\r\n            var self = this,\r\n                options = self.options,\r\n                result, groupData, totalizer=\"\";\r\n\r\n            realColumnsData = self.options.columns.filter(function (obj) {\r\n                var showColumn = obj.bizAgiProperties ? obj.bizAgiProperties.showColumn : false;\r\n                return (obj.index !== 0 && showColumn);\r\n            });\r\n\r\n            if (drawTotalizer) {\r\n\r\n                groupData = self.getRowsGroupData(emptyCells);\r\n\r\n                $.each(realColumnsData, function (i, column) {\r\n                    if (column.summarizeBy) {\r\n                        totalizer = self.calculateSummaryGroup(column, groupData);\r\n                        if (column.summarizeBy !== \"count\") {\r\n                            totalizer = self.getFormatedValue(column, totalizer);\r\n                        }\r\n                        self.rows = self._replaceElement(self.rows, \"cellContent\", totalizer);\r\n                    }\r\n                });\r\n            }\r\n            else{\r\n                    var headerRow = $.fasttmpl(options.template.headerRow, {\r\n                        columnTitle: self.getColumnTitle(row, position),\r\n                        colspan: level + 1,\r\n                        columns:realColumnsData,\r\n                        level: emptyCells\r\n                    });\r\n\r\n                    result = self._replaceElement(headerRow, \"empty-cells\", self.drawEmptyCells({ cells: emptyCells, conectorV: true }));\r\n            }\r\n\r\n\r\n            return result;\r\n        },\r\n\r\n        /*\r\n        * This Method draws empty cells for grouping\r\n        */\r\n        drawEmptyCells: function (params) {\r\n            var self = this,\r\n                options = self.options;\r\n\r\n            params = params || {};\r\n            params.cells = params.cells || 0;\r\n\r\n            var cells = \"\";\r\n\r\n            for (var i = 0; i < params.cells; i++) {\r\n                cells += $.fasttmpl(options.template.emptyCell, {\r\n                    conectorV: options.showSummary && params.conectorV,\r\n                    conectorCorner: options.showSummary && params.conectorCorner,\r\n                    conectorH: options.showSummary && params.conectorH\r\n                });\r\n            }\r\n\r\n            return cells;\r\n        },\r\n\r\n        /*\r\n        * This method gets a title of column grouped\r\n        */\r\n        getColumnTitle: function (row, position) {\r\n            var self = this,\r\n                options = self.options;\r\n\r\n            var value = self.getFormatedValue(options.columns[position], self.getColumnValue(row[position]));\r\n            var columnName = self.getColumnName(position);\r\n            var displayType = options.columns[position] && options.columns[position].bizAgiProperties.displayTypeHeader;\r\n\r\n\r\n            if (displayType == \"label\") {\r\n                return columnName;\r\n            }\r\n\r\n            if (displayType == \"value\") {\r\n                return value;\r\n            }\r\n\r\n            if (displayType == \"reversed\") {\r\n                return value + \": \" + columnName;\r\n            }\r\n\r\n            return columnName + \": \" + value;\r\n\r\n        },\r\n\r\n        getFormatedValue: function (column, value) {\r\n            var properties, type, options = {};\r\n            if (column) {\r\n                properties = column.bizAgiProperties;\r\n                type = properties.type;\r\n                switch (type) {\r\n                    case \"columnMoney\":\r\n                        var format = bizagi.localization.getResource(\"numericFormat\");\r\n                        properties.allowDecimals = properties.allowDecimals ? (properties.numDecimals ? properties.numDecimals : (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2)) : 0;\r\n                        properties.numDecimals = properties.allowDecimals ? (properties.numDecimals ? properties.numDecimals : (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2)) : 0;\r\n                        options.positiveFormat = format.positiveFormat;\r\n                        options.negativeFormat = format.negativeFormat;\r\n                        options.decimalSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\r\n                        options.digitGroupSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\r\n                        options.groupDigits = true;\r\n                        options.colorize = false;\r\n                        options.roundToDecimalPlace = properties.numDecimals\r\n                        options.symbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\r\n                        var label = $('<label/>').html(value);\r\n                        label.formatCurrency(options);\r\n                        value = label.text();\r\n                        break;\r\n                    case \"columnBoolean\":\r\n                        if (bizagi.util.parseBoolean(value) == true) {\r\n                            value = bizagi.localization.getResource(\"render-boolean-yes\");\r\n                        } else if (bizagi.util.parseBoolean(value) == false) {\r\n                            value = bizagi.localization.getResource(\"render-boolean-no\");\r\n                        } else {\r\n                            value = \"\";\r\n                        }\r\n                        break;\r\n                    case \"columnSearch\":\r\n                        if (value) {\r\n                            if (value.value) {\r\n                                value = value.value;\r\n                            } else {\r\n                                if (value.label) {\r\n                                    value = value.label;\r\n                                } else {\r\n                                    value = \"\";\r\n                                }\r\n                            }\r\n                        } else {\r\n                            value = \"\";\r\n                        }\r\n                        break;\r\n                    case \"columnNumber\":\r\n                        var format = bizagi.localization.getResource(\"numericFormat\");\r\n                        properties.allowDecimals = properties.allowDecimals ? (properties.numDecimals ? properties.numDecimals : (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2)) : 0;\r\n                        properties.numDecimals = properties.allowDecimals ? (properties.numDecimals ? properties.numDecimals : (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2)) : 0;\r\n                        options.positiveFormat = format.positiveFormat;\r\n                        options.negativeFormat = format.negativeFormat;\r\n                        options.decimalSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\r\n                        options.digitGroupSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\r\n                        options.groupDigits = true;\r\n                        options.colorize = false;\r\n                        options.symbol = \"\";\r\n                        options.roundToDecimalPlace = properties.numDecimals\r\n                        var label = $('<label/>').html(value);\r\n                        if (properties.dataType == 6 || properties.dataType == 8 || properties.dataType == 10 || properties.dataType == 11) {\r\n                            label.formatCurrency(options);\r\n                        }\r\n                        value = label.text();\r\n                        if (column.bizAgiProperties.percentage) {\r\n                            value += \"%\";\r\n                        }\r\n                        break;\r\n                    case \"columnDate\":\r\n                        if (value) {\r\n                            var dateObj;\r\n                            var defaultDateFormat = bizagi.localization.getResource(\"dateFormat\");\r\n                            var defaultTimeFormat = bizagi.localization.getResource(\"timeFormat\");\r\n                            properties.dateFormat = properties.dateFormat || defaultDateFormat;\r\n                            properties.timeFormat = properties.timeFormat || defaultTimeFormat;\r\n                            properties.fullFormat = properties.dateFormat;\r\n                            if (properties.timePickerFormat !== undefined) {\r\n                                dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\r\n                            } else {\r\n                                if (properties.showTime) {\r\n                                    var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\r\n                                    if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\r\n                                        properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\r\n                                    }\r\n                                    if (typeof value == \"string\") {\r\n                                        if (value.length == INVARIANT_FORMAT.length || value.length == (INVARIANT_FORMAT.length + 1)) {\r\n                                            dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\r\n                                        } else {\r\n                                            dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\r\n                                            dateObj.setHours(0, 0, 0, 0);\r\n                                        }\r\n                                    } else {\r\n                                        dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\r\n                                    }\r\n                                } else {\r\n                                    dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\r\n                                }\r\n                            }\r\n                            value = bizagi.util.dateFormatter.formatDate(dateObj, properties.fullFormat, self.i18n);\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            return value;\r\n        },\r\n\r\n        /*\r\n        * This method gets displayName of the column grouped\r\n        */\r\n        getColumnName: function (position) {\r\n            var self = this,\r\n                options = self.options;\r\n\r\n            var column = options.columns[position];\r\n\r\n            return column.bizAgiProperties.displayName;\r\n        },\r\n\r\n        /*\r\n        * This method gets the current value of the column grouped\r\n        */\r\n        getColumnValue: function (value) {\r\n            var self = this;\r\n\r\n            if (typeof value == \"object\" && value != null) {\r\n                if (value.length == 0) {\r\n                    return \"\";\r\n                } else if (value.length == 2) {\r\n                    return self.getColumnValue(value[1]);\r\n                } else if (typeof value[0] == \"object\") {\r\n                    return self.getColumnValue(value[0]);\r\n                } else {\r\n                    return value;\r\n                }\r\n            } else {\r\n                return value;\r\n            }\r\n        },\r\n\r\n\r\n\r\n        /*\r\n        * This method return the colspan number, it is necessary to draw the grouped row\r\n        */\r\n        getColSpan: function (level) {\r\n            var self = this,\r\n                options = self.options;\r\n            var length = options.columns.length - 1;\r\n\r\n            for (var i = 0, l = options.columns.length; i < l; i++) {\r\n                var column = options.columns[i];\r\n                if (!self.showColumn(column)) {\r\n                    length = length - 1;\r\n                }\r\n            }\r\n\r\n            return length + level;\r\n        },\r\n\r\n        /*\r\n        * This method builds the tree of data used for totalize in subgroups\r\n        */\r\n        addRowGroupData: function (row) {\r\n            var self = this,\r\n                valuesGroup = self.rowsGroupData,\r\n                values = self.groupByValues;\r\n\r\n            for (var key in values) {\r\n                var value = values[key];\r\n                valuesGroup[value] = valuesGroup[value] || {};\r\n                valuesGroup = valuesGroup[value];\r\n            }\r\n\r\n            valuesGroup.data = valuesGroup.data || [];\r\n            valuesGroup.data.push(row);\r\n        },\r\n\r\n        /*\r\n        * This method builds a tree with the data\r\n        */\r\n        getRowsGroupData: function (deep) {\r\n            var self = this,\r\n                valuesGroup = self.rowsGroupData,\r\n                i = 0,\r\n                values = self.groupByValues;\r\n\r\n            for (var key in values) {\r\n                var value = values[key];\r\n                valuesGroup = valuesGroup[value];\r\n                if (i == deep) {\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n\r\n            if (valuesGroup.data) {\r\n                return valuesGroup.data;\r\n            }\r\n\r\n            return self.getNestedRows(valuesGroup);\r\n        },\r\n\r\n        /*\r\n        *This method builds a tree with the data\r\n        */\r\n        getNestedRows: function (group, data) {\r\n            var self = this;\r\n            data = data || [];\r\n\r\n            for (var item in group) {\r\n                if (group[item].data) {\r\n                    data = data.concat(group[item].data);\r\n                } else {\r\n                    data = self.getNestedRows(group[item], data);\r\n                }\r\n            }\r\n\r\n            return data;\r\n        },\r\n\r\n\r\n        /*\r\n        * This method draws a summary grouped row\r\n        */\r\n        drawSummaryRows: function (row) {\r\n            var self = this;\r\n            var levels = self.getGroupLevels(row);\r\n            var rows = \"\";\r\n            for (var i = 0, l = levels.length; l > i; l--) {\r\n                var level = levels[l - 1];\r\n                rows += self.drawSummaryRow(level.deep);\r\n            }\r\n\r\n            return rows;\r\n        },\r\n\r\n        /*\r\n        * This method draws a summary group\r\n        */\r\n        drawSummaryRow: function (deep) {\r\n            var self = this,\r\n                options = self.options,\r\n                groupByColumns = options.groupByColumns ? options.groupByColumns.length : 0;\r\n\r\n            var groupData = self.getRowsGroupData(deep);\r\n            var row = $.fasttmpl(options.template.summary, {\r\n                level: deep\r\n            });\r\n\r\n            var cells = \"\";\r\n            var conectorH = false;\r\n            var conectorCorner;\r\n\r\n            for (var i = 0; i < groupByColumns; i++) {\r\n\r\n                conectorCorner = (i == deep);\r\n                cells += self.drawEmptyCells({\r\n                    cells: 1,\r\n                    conectorCorner: conectorCorner,\r\n                    conectorH: conectorH,\r\n                    conectorV: !conectorH && !conectorCorner\r\n                });\r\n\r\n                if (i == deep) {\r\n                    conectorH = true;\r\n                }\r\n            }\r\n\r\n            row = self._replaceElement(row, \"empty-cells\", cells);\r\n            cells = \"\";\r\n\r\n            // Resolve summary cells\r\n            $.each(options.columns, function (i, column) {\r\n                // Draw summary group column\r\n                cells += self.drawSummaryGroupCell(column, groupData);\r\n\r\n            });\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"summary-cells\", cells);\r\n            return row;\r\n\r\n        },\r\n\r\n        /*\r\n        *   This method draws the cells for summary\r\n        */\r\n        drawSummary: function () {\r\n            var self = this,\r\n                options = self.options,\r\n                groupByColumns = options.groupByColumns ? options.groupByColumns.length : 0;\r\n\r\n            var row = $.fasttmpl(options.template.summary);\r\n\r\n            row = self._replaceElement(row, \"empty-cells\", self.drawEmptyCells({ cells: groupByColumns }));\r\n\r\n            var cells = \"\";\r\n            // Resolve summary cells\r\n            $.each(options.columns, function (i, column) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i <= self.options.maxColumns) {\r\n                        // Draw summary column\r\n                        cells += self.drawSummaryCell(column);\r\n                    }\r\n                } else {\r\n                    // Draw summary column\r\n                    cells += self.drawSummaryCell(column);\r\n                }\r\n            });\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"summary-cells\", cells);\r\n            return row;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a single summary cell\r\n        */\r\n        drawSummaryCell: function (column) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if (!self.showColumn(column)) {\r\n                return \"\";\r\n            }\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.summaryCell, {\r\n                hidden: column.hidden || false,\r\n                summarizeBy: column.summarizeBy\r\n            });\r\n\r\n            var result = self.onDrawCell(column, \"summary\", self.calculateSummary(column), false);\r\n            result = (result != undefined && typeof (result) != \"number\") ? result.replace(\"summaryValue\", self.calculateSummary(column)) : result;\r\n\r\n            if (!result) {\r\n                result = \"\";\r\n            }\r\n\r\n            var async = typeof (result) === \"object\" && result.done;\r\n            if (async) {\r\n                if (result.state() === \"resolved\") {\r\n                    // Fetch resolved result\r\n                    cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\r\n                } else {\r\n                    // Wait for result\r\n                    cell = self._replaceElement(cell, \"cellContent\", \"\");\r\n                    self.asyncCells[key + \"-\" + columnIndex] = result;\r\n                }\r\n\r\n            } else {\r\n                // Resolve cell content\r\n                cell = self._replaceElement(cell, \"cellContent\", result);\r\n            }\r\n\r\n            return cell;\r\n        },\r\n\r\n        /*\r\n        * This method draws a grouped cell\r\n        */\r\n        drawSummaryGroupCell: function (column, groupData) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var summaryKey = \"summary \" + self.summaryGroup++;\r\n\r\n            if (!self.showColumn(column)) {\r\n                return \"\";\r\n            }\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.summaryCell, {\r\n                hidden: column.hidden || false,\r\n                summarizeBy: column.summarizeBy,\r\n                summary: summaryKey\r\n            });\r\n\r\n            var result = self.onDrawCell(column, summaryKey, self.calculateSummaryGroup(column, groupData), false);\r\n            result = (result != undefined && typeof (result) != \"number\") ? result.replace(\"summaryValue\", self.calculateSummaryGroup(column, groupData)) : result;\r\n\r\n            if (!result) {\r\n                result = \"\";\r\n            }\r\n\r\n            var async = typeof (result) === \"object\" && result.done;\r\n            if (async) {\r\n                if (result.state() === \"resolved\") {\r\n                    // Fetch resolved result\r\n                    cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\r\n                } else {\r\n                    // Wait for result\r\n                    cell = self._replaceElement(cell, \"cellContent\", \"\");\r\n                    self.asyncCells[key + \"-\" + columnIndex] = result;\r\n                }\r\n\r\n            } else {\r\n                // Resolve cell content\r\n                cell = self._replaceElement(cell, \"cellContent\", result);\r\n            }\r\n\r\n            return cell;\r\n\r\n        },\r\n\r\n        /*\r\n        *   Calculates the summary for a column given the data\r\n        */\r\n        calculateSummaryGroup: function (column, dataRowsgroup) {\r\n            var self = this;\r\n            var operation = column.summarizeBy;\r\n            dataRowsgroup = dataRowsgroup || [];\r\n\r\n            //Consider the default values in the operations\r\n            $.each(dataRowsgroup, function (i, value) {\r\n                if (typeof dataRowsgroup[i][column.index] != \"undefined\" && dataRowsgroup[i][column.index] == null && column.bizAgiProperties.defaultvalue != null) {\r\n                    dataRowsgroup[i][column.index] = column.bizAgiProperties.defaultvalue;\r\n                }\r\n            });\r\n            var columnValues = $.map(dataRowsgroup, function (row, i) { return row[column.index]; });\r\n            var result;\r\n\r\n            // Don't calculate anything if there are no rows\r\n            if (columnValues.length == 0) return 0;\r\n\r\n            // Resolve operations\r\n            if (operation == \"sum\") {\r\n                result = 0;\r\n                $.each(columnValues, function (i, value) { if (null != value) result += Number(value); });\r\n\r\n            } else if (operation == \"min\") {\r\n                result = columnValues[0] || 0;\r\n                $.each(columnValues, function (i, value) { if (typeof (value) == \"number\" && null != value && (value < result)) result = Number(value); });\r\n                if (result === Math.max()) result = null;\r\n\r\n            } else if (operation == \"max\") {\r\n                result = columnValues[0] || 0;\r\n                $.each(columnValues, function (i, value) { if (typeof (value) == \"number\" && null != value && (value > result)) result = Number(value); });\r\n                if (result === Math.min()) result = null;\r\n\r\n            } else if (operation == \"avg\") {\r\n                result = 0;\r\n                $.each(columnValues, function (i, value) { if (null != value) result += Number(value); });\r\n                result = result / columnValues.length;\r\n\r\n\r\n            } else if (operation == \"count\") {\r\n                result = 0;\r\n                columnValues = dataRowsgroup;\r\n\r\n                for (var i = 0; i < columnValues.length; i++) {\r\n                    var columnValue = columnValues[i][column.index];\r\n\r\n                    if (columnValue instanceof Array && columnValue.length > 0) {\r\n                        result += 1;\r\n                    }\r\n                    else if (!(columnValue instanceof Array) && columnValue != null) {\r\n                        result += 1;\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in each cell after the element has been created\r\n        */\r\n        postRenderRow: function (row) {\r\n            var self = this;\r\n            var columns = self.getValidColumns();\r\n            var key = row.attr(\"data-business-key\");\r\n            var isNewRow = row.attr(\"data-new-row\");\r\n            var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\r\n            cells = cells.not(\".ui-bizagi-grid-ignore\");\r\n            $.each(cells, function (i, cell) {\r\n                var column = columns[i];\r\n                if (column.key) return; // Omit key column\r\n\r\n                // Check if the cell has an async result\r\n                var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                if (asyncResult) {\r\n                    $.when(asyncResult)\r\n                            .done(function (html) {\r\n                                // Append async result\r\n                                cell = $(cell);\r\n                                cell.append(html);\r\n                                self.onCellReady(column, key, cell, isNewRow);\r\n                            });\r\n                } else {\r\n                    self.onCellReady(column, key, $(cell), isNewRow);\r\n                }\r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in all the grid\r\n        */\r\n        postRender: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            self._super();\r\n\r\n            // Get grid grouped rows\r\n            if (options.showSummary) {\r\n                var rows = self._getComponent(\"grouped-summary-cells\");\r\n                if (rows) {\r\n                    $.each(rows, function (i, row) {\r\n                        row = $(row);\r\n                        self.postRenderGroupedSummary(row);\r\n                    });\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in each summary cell after the element has been created\r\n        */\r\n        postRenderGroupedSummary: function (row) {\r\n            var self = this;\r\n            var columns = self.getValidColumns();\r\n            var cells = row.is(\"[data-bizagi-component=grouped-summary-cells]\") ? row.children().not(\".ui-bizagi-grid-ignore\") : [];\r\n            $.each(cells, function (i, cell) {\r\n                var column = columns[i];\r\n                if (column.key) return; // Omit key column\r\n\r\n                var key = $(cell).attr(\"data-grouped-summary-key\");\r\n                if (key) {\r\n                    // Check if the cell has an async result\r\n                    var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                    if (asyncResult) {\r\n                        $.when(asyncResult)\r\n                            .done(function (html) {\r\n                                // Append async result\r\n                                cell = $(cell);\r\n                                cell.append(html);\r\n                                self.onCellReady(column, key, cell, false);\r\n                            });\r\n                    } else {\r\n                        self.onCellReady(column, key, $(cell), false);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n\r\n        /*\r\n        *   Execute post-renders in each summary cell after the element has been created\r\n        */\r\n        postRenderSummary: function (summary) {\r\n            var self = this;\r\n            var columns = self.getValidColumns();\r\n            var cells = summary.is(\"[data-bizagi-component=grouped-summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=grouped-summary-cells]\").children();\r\n            cells = cells.not(\".ui-bizagi-grid-ignore\");\r\n            $.each(cells, function (i, cell) {\r\n                var column = columns[i];\r\n                if (column.key) return; // Omit key column\r\n\r\n                // Check if the cell has an async result\r\n                var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                if (asyncResult) {\r\n                    $.when(asyncResult)\r\n                            .done(function (html) {\r\n                                // Append async result\r\n                                cell = $(cell);\r\n                                cell.append(html);\r\n                                self.onCellReady(column, \"summary\", cell, false);\r\n                            });\r\n                } else {\r\n                    self.onCellReady(column, \"summary\", $(cell), false);\r\n                }\r\n            });\r\n        },\r\n\r\n        /*\r\n        * This method binds events\r\n        */\r\n        attachHandlers: function () {\r\n            var self = this;\r\n\r\n            self._super();\r\n\r\n            // Add selection events\r\n            self._getComponent(\"rows\").find(\".ui-bizagi-grid-grouped-header\").bind(\"click\", function () {\r\n                var level = $(this).attr(\"data-grouped-level\");\r\n                var visibility = $(this).data(\"grouped-visibility\");\r\n                var group = $(this)\r\n                            .nextUntil(\"[data-grouped-level = '\" + level + \"']\")\r\n                            .filter(function () {\r\n                                var result = true;\r\n\r\n                                var groupedLevel = $(this).attr(\"data-grouped-level\");\r\n                                var summaryLevel = $(this).attr(\"data-summary-grouped-level\");\r\n\r\n                                if (groupedLevel) {\r\n                                    if (parseInt(groupedLevel) < level) {\r\n                                        result = false;\r\n                                    }\r\n                                }\r\n\r\n                                if (summaryLevel) {\r\n                                    if (parseInt(summaryLevel) < level) {\r\n                                        result = false;\r\n                                    }\r\n                                }\r\n\r\n                                return result;\r\n                                //return !($(this).attr(\"data-grouped-level\") < level);\r\n                            });\r\n\r\n                $(this).data(\"grouped-visibility\", !visibility);\r\n                if (visibility) {\r\n                    $(\".ui-icon\", this).removeClass(\"ui-icon-triangle-1-s\").addClass(\"ui-icon-triangle-1-e\");\r\n                    $(\".ui-icon\", group).removeClass(\"ui-icon-triangle-1-s\").addClass(\"ui-icon-triangle-1-e\");\r\n                    $(group).hide();\r\n                } else {\r\n                    $(\".ui-icon\", this).removeClass(\"ui-icon-triangle-1-e\").addClass(\"ui-icon-triangle-1-s\");\r\n                    $(\".ui-icon\", group).removeClass(\"ui-icon-triangle-1-e\").addClass(\"ui-icon-triangle-1-s\");\r\n                    $(group).show();\r\n                }\r\n\r\n            });\r\n\r\n\r\n        }\r\n\r\n    });\r\n\r\n})(jQuery);","/* \r\n * Simple Pagination Control for Bizagi Workportal\r\n * @author: Edward J Morales\r\n */\r\n\r\n(function ($) {\r\n    $.fn.bizagiPagination = function (options){\r\n        // define options\r\n        options = options || {};\r\n        \r\n        var opt = {\r\n            limInf : 0,\r\n            totalPages: 1,\r\n            actualPage: 1,            \r\n            \r\n            // Controllers elements\r\n            listElement: $(\"ul\"),\r\n            first: '&lt;&lt;',\r\n            firstClass: \"first\",\r\n            prev: '&lt;',\r\n            prevClass: 'prev',\r\n            next: \"&gt;\",\r\n            nextClass: \"next\",\r\n            last: \"&gt;&gt;\",\r\n            lastClass: \"last\",\r\n            \r\n            // Default class of pagination template, ui-bizagi-workportal-widget-inbox-common-pagination\r\n            // <li {{if page==pageNumber}} class=\"page active\" {{else}} class=\"page\" {{/if}} data-page=\"${pageNumber}\">\r\n            // <span class=\"number\">${pageNumber}</span>\r\n            // </li>\r\n            liClass: \"bz-page\",\r\n            arrowClass: \"bz-pageArrow\",\r\n            \r\n            // Auto focus on selected element\r\n            selectedFocus: true,\r\n            \r\n            // Call back methods\r\n            clickCallBack: function(){}\r\n            \r\n        };\r\n\t\t\r\n\t\t\r\n\t\tif(options.actualPage > options.totalPages){\r\n\t\t\toptions.actualPage = options.totalPages;\r\n\t\t}\r\n        \r\n        var pagination = {\r\n            previousPage: (opt.actualPage > 1)? opt.actualPage - 1 : 1,\r\n            nextPage: (opt.actualPage < opt.totalPages )? opt.actualPage + 1 : opt.totalPages\r\n        }\r\n        \r\n        // Extend options\r\n        $.extend(opt,opt,options);\r\n        \r\n        \r\n        function init(){\r\n            // Count total elements\r\n            opt.totalElements = $(\"li.\" + opt.liClass, opt.listElement).length;\r\n            \r\n            \r\n            // Add control elements\r\n            if(opt.totalPages > opt.totalElements && opt.totalElements > 1){\r\n                appendControlsArrows();\r\n            }\r\n            \r\n            // Add events\r\n            bindElements();\r\n                        \r\n            // Set focus\r\n            if(opt.selectedFocus && opt.actualPage >= opt.totalElements && opt.totalPages > opt.totalElements){\r\n                var firstElementValue;\r\n                var halfDisplace = (opt.actualPage - Math.round(opt.totalElements / 2));\r\n\t\t\t\t\r\n                if(halfDisplace < 1 ){\r\n                    firstElementValue = 1;\r\n                }else if((halfDisplace + opt.totalElements) > opt.totalPages){\r\n                    firstElementValue = (opt.totalPages - opt.totalElements);\r\n                    firstElementValue = (firstElementValue < 1)?1:firstElementValue;\r\n                }else{\r\n                    firstElementValue = halfDisplace;\r\n                }\r\n\t\t\t\t\r\n                if(opt.listElement.find(\"li.active\").length==0){\r\n\t\t\t\t\tdisplaceElements(firstElementValue,1);\r\n\t\t\t\t}\r\n            }\r\n        }\r\n        \r\n        // Append control arrow to list\r\n        function appendControlsArrows(){\r\n            // add prev arrow\r\n                opt.listElement.prepend(\"<li/>\").find(\"li:first\").addClass(opt.prevClass).data(\"page\",pagination.previousPage).html(opt.prev);\r\n             \r\n                // add first arrow\r\n                opt.listElement.prepend(\"<li/>\").find(\"li:first\").addClass(opt.arrowClass +\" \"+opt.firstClass).data(\"page\",\"1\").html(opt.first);\r\n             \r\n                // add next arrow\r\n                opt.listElement.append(\"<li/>\").find(\"li:last\").addClass(opt.nextClass).data(\"page\",pagination.nextPage).html(opt.next);\r\n             \r\n                // add last arrow\r\n                opt.listElement.append(\"<li/>\").find(\"li:last\").addClass(opt.arrowClass +\" \"+opt.lastClass).data(\"page\",opt.totalPages).html(opt.last);                         \r\n            }\r\n            \r\n        \r\n        // Add events\r\n        function bindElements(){\r\n            // Click event for list element\r\n            var options = {};\r\n            $(\"li.\"+opt.liClass+\", li.\"+opt.arrowClass ,opt.listElement).click(function(){\r\n                // Next line now includes a ternary operator in order to confirm last arrow (>>) if going indeed to the last page\r\n                options.page = ($(this).hasClass(opt.lastClass)) ?  opt.totalPages : $.trim($(this).data(\"page\") + \" \");\r\n                options.parent = $(this).parent();\r\n                options.self = $(this);\r\n                opt.clickCallBack( options );\r\n            });\r\n            \r\n            bindNextArrow();\r\n            bindPrevArrow();            \r\n        }\r\n        \r\n        \r\n        // Bind for back scroll\r\n        function bindPrevArrow(){\r\n            $(\"li.\"+opt.prevClass,opt.listElement).hover(function(){\r\n                back = setInterval(function(){\r\n                        pageScroll(-1);\r\n                },300);\r\n            },function() {\r\n                clearInterval(back);\r\n            });\r\n        }\r\n            \r\n        // Bind for next scroll\r\n        function bindNextArrow(){\r\n            $(\"li.\"+opt.nextClass,opt.listElement).hover(function(){\r\n                next = setInterval(function(){\r\n                        pageScroll(1);\r\n                },300);\r\n            },function() {\r\n                clearInterval(next);\r\n            });                       \r\n        }\r\n        \r\n        // Change values of elements\r\n        function pageScroll(increment){\r\n            // if increment its positive, execute rigth scroll\r\n            // if invrement its negative, execute left scroll\r\n            increment = increment || 1;\r\n            var displace = false;\r\n            \r\n            // Define first element value\r\n            var firstPageValue = $(\"li.\"+opt.liClass+\":first\",opt.listElement).data(\"page\");\r\n            var lastPageValue = $(\"li.\" + opt.liClass + \":last\", opt.listElement).data(\"page\");\r\n            \r\n            \r\n            // Check left scroll - decrement\r\n            if(increment < 0 && firstPageValue > 1){\r\n                displace = true;                \r\n            }else if(increment > 0 && lastPageValue < opt.totalPages){\r\n                displace = true;    \r\n            }\r\n                \r\n            if(displace){\r\n                displaceElements(firstPageValue,increment);\r\n            }    \r\n        }\r\n        \r\n        // Displace elements\r\n        function displaceElements(firstElementValue,increment){\r\n            firstElementValue = firstElementValue || 1;\r\n            increment = increment || 0;\r\n            var pageData;\r\n            \r\n            if(increment > 0){\r\n                // Increment                \r\n                pageData = firstElementValue;\r\n            }else if(increment < 0){\r\n                // Decrement  \r\n                pageData = firstElementValue - 2;\r\n            }else{\r\n                return;\r\n            }\r\n\r\n            $.each($(\"li.\" + opt.liClass, opt.listElement), function (key, value) {                \r\n                pageData++;\r\n                $(this).data(\"page\",pageData);\r\n                $(this).find(\"span\").html(pageData);\r\n                // Changes the attribute content of data-page with the current number pageData\r\n                $(this).attr(\"data-page\",pageData);\r\n                // Check if selected style\r\n                if(opt.actualPage == pageData && !$(this).hasClass(\"active\")){\r\n                    $(this).addClass(\"active\");  \r\n                }else{\r\n                    $(this).removeClass(\"active\");\r\n                }\r\n            });\r\n            \r\n            // Show or hide tooltip pagination\r\n            if( $(opt.listElement).find(\".active\").length == 1){\r\n                $(opt.listElement).parent().find(\"#tooltipPagination\").css(\"visibility\",\"hidden\");\r\n            }else{\r\n                $(opt.listElement).parent().find(\"#tooltipPagination\").css(\"visibility\",\"visible\"); \r\n            }\r\n                  \r\n          /* WTF??\r\n\t    // Next lines for pagination with a lot of cases\r\n             if ( ($(opt.listElement).find(\".active\")).attr(\"data-page\") > 14 && $(\"ul\").eq(-2).find(\"li\").eq(5).attr(\"data-page\")) {  \r\n                $(\"ul\").eq(-1).css(\"top\",\"-28px\"); $(\"ul\").eq(-2).css(\"visibility\",\"hidden\"); \r\n             } else if ($(\"ul\").eq(-2).find(\"li\").eq(5).attr(\"data-page\")) { \r\n                $(\"ul\").eq(-1).css(\"top\",\"auto\");   $(\"ul\").eq(-2).css(\"visibility\",\"visible\"); \r\n             }\r\n\t     */\r\n        }               \r\n\r\n        // Init plugin\r\n        init();\r\n    };    \r\n})(jQuery);\r\n\r\n\r\n\r\n","/*! jQuery Timepicker Addon - v1.4 - 2013-08-11\r\n* http://trentrichardson.com/examples/timepicker\r\n* Copyright (c) 2013 Trent Richardson; Licensed MIT */\r\n(function ($) {\r\n\r\n    /*\r\n    * Lets not redefine timepicker, Prevent \"Uncaught RangeError: Maximum call stack size exceeded\"\r\n    */\r\n    $.ui.timepicker = $.ui.timepicker || {};\r\n    if ($.ui.timepicker.version) {\r\n        return;\r\n    }\r\n\r\n    /*\r\n    * Extend jQueryUI, get it started with our version number\r\n    */\r\n    $.extend($.ui, {\r\n        timepicker: {\r\n            version: \"1.4\"\r\n        }\r\n    });\r\n\r\n    /* \r\n    * Timepicker manager.\r\n    * Use the singleton instance of this class, $.timepicker, to interact with the time picker.\r\n    * Settings for (groups of) time pickers are maintained in an instance object,\r\n    * allowing multiple different settings on the same page.\r\n    */\r\n    var Timepicker = function () {\r\n        this.regional = []; // Available regional settings, indexed by language code\r\n        this.regional[''] = { // Default regional settings\r\n            currentText: 'Now',\r\n            closeText: 'Done',\r\n            amNames: ['AM', 'A'],\r\n            pmNames: ['PM', 'P'],\r\n            timeFormat: 'HH:mm',\r\n            timeSuffix: '',\r\n            timeOnlyTitle: 'Choose Time',\r\n            timeText: 'Time',\r\n            hourText: 'Hour',\r\n            minuteText: 'Minute',\r\n            secondText: 'Second',\r\n            millisecText: 'Millisecond',\r\n            microsecText: 'Microsecond',\r\n            timezoneText: 'Time Zone',\r\n            isRTL: false\r\n        };\r\n        this._defaults = { // Global defaults for all the datetime picker instances\r\n            showButtonPanel: true,\r\n            timeOnly: false,\r\n            showHour: null,\r\n            showMinute: null,\r\n            showSecond: null,\r\n            showMillisec: null,\r\n            showMicrosec: null,\r\n            showTimezone: null,\r\n            showTime: true,\r\n            stepHour: 1,\r\n            stepMinute: 1,\r\n            stepSecond: 1,\r\n            stepMillisec: 1,\r\n            stepMicrosec: 1,\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0,\r\n            millisec: 0,\r\n            microsec: 0,\r\n            timezone: null,\r\n            hourMin: 0,\r\n            minuteMin: 0,\r\n            secondMin: 0,\r\n            millisecMin: 0,\r\n            microsecMin: 0,\r\n            hourMax: 23,\r\n            minuteMax: 59,\r\n            secondMax: 59,\r\n            millisecMax: 999,\r\n            microsecMax: 999,\r\n            minDateTime: null,\r\n            maxDateTime: null,\r\n            onSelect: null,\r\n            hourGrid: 0,\r\n            minuteGrid: 0,\r\n            secondGrid: 0,\r\n            millisecGrid: 0,\r\n            microsecGrid: 0,\r\n            alwaysSetTime: true,\r\n            separator: ' ',\r\n            altFieldTimeOnly: true,\r\n            altTimeFormat: null,\r\n            altSeparator: null,\r\n            altTimeSuffix: null,\r\n            pickerTimeFormat: null,\r\n            pickerTimeSuffix: null,\r\n            showTimepicker: true,\r\n            timezoneList: null,\r\n            addSliderAccess: false,\r\n            sliderAccessArgs: null,\r\n            controlType: 'slider',\r\n            defaultValue: null,\r\n            parse: 'strict'\r\n        };\r\n        $.extend(this._defaults, this.regional['']);\r\n    };\r\n\r\n    $.extend(Timepicker.prototype, {\r\n        $input: null,\r\n        $altInput: null,\r\n        $timeObj: null,\r\n        inst: null,\r\n        hour_slider: null,\r\n        minute_slider: null,\r\n        second_slider: null,\r\n        millisec_slider: null,\r\n        microsec_slider: null,\r\n        timezone_select: null,\r\n        hour: 0,\r\n        minute: 0,\r\n        second: 0,\r\n        millisec: 0,\r\n        microsec: 0,\r\n        timezone: null,\r\n        hourMinOriginal: null,\r\n        minuteMinOriginal: null,\r\n        secondMinOriginal: null,\r\n        millisecMinOriginal: null,\r\n        microsecMinOriginal: null,\r\n        hourMaxOriginal: null,\r\n        minuteMaxOriginal: null,\r\n        secondMaxOriginal: null,\r\n        millisecMaxOriginal: null,\r\n        microsecMaxOriginal: null,\r\n        ampm: '',\r\n        formattedDate: '',\r\n        formattedTime: '',\r\n        formattedDateTime: '',\r\n        timezoneList: null,\r\n        units: ['hour', 'minute', 'second', 'millisec', 'microsec'],\r\n        support: {},\r\n        control: null,\r\n\r\n        /* \r\n        * Override the default settings for all instances of the time picker.\r\n        * @param  {Object} settings  object - the new settings to use as defaults (anonymous object)\r\n        * @return {Object} the manager object\r\n        */\r\n        setDefaults: function (settings) {\r\n            extendRemove(this._defaults, settings || {});\r\n            return this;\r\n        },\r\n\r\n        /*\r\n        * Create a new Timepicker instance\r\n        */\r\n        _newInst: function ($input, opts) {\r\n            var tp_inst = new Timepicker(),\r\n\t\t\t\tinlineSettings = {},\r\n\t\t\t\tfns = {},\r\n\t\t\t\toverrides, i;\r\n\r\n            for (var attrName in this._defaults) {\r\n                if (this._defaults.hasOwnProperty(attrName)) {\r\n                    var attrValue = $input.attr('time:' + attrName);\r\n                    if (attrValue) {\r\n                        try {\r\n                            inlineSettings[attrName] = eval(attrValue);\r\n                        } catch (err) {\r\n                            inlineSettings[attrName] = attrValue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            overrides = {\r\n                beforeShow: function (input, dp_inst) {\r\n                    if ($.isFunction(tp_inst._defaults.evnts.beforeShow)) {\r\n                        return tp_inst._defaults.evnts.beforeShow.call($input[0], input, dp_inst, tp_inst);\r\n                    }\r\n                },\r\n                onChangeMonthYear: function (year, month, dp_inst) {\r\n                    // Update the time as well : this prevents the time from disappearing from the $input field.\r\n                    tp_inst._updateDateTime(dp_inst);\r\n                    if ($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)) {\r\n                        tp_inst._defaults.evnts.onChangeMonthYear.call($input[0], year, month, dp_inst, tp_inst);\r\n                    }\r\n                },\r\n                onClose: function (dateText, dp_inst) {\r\n                    if (tp_inst.timeDefined === true && $input.val() !== '') {\r\n                        tp_inst._updateDateTime(dp_inst);\r\n                    }\r\n                    if ($.isFunction(tp_inst._defaults.evnts.onClose)) {\r\n                        tp_inst._defaults.evnts.onClose.call($input[0], dateText, dp_inst, tp_inst);\r\n                    }\r\n                }\r\n            };\r\n            for (i in overrides) {\r\n                if (overrides.hasOwnProperty(i)) {\r\n                    fns[i] = opts[i] || null;\r\n                }\r\n            }\r\n\r\n            tp_inst._defaults = $.extend({}, this._defaults, inlineSettings, opts, overrides, {\r\n                evnts: fns,\r\n                timepicker: tp_inst // add timepicker as a property of datepicker: $.datepicker._get(dp_inst, 'timepicker');\r\n            });\r\n            tp_inst.amNames = $.map(tp_inst._defaults.amNames, function (val) {\r\n                return val.toUpperCase();\r\n            });\r\n            tp_inst.pmNames = $.map(tp_inst._defaults.pmNames, function (val) {\r\n                return val.toUpperCase();\r\n            });\r\n\r\n            // detect which units are supported\r\n            tp_inst.support = detectSupport(\r\n\t\t\t\t\ttp_inst._defaults.timeFormat +\r\n\t\t\t\t\t(tp_inst._defaults.pickerTimeFormat ? tp_inst._defaults.pickerTimeFormat : '') +\r\n\t\t\t\t\t(tp_inst._defaults.altTimeFormat ? tp_inst._defaults.altTimeFormat : ''));\r\n\r\n            // controlType is string - key to our this._controls\r\n            if (typeof (tp_inst._defaults.controlType) === 'string') {\r\n                if (tp_inst._defaults.controlType === 'slider' && typeof ($.ui.slider) === 'undefined') {\r\n                    tp_inst._defaults.controlType = 'select';\r\n                }\r\n                tp_inst.control = tp_inst._controls[tp_inst._defaults.controlType];\r\n            }\r\n            // controlType is an object and must implement create, options, value methods\r\n            else {\r\n                tp_inst.control = tp_inst._defaults.controlType;\r\n            }\r\n\r\n            // prep the timezone options\r\n            var timezoneList = [-720, -660, -600, -570, -540, -480, -420, -360, -300, -270, -240, -210, -180, -120, -60,\r\n\t\t\t\t\t0, 60, 120, 180, 210, 240, 270, 300, 330, 345, 360, 390, 420, 480, 525, 540, 570, 600, 630, 660, 690, 720, 765, 780, 840];\r\n            if (tp_inst._defaults.timezoneList !== null) {\r\n                timezoneList = tp_inst._defaults.timezoneList;\r\n            }\r\n            var tzl = timezoneList.length, tzi = 0, tzv = null;\r\n            if (tzl > 0 && typeof timezoneList[0] !== 'object') {\r\n                for (; tzi < tzl; tzi++) {\r\n                    tzv = timezoneList[tzi];\r\n                    timezoneList[tzi] = { value: tzv, label: $.timepicker.timezoneOffsetString(tzv, tp_inst.support.iso8601) };\r\n                }\r\n            }\r\n            tp_inst._defaults.timezoneList = timezoneList;\r\n\r\n            // set the default units\r\n            tp_inst.timezone = tp_inst._defaults.timezone !== null ? $.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone) :\r\n\t\t\t\t\t\t\t((new Date()).getTimezoneOffset() * -1);\r\n            tp_inst.hour = tp_inst._defaults.hour < tp_inst._defaults.hourMin ? tp_inst._defaults.hourMin :\r\n\t\t\t\t\t\t\ttp_inst._defaults.hour > tp_inst._defaults.hourMax ? tp_inst._defaults.hourMax : tp_inst._defaults.hour;\r\n            tp_inst.minute = tp_inst._defaults.minute < tp_inst._defaults.minuteMin ? tp_inst._defaults.minuteMin :\r\n\t\t\t\t\t\t\ttp_inst._defaults.minute > tp_inst._defaults.minuteMax ? tp_inst._defaults.minuteMax : tp_inst._defaults.minute;\r\n            tp_inst.second = tp_inst._defaults.second < tp_inst._defaults.secondMin ? tp_inst._defaults.secondMin :\r\n\t\t\t\t\t\t\ttp_inst._defaults.second > tp_inst._defaults.secondMax ? tp_inst._defaults.secondMax : tp_inst._defaults.second;\r\n            tp_inst.millisec = tp_inst._defaults.millisec < tp_inst._defaults.millisecMin ? tp_inst._defaults.millisecMin :\r\n\t\t\t\t\t\t\ttp_inst._defaults.millisec > tp_inst._defaults.millisecMax ? tp_inst._defaults.millisecMax : tp_inst._defaults.millisec;\r\n            tp_inst.microsec = tp_inst._defaults.microsec < tp_inst._defaults.microsecMin ? tp_inst._defaults.microsecMin :\r\n\t\t\t\t\t\t\ttp_inst._defaults.microsec > tp_inst._defaults.microsecMax ? tp_inst._defaults.microsecMax : tp_inst._defaults.microsec;\r\n            tp_inst.ampm = '';\r\n            tp_inst.$input = $input;\r\n\r\n            if (tp_inst._defaults.altField) {\r\n                tp_inst.$altInput = $(tp_inst._defaults.altField).css({\r\n                    cursor: 'pointer'\r\n                }).focus(function () {\r\n                    $input.trigger(\"focus\");\r\n                });\r\n            }\r\n\r\n            if (tp_inst._defaults.minDate === 0 || tp_inst._defaults.minDateTime === 0) {\r\n                tp_inst._defaults.minDate = new Date();\r\n            }\r\n            if (tp_inst._defaults.maxDate === 0 || tp_inst._defaults.maxDateTime === 0) {\r\n                tp_inst._defaults.maxDate = new Date();\r\n            }\r\n\r\n            // datepicker needs minDate/maxDate, timepicker needs minDateTime/maxDateTime..\r\n            if (tp_inst._defaults.minDate !== undefined && tp_inst._defaults.minDate instanceof Date) {\r\n                tp_inst._defaults.minDateTime = new Date(tp_inst._defaults.minDate.getTime());\r\n            }\r\n            if (tp_inst._defaults.minDateTime !== undefined && tp_inst._defaults.minDateTime instanceof Date) {\r\n                tp_inst._defaults.minDate = new Date(tp_inst._defaults.minDateTime.getTime());\r\n            }\r\n            if (tp_inst._defaults.maxDate !== undefined && tp_inst._defaults.maxDate instanceof Date) {\r\n                tp_inst._defaults.maxDateTime = new Date(tp_inst._defaults.maxDate.getTime());\r\n            }\r\n            if (tp_inst._defaults.maxDateTime !== undefined && tp_inst._defaults.maxDateTime instanceof Date) {\r\n                tp_inst._defaults.maxDate = new Date(tp_inst._defaults.maxDateTime.getTime());\r\n            }\r\n            tp_inst.$input.bind('focus', function () {\r\n                tp_inst._onFocus();\r\n            });\r\n\r\n            return tp_inst;\r\n        },\r\n\r\n        /*\r\n        * add our sliders to the calendar\r\n        */\r\n        _addTimePicker: function (dp_inst) {\r\n            var currDT = (this.$altInput && this._defaults.altFieldTimeOnly) ? this.$input.val() + ' ' + this.$altInput.val() : this.$input.val();\r\n\r\n            this.timeDefined = this._parseTime(currDT);\r\n            this._limitMinMaxDateTime(dp_inst, false);\r\n            this._injectTimePicker();\r\n        },\r\n\r\n        /*\r\n        * parse the time string from input value or _setTime\r\n        */\r\n        _parseTime: function (timeString, withDate) {\r\n            if (!this.inst) {\r\n                this.inst = $.datepicker._getInst(this.$input[0]);\r\n            }\r\n\r\n            if (withDate || !this._defaults.timeOnly) {\r\n                var dp_dateFormat = $.datepicker._get(this.inst, 'dateFormat');\r\n                try {\r\n                    var parseRes = parseDateTimeInternal(dp_dateFormat, this._defaults.timeFormat, timeString, $.datepicker._getFormatConfig(this.inst), this._defaults);\r\n                    if (!parseRes.timeObj) {\r\n                        return false;\r\n                    }\r\n                    $.extend(this, parseRes.timeObj);\r\n                } catch (err) {\r\n                    $.timepicker.log(\"Error parsing the date/time string: \" + err +\r\n\t\t\t\t\t\t\t\t\t\"\\ndate/time string = \" + timeString +\r\n\t\t\t\t\t\t\t\t\t\"\\ntimeFormat = \" + this._defaults.timeFormat +\r\n\t\t\t\t\t\t\t\t\t\"\\ndateFormat = \" + dp_dateFormat);\r\n                    return false;\r\n                }\r\n                return true;\r\n            } else {\r\n                var timeObj = $.datepicker.parseTime(this._defaults.timeFormat, timeString, this._defaults);\r\n                if (!timeObj) {\r\n                    return false;\r\n                }\r\n                $.extend(this, timeObj);\r\n                return true;\r\n            }\r\n        },\r\n\r\n        /*\r\n        * generate and inject html for timepicker into ui datepicker\r\n        */\r\n        _injectTimePicker: function () {\r\n            var $dp = this.inst.dpDiv,\r\n\t\t\t\to = this.inst.settings,\r\n\t\t\t\ttp_inst = this,\r\n\t\t\t\tlitem = '',\r\n\t\t\t\tuitem = '',\r\n\t\t\t\tshow = null,\r\n\t\t\t\tmax = {},\r\n\t\t\t\tgridSize = {},\r\n\t\t\t\tsize = null,\r\n\t\t\t\ti = 0,\r\n\t\t\t\tl = 0;\r\n\r\n            // Prevent displaying twice\r\n            if ($dp.find(\"div.ui-timepicker-div\").length === 0 && o.showTimepicker) {\r\n                var noDisplay = ' style=\"display:none;\"',\r\n\t\t\t\t\thtml = '<div class=\"ui-timepicker-div' + (o.isRTL ? ' ui-timepicker-rtl' : '') + '\"><dl>' + '<dt class=\"ui_tpicker_time_label\"' + ((o.showTime) ? '' : noDisplay) + '>' + o.timeText + '</dt>' +\r\n\t\t\t\t\t\t\t\t'<dd class=\"ui_tpicker_time\"' + ((o.showTime) ? '' : noDisplay) + '></dd>';\r\n\r\n                // Create the markup\r\n                for (i = 0, l = this.units.length; i < l; i++) {\r\n                    litem = this.units[i];\r\n                    uitem = litem.substr(0, 1).toUpperCase() + litem.substr(1);\r\n                    show = o['show' + uitem] !== null ? o['show' + uitem] : this.support[litem];\r\n\r\n                    // Added by Peter Medeiros:\r\n                    // - Figure out what the hour/minute/second max should be based on the step values.\r\n                    // - Example: if stepMinute is 15, then minMax is 45.\r\n                    max[litem] = parseInt((o[litem + 'Max'] - ((o[litem + 'Max'] - o[litem + 'Min']) % o['step' + uitem])), 10);\r\n                    gridSize[litem] = 0;\r\n\r\n                    html += '<dt class=\"ui_tpicker_' + litem + '_label\"' + (show ? '' : noDisplay) + '>' + o[litem + 'Text'] + '</dt>' +\r\n\t\t\t\t\t\t\t\t'<dd class=\"ui_tpicker_' + litem + '\"><div class=\"ui_tpicker_' + litem + '_slider\"' + (show ? '' : noDisplay) + '></div>';\r\n\r\n                    if (show && o[litem + 'Grid'] > 0) {\r\n                        html += '<div style=\"padding-left: 1px\"><table class=\"ui-tpicker-grid-label\"><tr>';\r\n\r\n                        if (litem === 'hour') {\r\n                            for (var h = o[litem + 'Min']; h <= max[litem]; h += parseInt(o[litem + 'Grid'], 10)) {\r\n                                gridSize[litem]++;\r\n                                var tmph = $.datepicker.formatTime(this.support.ampm ? 'hht' : 'HH', { hour: h }, o);\r\n                                html += '<td data-for=\"' + litem + '\">' + tmph + '</td>';\r\n                            }\r\n                        }\r\n                        else {\r\n                            for (var m = o[litem + 'Min']; m <= max[litem]; m += parseInt(o[litem + 'Grid'], 10)) {\r\n                                gridSize[litem]++;\r\n                                html += '<td data-for=\"' + litem + '\">' + ((m < 10) ? '0' : '') + m + '</td>';\r\n                            }\r\n                        }\r\n\r\n                        html += '</tr></table></div>';\r\n                    }\r\n                    html += '</dd>';\r\n                }\r\n\r\n                // Timezone\r\n                var showTz = o.showTimezone !== null ? o.showTimezone : this.support.timezone;\r\n                html += '<dt class=\"ui_tpicker_timezone_label\"' + (showTz ? '' : noDisplay) + '>' + o.timezoneText + '</dt>';\r\n                html += '<dd class=\"ui_tpicker_timezone\" ' + (showTz ? '' : noDisplay) + '></dd>';\r\n\r\n                // Create the elements from string\r\n                html += '</dl></div>';\r\n                var $tp = $(html);\r\n\r\n                // if we only want time picker...\r\n                if (o.timeOnly === true) {\r\n                    $tp.prepend('<div class=\"ui-widget-header ui-helper-clearfix ui-corner-all\">' + '<div class=\"ui-datepicker-title\">' + o.timeOnlyTitle + '</div>' + '</div>');\r\n                    $dp.find('.ui-datepicker-header, .ui-datepicker-calendar').hide();\r\n                }\r\n\r\n                // add sliders, adjust grids, add events\r\n                for (i = 0, l = tp_inst.units.length; i < l; i++) {\r\n                    litem = tp_inst.units[i];\r\n                    uitem = litem.substr(0, 1).toUpperCase() + litem.substr(1);\r\n                    show = o['show' + uitem] !== null ? o['show' + uitem] : this.support[litem];\r\n\r\n                    // add the slider\r\n                    tp_inst[litem + '_slider'] = tp_inst.control.create(tp_inst, $tp.find('.ui_tpicker_' + litem + '_slider'), litem, tp_inst[litem], o[litem + 'Min'], max[litem], o['step' + uitem]);\r\n\r\n                    // adjust the grid and add click event\r\n                    if (show && o[litem + 'Grid'] > 0) {\r\n                        size = 100 * gridSize[litem] * o[litem + 'Grid'] / (max[litem] - o[litem + 'Min']);\r\n                        $tp.find('.ui_tpicker_' + litem + ' table').css({\r\n                            width: size + \"%\",\r\n                            marginLeft: o.isRTL ? '0' : ((size / (-2 * gridSize[litem])) + \"%\"),\r\n                            marginRight: o.isRTL ? ((size / (-2 * gridSize[litem])) + \"%\") : '0',\r\n                            borderCollapse: 'collapse'\r\n                        }).find(\"td\").click(function (e) {\r\n                            var $t = $(this),\r\n\t\t\t\t\t\t\t\t\th = $t.html(),\r\n\t\t\t\t\t\t\t\t\tn = parseInt(h.replace(/[^0-9]/g), 10),\r\n\t\t\t\t\t\t\t\t\tap = h.replace(/[^apm]/ig),\r\n\t\t\t\t\t\t\t\t\tf = $t.data('for'); // loses scope, so we use data-for\r\n\r\n                            if (f === 'hour') {\r\n                                if (ap.indexOf('p') !== -1 && n < 12) {\r\n                                    n += 12;\r\n                                }\r\n                                else {\r\n                                    if (ap.indexOf('a') !== -1 && n === 12) {\r\n                                        n = 0;\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            tp_inst.control.value(tp_inst, tp_inst[f + '_slider'], litem, n);\r\n\r\n                            tp_inst._onTimeChange();\r\n                            tp_inst._onSelectHandler();\r\n                        }).css({\r\n                            cursor: 'pointer',\r\n                            width: (100 / gridSize[litem]) + '%',\r\n                            textAlign: 'center',\r\n                            overflow: 'hidden'\r\n                        });\r\n                    } // end if grid > 0\r\n                } // end for loop\r\n\r\n                // Add timezone options\r\n                this.timezone_select = $tp.find('.ui_tpicker_timezone').append('<select></select>').find(\"select\");\r\n                $.fn.append.apply(this.timezone_select,\r\n\t\t\t\t$.map(o.timezoneList, function (val, idx) {\r\n\t\t\t\t    return $(\"<option />\").val(typeof val === \"object\" ? val.value : val).text(typeof val === \"object\" ? val.label : val);\r\n\t\t\t\t}));\r\n                if (typeof (this.timezone) !== \"undefined\" && this.timezone !== null && this.timezone !== \"\") {\r\n                    var local_timezone = (new Date(this.inst.selectedYear, this.inst.selectedMonth, this.inst.selectedDay, 12)).getTimezoneOffset() * -1;\r\n                    if (local_timezone === this.timezone) {\r\n                        selectLocalTimezone(tp_inst);\r\n                    } else {\r\n                        this.timezone_select.val(this.timezone);\r\n                    }\r\n                } else {\r\n                    if (typeof (this.hour) !== \"undefined\" && this.hour !== null && this.hour !== \"\") {\r\n                        this.timezone_select.val(o.timezone);\r\n                    } else {\r\n                        selectLocalTimezone(tp_inst);\r\n                    }\r\n                }\r\n                this.timezone_select.change(function () {\r\n                    tp_inst._onTimeChange();\r\n                    tp_inst._onSelectHandler();\r\n                });\r\n                // End timezone options\r\n\r\n                // inject timepicker into datepicker\r\n                var $buttonPanel = $dp.find('.ui-datepicker-buttonpane');\r\n                if ($buttonPanel.length) {\r\n                    $buttonPanel.before($tp);\r\n                } else {\r\n                    $dp.append($tp);\r\n                }\r\n\r\n                this.$timeObj = $tp.find('.ui_tpicker_time');\r\n\r\n                if (this.inst !== null) {\r\n                    var timeDefined = this.timeDefined;\r\n                    this._onTimeChange();\r\n                    this.timeDefined = timeDefined;\r\n                }\r\n\r\n                // slideAccess integration: http://trentrichardson.com/2011/11/11/jquery-ui-sliders-and-touch-accessibility/\r\n                if (this._defaults.addSliderAccess) {\r\n                    var sliderAccessArgs = this._defaults.sliderAccessArgs,\r\n\t\t\t\t\t\trtl = this._defaults.isRTL;\r\n                    sliderAccessArgs.isRTL = rtl;\r\n\r\n                    setTimeout(function () { // fix for inline mode\r\n                        if ($tp.find('.ui-slider-access').length === 0) {\r\n                            $tp.find('.ui-slider:visible').sliderAccess(sliderAccessArgs);\r\n\r\n                            // fix any grids since sliders are shorter\r\n                            var sliderAccessWidth = $tp.find('.ui-slider-access:eq(0)').outerWidth(true);\r\n                            if (sliderAccessWidth) {\r\n                                $tp.find('table:visible').each(function () {\r\n                                    var $g = $(this),\r\n\t\t\t\t\t\t\t\t\t\toldWidth = $g.outerWidth(),\r\n\t\t\t\t\t\t\t\t\t\toldMarginLeft = $g.css(rtl ? 'marginRight' : 'marginLeft').toString().replace('%', ''),\r\n\t\t\t\t\t\t\t\t\t\tnewWidth = oldWidth - sliderAccessWidth,\r\n\t\t\t\t\t\t\t\t\t\tnewMarginLeft = ((oldMarginLeft * newWidth) / oldWidth) + '%',\r\n\t\t\t\t\t\t\t\t\t\tcss = { width: newWidth, marginRight: 0, marginLeft: 0 };\r\n                                    css[rtl ? 'marginRight' : 'marginLeft'] = newMarginLeft;\r\n                                    $g.css(css);\r\n                                });\r\n                            }\r\n                        }\r\n                    }, 10);\r\n                }\r\n                // end slideAccess integration\r\n\r\n                tp_inst._limitMinMaxDateTime(this.inst, true);\r\n            }\r\n        },\r\n\r\n        /*\r\n        * This function tries to limit the ability to go outside the\r\n        * min/max date range\r\n        */\r\n        _limitMinMaxDateTime: function (dp_inst, adjustSliders) {\r\n            var o = this._defaults,\r\n\t\t\t\tdp_date = new Date(dp_inst.selectedYear, dp_inst.selectedMonth, dp_inst.selectedDay);\r\n\r\n            if (!this._defaults.showTimepicker) {\r\n                return;\r\n            } // No time so nothing to check here\r\n\r\n            if ($.datepicker._get(dp_inst, 'minDateTime') !== null && $.datepicker._get(dp_inst, 'minDateTime') !== undefined && dp_date) {\r\n                var minDateTime = $.datepicker._get(dp_inst, 'minDateTime'),\r\n\t\t\t\t\tminDateTimeDate = new Date(minDateTime.getFullYear(), minDateTime.getMonth(), minDateTime.getDate(), 0, 0, 0, 0);\r\n\r\n                if (this.hourMinOriginal === null || this.minuteMinOriginal === null || this.secondMinOriginal === null || this.millisecMinOriginal === null || this.microsecMinOriginal === null) {\r\n                    this.hourMinOriginal = o.hourMin;\r\n                    this.minuteMinOriginal = o.minuteMin;\r\n                    this.secondMinOriginal = o.secondMin;\r\n                    this.millisecMinOriginal = o.millisecMin;\r\n                    this.microsecMinOriginal = o.microsecMin;\r\n                }\r\n\r\n                if (dp_inst.settings.timeOnly || minDateTimeDate.getTime() === dp_date.getTime()) {\r\n                    this._defaults.hourMin = minDateTime.getHours();\r\n                    if (this.hour <= this._defaults.hourMin) {\r\n                        this.hour = this._defaults.hourMin;\r\n                        this._defaults.minuteMin = minDateTime.getMinutes();\r\n                        if (this.minute <= this._defaults.minuteMin) {\r\n                            this.minute = this._defaults.minuteMin;\r\n                            this._defaults.secondMin = minDateTime.getSeconds();\r\n                            if (this.second <= this._defaults.secondMin) {\r\n                                this.second = this._defaults.secondMin;\r\n                                this._defaults.millisecMin = minDateTime.getMilliseconds();\r\n                                if (this.millisec <= this._defaults.millisecMin) {\r\n                                    this.millisec = this._defaults.millisecMin;\r\n                                    this._defaults.microsecMin = minDateTime.getMicroseconds();\r\n                                } else {\r\n                                    if (this.microsec < this._defaults.microsecMin) {\r\n                                        this.microsec = this._defaults.microsecMin;\r\n                                    }\r\n                                    this._defaults.microsecMin = this.microsecMinOriginal;\r\n                                }\r\n                            } else {\r\n                                this._defaults.millisecMin = this.millisecMinOriginal;\r\n                                this._defaults.microsecMin = this.microsecMinOriginal;\r\n                            }\r\n                        } else {\r\n                            this._defaults.secondMin = this.secondMinOriginal;\r\n                            this._defaults.millisecMin = this.millisecMinOriginal;\r\n                            this._defaults.microsecMin = this.microsecMinOriginal;\r\n                        }\r\n                    } else {\r\n                        this._defaults.minuteMin = this.minuteMinOriginal;\r\n                        this._defaults.secondMin = this.secondMinOriginal;\r\n                        this._defaults.millisecMin = this.millisecMinOriginal;\r\n                        this._defaults.microsecMin = this.microsecMinOriginal;\r\n                    }\r\n                } else {\r\n                    this._defaults.hourMin = this.hourMinOriginal;\r\n                    this._defaults.minuteMin = this.minuteMinOriginal;\r\n                    this._defaults.secondMin = this.secondMinOriginal;\r\n                    this._defaults.millisecMin = this.millisecMinOriginal;\r\n                    this._defaults.microsecMin = this.microsecMinOriginal;\r\n                }\r\n            }\r\n\r\n            if ($.datepicker._get(dp_inst, 'maxDateTime') !== null && $.datepicker._get(dp_inst, 'maxDateTime') !== undefined && dp_date) {\r\n                var maxDateTime = $.datepicker._get(dp_inst, 'maxDateTime'),\r\n\t\t\t\t\tmaxDateTimeDate = new Date(maxDateTime.getFullYear(), maxDateTime.getMonth(), maxDateTime.getDate(), 0, 0, 0, 0);\r\n\r\n                if (this.hourMaxOriginal === null || this.minuteMaxOriginal === null || this.secondMaxOriginal === null || this.millisecMaxOriginal === null) {\r\n                    this.hourMaxOriginal = o.hourMax;\r\n                    this.minuteMaxOriginal = o.minuteMax;\r\n                    this.secondMaxOriginal = o.secondMax;\r\n                    this.millisecMaxOriginal = o.millisecMax;\r\n                    this.microsecMaxOriginal = o.microsecMax;\r\n                }\r\n\r\n                if (dp_inst.settings.timeOnly || maxDateTimeDate.getTime() === dp_date.getTime()) {\r\n                    this._defaults.hourMax = maxDateTime.getHours();\r\n                    if (this.hour >= this._defaults.hourMax) {\r\n                        this.hour = this._defaults.hourMax;\r\n                        this._defaults.minuteMax = maxDateTime.getMinutes();\r\n                        if (this.minute >= this._defaults.minuteMax) {\r\n                            this.minute = this._defaults.minuteMax;\r\n                            this._defaults.secondMax = maxDateTime.getSeconds();\r\n                            if (this.second >= this._defaults.secondMax) {\r\n                                this.second = this._defaults.secondMax;\r\n                                this._defaults.millisecMax = maxDateTime.getMilliseconds();\r\n                                if (this.millisec >= this._defaults.millisecMax) {\r\n                                    this.millisec = this._defaults.millisecMax;\r\n                                    this._defaults.microsecMax = maxDateTime.getMicroseconds();\r\n                                } else {\r\n                                    if (this.microsec > this._defaults.microsecMax) {\r\n                                        this.microsec = this._defaults.microsecMax;\r\n                                    }\r\n                                    this._defaults.microsecMax = this.microsecMaxOriginal;\r\n                                }\r\n                            } else {\r\n                                this._defaults.millisecMax = this.millisecMaxOriginal;\r\n                                this._defaults.microsecMax = this.microsecMaxOriginal;\r\n                            }\r\n                        } else {\r\n                            this._defaults.secondMax = this.secondMaxOriginal;\r\n                            this._defaults.millisecMax = this.millisecMaxOriginal;\r\n                            this._defaults.microsecMax = this.microsecMaxOriginal;\r\n                        }\r\n                    } else {\r\n                        this._defaults.minuteMax = this.minuteMaxOriginal;\r\n                        this._defaults.secondMax = this.secondMaxOriginal;\r\n                        this._defaults.millisecMax = this.millisecMaxOriginal;\r\n                        this._defaults.microsecMax = this.microsecMaxOriginal;\r\n                    }\r\n                } else {\r\n                    this._defaults.hourMax = this.hourMaxOriginal;\r\n                    this._defaults.minuteMax = this.minuteMaxOriginal;\r\n                    this._defaults.secondMax = this.secondMaxOriginal;\r\n                    this._defaults.millisecMax = this.millisecMaxOriginal;\r\n                    this._defaults.microsecMax = this.microsecMaxOriginal;\r\n                }\r\n            }\r\n\r\n            if (adjustSliders !== undefined && adjustSliders === true) {\r\n                var hourMax = parseInt((this._defaults.hourMax - ((this._defaults.hourMax - this._defaults.hourMin) % this._defaults.stepHour)), 10),\r\n\t\t\t\t\tminMax = parseInt((this._defaults.minuteMax - ((this._defaults.minuteMax - this._defaults.minuteMin) % this._defaults.stepMinute)), 10),\r\n\t\t\t\t\tsecMax = parseInt((this._defaults.secondMax - ((this._defaults.secondMax - this._defaults.secondMin) % this._defaults.stepSecond)), 10),\r\n\t\t\t\t\tmillisecMax = parseInt((this._defaults.millisecMax - ((this._defaults.millisecMax - this._defaults.millisecMin) % this._defaults.stepMillisec)), 10),\r\n\t\t\t\t\tmicrosecMax = parseInt((this._defaults.microsecMax - ((this._defaults.microsecMax - this._defaults.microsecMin) % this._defaults.stepMicrosec)), 10);\r\n\r\n                if (this.hour_slider) {\r\n                    this.control.options(this, this.hour_slider, 'hour', { min: this._defaults.hourMin, max: hourMax });\r\n                    this.control.value(this, this.hour_slider, 'hour', this.hour - (this.hour % this._defaults.stepHour));\r\n                }\r\n                if (this.minute_slider) {\r\n                    this.control.options(this, this.minute_slider, 'minute', { min: this._defaults.minuteMin, max: minMax });\r\n                    this.control.value(this, this.minute_slider, 'minute', this.minute - (this.minute % this._defaults.stepMinute));\r\n                }\r\n                if (this.second_slider) {\r\n                    this.control.options(this, this.second_slider, 'second', { min: this._defaults.secondMin, max: secMax });\r\n                    this.control.value(this, this.second_slider, 'second', this.second - (this.second % this._defaults.stepSecond));\r\n                }\r\n                if (this.millisec_slider) {\r\n                    this.control.options(this, this.millisec_slider, 'millisec', { min: this._defaults.millisecMin, max: millisecMax });\r\n                    this.control.value(this, this.millisec_slider, 'millisec', this.millisec - (this.millisec % this._defaults.stepMillisec));\r\n                }\r\n                if (this.microsec_slider) {\r\n                    this.control.options(this, this.microsec_slider, 'microsec', { min: this._defaults.microsecMin, max: microsecMax });\r\n                    this.control.value(this, this.microsec_slider, 'microsec', this.microsec - (this.microsec % this._defaults.stepMicrosec));\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /*\r\n        * when a slider moves, set the internal time...\r\n        * on time change is also called when the time is updated in the text field\r\n        */\r\n        _onTimeChange: function () {\r\n            if (!this._defaults.showTimepicker) {\r\n                return;\r\n            }\r\n            var hour = (this.hour_slider) ? this.control.value(this, this.hour_slider, 'hour') : false,\r\n\t\t\t\tminute = (this.minute_slider) ? this.control.value(this, this.minute_slider, 'minute') : false,\r\n\t\t\t\tsecond = (this.second_slider) ? this.control.value(this, this.second_slider, 'second') : false,\r\n\t\t\t\tmillisec = (this.millisec_slider) ? this.control.value(this, this.millisec_slider, 'millisec') : false,\r\n\t\t\t\tmicrosec = (this.microsec_slider) ? this.control.value(this, this.microsec_slider, 'microsec') : false,\r\n\t\t\t\ttimezone = (this.timezone_select) ? this.timezone_select.val() : false,\r\n\t\t\t\to = this._defaults,\r\n\t\t\t\tpickerTimeFormat = o.pickerTimeFormat || o.timeFormat,\r\n\t\t\t\tpickerTimeSuffix = o.pickerTimeSuffix || o.timeSuffix;\r\n\r\n            if (typeof (hour) === 'object') {\r\n                hour = false;\r\n            }\r\n            if (typeof (minute) === 'object') {\r\n                minute = false;\r\n            }\r\n            if (typeof (second) === 'object') {\r\n                second = false;\r\n            }\r\n            if (typeof (millisec) === 'object') {\r\n                millisec = false;\r\n            }\r\n            if (typeof (microsec) === 'object') {\r\n                microsec = false;\r\n            }\r\n            if (typeof (timezone) === 'object') {\r\n                timezone = false;\r\n            }\r\n\r\n            if (hour !== false) {\r\n                hour = parseInt(hour, 10);\r\n            }\r\n            if (minute !== false) {\r\n                minute = parseInt(minute, 10);\r\n            }\r\n            if (second !== false) {\r\n                second = parseInt(second, 10);\r\n            }\r\n            if (millisec !== false) {\r\n                millisec = parseInt(millisec, 10);\r\n            }\r\n            if (microsec !== false) {\r\n                microsec = parseInt(microsec, 10);\r\n            }\r\n\r\n            var ampm = o[hour < 12 ? 'amNames' : 'pmNames'][0];\r\n\r\n            // If the update was done in the input field, the input field should not be updated.\r\n            // If the update was done using the sliders, update the input field.\r\n            var hasChanged = (hour !== this.hour || minute !== this.minute || second !== this.second || millisec !== this.millisec || microsec !== this.microsec ||\r\n\t\t\t\t\t(this.ampm.length > 0 && (hour < 12) !== ($.inArray(this.ampm.toUpperCase(), this.amNames) !== -1)) || (this.timezone !== null && timezone !== this.timezone));\r\n\r\n            if (hasChanged) {\r\n\r\n                if (hour !== false) {\r\n                    this.hour = hour;\r\n                }\r\n                if (minute !== false) {\r\n                    this.minute = minute;\r\n                }\r\n                if (second !== false) {\r\n                    this.second = second;\r\n                }\r\n                if (millisec !== false) {\r\n                    this.millisec = millisec;\r\n                }\r\n                if (microsec !== false) {\r\n                    this.microsec = microsec;\r\n                }\r\n                if (timezone !== false) {\r\n                    this.timezone = timezone;\r\n                }\r\n\r\n                if (!this.inst) {\r\n                    this.inst = $.datepicker._getInst(this.$input[0]);\r\n                }\r\n\r\n                this._limitMinMaxDateTime(this.inst, true);\r\n            }\r\n            if (this.support.ampm) {\r\n                this.ampm = ampm;\r\n            }\r\n\r\n            // Updates the time within the timepicker\r\n            this.formattedTime = $.datepicker.formatTime(o.timeFormat, this, o);\r\n            if (this.$timeObj) {\r\n                if (pickerTimeFormat === o.timeFormat) {\r\n                    this.$timeObj.text(this.formattedTime + pickerTimeSuffix);\r\n                }\r\n                else {\r\n                    this.$timeObj.text($.datepicker.formatTime(pickerTimeFormat, this, o) + pickerTimeSuffix);\r\n                }\r\n            }\r\n\r\n            this.timeDefined = true;\r\n            if (hasChanged) {\r\n                this._updateDateTime();\r\n            }\r\n        },\r\n\r\n        /*\r\n        * call custom onSelect.\r\n        * bind to sliders slidestop, and grid click.\r\n        */\r\n        _onSelectHandler: function () {\r\n            var onSelect = this._defaults.onSelect || this.inst.settings.onSelect;\r\n            var inputEl = this.$input ? this.$input[0] : null;\r\n            if (onSelect && inputEl) {\r\n                onSelect.apply(inputEl, [this.formattedDateTime, this]);\r\n            }\r\n        },\r\n\r\n        /*\r\n        * update our input with the new date time..\r\n        */\r\n        _updateDateTime: function (dp_inst) {\r\n            dp_inst = this.inst || dp_inst;\r\n            var dtTmp = (dp_inst.currentYear > 0 ?\r\n\t\t\t\t\t\t\tnew Date(dp_inst.currentYear, dp_inst.currentMonth, dp_inst.currentDay) :\r\n\t\t\t\t\t\t\tnew Date(dp_inst.selectedYear, dp_inst.selectedMonth, dp_inst.selectedDay)),\r\n\t\t\t\tdt = $.datepicker._daylightSavingAdjust(dtTmp),\r\n            //dt = $.datepicker._daylightSavingAdjust(new Date(dp_inst.selectedYear, dp_inst.selectedMonth, dp_inst.selectedDay)),\r\n            //dt = $.datepicker._daylightSavingAdjust(new Date(dp_inst.currentYear, dp_inst.currentMonth, dp_inst.currentDay)),\r\n\t\t\t\tdateFmt = $.datepicker._get(dp_inst, 'dateFormat'),\r\n\t\t\t\tformatCfg = $.datepicker._getFormatConfig(dp_inst),\r\n\t\t\t\ttimeAvailable = dt !== null && this.timeDefined;\r\n            this.formattedDate = $.datepicker.formatDate(dateFmt, (dt === null ? new Date() : dt), formatCfg);\r\n            var formattedDateTime = this.formattedDate;\r\n\r\n            // if a slider was changed but datepicker doesn't have a value yet, set it\r\n            if (dp_inst.lastVa === \"\") {\r\n                dp_inst.currentYear = dp_inst.selectedYear;\r\n                dp_inst.currentMonth = dp_inst.selectedMonth;\r\n                dp_inst.currentDay = dp_inst.selectedDay;\r\n            }\r\n\r\n            /*\r\n            * remove following lines to force every changes in date picker to change the input value\r\n            * Bug descriptions: when an input field has a default value, and click on the field to pop up the date picker. \r\n            * If the user manually empty the value in the input field, the date picker will never change selected value.\r\n            */\r\n            //if (dp_inst.lastVal !== undefined && (dp_inst.lastVal.length > 0 && this.$input.val().length === 0)) {\r\n            //\treturn;\r\n            //}\r\n\r\n            if (this._defaults.timeOnly === true) {\r\n                formattedDateTime = this.formattedTime;\r\n            } else if (this._defaults.timeOnly !== true && (this._defaults.alwaysSetTime || timeAvailable)) {\r\n                formattedDateTime += this._defaults.separator + this.formattedTime + this._defaults.timeSuffix;\r\n            }\r\n\r\n            this.formattedDateTime = formattedDateTime;\r\n\r\n            if (!this._defaults.showTimepicker) {\r\n                this.$input.val(this.formattedDate);\r\n            } else if (this.$altInput && this._defaults.timeOnly === false && this._defaults.altFieldTimeOnly === true) {\r\n                this.$altInput.val(this.formattedTime);\r\n                this.$input.val(this.formattedDate);\r\n            } else if (this.$altInput) {\r\n                this.$input.val(formattedDateTime);\r\n                var altFormattedDateTime = '',\r\n\t\t\t\t\taltSeparator = this._defaults.altSeparator ? this._defaults.altSeparator : this._defaults.separator,\r\n\t\t\t\t\taltTimeSuffix = this._defaults.altTimeSuffix ? this._defaults.altTimeSuffix : this._defaults.timeSuffix;\r\n\r\n                if (!this._defaults.timeOnly) {\r\n                    if (this._defaults.altFormat) {\r\n                        altFormattedDateTime = $.datepicker.formatDate(this._defaults.altFormat, (dt === null ? new Date() : dt), formatCfg);\r\n                    }\r\n                    else {\r\n                        altFormattedDateTime = this.formattedDate;\r\n                    }\r\n\r\n                    if (altFormattedDateTime) {\r\n                        altFormattedDateTime += altSeparator;\r\n                    }\r\n                }\r\n\r\n                if (this._defaults.altTimeFormat) {\r\n                    altFormattedDateTime += $.datepicker.formatTime(this._defaults.altTimeFormat, this, this._defaults) + altTimeSuffix;\r\n                }\r\n                else {\r\n                    altFormattedDateTime += this.formattedTime + altTimeSuffix;\r\n                }\r\n                this.$altInput.val(altFormattedDateTime);\r\n            } else {\r\n                this.$input.val(formattedDateTime);\r\n            }\r\n\r\n            this.$input.trigger(\"change\");\r\n        },\r\n\r\n        _onFocus: function () {\r\n            if (!this.$input.val() && this._defaults.defaultValue) {\r\n                this.$input.val(this._defaults.defaultValue);\r\n                var inst = $.datepicker._getInst(this.$input.get(0)),\r\n\t\t\t\t\ttp_inst = $.datepicker._get(inst, 'timepicker');\r\n                if (tp_inst) {\r\n                    if (tp_inst._defaults.timeOnly && (inst.input.val() !== inst.lastVal)) {\r\n                        try {\r\n                            $.datepicker._updateDatepicker(inst);\r\n                        } catch (err) {\r\n                            $.timepicker.log(err);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /*\r\n        * Small abstraction to control types\r\n        * We can add more, just be sure to follow the pattern: create, options, value\r\n        */\r\n        _controls: {\r\n            // slider methods\r\n            slider: {\r\n                create: function (tp_inst, obj, unit, val, min, max, step) {\r\n                    var rtl = tp_inst._defaults.isRTL; // if rtl go -60->0 instead of 0->60\r\n                    return obj.prop('slide', null).slider({\r\n                        orientation: \"horizontal\",\r\n                        value: rtl ? val * -1 : val,\r\n                        min: rtl ? max * -1 : min,\r\n                        max: rtl ? min * -1 : max,\r\n                        step: step,\r\n                        slide: function (event, ui) {\r\n                            tp_inst.control.value(tp_inst, $(this), unit, rtl ? ui.value * -1 : ui.value);\r\n                            tp_inst._onTimeChange();\r\n                        },\r\n                        stop: function (event, ui) {\r\n                            tp_inst._onSelectHandler();\r\n                        }\r\n                    });\r\n                },\r\n                options: function (tp_inst, obj, unit, opts, val) {\r\n                    if (tp_inst._defaults.isRTL) {\r\n                        if (typeof (opts) === 'string') {\r\n                            if (opts === 'min' || opts === 'max') {\r\n                                if (val !== undefined) {\r\n                                    return obj.slider(opts, val * -1);\r\n                                }\r\n                                return Math.abs(obj.slider(opts));\r\n                            }\r\n                            return obj.slider(opts);\r\n                        }\r\n                        var min = opts.min,\r\n\t\t\t\t\t\t\tmax = opts.max;\r\n                        opts.min = opts.max = null;\r\n                        if (min !== undefined) {\r\n                            opts.max = min * -1;\r\n                        }\r\n                        if (max !== undefined) {\r\n                            opts.min = max * -1;\r\n                        }\r\n                        return obj.slider(opts);\r\n                    }\r\n                    if (typeof (opts) === 'string' && val !== undefined) {\r\n                        return obj.slider(opts, val);\r\n                    }\r\n                    return obj.slider(opts);\r\n                },\r\n                value: function (tp_inst, obj, unit, val) {\r\n                    if (tp_inst._defaults.isRTL) {\r\n                        if (val !== undefined) {\r\n                            return obj.slider('value', val * -1);\r\n                        }\r\n                        return Math.abs(obj.slider('value'));\r\n                    }\r\n                    if (val !== undefined) {\r\n                        return obj.slider('value', val);\r\n                    }\r\n                    return obj.slider('value');\r\n                }\r\n            },\r\n            // select methods\r\n            select: {\r\n                create: function (tp_inst, obj, unit, val, min, max, step) {\r\n                    var sel = '<select class=\"ui-timepicker-select\" data-unit=\"' + unit + '\" data-min=\"' + min + '\" data-max=\"' + max + '\" data-step=\"' + step + '\">',\r\n\t\t\t\t\t\tformat = tp_inst._defaults.pickerTimeFormat || tp_inst._defaults.timeFormat;\r\n\r\n                    for (var i = min; i <= max; i += step) {\r\n                        sel += '<option value=\"' + i + '\"' + (i === val ? ' selected' : '') + '>';\r\n                        if (unit === 'hour') {\r\n                            sel += $.datepicker.formatTime($.trim(format.replace(/[^ht ]/ig, '')), { hour: i }, tp_inst._defaults);\r\n                        }\r\n                        else if (unit === 'millisec' || unit === 'microsec' || i >= 10) { sel += i; }\r\n                        else { sel += '0' + i.toString(); }\r\n                        sel += '</option>';\r\n                    }\r\n                    sel += '</select>';\r\n\r\n                    obj.children('select').remove();\r\n\r\n                    $(sel).appendTo(obj).change(function (e) {\r\n                        tp_inst._onTimeChange();\r\n                        tp_inst._onSelectHandler();\r\n                    });\r\n\r\n                    return obj;\r\n                },\r\n                options: function (tp_inst, obj, unit, opts, val) {\r\n                    var o = {},\r\n\t\t\t\t\t\t$t = obj.children('select');\r\n                    if (typeof (opts) === 'string') {\r\n                        if (val === undefined) {\r\n                            return $t.data(opts);\r\n                        }\r\n                        o[opts] = val;\r\n                    }\r\n                    else { o = opts; }\r\n                    return tp_inst.control.create(tp_inst, obj, $t.data('unit'), $t.val(), o.min || $t.data('min'), o.max || $t.data('max'), o.step || $t.data('step'));\r\n                },\r\n                value: function (tp_inst, obj, unit, val) {\r\n                    var $t = obj.children('select');\r\n                    if (val !== undefined) {\r\n                        return $t.val(val);\r\n                    }\r\n                    return $t.val();\r\n                }\r\n            }\r\n        } // end _controls\r\n\r\n    });\r\n\r\n    $.fn.extend({\r\n        /*\r\n        * shorthand just to use timepicker.\r\n        */\r\n        timepicker: function (o) {\r\n            o = o || {};\r\n            var tmp_args = Array.prototype.slice.call(arguments);\r\n\r\n            if (typeof o === 'object') {\r\n                tmp_args[0] = $.extend(o, {\r\n                    timeOnly: true\r\n                });\r\n            }\r\n\r\n            return $(this).each(function () {\r\n                $.fn.datetimepicker.apply($(this), tmp_args);\r\n            });\r\n        },\r\n\r\n        /*\r\n        * extend timepicker to datepicker\r\n        */\r\n        datetimepicker: function (o) {\r\n            o = o || {};\r\n            var tmp_args = arguments;\r\n\r\n            if (typeof (o) === 'string') {\r\n                if (o === 'getDate') {\r\n                    return $.fn.datepicker.apply($(this[0]), tmp_args);\r\n                } else {\r\n                    return this.each(function () {\r\n                        var $t = $(this);\r\n                        $t.datepicker.apply($t, tmp_args);\r\n                    });\r\n                }\r\n            } else {\r\n                return this.each(function () {\r\n                    var $t = $(this);\r\n                    $t.datepicker($.timepicker._newInst($t, o)._defaults);\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    /*\r\n    * Public Utility to parse date and time\r\n    */\r\n    $.datepicker.parseDateTime = function (dateFormat, timeFormat, dateTimeString, dateSettings, timeSettings) {\r\n        var parseRes = parseDateTimeInternal(dateFormat, timeFormat, dateTimeString, dateSettings, timeSettings);\r\n        if (parseRes.timeObj) {\r\n            var t = parseRes.timeObj;\r\n            parseRes.date.setHours(t.hour, t.minute, t.second, t.millisec);\r\n            parseRes.date.setMicroseconds(t.microsec);\r\n        }\r\n\r\n        return parseRes.date;\r\n    };\r\n\r\n    /*\r\n    * Public utility to parse time\r\n    */\r\n    $.datepicker.parseTime = function (timeFormat, timeString, options) {\r\n        var o = extendRemove(extendRemove({}, $.timepicker._defaults), options || {}),\r\n\t\t\tiso8601 = (timeFormat.replace(/\\'.*?\\'/g, '').indexOf('Z') !== -1);\r\n\r\n        // Strict parse requires the timeString to match the timeFormat exactly\r\n        var strictParse = function (f, s, o) {\r\n\r\n            // pattern for standard and localized AM/PM markers\r\n            var getPatternAmpm = function (amNames, pmNames) {\r\n                var markers = [];\r\n                if (amNames) {\r\n                    $.merge(markers, amNames);\r\n                }\r\n                if (pmNames) {\r\n                    $.merge(markers, pmNames);\r\n                }\r\n                markers = $.map(markers, function (val) {\r\n                    return val.replace(/[.*+?|()\\[\\]{}\\\\]/g, '\\\\$&');\r\n                });\r\n                return '(' + markers.join('|') + ')?';\r\n            };\r\n\r\n            // figure out position of time elements.. cause js cant do named captures\r\n            var getFormatPositions = function (timeFormat) {\r\n                var finds = timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),\r\n\t\t\t\t\torders = {\r\n\t\t\t\t\t    h: -1,\r\n\t\t\t\t\t    m: -1,\r\n\t\t\t\t\t    s: -1,\r\n\t\t\t\t\t    l: -1,\r\n\t\t\t\t\t    c: -1,\r\n\t\t\t\t\t    t: -1,\r\n\t\t\t\t\t    z: -1\r\n\t\t\t\t\t};\r\n\r\n                if (finds) {\r\n                    for (var i = 0; i < finds.length; i++) {\r\n                        if (orders[finds[i].toString().charAt(0)] === -1) {\r\n                            orders[finds[i].toString().charAt(0)] = i + 1;\r\n                        }\r\n                    }\r\n                }\r\n                return orders;\r\n            };\r\n\r\n            var regstr = '^' + f.toString()\r\n\t\t\t\t\t.replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g, function (match) {\r\n\t\t\t\t\t    var ml = match.length;\r\n\t\t\t\t\t    switch (match.charAt(0).toLowerCase()) {\r\n\t\t\t\t\t        case 'h':\r\n\t\t\t\t\t            return ml === 1 ? '(\\\\d?\\\\d)' : '(\\\\d{' + ml + '})';\r\n\t\t\t\t\t        case 'm':\r\n\t\t\t\t\t            return ml === 1 ? '(\\\\d?\\\\d)' : '(\\\\d{' + ml + '})';\r\n\t\t\t\t\t        case 's':\r\n\t\t\t\t\t            return ml === 1 ? '(\\\\d?\\\\d)' : '(\\\\d{' + ml + '})';\r\n\t\t\t\t\t        case 'l':\r\n\t\t\t\t\t            return '(\\\\d?\\\\d?\\\\d)';\r\n\t\t\t\t\t        case 'c':\r\n\t\t\t\t\t            return '(\\\\d?\\\\d?\\\\d)';\r\n\t\t\t\t\t        case 'z':\r\n\t\t\t\t\t            return '(z|[-+]\\\\d\\\\d:?\\\\d\\\\d|\\\\S+)?';\r\n\t\t\t\t\t        case 't':\r\n\t\t\t\t\t            return getPatternAmpm(o.amNames, o.pmNames);\r\n\t\t\t\t\t        default:    // literal escaped in quotes\r\n\t\t\t\t\t            return '(' + match.replace(/\\'/g, \"\").replace(/(\\.|\\$|\\^|\\\\|\\/|\\(|\\)|\\[|\\]|\\?|\\+|\\*)/g, function (m) { return \"\\\\\" + m; }) + ')?';\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.replace(/\\s/g, '\\\\s?') +\r\n\t\t\t\t\to.timeSuffix + '$',\r\n\t\t\t\torder = getFormatPositions(f),\r\n\t\t\t\tampm = '',\r\n\t\t\t\ttreg;\r\n\r\n            treg = s.match(new RegExp(regstr, 'i'));\r\n\r\n            var resTime = {\r\n                hour: 0,\r\n                minute: 0,\r\n                second: 0,\r\n                millisec: 0,\r\n                microsec: 0\r\n            };\r\n\r\n            if (treg) {\r\n                if (order.t !== -1) {\r\n                    if (treg[order.t] === undefined || treg[order.t].length === 0) {\r\n                        ampm = '';\r\n                        resTime.ampm = '';\r\n                    } else {\r\n                        ampm = $.inArray(treg[order.t].toUpperCase(), o.amNames) !== -1 ? 'AM' : 'PM';\r\n                        resTime.ampm = o[ampm === 'AM' ? 'amNames' : 'pmNames'][0];\r\n                    }\r\n                }\r\n\r\n                if (order.h !== -1) {\r\n                    if (ampm === 'AM' && treg[order.h] === '12') {\r\n                        resTime.hour = 0; // 12am = 0 hour\r\n                    } else {\r\n                        if (ampm === 'PM' && treg[order.h] !== '12') {\r\n                            resTime.hour = parseInt(treg[order.h], 10) + 12; // 12pm = 12 hour, any other pm = hour + 12\r\n                        } else {\r\n                            resTime.hour = Number(treg[order.h]);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (order.m !== -1) {\r\n                    resTime.minute = Number(treg[order.m]);\r\n                }\r\n                if (order.s !== -1) {\r\n                    resTime.second = Number(treg[order.s]);\r\n                }\r\n                if (order.l !== -1) {\r\n                    resTime.millisec = Number(treg[order.l]);\r\n                }\r\n                if (order.c !== -1) {\r\n                    resTime.microsec = Number(treg[order.c]);\r\n                }\r\n                if (order.z !== -1 && treg[order.z] !== undefined) {\r\n                    resTime.timezone = $.timepicker.timezoneOffsetNumber(treg[order.z]);\r\n                }\r\n\r\n\r\n                return resTime;\r\n            }\r\n            return false;\r\n        }; // end strictParse\r\n\r\n        // First try JS Date, if that fails, use strictParse\r\n        var looseParse = function (f, s, o) {\r\n            try {\r\n                var d = new Date('2012-01-01 ' + s);\r\n                if (isNaN(d.getTime())) {\r\n                    d = new Date('2012-01-01T' + s);\r\n                    if (isNaN(d.getTime())) {\r\n                        d = new Date('01/01/2012 ' + s);\r\n                        if (isNaN(d.getTime())) {\r\n                            throw \"Unable to parse time with native Date: \" + s;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    hour: d.getHours(),\r\n                    minute: d.getMinutes(),\r\n                    second: d.getSeconds(),\r\n                    millisec: d.getMilliseconds(),\r\n                    microsec: d.getMicroseconds(),\r\n                    timezone: d.getTimezoneOffset() * -1\r\n                };\r\n            }\r\n            catch (err) {\r\n                try {\r\n                    return strictParse(f, s, o);\r\n                }\r\n                catch (err2) {\r\n                    $.timepicker.log(\"Unable to parse \\ntimeString: \" + s + \"\\ntimeFormat: \" + f);\r\n                }\r\n            }\r\n            return false;\r\n        }; // end looseParse\r\n\r\n        if (typeof o.parse === \"function\") {\r\n            return o.parse(timeFormat, timeString, o);\r\n        }\r\n        if (o.parse === 'loose') {\r\n            return looseParse(timeFormat, timeString, o);\r\n        }\r\n        return strictParse(timeFormat, timeString, o);\r\n    };\r\n\r\n    /**\r\n    * Public utility to format the time\r\n    * @param {string} format format of the time\r\n    * @param {Object} time Object not a Date for timezones\r\n    * @param {Object} [options] essentially the regional[].. amNames, pmNames, ampm\r\n    * @returns {string} the formatted time\r\n    */\r\n    $.datepicker.formatTime = function (format, time, options) {\r\n        options = options || {};\r\n        options = $.extend({}, $.timepicker._defaults, options);\r\n        time = $.extend({\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0,\r\n            millisec: 0,\r\n            microsec: 0,\r\n            timezone: null\r\n        }, time);\r\n\r\n        var tmptime = format,\r\n\t\t\tampmName = options.amNames[0],\r\n\t\t\thour = parseInt(time.hour, 10);\r\n\r\n        if (hour > 11) {\r\n            ampmName = options.pmNames[0];\r\n        }\r\n\r\n        tmptime = tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g, function (match) {\r\n            switch (match) {\r\n                case 'HH':\r\n                    return ('0' + hour).slice(-2);\r\n                case 'H':\r\n                    return hour;\r\n                case 'hh':\r\n                    return ('0' + convert24to12(hour)).slice(-2);\r\n                case 'h':\r\n                    return convert24to12(hour);\r\n                case 'mm':\r\n                    return ('0' + time.minute).slice(-2);\r\n                case 'm':\r\n                    return time.minute;\r\n                case 'ss':\r\n                    return ('0' + time.second).slice(-2);\r\n                case 's':\r\n                    return time.second;\r\n                case 'l':\r\n                    return ('00' + time.millisec).slice(-3);\r\n                case 'c':\r\n                    return ('00' + time.microsec).slice(-3);\r\n                case 'z':\r\n                    return $.timepicker.timezoneOffsetString(time.timezone === null ? options.timezone : time.timezone, false);\r\n                case 'Z':\r\n                    return $.timepicker.timezoneOffsetString(time.timezone === null ? options.timezone : time.timezone, true);\r\n                case 'T':\r\n                    return ampmName.charAt(0).toUpperCase();\r\n                case 'TT':\r\n                    return ampmName.toUpperCase();\r\n                case 't':\r\n                    return ampmName.charAt(0).toLowerCase();\r\n                case 'tt':\r\n                    return ampmName.toLowerCase();\r\n                default:\r\n                    return match.replace(/'/g, \"\");\r\n            }\r\n        });\r\n\r\n        return tmptime;\r\n    };\r\n\r\n    /*\r\n    * the bad hack :/ override datepicker so it doesn't close on select\r\n    // inspired: http://stackoverflow.com/questions/1252512/jquery-datepicker-prevent-closing-picker-when-clicking-a-date/1762378#1762378\r\n    */\r\n    $.datepicker._base_selectDate = $.datepicker._selectDate;\r\n    $.datepicker._selectDate = function (id, dateStr) {\r\n        var inst = this._getInst($(id)[0]),\r\n\t\t\ttp_inst = this._get(inst, 'timepicker');\r\n\r\n        if (tp_inst) {\r\n            tp_inst._limitMinMaxDateTime(inst, true);\r\n            inst.inline = inst.stay_open = true;\r\n            //This way the onSelect handler called from calendarpicker get the full dateTime\r\n            this._base_selectDate(id, dateStr);\r\n            inst.inline = inst.stay_open = false;\r\n            this._notifyChange(inst);\r\n            this._updateDatepicker(inst);\r\n        } else {\r\n            this._base_selectDate(id, dateStr);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * second bad hack :/ override datepicker so it triggers an event when changing the input field\r\n    * and does not redraw the datepicker on every selectDate event\r\n    */\r\n    $.datepicker._base_updateDatepicker = $.datepicker._updateDatepicker;\r\n    $.datepicker._updateDatepicker = function (inst) {\r\n\r\n        // don't popup the datepicker if there is another instance already opened\r\n        var input = inst.input[0];\r\n        if ($.datepicker._curInst && $.datepicker._curInst !== inst && $.datepicker._datepickerShowing && $.datepicker._lastInput !== input) {\r\n            return;\r\n        }\r\n\r\n        if (typeof (inst.stay_open) !== 'boolean' || inst.stay_open === false) {\r\n\r\n            this._base_updateDatepicker(inst);\r\n\r\n            // Reload the time control when changing something in the input text field.\r\n            var tp_inst = this._get(inst, 'timepicker');\r\n            if (tp_inst) {\r\n                tp_inst._addTimePicker(inst);\r\n            }\r\n        }\r\n    };\r\n\r\n    /*\r\n    * third bad hack :/ override datepicker so it allows spaces and colon in the input field\r\n    */\r\n    $.datepicker._base_doKeyPress = $.datepicker._doKeyPress;\r\n    $.datepicker._doKeyPress = function (event) {\r\n        var inst = $.datepicker._getInst(event.target),\r\n\t\t\ttp_inst = $.datepicker._get(inst, 'timepicker');\r\n\r\n        if (tp_inst) {\r\n            if ($.datepicker._get(inst, 'constrainInput')) {\r\n                var ampm = tp_inst.support.ampm,\r\n\t\t\t\t\ttz = tp_inst._defaults.showTimezone !== null ? tp_inst._defaults.showTimezone : tp_inst.support.timezone,\r\n\t\t\t\t\tdateChars = $.datepicker._possibleChars($.datepicker._get(inst, 'dateFormat')),\r\n\t\t\t\t\tdatetimeChars = tp_inst._defaults.timeFormat.toString()\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/[hms]/g, '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/TT/g, ampm ? 'APM' : '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/Tt/g, ampm ? 'AaPpMm' : '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/tT/g, ampm ? 'AaPpMm' : '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/T/g, ampm ? 'AP' : '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/tt/g, ampm ? 'apm' : '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/t/g, ampm ? 'ap' : '') +\r\n\t\t\t\t\t\t\t\t\t\t\t\" \" + tp_inst._defaults.separator +\r\n\t\t\t\t\t\t\t\t\t\t\ttp_inst._defaults.timeSuffix +\r\n\t\t\t\t\t\t\t\t\t\t\t(tz ? tp_inst._defaults.timezoneList.join('') : '') +\r\n\t\t\t\t\t\t\t\t\t\t\t(tp_inst._defaults.amNames.join('')) + (tp_inst._defaults.pmNames.join('')) +\r\n\t\t\t\t\t\t\t\t\t\t\tdateChars,\r\n\t\t\t\t\tchr = String.fromCharCode(event.charCode === undefined ? event.keyCode : event.charCode);\r\n                return event.ctrlKey || (chr < ' ' || !dateChars || datetimeChars.indexOf(chr) > -1);\r\n            }\r\n        }\r\n\r\n        return $.datepicker._base_doKeyPress(event);\r\n    };\r\n\r\n    /*\r\n    * Fourth bad hack :/ override _updateAlternate function used in inline mode to init altField\r\n    * Update any alternate field to synchronise with the main field.\r\n    */\r\n    $.datepicker._base_updateAlternate = $.datepicker._updateAlternate;\r\n    $.datepicker._updateAlternate = function (inst) {\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        if (tp_inst) {\r\n            var altField = tp_inst._defaults.altField;\r\n            if (altField) { // update alternate field too\r\n                var altFormat = tp_inst._defaults.altFormat || tp_inst._defaults.dateFormat,\r\n\t\t\t\t\tdate = this._getDate(inst),\r\n\t\t\t\t\tformatCfg = $.datepicker._getFormatConfig(inst),\r\n\t\t\t\t\taltFormattedDateTime = '',\r\n\t\t\t\t\taltSeparator = tp_inst._defaults.altSeparator ? tp_inst._defaults.altSeparator : tp_inst._defaults.separator,\r\n\t\t\t\t\taltTimeSuffix = tp_inst._defaults.altTimeSuffix ? tp_inst._defaults.altTimeSuffix : tp_inst._defaults.timeSuffix,\r\n\t\t\t\t\taltTimeFormat = tp_inst._defaults.altTimeFormat !== null ? tp_inst._defaults.altTimeFormat : tp_inst._defaults.timeFormat;\r\n\r\n                altFormattedDateTime += $.datepicker.formatTime(altTimeFormat, tp_inst, tp_inst._defaults) + altTimeSuffix;\r\n                if (!tp_inst._defaults.timeOnly && !tp_inst._defaults.altFieldTimeOnly && date !== null) {\r\n                    if (tp_inst._defaults.altFormat) {\r\n                        altFormattedDateTime = $.datepicker.formatDate(tp_inst._defaults.altFormat, date, formatCfg) + altSeparator + altFormattedDateTime;\r\n                    }\r\n                    else {\r\n                        altFormattedDateTime = tp_inst.formattedDate + altSeparator + altFormattedDateTime;\r\n                    }\r\n                }\r\n                $(altField).val(altFormattedDateTime);\r\n            }\r\n        }\r\n        else {\r\n            $.datepicker._base_updateAlternate(inst);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Override key up event to sync manual input changes.\r\n    */\r\n    $.datepicker._base_doKeyUp = $.datepicker._doKeyUp;\r\n    $.datepicker._doKeyUp = function (event) {\r\n        var inst = $.datepicker._getInst(event.target),\r\n\t\t\ttp_inst = $.datepicker._get(inst, 'timepicker');\r\n\r\n        if (tp_inst) {\r\n            if (tp_inst._defaults.timeOnly && (inst.input.val() !== inst.lastVal)) {\r\n                try {\r\n                    $.datepicker._updateDatepicker(inst);\r\n                } catch (err) {\r\n                    $.timepicker.log(err);\r\n                }\r\n            }\r\n        }\r\n\r\n        return $.datepicker._base_doKeyUp(event);\r\n    };\r\n\r\n    /*\r\n    * override \"Today\" button to also grab the time.\r\n    */\r\n    $.datepicker._base_gotoToday = $.datepicker._gotoToday;\r\n    $.datepicker._gotoToday = function (id) {\r\n        var inst = this._getInst($(id)[0]),\r\n\t\t\t$dp = inst.dpDiv;\r\n        this._base_gotoToday(id);\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        selectLocalTimezone(tp_inst);\r\n        var now = new Date();\r\n        this._setTime(inst, now);\r\n        $('.ui-datepicker-today', $dp).click();\r\n    };\r\n\r\n    /*\r\n    * Disable & enable the Time in the datetimepicker\r\n    */\r\n    $.datepicker._disableTimepickerDatepicker = function (target) {\r\n        var inst = this._getInst(target);\r\n        if (!inst) {\r\n            return;\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        $(target).datepicker('getDate'); // Init selected[Year|Month|Day]\r\n        if (tp_inst) {\r\n            inst.settings.showTimepicker = false;\r\n            tp_inst._defaults.showTimepicker = false;\r\n            tp_inst._updateDateTime(inst);\r\n        }\r\n    };\r\n\r\n    $.datepicker._enableTimepickerDatepicker = function (target) {\r\n        var inst = this._getInst(target);\r\n        if (!inst) {\r\n            return;\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        $(target).datepicker('getDate'); // Init selected[Year|Month|Day]\r\n        if (tp_inst) {\r\n            inst.settings.showTimepicker = true;\r\n            tp_inst._defaults.showTimepicker = true;\r\n            tp_inst._addTimePicker(inst); // Could be disabled on page load\r\n            tp_inst._updateDateTime(inst);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Create our own set time function\r\n    */\r\n    $.datepicker._setTime = function (inst, date) {\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        if (tp_inst) {\r\n            var defaults = tp_inst._defaults;\r\n\r\n            // calling _setTime with no date sets time to defaults\r\n            tp_inst.hour = date ? date.getHours() : defaults.hour;\r\n            tp_inst.minute = date ? date.getMinutes() : defaults.minute;\r\n            tp_inst.second = date ? date.getSeconds() : defaults.second;\r\n            tp_inst.millisec = date ? date.getMilliseconds() : defaults.millisec;\r\n            tp_inst.microsec = date ? date.getMicroseconds() : defaults.microsec;\r\n\r\n            //check if within min/max times.. \r\n            tp_inst._limitMinMaxDateTime(inst, true);\r\n\r\n            tp_inst._onTimeChange();\r\n            tp_inst._updateDateTime(inst);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Create new public method to set only time, callable as $().datepicker('setTime', date)\r\n    */\r\n    $.datepicker._setTimeDatepicker = function (target, date, withDate) {\r\n        var inst = this._getInst(target);\r\n        if (!inst) {\r\n            return;\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n\r\n        if (tp_inst) {\r\n            this._setDateFromField(inst);\r\n            var tp_date;\r\n            if (date) {\r\n                if (typeof date === \"string\") {\r\n                    tp_inst._parseTime(date, withDate);\r\n                    tp_date = new Date();\r\n                    tp_date.setHours(tp_inst.hour, tp_inst.minute, tp_inst.second, tp_inst.millisec);\r\n                    tp_date.setMicroseconds(tp_inst.microsec);\r\n                } else {\r\n                    tp_date = new Date(date.getTime());\r\n                    tp_date.setMicroseconds(date.getMicroseconds());\r\n                }\r\n                if (tp_date.toString() === 'Invalid Date') {\r\n                    tp_date = undefined;\r\n                }\r\n                this._setTime(inst, tp_date);\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    /*\r\n    * override setDate() to allow setting time too within Date object\r\n    */\r\n    $.datepicker._base_setDateDatepicker = $.datepicker._setDateDatepicker;\r\n    $.datepicker._setDateDatepicker = function (target, date) {\r\n        var inst = this._getInst(target);\r\n        if (!inst) {\r\n            return;\r\n        }\r\n\r\n        if (typeof (date) === 'string') {\r\n            date = new Date(date);\r\n            if (!date.getTime()) {\r\n                $.timepicker.log(\"Error creating Date object from string.\");\r\n            }\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        var tp_date;\r\n        if (date instanceof Date) {\r\n            tp_date = new Date(date.getTime());\r\n            tp_date.setMicroseconds(date.getMicroseconds());\r\n        } else {\r\n            tp_date = date;\r\n        }\r\n\r\n        // This is important if you are using the timezone option, javascript's Date \r\n        // object will only return the timezone offset for the current locale, so we \r\n        // adjust it accordingly.  If not using timezone option this won't matter..\r\n        // If a timezone is different in tp, keep the timezone as is\r\n        if (tp_inst) {\r\n            // look out for DST if tz wasn't specified\r\n            if (!tp_inst.support.timezone && tp_inst._defaults.timezone === null) {\r\n                tp_inst.timezone = tp_date.getTimezoneOffset() * -1;\r\n            }\r\n            date = $.timepicker.timezoneAdjust(date, tp_inst.timezone);\r\n            tp_date = $.timepicker.timezoneAdjust(tp_date, tp_inst.timezone);\r\n        }\r\n\r\n        this._updateDatepicker(inst);\r\n        this._base_setDateDatepicker.apply(this, arguments);\r\n        this._setTimeDatepicker(target, tp_date, true);\r\n    };\r\n\r\n    /*\r\n    * override getDate() to allow getting time too within Date object\r\n    */\r\n    $.datepicker._base_getDateDatepicker = $.datepicker._getDateDatepicker;\r\n    $.datepicker._getDateDatepicker = function (target, noDefault) {\r\n        var inst = this._getInst(target);\r\n        if (!inst) {\r\n            return;\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n\r\n        if (tp_inst) {\r\n            // if it hasn't yet been defined, grab from field\r\n            if (inst.lastVal === undefined) {\r\n                this._setDateFromField(inst, noDefault);\r\n            }\r\n\r\n            var date = this._getDate(inst);\r\n            if (date && tp_inst._parseTime($(target).val(), tp_inst.timeOnly)) {\r\n                date.setHours(tp_inst.hour, tp_inst.minute, tp_inst.second, tp_inst.millisec);\r\n                date.setMicroseconds(tp_inst.microsec);\r\n\r\n                // This is important if you are using the timezone option, javascript's Date \r\n                // object will only return the timezone offset for the current locale, so we \r\n                // adjust it accordingly.  If not using timezone option this won't matter..\r\n                if (tp_inst.timezone != null) {\r\n                    // look out for DST if tz wasn't specified\r\n                    if (!tp_inst.support.timezone && tp_inst._defaults.timezone === null) {\r\n                        tp_inst.timezone = date.getTimezoneOffset() * -1;\r\n                    }\r\n                    date = $.timepicker.timezoneAdjust(date, tp_inst.timezone);\r\n                }\r\n            }\r\n            return date;\r\n        }\r\n        return this._base_getDateDatepicker(target, noDefault);\r\n    };\r\n\r\n    /*\r\n    * override parseDate() because UI 1.8.14 throws an error about \"Extra characters\"\r\n    * An option in datapicker to ignore extra format characters would be nicer.\r\n    */\r\n    $.datepicker._base_parseDate = $.datepicker.parseDate;\r\n    $.datepicker.parseDate = function (format, value, settings) {\r\n        var date;\r\n        try {\r\n            date = this._base_parseDate(format, value, settings);\r\n        } catch (err) {\r\n            // Hack!  The error message ends with a colon, a space, and\r\n            // the \"extra\" characters.  We rely on that instead of\r\n            // attempting to perfectly reproduce the parsing algorithm.\r\n            if (err.indexOf(\":\") >= 0) {\r\n                date = this._base_parseDate(format, value.substring(0, value.length - (err.length - err.indexOf(':') - 2)), settings);\r\n                $.timepicker.log(\"Error parsing the date string: \" + err + \"\\ndate string = \" + value + \"\\ndate format = \" + format);\r\n            } else {\r\n                throw err;\r\n            }\r\n        }\r\n        return date;\r\n    };\r\n\r\n    $.datepicker._getFormatConfig = function(inst) {\r\n        var shortYearCutoff = this._get(inst, \"shortYearCutoff\");\r\n        shortYearCutoff = (typeof shortYearCutoff !== \"string\" ? shortYearCutoff :\r\n        new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));\r\n        return { shortYearCutoff: shortYearCutoff,\r\n            dayNamesShort: this._get(inst, \"dayNamesShort\"), dayNames: this._get(inst, \"dayNames\"),\r\n            monthNamesShort: this._get(inst, \"monthNamesShort\"), monthNames: this._get(inst, \"monthNames\"),\r\n            date: {\r\n                currentDay: inst.currentDay,\r\n                currentMonth: inst.currentMonth,\r\n                currentYear:inst.currentYear\r\n            }\r\n        };\r\n    };\r\n\r\n    /*\r\n    * override formatDate to set date with time to the input\r\n    */\r\n    $.datepicker._base_formatDate = $.datepicker._formatDate;\r\n    $.datepicker._formatDate = function (inst, day, month, year) {\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        if (tp_inst) {\r\n            tp_inst._updateDateTime(inst);\r\n            return tp_inst.$input.val();\r\n        }\r\n        return this._base_formatDate(inst);\r\n    };\r\n\r\n    /*\r\n    * override options setter to add time to maxDate(Time) and minDate(Time). MaxDate\r\n    */\r\n    $.datepicker._base_optionDatepicker = $.datepicker._optionDatepicker;\r\n    $.datepicker._optionDatepicker = function (target, name, value) {\r\n        var inst = this._getInst(target),\r\n\t\t\tname_clone;\r\n        if (!inst) {\r\n            return null;\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        if (tp_inst) {\r\n            var min = null,\r\n\t\t\t\tmax = null,\r\n\t\t\t\tonselect = null,\r\n\t\t\t\toverrides = tp_inst._defaults.evnts,\r\n\t\t\t\tfns = {},\r\n\t\t\t\tprop;\r\n            if (typeof name === 'string') { // if min/max was set with the string\r\n                if (name === 'minDate' || name === 'minDateTime') {\r\n                    min = value;\r\n                } else if (name === 'maxDate' || name === 'maxDateTime') {\r\n                    max = value;\r\n                } else if (name === 'onSelect') {\r\n                    onselect = value;\r\n                } else if (overrides.hasOwnProperty(name)) {\r\n                    if (typeof (value) === 'undefined') {\r\n                        return overrides[name];\r\n                    }\r\n                    fns[name] = value;\r\n                    name_clone = {}; //empty results in exiting function after overrides updated\r\n                }\r\n            } else if (typeof name === 'object') { //if min/max was set with the JSON\r\n                if (name.minDate) {\r\n                    min = name.minDate;\r\n                } else if (name.minDateTime) {\r\n                    min = name.minDateTime;\r\n                } else if (name.maxDate) {\r\n                    max = name.maxDate;\r\n                } else if (name.maxDateTime) {\r\n                    max = name.maxDateTime;\r\n                }\r\n                for (prop in overrides) {\r\n                    if (overrides.hasOwnProperty(prop) && name[prop]) {\r\n                        fns[prop] = name[prop];\r\n                    }\r\n                }\r\n            }\r\n            for (prop in fns) {\r\n                if (fns.hasOwnProperty(prop)) {\r\n                    overrides[prop] = fns[prop];\r\n                    if (!name_clone) { name_clone = $.extend({}, name); }\r\n                    delete name_clone[prop];\r\n                }\r\n            }\r\n            if (name_clone && isEmptyObject(name_clone)) { return; }\r\n            if (min) { //if min was set\r\n                if (min === 0) {\r\n                    min = new Date();\r\n                } else {\r\n                    min = new Date(min);\r\n                }\r\n                tp_inst._defaults.minDate = min;\r\n                tp_inst._defaults.minDateTime = min;\r\n            } else if (max) { //if max was set\r\n                if (max === 0) {\r\n                    max = new Date();\r\n                } else {\r\n                    max = new Date(max);\r\n                }\r\n                tp_inst._defaults.maxDate = max;\r\n                tp_inst._defaults.maxDateTime = max;\r\n            } else if (onselect) {\r\n                tp_inst._defaults.onSelect = onselect;\r\n            }\r\n        }\r\n        if (value === undefined) {\r\n            return this._base_optionDatepicker.call($.datepicker, target, name);\r\n        }\r\n        return this._base_optionDatepicker.call($.datepicker, target, name_clone || name, value);\r\n    };\r\n\r\n    /*\r\n    * jQuery isEmptyObject does not check hasOwnProperty - if someone has added to the object prototype,\r\n    * it will return false for all objects\r\n    */\r\n    var isEmptyObject = function (obj) {\r\n        var prop;\r\n        for (prop in obj) {\r\n            if (obj.hasOwnProperty(prop)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n\r\n    /*\r\n    * jQuery extend now ignores nulls!\r\n    */\r\n    var extendRemove = function (target, props) {\r\n        $.extend(target, props);\r\n        for (var name in props) {\r\n            if (props[name] === null || props[name] === undefined) {\r\n                target[name] = props[name];\r\n            }\r\n        }\r\n        return target;\r\n    };\r\n\r\n    /*\r\n    * Determine by the time format which units are supported\r\n    * Returns an object of booleans for each unit\r\n    */\r\n    var detectSupport = function (timeFormat) {\r\n        var tf = timeFormat.replace(/'.*?'/g, '').toLowerCase(), // removes literals\r\n\t\t\tisIn = function (f, t) { // does the format contain the token?\r\n\t\t\t    return f.indexOf(t) !== -1 ? true : false;\r\n\t\t\t};\r\n        return {\r\n            hour: isIn(tf, 'h'),\r\n            minute: isIn(tf, 'm'),\r\n            second: isIn(tf, 's'),\r\n            millisec: isIn(tf, 'l'),\r\n            microsec: isIn(tf, 'c'),\r\n            timezone: isIn(tf, 'z'),\r\n            ampm: isIn(tf, 't') && isIn(timeFormat, 'h'),\r\n            iso8601: isIn(timeFormat, 'Z')\r\n        };\r\n    };\r\n\r\n    /*\r\n    * Converts 24 hour format into 12 hour\r\n    * Returns 12 hour without leading 0\r\n    */\r\n    var convert24to12 = function (hour) {\r\n        hour %= 12;\r\n\r\n        if (hour === 0) {\r\n            hour = 12;\r\n        }\r\n\r\n        return String(hour);\r\n    };\r\n\r\n    var computeEffectiveSetting = function (settings, property) {\r\n        return settings && settings[property] ? settings[property] : $.timepicker._defaults[property];\r\n    };\r\n\r\n    /*\r\n    * Splits datetime string into date and time substrings.\r\n    * Throws exception when date can't be parsed\r\n    * Returns {dateString: dateString, timeString: timeString}\r\n    */\r\n    var splitDateTime = function (dateTimeString, timeSettings) {\r\n        // The idea is to get the number separator occurrences in datetime and the time format requested (since time has\r\n        // fewer unknowns, mostly numbers and am/pm). We will use the time pattern to split.\r\n        var separator = computeEffectiveSetting(timeSettings, 'separator'),\r\n\t\t\tformat = computeEffectiveSetting(timeSettings, 'timeFormat'),\r\n\t\t\ttimeParts = format.split(separator), // how many occurrences of separator may be in our format?\r\n\t\t\ttimePartsLen = timeParts.length,\r\n\t\t\tallParts = dateTimeString.split(separator),\r\n\t\t\tallPartsLen = allParts.length;\r\n\r\n        if (allPartsLen > 1) {\r\n            return {\r\n                dateString: allParts.splice(0, allPartsLen - timePartsLen).join(separator),\r\n                timeString: allParts.splice(0, timePartsLen).join(separator)\r\n            };\r\n        }\r\n\r\n        return {\r\n            dateString: dateTimeString,\r\n            timeString: ''\r\n        };\r\n    };\r\n\r\n    /*\r\n    * Internal function to parse datetime interval\r\n    * Returns: {date: Date, timeObj: Object}, where\r\n    *   date - parsed date without time (type Date)\r\n    *   timeObj = {hour: , minute: , second: , millisec: , microsec: } - parsed time. Optional\r\n    */\r\n    var parseDateTimeInternal = function (dateFormat, timeFormat, dateTimeString, dateSettings, timeSettings) {\r\n        var date,\r\n\t\t\tparts,\r\n\t\t\tparsedTime;\r\n\r\n        parts = splitDateTime(dateTimeString, timeSettings);\r\n        date = $.datepicker._base_parseDate(dateFormat, parts.dateString, dateSettings);\r\n\r\n        if (parts.timeString === '') {\r\n            return {\r\n                date: date\r\n            };\r\n        }\r\n\r\n        parsedTime = $.datepicker.parseTime(timeFormat, parts.timeString, timeSettings);\r\n\r\n        if (!parsedTime) {\r\n            throw 'Wrong time format';\r\n        }\r\n\r\n        return {\r\n            date: date,\r\n            timeObj: parsedTime\r\n        };\r\n    };\r\n\r\n    /*\r\n    * Internal function to set timezone_select to the local timezone\r\n    */\r\n    var selectLocalTimezone = function (tp_inst, date) {\r\n        if (tp_inst && tp_inst.timezone_select) {\r\n            var now = date || new Date();\r\n            tp_inst.timezone_select.val(-now.getTimezoneOffset());\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Create a Singleton Instance\r\n    */\r\n    $.timepicker = new Timepicker();\r\n\r\n    /**\r\n    * Get the timezone offset as string from a date object (eg '+0530' for UTC+5.5)\r\n    * @param {number} tzMinutes if not a number, less than -720 (-1200), or greater than 840 (+1400) this value is returned\r\n    * @param {boolean} iso8601 if true formats in accordance to iso8601 \"+12:45\"\r\n    * @return {string}\r\n    */\r\n    $.timepicker.timezoneOffsetString = function (tzMinutes, iso8601) {\r\n        if (isNaN(tzMinutes) || tzMinutes > 840 || tzMinutes < -720) {\r\n            return tzMinutes;\r\n        }\r\n\r\n        var off = tzMinutes,\r\n\t\t\tminutes = off % 60,\r\n\t\t\thours = (off - minutes) / 60,\r\n\t\t\tiso = iso8601 ? ':' : '',\r\n\t\t\ttz = (off >= 0 ? '+' : '-') + ('0' + Math.abs(hours)).slice(-2) + iso + ('0' + Math.abs(minutes)).slice(-2);\r\n\r\n        if (tz === '+00:00') {\r\n            return 'Z';\r\n        }\r\n        return tz;\r\n    };\r\n\r\n    /**\r\n    * Get the number in minutes that represents a timezone string\r\n    * @param  {string} tzString formatted like \"+0500\", \"-1245\", \"Z\"\r\n    * @return {number} the offset minutes or the original string if it doesn't match expectations\r\n    */\r\n    $.timepicker.timezoneOffsetNumber = function (tzString) {\r\n        var normalized = tzString.toString().replace(':', ''); // excuse any iso8601, end up with \"+1245\"\r\n\r\n        if (normalized.toUpperCase() === 'Z') { // if iso8601 with Z, its 0 minute offset\r\n            return 0;\r\n        }\r\n\r\n        if (!/^(\\-|\\+)\\d{4}$/.test(normalized)) { // possibly a user defined tz, so just give it back\r\n            return tzString;\r\n        }\r\n\r\n        return ((normalized.substr(0, 1) === '-' ? -1 : 1) * // plus or minus\r\n\t\t\t\t\t((parseInt(normalized.substr(1, 2), 10) * 60) + // hours (converted to minutes)\r\n\t\t\t\t\tparseInt(normalized.substr(3, 2), 10))); // minutes\r\n    };\r\n\r\n    /**\r\n    * No way to set timezone in js Date, so we must adjust the minutes to compensate. (think setDate, getDate)\r\n    * @param  {Date} date\r\n    * @param  {string} toTimezone formatted like \"+0500\", \"-1245\"\r\n    * @return {Date}\r\n    */\r\n    $.timepicker.timezoneAdjust = function (date, toTimezone) {\r\n        var toTz = $.timepicker.timezoneOffsetNumber(toTimezone);\r\n        if (!isNaN(toTz)) {\r\n            date.setMinutes(date.getMinutes() + -date.getTimezoneOffset() - toTz);\r\n        }\r\n        return date;\r\n    };\r\n\r\n    /**\r\n    * Calls `timepicker()` on the `startTime` and `endTime` elements, and configures them to\r\n    * enforce date range limits.\r\n    * n.b. The input value must be correctly formatted (reformatting is not supported)\r\n    * @param  {Element} startTime\r\n    * @param  {Element} endTime\r\n    * @param  {Object} options Options for the timepicker() call\r\n    * @return {jQuery}\r\n    */\r\n    $.timepicker.timeRange = function (startTime, endTime, options) {\r\n        return $.timepicker.handleRange('timepicker', startTime, endTime, options);\r\n    };\r\n\r\n    /**\r\n    * Calls `datetimepicker` on the `startTime` and `endTime` elements, and configures them to\r\n    * enforce date range limits.\r\n    * @param  {Element} startTime\r\n    * @param  {Element} endTime\r\n    * @param  {Object} options Options for the `timepicker()` call. Also supports `reformat`,\r\n    *   a boolean value that can be used to reformat the input values to the `dateFormat`.\r\n    * @param  {string} method Can be used to specify the type of picker to be added\r\n    * @return {jQuery}\r\n    */\r\n    $.timepicker.datetimeRange = function (startTime, endTime, options) {\r\n        $.timepicker.handleRange('datetimepicker', startTime, endTime, options);\r\n    };\r\n\r\n    /**\r\n    * Calls `datepicker` on the `startTime` and `endTime` elements, and configures them to\r\n    * enforce date range limits.\r\n    * @param  {Element} startTime\r\n    * @param  {Element} endTime\r\n    * @param  {Object} options Options for the `timepicker()` call. Also supports `reformat`,\r\n    *   a boolean value that can be used to reformat the input values to the `dateFormat`.\r\n    * @return {jQuery}\r\n    */\r\n    $.timepicker.dateRange = function (startTime, endTime, options) {\r\n        $.timepicker.handleRange('datepicker', startTime, endTime, options);\r\n    };\r\n\r\n    /**\r\n    * Calls `method` on the `startTime` and `endTime` elements, and configures them to\r\n    * enforce date range limits.\r\n    * @param  {string} method Can be used to specify the type of picker to be added\r\n    * @param  {Element} startTime\r\n    * @param  {Element} endTime\r\n    * @param  {Object} options Options for the `timepicker()` call. Also supports `reformat`,\r\n    *   a boolean value that can be used to reformat the input values to the `dateFormat`.\r\n    * @return {jQuery}\r\n    */\r\n    $.timepicker.handleRange = function (method, startTime, endTime, options) {\r\n        options = $.extend({}, {\r\n            minInterval: 0, // min allowed interval in milliseconds\r\n            maxInterval: 0, // max allowed interval in milliseconds\r\n            start: {},      // options for start picker\r\n            end: {}         // options for end picker\r\n        }, options);\r\n\r\n        function checkDates(changed, other) {\r\n            var startdt = startTime[method]('getDate'),\r\n\t\t\t\tenddt = endTime[method]('getDate'),\r\n\t\t\t\tchangeddt = changed[method]('getDate');\r\n\r\n            if (startdt !== null) {\r\n                var minDate = new Date(startdt.getTime()),\r\n\t\t\t\t\tmaxDate = new Date(startdt.getTime());\r\n\r\n                minDate.setMilliseconds(minDate.getMilliseconds() + options.minInterval);\r\n                maxDate.setMilliseconds(maxDate.getMilliseconds() + options.maxInterval);\r\n\r\n                if (options.minInterval > 0 && minDate > enddt) { // minInterval check\r\n                    endTime[method]('setDate', minDate);\r\n                }\r\n                else if (options.maxInterval > 0 && maxDate < enddt) { // max interval check\r\n                    endTime[method]('setDate', maxDate);\r\n                }\r\n                else if (startdt > enddt) {\r\n                    other[method]('setDate', changeddt);\r\n                }\r\n            }\r\n        }\r\n\r\n        function selected(changed, other, option) {\r\n            if (!changed.val()) {\r\n                return;\r\n            }\r\n            var date = changed[method].call(changed, 'getDate');\r\n            if (date !== null && options.minInterval > 0) {\r\n                if (option === 'minDate') {\r\n                    date.setMilliseconds(date.getMilliseconds() + options.minInterval);\r\n                }\r\n                if (option === 'maxDate') {\r\n                    date.setMilliseconds(date.getMilliseconds() - options.minInterval);\r\n                }\r\n            }\r\n            if (date.getTime) {\r\n                other[method].call(other, 'option', option, date);\r\n            }\r\n        }\r\n\r\n        $.fn[method].call(startTime, $.extend({\r\n            onClose: function (dateText, inst) {\r\n                checkDates($(this), endTime);\r\n            },\r\n            onSelect: function (selectedDateTime) {\r\n                selected($(this), endTime, 'minDate');\r\n            }\r\n        }, options, options.start));\r\n        $.fn[method].call(endTime, $.extend({\r\n            onClose: function (dateText, inst) {\r\n                checkDates($(this), startTime);\r\n            },\r\n            onSelect: function (selectedDateTime) {\r\n                selected($(this), startTime, 'maxDate');\r\n            }\r\n        }, options, options.end));\r\n\r\n        checkDates(startTime, endTime);\r\n        selected(startTime, endTime, 'minDate');\r\n        selected(endTime, startTime, 'maxDate');\r\n        return $([startTime.get(0), endTime.get(0)]);\r\n    };\r\n\r\n    /**\r\n    * Log error or data to the console during error or debugging\r\n    * @param  {Object} err pass any type object to log to the console during error or debugging\r\n    * @return {void}\r\n    */\r\n    $.timepicker.log = function (err) {\r\n        if (window.console) {\r\n            window.console.log(err);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Add util object to allow access to private methods for testability.\r\n    */\r\n    $.timepicker._util = {\r\n        _extendRemove: extendRemove,\r\n        _isEmptyObject: isEmptyObject,\r\n        _convert24to12: convert24to12,\r\n        _detectSupport: detectSupport,\r\n        _selectLocalTimezone: selectLocalTimezone,\r\n        _computeEffectiveSetting: computeEffectiveSetting,\r\n        _splitDateTime: splitDateTime,\r\n        _parseDateTimeInternal: parseDateTimeInternal\r\n    };\r\n\r\n    /*\r\n    * Microsecond support\r\n    */\r\n    if (!Date.prototype.getMicroseconds) {\r\n        Date.prototype.microseconds = 0;\r\n        Date.prototype.getMicroseconds = function () { return this.microseconds; };\r\n        Date.prototype.setMicroseconds = function (m) {\r\n            this.setMilliseconds(this.getMilliseconds() + Math.floor(m / 1000));\r\n            this.microseconds = m % 1000;\r\n            return this;\r\n        };\r\n    }\r\n\r\n    /*\r\n    * Keep up with the version\r\n    */\r\n    $.timepicker.version = \"1.4\";\r\n\r\n})(jQuery);","/*\r\n* Upload control for Bizagi Workportal\r\n* @author: David Andres Niño Villalobos\r\n*/\r\n\r\n(function ($) {\r\n    $.fn.bizagiUpload = function (options) {\r\n\r\n        var self = this;\r\n        var controlReference = this;\r\n        var EXTENSIONS_INVALID = [\"exe\", \"bat\", \"bash\"];\r\n\r\n        // define options\r\n        options = options || {};\r\n\r\n        var opt = {\r\n            renderReference: {},\r\n            dialogTemplate: {},\r\n            properties: {},\r\n            uploadedFiles: -1,\r\n            maxAllowedFiles: -1,\r\n\r\n            isIE: bizagi.util.isIE,\r\n            isECM: false,\r\n            isUpdatingECM: false,\r\n\r\n            onUploadFileCompletedCallback: function () { },\r\n            onChangeFile: function () { },\r\n            onCheckMaxSize: checkMaxSize,\r\n            onValidate: function () {\r\n                return true;\r\n            },\r\n            dialogTitle: \"\",\r\n            height: 350,\r\n            width: 500,\r\n            onUploadFileProcess: function () { },\r\n            onUploadDialogReady: function () { }\r\n        };\r\n\r\n        // Extend options\r\n        $.extend(opt, opt, options);\r\n\r\n        self.opt = opt;\r\n\r\n        function init() {\r\n\r\n            bindElements();\r\n            formatExtensions();\r\n        }\r\n\r\n        // Add events\r\n        function bindElements() {\r\n\r\n            //By default, the control is enabled\r\n            if (opt.renderReference.enabled === undefined)\r\n                opt.renderReference.enabled = true;\r\n\r\n            // Click event\r\n            if (opt.isECM && opt.isUpdatingECM) {\r\n                $(\".modal-ecm .ecm-options-upgrade\", self).click(function () {\r\n                    if (opt.renderReference.enabled) {\r\n                        //Hides the modal control\r\n                        $(\".modal-ecm\", self).hide();\r\n\r\n                        // Open dialog\r\n                        openUploadDialog();\r\n                    }\r\n                });\r\n\r\n            } else {\r\n                self.click(function () {\r\n                    if (opt.renderReference.enabled)\r\n                        openUploadDialog(); // Open dialog\r\n                });\r\n            }\r\n        }\r\n\r\n        /*\r\n\t\t * Adjust the valid extensions, to keep it in a list wich is used inside the upload dialog template\r\n\t\t */\r\n        function formatExtensions() {\r\n\r\n            if (opt.properties.validExtensions != \"\") {\r\n                var extensionList = opt.properties.validExtensions.replaceAll(\"*\", \"\");\r\n                extensionList = extensionList.replaceAll(\";\", \",\");\r\n\r\n                opt.properties.processedFileExtension = extensionList;\r\n            }\r\n        }\r\n\r\n        /*\r\n\t\t * open the upload Dialog\r\n\t\t */\r\n        function openUploadDialog() {\r\n            var self = this;\r\n            var doc = window.document;\r\n            var dialogBox = self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\r\n            var reverseButtons = false;\r\n\r\n            if (opt.renderReference.getFormContainer) {\r\n                reverseButtons = opt.renderReference.getFormContainer().properties.orientation == \"rtl\" ? true : false;\r\n            }\r\n\r\n            // Reset Flag\r\n            self.isClicked = false;\r\n\r\n            var buttons = [];\r\n\r\n            // Select button\r\n            buttons[0] = {\r\n                text: bizagi.localization.getResource(\"render-upload-dialog-select\"),\r\n                click: function (e) {\r\n\r\n                    var result = false;\r\n\r\n                    if (!self.isClicked) {\r\n                        self.isClicked = true;\r\n\r\n                        if ((opt.onCheckMaxSize(opt.renderReference) && checkFileTypes() && opt.onValidate(opt.renderReference))) {\r\n                            //Check this parameter exclusive for upload control\r\n                            if (opt.uploadedFiles > 0 && opt.maxAllowedFiles > 0) {\r\n                                result = !maxFilesLimit() ? true : false;\r\n                            } else {\r\n                                result = true;\r\n                            }\r\n\r\n                            //Separated Logic for ECM upload dialog\r\n                            if (opt.isECM) {\r\n\r\n                                var fileName = $('input[type=file]', dialogBox).val();\r\n                                fileName = fileName.substring(fileName.lastIndexOf(\"\\\\\") + 1, fileName.length);\r\n                                $('[name=Filename]', self.dialobBox).val(fileName);\r\n\r\n                                if (opt.isUpdatingECM) {\r\n                                    var extension = \"*\" + fileName.substring(fileName.lastIndexOf(\".\"), fileName.length);\r\n                                    $('[name=fileext]', self.dialobBox).val(extension);\r\n                                }\r\n                            }\r\n\r\n\r\n                            if (result) {\r\n                                opt.onUploadFileProcess();\r\n                                $.when(processUploadFile.call(this)).done(function (data) {\r\n                                    if (opt.isECM) {\r\n                                        var response = JSON.parse(data);\r\n\r\n                                        if (opt.isUpdatingECM) {\r\n                                            //Inserts manually the attributes\r\n                                            if (response.xpath)\r\n                                                result.xPath = result.xpath;\r\n\r\n                                            if (!response.idPageCache)\r\n                                                response.idPageCache = opt.properties.idPageCache;\r\n\r\n                                            response.filename = response.fileName;\r\n\r\n                                            var data = {\r\n                                                fileName: response.fileName,\r\n                                                idAttrib: response.idAttrib,\r\n                                                idFileUpload: response.idFileUpload,\r\n                                                idPageCache: response.idPageCache,\r\n                                                xPath: opt.properties.xPath,\r\n                                                xpathContext: opt.properties.xpathContext\r\n                                            };\r\n\r\n                                            opt.onUploadFileCompletedCallback(opt.renderReference, data, controlReference, response);\r\n                                        } else {\r\n                                            opt.onUploadFileCompletedCallback(opt.renderReference, response);\r\n                                        }\r\n                                    } else\r\n                                        opt.onUploadFileCompletedCallback(opt.renderReference, data);\r\n\r\n                                    if (opt.alertAfterUpload) {\r\n                                        bizagi.showMessageBox(bizagi.localization.getResource(opt.alertAfterUpload), \"Bizagi\", \"info\");\r\n                                    }\r\n                                    closeUploadDialog();\r\n                                });\r\n                            }\r\n                        } else {\r\n                            self.isClicked = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n\r\n            // Cancel button\r\n            buttons[1] = {\r\n                text: bizagi.localization.getResource(\"text-cancel\"),\r\n                click: function () {\r\n                    closeUploadDialog();\r\n                }\r\n            }\r\n\r\n            if (reverseButtons)\r\n                buttons.reverse();\r\n\r\n            // Creates a dialog\r\n            opt.renderReference.dialogBox = dialogBox.dialog({\r\n                width: opt.width,\r\n                height: opt.height,\r\n                title: opt.dialogTitle,\r\n                modal: true,\r\n                draggable: false,\r\n                resizable: false,\r\n                maximize: false,\r\n                buttons: buttons,\r\n                close: function () {\r\n                    closeUploadDialog();\r\n                }\r\n            });\r\n\r\n            //Creates the element with the required parameters\r\n\r\n            var contentDialog = $.tmpl(opt.dialogTemplate, opt.properties, { isIE: opt.isIE, timeout: getEstimatedTimeByNetworkSpeed });\r\n            contentDialog.appendTo(dialogBox);\r\n\r\n            // Fix issue associated to valid file extensions with IE (accept property)\r\n            $(\"input[type=file]\", contentDialog).click(function (event) {\r\n                var self = $(this);\r\n\r\n                if (self.val() !== \"\") {\r\n                    self.val(\"\");\r\n                }\r\n            });\r\n\r\n            $(\"input[type=file]\", contentDialog).change(function (event) {                \r\n                opt.onChangeFile(event.target.files);\r\n            });\r\n\r\n            $('.ui-bizagi-loading-message').remove();\r\n            opt.onUploadDialogReady();\r\n        }\r\n\r\n        /*\r\n\t\t *   Process an upload file into the server\r\n\t\t */\r\n        function processUploadFile() {\r\n            if (bizagi.util.isIE() && !(bizagi.util.isIE11() || bizagi.util.isIE10())) {\r\n                return processUploadFileOldBrowsers();\r\n            } else {\r\n                return processUploadFileModernBrowsers();\r\n            }\r\n        }\r\n\r\n        function processUploadFileOldBrowsers() {\r\n            var self = this;\r\n            var defer = new $.Deferred();\r\n            var dialogBox = opt.renderReference.dialogBox;\r\n            var uploadForm = $(\"form\", dialogBox);\r\n            var uploadIFrame = $(\"iframe\", uploadForm);\r\n\r\n            var fileControl = $(\"input[type=file]\", dialogBox).get(0) || {};\r\n            if (typeof fileControl.files !== \"undefined\") {\r\n                var netSpeed = (typeof opt.properties.networkSpeed != \"undefined\") ? opt.properties.networkSpeed : networkSpeed();\r\n                var estimatedTime = getEstimatedTimeByNetworkSpeed(fileControl.files ? fileControl.files[0].size : 666, netSpeed);\r\n                var $estimatedTime = $(\"#estimatedtime\", dialogBox);\r\n                var $statusContainer = $(\"#file-upload-status\", dialogBox);\r\n                $(\"#file-upload-status .file-upload-latency\").show();\r\n\r\n                clearInterval(self.interval);\r\n                self.interval = window.setInterval(function () {\r\n                    $estimatedTime.html(--estimatedTime + \" s\");\r\n                    if (estimatedTime <= 0) {\r\n                        $statusContainer.html(\"Still working...\");\r\n                        clearInterval(self.interval);\r\n                    }\r\n                }, 1000);\r\n            }\r\n\r\n            // When the iframe loads the user we need to evaluate the response and close the dialog\r\n            var timeoutFn = function () {\r\n                try {\r\n                    var response = \"\";\r\n                    if (uploadIFrame[0].contentWindow || windoFrameObj) {\r\n\r\n                        if (bizagi.util.isIE8()) {\r\n                            iframeContent = $(uploadIFrame[0].contentWindow.document.body);\r\n                            response = iframeContent.text();\r\n                        } else {\r\n                            iframeContent = $(uploadIFrame[0].contentWindow.eval(\"document.body\"));\r\n                            response = iframeContent.text();\r\n                        }\r\n                    }\r\n                    if (response.length > 0) {\r\n                        defer.resolve(response);\r\n                    } else {\r\n                        setTimeout(timeoutFn, 50);\r\n                    }\r\n                } catch (e) {\r\n                    // Nothing to do, just close the window and show error message\r\n                    closeUploadDialog();\r\n                    window.alert(e.toString());\r\n                }\r\n            };\r\n\r\n            ///Due to the server response, is necessary to validate which browser the client is using\r\n            if (bizagi.util.isIE() || bizagi.util.isIE11()) {\r\n                //Creates dataService object to call required services\r\n                if (!self.dataService)\r\n                    self.dataService = new bizagi.workportal.services.service();\r\n\r\n                $.when(self.dataService.getCurrentUser(\"\")).done(function (responseLogin) {\r\n                    // Execute the timed function in order to check when the response has arrived\r\n                    timeoutFn();\r\n\r\n                    // Submit the form\r\n                    uploadForm.submit();\r\n                }).fail(function (event) {\r\n                });\r\n            }\r\n            else {\r\n                // Execute the timed function in order to check when the response has arrived\r\n                timeoutFn();\r\n\r\n                // Submit the form\r\n                uploadForm.submit();\r\n            }\r\n\r\n            return defer.promise();\r\n        }\r\n\r\n        function processUploadFileModernBrowsers() {\r\n            var fileControl = $(\"input[type=file]\", dialogBox).get(0) || {};\r\n            var $form = $(\"form\", dialogBox);\r\n            var def = new $.Deferred();\r\n            var $statusElement = $(\"#file-upload-status .file-upload-statusbar\");\r\n            $statusElement.show();\r\n\r\n\r\n            var xhr = new XMLHttpRequest();\r\n\r\n            var data = new FormData();\r\n            data.append($(\"input[type=file]\", dialogBox).prop(\"name\"), fileControl.files[0]);\r\n\r\n            $(\"input[type='hidden']\", dialogBox).each(function () {\r\n                data.append(this.name, this.value);\r\n            });\r\n\r\n            var uploadProgress = function (progress) {\r\n                var percent = Math.round(progress.loaded * 100 / progress.total);\r\n                var message = (percent >= 99) ? bizagi.localization.getResource(\"render-upload-status-waiting\") : percent + \"%\";\r\n\r\n                $(\".statusbar\", $statusElement).css(\"width\", percent + \"%\");\r\n                $(\".statuspercent\", $statusElement).html(message);\r\n            };\r\n\r\n            var uploadComplete = function (e) {\r\n                def.resolve(e.target.responseText);\r\n            };\r\n\r\n            xhr.upload.addEventListener(\"progress\", uploadProgress, false);\r\n            xhr.addEventListener(\"load\", uploadComplete, false);\r\n\r\n            xhr.open(\"POST\", opt.properties.url);\r\n            xhr.setRequestHeader('X-BZXSRF-TOKEN', bizagi.getXSRFToken());\r\n            xhr.send(data);\r\n\r\n            return def.promise();\r\n        }\r\n\r\n        /*\r\n\t\t *   Verifies the maximun file size\r\n\t\t */\r\n        function checkMaxSize() {\r\n            var self = this;\r\n            var properties = opt.properties;\r\n            var dialogBox = opt.renderReference.dialogBox;\r\n            var fileControl = $(\"input[type=file]\", dialogBox).get(0) || {};\r\n\r\n            // Dont exist any way to know file size in IEx, just skip this validation\r\n            if (fileControl.files != undefined) {\r\n                if (fileControl.files.length > 0) {\r\n                    if (fileControl.files[0].size > properties.maxSize) {\r\n                        showError(bizagi.localization.getResource(\"render-upload-alert-maxsize\").replace(\"{0}\", properties.maxSize));\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                } else {\r\n                    showError(bizagi.localization.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\r\n                    return false;\r\n                }\r\n            } else {\r\n                if (bizagi.util.isIE()) {\r\n                    if (fileControl.value === \"\" || !fileControl.value) {\r\n                        showError(bizagi.localization.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\r\n                        return false;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        /*\r\n\t\t *   Verifies the file extension after selecting it from the \"Browse file\" dialog\r\n\t\t */\r\n        function checkFileTypes() {\r\n            var self = this;\r\n            var properties = opt.properties;\r\n            var dialogBox = self.dialogBox;\r\n            var file = $(\"input[type=file]\", dialogBox).val();\r\n\r\n            // ECM valid extension\r\n            if (opt.isECM) {\r\n\r\n                var fileName = file.substring(file.lastIndexOf(\"\\\\\") + 1, file.length);\r\n                var extension = fileName.substring(fileName.lastIndexOf(\".\"), fileName.length);\r\n\r\n                extension = extension.toLowerCase().replaceAll(\".\", \"\");\r\n\r\n                if (EXTENSIONS_INVALID.indexOf(extension) >= 0) {\r\n                    showError(bizagi.localization.getResource(\"render-upload-error-extensions\"));\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (properties.validExtensions && properties.validExtensions.length > 0) {\r\n                var validExtensions = properties.validExtensions.replaceAll(\"*.\", \"\").split(\";\");\r\n                if (!validateFilenameExtension(file, validExtensions, true)) {\r\n                    showError(bizagi.localization.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions);\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        /*\r\n\t\t *\r\n\t\t */\r\n        function validateFilenameExtension(stringToCheck, acceptableExtensionsArray, required) {           \r\n            if (required == false && stringToCheck.length == 0) {\r\n                return true;\r\n            }\r\n\r\n            for (var i = 0; i < acceptableExtensionsArray.length; i++) {\r\n                if (acceptableExtensionsArray[i].toLowerCase() == \"*\") {\r\n                    return true\r\n                }\r\n                if (stringToCheck.toLowerCase().endsWith(acceptableExtensionsArray[i].toLowerCase())) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        /*\r\n\t\t *   Check the maximun file than can be uploaded\r\n\t\t */\r\n        function maxFilesLimit() {\r\n            if (opt.uploadedFiles >= opt.maxfiles) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /*\r\n\t\t *   Display the error inside the control\r\n\t\t */\r\n        function showError(message) {\r\n            var self = this;\r\n            var errorContainer = $(\"#alert-file-upload\", self.dialogBox);\r\n\r\n            // Empty container\r\n            errorContainer.empty();\r\n            errorContainer.show();\r\n\r\n            errorContainer.html(message);\r\n        }\r\n\r\n\r\n        /*\r\n         *   Close the upload dialog\r\n         */\r\n        function closeUploadDialog() {\r\n            var self = this;\r\n            self.dialogBox.dialog('destroy');\r\n            self.dialogBox.detach();\r\n\r\n            self.isClicked = false;\r\n        }\r\n\r\n        // Init plugin\r\n        init();\r\n\r\n        return self;\r\n    };\r\n})(jQuery);\r\n","/* \r\n * Upload control for Bizagi Workportal\r\n *\r\n * This control has the same functionality as jquery.bizagi.upload (bizagiUpload)\r\n * except it is NOT shown in a dialog\r\n * @author: Andrés Fernando Muñoz Muñoz\r\n */\r\n\r\n(function ($) {\r\n    $.fn.bizagiFileUpload = function (options) {\r\n\r\n        var self = this;\r\n        var contentFormUpload;\r\n\r\n        var controlReference = this;\r\n\r\n        // define options\r\n        options = options || {};\r\n\r\n        var opt = {\r\n            renderReference: {},\r\n            formTemplate: {},\r\n            properties: {},\r\n            uploadedFiles: -1,\r\n            maxAllowedFiles: -1,\r\n\r\n            isIE: bizagi.util.isIE,\r\n            isECM: false,\r\n            isUpdatingECM: false,\r\n\r\n            onUploadFileCompletedCallback: function () { },\r\n            onUploadFileFailCallback: function () { },\r\n            onChangeFile: function () { },\r\n            onCheckMaxSize: checkMaxSize,\r\n            height: 200,\r\n            width: 500,\r\n            onUploadFileProcess: function () { },\r\n            onUploadFormReady: function () { }\r\n        };\r\n\r\n        // Extend options\r\n        $.extend(opt, opt, options);\r\n\r\n        self.opt = opt;\r\n\r\n        function init() {\r\n            formatExtensions();\r\n            initUploadForm();\r\n        }\r\n\r\n\r\n        /*\r\n         * open the upload form\r\n         */\r\n        function initUploadForm() {\r\n            var contentForm = $.tmpl(opt.formTemplate, opt.properties, {isIE: opt.isIE});\r\n\r\n\r\n            self.width(\"100%\");\r\n            self.height(\"40px\");\r\n\r\n            //this.contentForm = contentForm;\r\n            contentFormUpload = contentForm;\r\n            self.html(contentForm);\r\n            $(\"input[type=file]\", contentForm).change(function (event) {\r\n                opt.onChangeFile(event.target.files);\r\n            });\r\n            bindSubmitButton();\r\n            $(\".ui-bizagi-loading-message\").remove();\r\n            opt.onUploadFormReady();\r\n        }\r\n\r\n        /*\r\n         * Adjust the valid extensions, to keep it in a list wich is used inside the upload template\r\n         */\r\n        function formatExtensions() {\r\n\r\n            if (opt.properties.validExtensions !== \"\") {\r\n                var extensionList = opt.properties.validExtensions.replaceAll(\"*\", \"\");\r\n                extensionList = extensionList.replaceAll(\";\", \",\");\r\n\r\n                opt.properties.processedFileExtension = extensionList;\r\n            }\r\n        }\r\n\r\n        function bindSubmitButton(){\r\n            var self = this;\r\n            var doc = window.document;\r\n\r\n            var contentForm = contentFormUpload;\r\n            var buttons = {};\r\n\r\n            // Select button\r\n            $(\"#upload-file\", contentForm).click(function (e) {\r\n\r\n\r\n                var result = false;\r\n\r\n                    if ((opt.onCheckMaxSize(opt.renderReference) && checkFileTypes())) {\r\n                        //start loading mask\r\n                        opt.onUploadFileProcess();\r\n                        //Check this parameter exclusive for upload control\r\n                        if (opt.uploadedFiles > 0 && opt.maxAllowedFiles > 0) {\r\n                            result = !maxFilesLimit() ? true : false;\r\n                        }\r\n                        else {\r\n                            result = true;\r\n                        }\r\n\r\n                        //Separated Logic for ECM upload form\r\n                        if (opt.isECM) {\r\n\r\n                            var fileName = $(\"input[type=file]\",  contentForm).val();\r\n                            fileName = fileName.substring(fileName.lastIndexOf(\"\\\\\") + 1, fileName.length);\r\n                            $(\"[name=Filename]\", contentForm).val(fileName);\r\n\r\n                            if (opt.isUpdatingECM) {\r\n                                var extension = \"*\" + fileName.substring(fileName.lastIndexOf(\".\"), fileName.length);\r\n                                $(\"[name=fileext]\", contentForm).val(extension);\r\n                            }\r\n                        }\r\n\r\n                        if (result) {\r\n\r\n                            $.when(processUploadFile()).done(function (data) {\r\n\r\n                                if (opt.isECM) {\r\n                                    var response = JSON.parse(data);\r\n\r\n                                    if (opt.isUpdatingECM) {\r\n                                        //Inserts manually the attributes\r\n                                        if (response.xpath)\r\n                                            result.xPath = result.xpath;\r\n                                        if (!response.idPageCache)\r\n                                            response.idPageCache = opt.properties.idPageCache;\r\n                                        response.filename = response.fileName;\r\n\r\n                                        var data = { fileName: response.fileName,\r\n                                            idAttrib: response.idAttrib,\r\n                                            idFileUpload: response.idFileUpload,\r\n                                            idPageCache: response.idPageCache,\r\n                                            xPath: opt.properties.xPath,\r\n                                            xpathContext: opt.properties.xpathContext\r\n                                        };\r\n\r\n                                        opt.onUploadFileCompletedCallback(opt.renderReference, data, controlReference, response);\r\n                                    }\r\n                                    else {\r\n                                        opt.onUploadFileCompletedCallback(opt.renderReference, response);\r\n                                    }\r\n                                }\r\n                                else\r\n                                    opt.onUploadFileCompletedCallback(opt.renderReference, data);\r\n\r\n                                if(opt.alertAfterUpload){\r\n                                    bizagi.showMessageBox(bizagi.localization.getResource(opt.alertAfterUpload), \"Bizagi\", \"info\");\r\n                                }\r\n\r\n                            }).fail(function(data) {\r\n                                opt.onUploadFileFailCallback(data);\r\n                                if(opt.alerFailtAfterUpload){\r\n                                    bizagi.showMessageBox(bizagi.localization.getResource(opt.alerFailtAfterUpload), \"Bizagi\", \"warning\");\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n\r\n\r\n            });\r\n        }\r\n\r\n\r\n        /*\r\n         *   Process an upload file into the server\r\n         */\r\n        function processUploadFile() {\r\n            var self = this;\r\n            var defer = new $.Deferred();\r\n            var contentForm = contentFormUpload;\r\n            var uploadForm = $(\"form\", contentForm);\r\n\r\n            if (window.FormData) {\r\n                var extForm = uploadForm[0];\r\n                var $extForm = $(extForm);\r\n                var url = $extForm.attr(\"action\");\r\n                var method = $extForm.attr(\"method\");\r\n                var formData = new FormData(extForm);\r\n\r\n                $.ajax({\r\n                    url: url,\r\n                    data: formData,\r\n                    type: method,\r\n                    timeout: 24*60*1000, // 24 minutes\r\n                    contentType: false,\r\n                    processData: false,\r\n                    success: function (response) {\r\n                        if (response.length > 0) {\r\n                            var responseJSON = JSON.parse(response);\r\n                            if (responseJSON.result) {\r\n                                defer.resolve(response);\r\n                            } else {\r\n                                defer.reject(response);\r\n                            }\r\n                        } else {\r\n                            defer.reject(\"{}\");\r\n                        }\r\n                    },\r\n                    error: function (err) {\r\n                        defer.reject(\"{}\");\r\n                    }\r\n                });\r\n            } else {\r\n                var uploadIFrame = $(\"iframe\", uploadForm);\r\n                var delay = bizagi.override.delayQuestionFileUpload || 1000;\r\n                // When the iframe loads the user we need to evaluate the response\r\n                var timeoutFn = function () {\r\n                    try {\r\n                        var response = \"\";\r\n                        if (uploadIFrame[0].contentWindow) {\r\n                            var iframeContent = bizagi.util.isIE() ? $(uploadIFrame[0].contentWindow.document.body) : $(uploadIFrame[0].contentWindow.eval(\"document.body\"));\r\n\r\n                            response = iframeContent.text();\r\n                            //response = $(\"pre\", iframeContent).length == 0 ? iframeContent[0].innerHTML : $(\"pre\", iframeContent)[0].innerHTML;\r\n                        }\r\n                        if (response.length > 0) {\r\n                            var responseJSON = JSON.parse(response);\r\n                            if (responseJSON.result) {\r\n                                defer.resolve(response);\r\n                            } else {\r\n                                defer.reject(response);\r\n                            }\r\n                        } else {\r\n                            setTimeout(timeoutFn, delay);\r\n                        }\r\n                    } catch (e) {\r\n                        // Nothing to do, just show error message\r\n                        window.alert(e.toString());\r\n                    }\r\n                };\r\n\r\n                // Execute the timed function in order to check when the response has arrived\r\n                timeoutFn();\r\n\r\n                // Submit the form\r\n                //console.log(uploadForm);\r\n                uploadForm.submit();\r\n            }\r\n            \r\n\r\n            return defer.promise();\r\n        }\r\n\r\n        /*\r\n         *   Verifies the maximun file size\r\n         */\r\n        function checkMaxSize() {\r\n            var self = this;\r\n            var properties = opt.properties;\r\n            var contentForm = contentFormUpload;\r\n            var fileControl = $(\"input[type=file]\", contentForm).get(0) || {};\r\n\r\n            // Dont exist any way to know file size in IEx, just skip this validation\r\n            if (fileControl.files != undefined) {\r\n                if (fileControl.files.length > 0) {\r\n                    if (fileControl.files[0].size > properties.maxSize) {\r\n                        showError(bizagi.localization.getResource(\"render-upload-alert-maxsize\").replace(\"{0}\", properties.maxSize));\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n                else {\r\n                    showError(bizagi.localization.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\r\n                    return false;\r\n                }\r\n            } else {\r\n                if (bizagi.util.isIE()) {\r\n                    if (fileControl.value === \"\" || !fileControl.value) {\r\n                        showError(bizagi.localization.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\r\n                        return false;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        /*\r\n         *   Verifies the file extension after selecting it from the \"Browse file\"\r\n         */\r\n        function checkFileTypes() {\r\n            var self = this;\r\n            var properties = opt.properties;\r\n            var contentForm = contentFormUpload;\r\n            var file = $(\"input[type=file]\", contentForm).val();\r\n            if (properties.validExtensions && properties.validExtensions.length > 0) {\r\n                var validExtensions = properties.validExtensions.replaceAll(\"*.\", \"\").split(\";\");\r\n                if (!validateFilenameExtension(file, validExtensions, true)) {\r\n                    showError(bizagi.localization.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions);\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        /*\r\n         *\r\n         */\r\n        function validateFilenameExtension(stringToCheck, acceptableExtensionsArray, required) {\r\n            if (required == false && stringToCheck.length == 0) {\r\n                return true;\r\n            }\r\n            for (var i = 0; i < acceptableExtensionsArray.length; i++) {\r\n                if (acceptableExtensionsArray[i].toLowerCase() == \"*\") {\r\n                    return true\r\n                }\r\n                if (stringToCheck.toLowerCase().endsWith(acceptableExtensionsArray[i].toLowerCase())) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        /*\r\n         *   Check the maximun file than can be uploaded\r\n         */\r\n        function maxFilesLimit() {\r\n            if (opt.uploadedFiles >= opt.maxfiles) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /*\r\n         *   Display the error inside the control\r\n         */\r\n        function showError(message) {\r\n            var self = this;\r\n            var errorContainer = $(\"#alert-file-upload\", contentFormUpload);\r\n\r\n            // Empty container\r\n            errorContainer.empty();\r\n            errorContainer.show();\r\n\r\n            errorContainer.html(message);\r\n        }\r\n\r\n\r\n\r\n\r\n        // Init plugin\r\n        init();\r\n\r\n        return self;\r\n    };\r\n})(jQuery);","/**\r\n *   Author: Alexander Mejia\r\n *   Comments:\r\n *   -   This widget will implement a custom filter for bizagi workportal module\r\n */\r\n(function ($) {\r\n    $.widget(\"ui.bizagi_filters\", {\r\n        options: {\r\n            type: 1,\r\n            parent: \"\",\r\n            data: {},\r\n            entity: false,\r\n            dataService: null,\r\n            templates: {\r\n                filterWrapper: \"\",\r\n                filterString: \"\",\r\n                filterNumber: \"\",\r\n                filterDate: \"\",\r\n                filterBoolean: \"\"\r\n            },\r\n            // Se comentan los filtros porque queryengine no tiene soporte sobre los mismos. Descomentar a la espera de que se soporten\r\n            operators: {\r\n                \"equals\": { label: \"workportal-widget-filter-operators-equals-to\", appliesTo: [\"Text\", \"Number\", \"Integer\", \"DateTime\", \"Boolean\", \"RelatedEntity\", \"Entity\", \"Currency\"], operator: \"=\" },\r\n                //\"not-equals\": { label: \"workportal-widget-filter-operators-different-to\", appliesTo: [\"Text\", \"Number\", \"Integer\", \"DateTime\", \"Entity\", \"Currency\", \"Boolean\"], operator: \"!=\" },\r\n                \"like\": { label: \"workportal-widget-filter-operators-like\", appliesTo: [\"Text\", \"TextExtended\"], operator: \"LIKE\" },\r\n                \"is-null\": { label: \"workportal-widget-filter-operators-is-null\", appliesTo: [\"Text\", \"TextExtended\", \"Number\", \"Integer\", \"DateTime\", \"Boolean\", \"Entity\", \"Currency\"], isUnary: true, operator: \"IS NULL\" },\r\n                //\"is-not-null\": { label: \"workportal-widget-filter-operators-is-not-null\", appliesTo: [\"Text\", \"Number\", \"Integer\", \"DateTime\", \"Boolean\", \"Entity\", \"Currency\"], isUnary: true, operator: \"IS NOT NULL\" },\r\n                //\"less-than\": { label: \"workportal-widget-filter-operators-less-than\", appliesTo: [\"Number\", \"Integer\", \"DateTime\", \"Currency\"], operator: \"<\" },\r\n                \"less-equals-than\": { label: \"workportal-widget-filter-operators-less-or-equal-than\", appliesTo: [\"Number\", \"Integer\", \"DateTime\", \"Currency\"], operator: \"<=\" },\r\n                //\"greater-than\": { label: \"workportal-widget-filter-operators-greater-than\", appliesTo: [\"Number\", \"Integer\", \"DateTime\", \"Currency\"], operator: \">\" },\r\n                \"greater-equals-than\": { label: \"workportal-widget-filter-operators-greater-or-equal-than\", appliesTo: [\"Number\", \"Integer\", \"DateTime\", \"Currency\"], operator: \">=\" }\r\n            },\r\n            // callbacks\r\n            change: null\r\n        },\r\n\r\n        //Test\r\n        testPrivateFunction: function (nameFunction, params) {\r\n            var self = this;\r\n            self[nameFunction].call(self, params);\r\n        },\r\n\r\n        /**\r\n         * Constructor\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            self._on(self.element, {\r\n                \"click\": function () {\r\n                    self.buildFilter();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Builds the filter with operators and control to input data\r\n         */\r\n        buildFilter: function () {\r\n            var self = this,\r\n                templates = self.options.templates;\r\n\r\n            self.filterType = self.getFilterType();\r\n\r\n            if ($.isFunction(self[\"build\" + self.filterType + \"Filter\"])) {\r\n\r\n                var $filter = self.$filter = $.tmpl(templates.filterWrapper);\r\n                $filter.appendTo(\"body\", document);\r\n\r\n                // Define handler to close the item\r\n                setTimeout(function () {\r\n                    // Capture all click elements inside the popup\r\n                    $filter.click(function (e) {\r\n                        e.stopPropagation();\r\n                    });\r\n\r\n                    // Make a document click, if the event bubbles up to here then the click was made outside popup boundaries\r\n                    $(document).one(\"click\", function (ev) {\r\n                        // Given that the previous event is to general, it is necessary to specify that the user do the click outside the jquery date picker\r\n                        if ($(ev.target).closest(\"#ui-datepicker-div\").length === 0 && $(ev.target).closest(\".ui-datepicker-header\").length === 0) {\r\n                            $filter.remove();\r\n                            // If it is a datetime filter the date picker must also be removed from the DOM\r\n                            if (self.filterType === 'DateTime') {\r\n                                $(\"#ui-datepicker-div\").remove();\r\n                            }\r\n                        }\r\n                    });\r\n                }, 100);\r\n\r\n                // Add Operators\r\n                self.addOperators($filter);\r\n                self.configureHandlers($filter);\r\n\r\n                // Add Control\r\n                self[\"build\" + self.filterType + \"Filter\"]($filter);\r\n\r\n                // Locate the widget\r\n                $filter.css(self.getPosition());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Configure handlers for different elements of the component\r\n         */\r\n        configureHandlers: function ($filter) {\r\n            var self = this;\r\n\r\n            $filter.find(\"#biz-column-filter-buttons\").on(\"click\", \".biz-column-filter-button\", function (ev) {\r\n                var $target = $(ev.target),\r\n                    $button = $target.closest(\"button\"),\r\n                    data = self.options.data,\r\n                    buttonType = $button.data(\"button\");\r\n\r\n                if (buttonType == \"apply\") {\r\n                    self.applyFilter(data);\r\n                }\r\n                else if (buttonType == \"clear\") {\r\n                    self.options.data = {};\r\n                    self._trigger(\"change\", \"\", {});\r\n                }\r\n\r\n                $filter.remove();\r\n                // If it is a datetime filter the date picker must also be removed from the DOM\r\n                if (self.filterType === 'DateTime') {\r\n                    $(\"#ui-datepicker-div\").remove();\r\n                }\r\n            });\r\n        },\r\n\r\n        applyFilter: function(data){\r\n            var self = this;\r\n            if(data.key === \"is-null\"){\r\n                data.value = undefined;\r\n            }\r\n            if(data.key === \"is-null\" || (data.key !== \"is-null\" && typeof data.value !== \"undefined\" && data.value !== null ) ){\r\n                self._trigger(\"change\", \"\", data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Adds operators related with the type of control\r\n         */\r\n        addOperators: function ($filter) {\r\n            var self = this;\r\n            var $operators = $filter.find(\"#biz-column-filter-operators\");\r\n            var operatorsData = self.getOperators();\r\n            var initialValue = self.getInitialValue(operatorsData);\r\n\r\n            $operators.uicombo({\r\n                data: { combo: operatorsData },\r\n                initValue: initialValue,\r\n                itemValue: function (item) {\r\n                    return item.id;\r\n                },\r\n                itemText: function (item) {\r\n                    return item.displayName;\r\n                },\r\n                onChange: function (obj) {\r\n                    self.setControlVisibility(obj.ui.data(\"value\"));\r\n                    self.update({ operator: self.getOperator(obj.ui.data(\"value\")) });\r\n                    self.update({ key: obj.ui.data(\"value\") });\r\n\r\n                    if(obj.ui.data(\"value\") === \"is-null\"){\r\n                        self.enableButton(\"filter\");\r\n                    }\r\n                    else{\r\n                        var $inputTextControl = self.$filter.find(\"#biz-column-filter-control input[type=text]\");\r\n                        if($inputTextControl.length > 0 && $inputTextControl.val().length === 0){\r\n                            self.disableButton(\"filter\");\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Returns the initial operator\r\n         */\r\n        getInitialValue: function (operatorsData) {\r\n            var self = this;\r\n            var data = self.options.data;\r\n\r\n            if (data) {\r\n                for (var i = 0, l = operatorsData.length; i < l; i++) {\r\n                    var item = operatorsData[i];\r\n                    if (item.id == data.key) {\r\n                        self.setControlVisibility(item.id);\r\n                        return item;\r\n                    }\r\n                }\r\n            }\r\n\r\n            self.setControlVisibility(operatorsData[0].id);\r\n            self.update({ operator: self.getOperator(operatorsData[0].id) });\r\n            self.update({ key: operatorsData[0].id });\r\n\r\n            return operatorsData[0];\r\n        },\r\n\r\n        /**\r\n         * Returns the properties to locate the filter\r\n         */\r\n        getPosition: function () {\r\n            var self = this;\r\n            var $parent = self.options.parent;\r\n            var offset = $parent.offset();\r\n\r\n            return {\r\n                \"top\": offset.top + $parent.height(),\r\n                \"left\": offset.left\r\n            };\r\n        },\r\n\r\n        /**\r\n         * This method returns the type of filter to build\r\n         */\r\n        getFilterType: function () {\r\n            var self = this;\r\n            var type = self.options.type;\r\n\r\n            if (self.options.entity){\r\n                return \"RelatedEntity\";\r\n            }\r\n\r\n            if (type == 15 || type == 14 || type == 16 || type == 21 || type == 22) {\r\n                return \"Text\";\r\n            }\r\n\r\n            if (type == 23) {\r\n                return \"TextExtended\";\r\n            }\r\n\r\n            if (type == 1 || type == 2 || type == 3 || type == 4) {\r\n                return (self.options.entity)? \"Entity\" : \"Integer\";\r\n            }\r\n\r\n            if (type == 6 || type == 7 || type == 10 || type == 11) {\r\n                return \"Number\";\r\n            }\r\n            if (type == 12 || type == 13) {\r\n                return \"DateTime\";\r\n            }\r\n            if (type == 5 || type == 26) {\r\n                return \"Boolean\";\r\n            }\r\n            if (type == 8) {\r\n                return \"Currency\";\r\n            }\r\n        },\r\n\r\n        validateLimitsNumbersByType: function(type, value){\r\n            var min, max, response = {};\r\n            /**\r\n             * Types Definedin Backend\r\n             * None = 0,BigInt = 1,Int = 2,SmallInt = 3,TinyInt = 4,Boolean = 5,Decimal = 6,Numeric = 7,Money = 8,Float = 10,Real = 11,DateTime = 12,SmallDateTime = 13,\r\n            Char = 14,VarChar = 15,Text = 16,Binary = 17,VarBinary = 18,Image = 19,Guid = 20,NChar = 21,NVarChar = 22,NText = 23,MxMBidirectionalRelationship = 24,\r\n            MxMUnidirectionalRelationship = 25,EntityDisabled = 26,UserAuth = 27,MxMUnidirectionalRelationshipWithoutFilter = 28,OracleNumber = 29,\r\n            Stakeholder = 30,ActivityItems = 31\r\n            */\r\n            switch(type) {\r\n                case 1:\r\n                    min = -9007199254740992;\r\n                    max = min * -1;\r\n                    break;\r\n                case 2:\r\n                case 7:\r\n                case 29:\r\n                    min = -2147483647;\r\n                    max = min * -1;\r\n                    break;\r\n                case 3:\r\n                    min = -32767;\r\n                    max = min * -1;\r\n                    break;\r\n                case 4:\r\n                    min = 0;\r\n                    max = 255;\r\n                    break;\r\n                case 6:\r\n                case 8:\r\n                    min = -922337203685477;\r\n                    max = min * -1;\r\n                    break;\r\n                case 10:\r\n                    min = -999999999999999;\r\n                    max = min * -1;\r\n                    break;\r\n                case 11:\r\n                    min = -9999999;\r\n                    max = min * -1;\r\n                    break;\r\n                default:\r\n                    min = -2147483647;\r\n                    max = min * -1;\r\n                    break;\r\n            }\r\n            if(typeof value !== \"undefined\"){\r\n                response.result = value >= min && value <= max;\r\n                response.maxValue = max;\r\n                response.sign = Math.sign(value);\r\n            }\r\n            response.message = bizagi.localization.getResource(\"workportal-widget-filter-validator-between-values\").\r\n                replace(\"{0}\", min).replace(\"{1}\", max);\r\n            return response;\r\n        },\r\n\r\n        /**\r\n         * Configure the number control\r\n         */\r\n        buildCurrencyFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.append($.tmpl(templates.filterNumber, {\r\n                value: data.value || 0,\r\n                title: self.validateLimitsNumbersByType(self.options.type).message\r\n            }));\r\n\r\n            var $input = $control.find(\"input\");\r\n\r\n            $input.numeric(bizagi.currentUser.decimalSeparator);\r\n\r\n            var numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n            if((typeof (bizagi.currentUser.symbol) != \"undefined\")){\r\n                numericFormat.symbol = bizagi.currentUser.symbol;\r\n            }\r\n            $input.formatCurrency(numericFormat);\r\n\r\n            var collectDataValue = function($input){\r\n                var value = $input.val(),\r\n                    regexString = \"/[\" + numericFormat.symbol + numericFormat.digitGroupSymbol + \"]/g\",\r\n                    regex = eval(regexString);\r\n\r\n                value = value.replace(regex, \"\");\r\n\r\n                var auxInput = $(\"<input>\").attr({\r\n                    type: \"text\",\r\n                    value: value\r\n                });\r\n\r\n                //validate number and set max value if it exceeds limits\r\n                var validationNumber = self.validateLimitsNumbersByType(self.options.type, auxInput.asNumber());\r\n                if(!validationNumber.result && value !== 0){\r\n                    value = validationNumber.maxValue * validationNumber.sign;\r\n                    $input.val(value);\r\n                    $input.formatCurrency(numericFormat);\r\n                }\r\n\r\n                if (value.length === 0) {\r\n                    value = null;\r\n                }\r\n                return value;\r\n            }\r\n\r\n            var updateValue = function () {\r\n                var value = collectDataValue($input);\r\n                self.update({ value: parseFloat(value.toString().replace(\",\", \".\")) });\r\n            };\r\n\r\n            updateValue();//Because the format set automatically value\r\n\r\n            $.proxy(self.configureHandlerInputTypeText($input, $filter, data, updateValue), self);\r\n        },\r\n\r\n        /**\r\n         * Configure the Entity control\r\n         */\r\n        buildEntityFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data;\r\n            var dataService = self.options.dataService;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.startLoading({ delay: 0, overlay: true });\r\n\r\n            var processEntityData = function (entityData) {\r\n\r\n                if (entityData && entityData.length > 0) {\r\n                    var initialValue = getInitialValue(entityData);\r\n                    $control.uicombo({\r\n                        data: { combo: entityData },\r\n                        initValue: initialValue,\r\n                        itemValue: function (item) {\r\n                            return item.id;\r\n                        },\r\n                        itemText: function (item) {\r\n                            return item.displayAttrib;\r\n                        },\r\n                        onChange: function (obj) {\r\n                            var auxValue = obj.ui.data(\"value\");\r\n                            if($.isNumeric(entityData[0].id)){\r\n                                auxValue = parseInt(auxValue);\r\n                            }\r\n                            self.update({ value: auxValue });\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    $control.text(\"No data\");\r\n                    self.disableButton(\"filter\");\r\n                }\r\n            };\r\n\r\n            var getInitialValue = function (entityData) {\r\n                if (data && data.value) {\r\n                    for (var i = 0, l = entityData.length; i < l; i++) {\r\n                        var item = entityData[i];\r\n                        if (item.id == data.value) {\r\n                            self.update({ value: item.id });\r\n                            return item;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                var auxValue = entityData[0].id;\r\n                if($.isNumeric(entityData[0].id)){\r\n                    auxValue = parseInt(auxValue);\r\n                }\r\n                self.update({ value: auxValue });\r\n                return entityData[0];\r\n            };\r\n\r\n            $.when(dataService.getAdminEntityData({ idEntity: self.options.entity, idAttribute: self.options.attribute }))\r\n                .done(processEntityData)\r\n                .always(function () {\r\n                    $control.endLoading();\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Configure the Related Entity\r\n         */\r\n        buildRelatedEntityFilter: function ($filter) {\r\n            //This method is necessary because is necessary a new method for each new type and specific filters type\r\n            var self = this;\r\n            self.buildEntityFilter($filter);\r\n        },\r\n\r\n        /**\r\n         * Configure the datetime control\r\n         */\r\n        buildDateTimeFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n            var dateFormat = bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI().toLowerCase();\r\n            var dateFormatDisplay = bizagi.localization.getResource(\"dateFormat\").replace(/\\b(y{2})\\b/g, \"yyyy\"); // Replace yy for yyyy so the date picker can show the selected date\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            var displayDate = bizagi.util.dateFormatter.formatDate(new Date(data.value), dateFormatDisplay);\r\n            displayDate = displayDate ? displayDate : undefined;\r\n            $control.append($.tmpl(templates.filterDate, { value: displayDate }));\r\n\r\n            // Parse date\r\n            var date = null;\r\n\r\n            if (data.value) {\r\n                try {\r\n                    date = new Date(data.value);\r\n                    self.enableButton(\"filter\");\r\n                }\r\n                catch (e) {\r\n                    date = null;\r\n                    self.disableButton(\"filter\");\r\n                }\r\n            }\r\n            else{\r\n                self.disableButton(\"filter\");\r\n            }\r\n\r\n            var $dateControl = $control.find(\"input\");\r\n            $dateControl.datepicker({\r\n                //defaultDate: date,\r\n                dateFormat: dateFormat,\r\n                changeMonth: true,\r\n                changeYear: true,\r\n                numberOfMonths: 1,\r\n                yearRange: \"-100:+0\",\r\n                onSelect: function (dateText, inst) {\r\n                    if (dateText) {\r\n                        var date = new Date((inst.currentMonth + 1) + \"/\" + (inst.currentDay) + \"/\" + (inst.currentYear) + \" 00:00\");\r\n                        var value = bizagi.util.dateFormatter.formatDate(date, \"MM/dd/yyyy HH:mm\");\r\n                        self.update({ value: value });\r\n                        self.enableButton(\"filter\");\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Configure the datetime control\r\n         */\r\n        buildBooleanFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.append($.tmpl(templates.filterBoolean, { value: data.value }));\r\n\r\n            $control.optiongroup();\r\n\r\n            if (data && data.value !== undefined) {\r\n                $control.optiongroup(\"setValue\", data.value.toString());\r\n            }\r\n\r\n            // Bind change event\r\n            $control.on(\"optiongroupchange\", function (evt, ui) {\r\n                var value = bizagi.util.parseBoolean(ui.value);\r\n                self.update({ value: value });\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         * Configure the number control\r\n         */\r\n        buildIntegerFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.append($.tmpl(templates.filterNumber, {\r\n                value: data.value || 0,\r\n                title: self.validateLimitsNumbersByType(self.options.type).message\r\n            }));\r\n\r\n            var $input = $control.find(\"input\");\r\n            $input.numeric();\r\n            var numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n\r\n            $input.formatCurrency($.extend(numericFormat, { symbol: \"\", decimalDigits: 0, roundToDecimalPlace: -1 }));\r\n\r\n            var updateValue = function () {\r\n                var value = $input.val(),\r\n                    regexString = \"/[\" + numericFormat.digitGroupSymbol + \"]/g\",\r\n                    regex = eval(regexString);\r\n\r\n                value = value.replace(regex, \"\");\r\n\r\n                var auxInput = $(\"<input>\").attr({\r\n                    type: \"text\",\r\n                    value: value\r\n                });\r\n\r\n                //validate number and set max value if it exceeds limits\r\n                var validationNumber = self.validateLimitsNumbersByType(self.options.type, auxInput.asNumber());\r\n                if(!validationNumber.result && value !== 0){\r\n                    value = validationNumber.maxValue * validationNumber.sign;\r\n                    $input.val(value);\r\n                }\r\n\r\n                if (value.length === 0) {\r\n                    value = null;\r\n                }\r\n                self.update({ value: parseInt(value, 10) });\r\n            };\r\n\r\n            $.proxy(self.configureHandlerInputTypeText($input, $filter, data, updateValue), self);\r\n        },\r\n\r\n\r\n        /**\r\n         * Configure the number control\r\n         */\r\n        buildNumberFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.append($.tmpl(templates.filterNumber, {\r\n                value: data.value || 0,\r\n                title: self.validateLimitsNumbersByType(self.options.type).message\r\n            }));\r\n\r\n            var $input = $control.find(\"input\");\r\n            $input.numeric(bizagi.currentUser.decimalSeparator);\r\n\r\n            var numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n\r\n            $input.formatCurrency($.extend(numericFormat, { symbol: \"\" }));\r\n\r\n            var updateValue = function () {\r\n                var value = $input.val(),\r\n                    regexString = \"/[\" + numericFormat.digitGroupSymbol + \"]/g\",\r\n                    regex = eval(regexString);\r\n\r\n                value = value.replace(regex, \"\");\r\n\r\n                var auxInput = $(\"<input>\").attr({\r\n                    type: \"text\",\r\n                    value: value.replace(\",\", \".\")\r\n                });\r\n\r\n                //validate number and set max value if it exceeds limits\r\n                var validationNumber = self.validateLimitsNumbersByType(self.options.type, auxInput.asNumber());\r\n                if(!validationNumber.result && value !== 0){\r\n                    value = validationNumber.maxValue * validationNumber.sign;\r\n                    $input.val(value);\r\n                }\r\n\r\n                if (value.length === 0) {\r\n                    value = null;\r\n                }\r\n                self.update({ value: parseFloat(value.toString().replace(\",\", \".\")) });\r\n            };\r\n\r\n            $.proxy(self.configureHandlerInputTypeText($input, $filter, data, updateValue), self);\r\n        },\r\n\r\n        /**\r\n         * Configure the text control\r\n         */\r\n        buildTextFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.append($.tmpl(templates.filterString, { value: data.value }));\r\n\r\n            var $input = $control.find(\"input\");\r\n\r\n            var updateValue = function () {\r\n                var value = $input.val();\r\n                if (value.length === 0) {\r\n                    value = null;\r\n                }\r\n                self.update({ value: value });\r\n            };\r\n\r\n            self.configureHandlerInputTypeText($input, $filter, data, updateValue);\r\n        },\r\n\r\n        /**\r\n         * Configure the text control extended\r\n         */\r\n        buildTextExtendedFilter: function ($filter) {\r\n            //This method is necessary because is necessary a new method for each new type\r\n            var self = this;\r\n            self.buildTextFilter($filter);\r\n        },\r\n\r\n        /**\r\n         *   trigger a callback/event\r\n         */\r\n        update: function (newValue) {\r\n            var self = this;\r\n            var data = self.options.data;\r\n\r\n            $.extend(data, newValue);\r\n        },\r\n\r\n        /**\r\n         * returns an array of operators availables for the current type\r\n         */\r\n        getOperators: function () {\r\n            var self = this;\r\n            var operators = self.options.operators;\r\n            var filterType = self.filterType;\r\n            var result = [];\r\n\r\n            for (var oper in operators) {\r\n                var operator = operators[oper];\r\n                if ($.inArray(filterType, operator.appliesTo) >= 0) {\r\n                    result.push({\r\n                        displayName: bizagi.localization.getResource(operator.label),\r\n                        id: oper\r\n                    });\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Returns current operator\r\n         */\r\n        getOperator: function (item) {\r\n            var self = this;\r\n            var operators = self.options.operators;\r\n\r\n            return operators[item].operator;\r\n        },\r\n\r\n        /**\r\n         * Configure handlers input type text\r\n         * @param $input\r\n         */\r\n        configureHandlerInputTypeText: function($input, $filter, data, updateValue){\r\n            var self = this;\r\n            $input.focus();\r\n\r\n            $input.keyup(function (ev) {\r\n                if($input.val().trim().length > 0){\r\n                    self.enableButton(\"filter\");\r\n                    if (ev.which == 13) {\r\n                        updateValue();\r\n                        self._trigger(\"change\", \"\", data);\r\n                        $filter.remove();\r\n                    }\r\n                }\r\n                else{\r\n                    self.disableButton(\"filter\");\r\n                }\r\n            });\r\n\r\n            $input.change(function () {\r\n                if($input.val().length > 0) {\r\n                    updateValue();\r\n                }\r\n            });\r\n\r\n            if($input.val().trim().length > 0){\r\n                self.enableButton(\"filter\");\r\n            }\r\n            else{\r\n                self.disableButton(\"filter\");\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Hide or show the control, according to type of operator\r\n         */\r\n        setControlVisibility: function (operator) {\r\n            var self = this;\r\n            var operators = self.options.operators;\r\n            var $control = self.$filter.find(\"#biz-column-filter-control\");\r\n\r\n            if (operators[operator]) {\r\n                var isUnary = (operators[operator].isUnary === undefined) ? false : operators[operator].isUnary;\r\n                (isUnary) ? $control.hide() : $control.show();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Disable button\r\n         */\r\n        disableButton: function (which) {\r\n            var self = this;\r\n            var buttons = self.$filter.find(\"#biz-column-filter-buttons  > .ui-bizagi-filter-buttons > button\");\r\n\r\n            if (which == \"filter\") {\r\n                $(buttons[0]).attr(\"disabled\", \"disabled\").addClass(\"ui-state-disabled\");\r\n\r\n            }\r\n            else if (which == \"clear\") {\r\n                $(buttons[1]).attr(\"disabled\", \"disabled\").addClass(\"ui-state-disabled\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Enable button\r\n         */\r\n        enableButton: function (which) {\r\n            var self = this;\r\n            var buttons = self.$filter.find(\"#biz-column-filter-buttons  > .ui-bizagi-filter-buttons > button\");\r\n\r\n            if (which == \"filter\") {\r\n                $(buttons[0]).prop(\"disabled\", false).removeClass(\"ui-state-disabled\");\r\n\r\n            }\r\n            else if (which == \"clear\") {\r\n                $(buttons[1]).prop(\"disabled\", false).removeClass(\"ui-state-disabled\");\r\n            }\r\n        }\r\n    });\r\n})(jQuery);","(function ($) {\r\n    var nextId = 0;\r\n    var _elements = [];\r\n    var _iconTemplate = '<div class=\"bz-overflow-menu-icon\">' +\r\n        '   <div class=\"bz-overflow-menu-icon bz-btn-icn bz-btn-icn--24\">' +\r\n        '       <svg class=\"bz-icn\" width=\"16px\" height=\"16px\">' +\r\n        '           <use xlink:href=\"#{{icon}}\"></use>' +\r\n        '       </svg>' +\r\n        '   </div>' +\r\n        '   <span class=\"bz-overflow-menu__item-text\">{{name}}</span>' +\r\n        '</div>';\r\n\r\n    $.fn.overflowMenu = function (options) {\r\n\r\n        return this.each(function () {\r\n            var self = this;\r\n\r\n            self.id = nextId++;\r\n            options = options || {};\r\n\r\n            var items = options.items || [];\r\n            var target = null;\r\n\r\n            self.menu = document.createElement('ul');\r\n            self.menu.setAttribute('style', \"position: fixed;\");\r\n\r\n            self.menu.className = 'bz-overflow-menu';\r\n            self.menu.setAttribute('data-overflowmenu', self.id);\r\n\r\n            // Create <li>'s for each menu item\r\n            items.forEach(function (item, index) {\r\n                var li = document.createElement('li');\r\n\r\n                if (!('name' in item)) {\r\n                    // Insert a divider\r\n                    li.className = 'bz-overflow-menu__divider';\r\n                } else {\r\n                    li.className = 'bz-overflow-menu__item';\r\n\r\n                    if (!item.icon) {\r\n                        li.textContent = item.name;\r\n                    } else {\r\n                        li.innerHTML = _iconTemplate\r\n                            .replace(/{{icon}}/g, item.icon)\r\n                            .replace(/{{name}}/g, item.name);\r\n                    }\r\n\r\n                    li.setAttribute('data-overflowmenuitem', index);\r\n                    li.setAttribute('tabindex', 0);\r\n                    li.addEventListener('click', select.bind(this, li));\r\n                }\r\n\r\n                self.menu.appendChild(li);\r\n            });\r\n\r\n            function show(evt) {\r\n                target = evt.delegateTarget;\r\n\r\n                var x = evt.originalEvent.clientX;\r\n                var y = evt.originalEvent.clientY;\r\n\r\n                // Add root element to the <body>\r\n                setTimeout(function () {\r\n                    document.body.appendChild(self.menu);\r\n\r\n                    if (client.W() - x < self.menu.offsetWidth) {\r\n                        var xx = x - self.menu.offsetWidth;\r\n                    } else {\r\n                        var xx = x;\r\n                    }\r\n                    if (client.H() - y < self.menu.offsetHeight) {\r\n                        var yy = y - self.menu.offsetHeight;\r\n                    } else {\r\n                        var yy = y;\r\n                    }\r\n                    self.menu.style.left = xx + 'px';\r\n                    self.menu.style.top = yy + 'px';\r\n\r\n                    $(self.menu).show();\r\n                    // Give overflow self.menu focus\r\n\r\n                    $(self.menu).focus();\r\n                    _elements.push(self.menu);\r\n\r\n                    // Add binding to global scroll\r\n                    $(\"#content-wrapper\", document).on('scroll.overflow', function (e) {\r\n                        removeMenu();\r\n\r\n                        $(this, document).off('scroll.overflow');\r\n\r\n                    });\r\n\r\n                }, 100);\r\n            }\r\n\r\n            // Hides overflow menu\r\n            function hide() {\r\n                $(self.menu).remove();\r\n            }\r\n\r\n            // Selects the given item and calls its handler\r\n            function select(item, e) {\r\n                var itemId = item.getAttribute('data-overflowmenuitem');\r\n                if (items[itemId]) {\r\n                    // Call item handler with target element as parameter\r\n                    items[itemId].fn(target);\r\n                }\r\n                hide();\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            }\r\n\r\n            // Listen click event to show menu\r\n            $(self).bind('click', function (e) {\r\n                var zIndex = getZIndex($(e.currentTarget));\r\n                $(self.menu).css(\"z-index\", zIndex);\r\n\r\n                show(e);\r\n            });\r\n        });\r\n\r\n    };\r\n\r\n    var client = {\r\n        W: function () {\r\n            return document.documentElement.clientWidth\r\n        },\r\n        H: function () {\r\n            return document.documentElement.clientHeight\r\n        }\r\n    };\r\n\r\n    var removeMenu = function () {\r\n\r\n        if (_elements && _elements.length > 0) {\r\n            _elements.forEach(function (el) {\r\n                $(el).remove();\r\n            });\r\n        }\r\n\r\n        _elements = [];\r\n    };\r\n\r\n    // Calculate the highest (top-most) zIndex in the document (minimum value returned: 2).\r\n    var getZIndex = function ($context) {\r\n        if ($context.get(0) === $('body').get(0)) return 2;\r\n\r\n        var parent = $($context).parent();\r\n        var zIndex = parseFloat(parent.css('z-index'), -1);\r\n\r\n        if (zIndex > -1) return zIndex;\r\n\r\n        return getZIndex(parent);\r\n    };\r\n\r\n    // Returns the highest (top-most) zIndex in the document (minimum value returned: 2).\r\n    var topZIndex = function () {\r\n        var $group = $(\"body > *\").has(\"div\");\r\n        var mapper = function (v) {\r\n            if ($(v).css('position') === 'absolute')\r\n                return parseFloat($(v).css(\"z-index\")) || null;\r\n        };\r\n\r\n        return Math.max(2, Math.max.apply(null, $.map($group, mapper)));\r\n    };\r\n\r\n    $(document).on('click.overflow', function (e) {\r\n        removeMenu();\r\n    });\r\n\r\n})(jQuery);","/* NicEdit - Micro Inline WYSIWYG\r\n* Copyright 2007-2008 Brian Kirchoff\r\n*\r\n* NicEdit is distributed under the terms of the MIT license\r\n* For more information visit http://nicedit.com/\r\n* Do not remove this copyright message\r\n*/\r\nvar bkExtend = function () {\r\n\tvar args = arguments;\r\n\tif (args.length == 1) args = [this, args[0]];\r\n\tfor (var prop in args[1]) args[0][prop] = args[1][prop];\r\n\treturn args[0];\r\n};\r\nfunction bkClass() { }\r\nbkClass.prototype.construct = function () { };\r\nbkClass.extend = function (def) {\r\n\tvar classDef = function () {\r\n\t\tif (arguments[0] !== bkClass) {\r\n\t\t\treturn this.construct.apply(this, arguments);\r\n\t\t}\r\n\t};\r\n\tvar proto = new this(bkClass);\r\n\tbkExtend(proto, def);\r\n\tclassDef.prototype = proto;\r\n\tclassDef.extend = this.extend;\r\n\treturn classDef;\r\n};\r\n\r\nvar bkElement = bkClass.extend({\r\n\tconstruct: function (elm, d) {\r\n\t\tif (typeof (elm) == \"string\") {\r\n\t\t\telm = (d || document).createElement(elm);\r\n\t\t}\r\n\t\telm = $BK(elm);\r\n\t\treturn elm;\r\n\t},\r\n\r\n\tappendTo: function (elm) {\r\n\t\telm.appendChild(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tappendBefore: function (elm) {\r\n\t\telm.parentNode.insertBefore(this, elm);\r\n\t\treturn this;\r\n\t},\r\n\r\n\taddEvent: function (type, fn) {\r\n\t\tbkLib.addEvent(this, type, fn);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetContent: function (c) {\r\n\t\tthis.innerHTML = c;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tpos: function () {\r\n\t\tvar curleft = curtop = 0;\r\n\t\tvar o = obj = this;\r\n\t\tif (obj.offsetParent) {\r\n\t\t\tdo {\r\n\t\t\t\tcurleft += obj.offsetLeft;\r\n\t\t\t\tcurtop += obj.offsetTop;\r\n\t\t\t} while (obj = obj.offsetParent);\r\n\t\t}\r\n\t\tvar b = (!window.opera) ? parseInt(this.getStyle('border-width') || this.style.border) || 0 : 0;\r\n\t\treturn [curleft + b, curtop + b + this.offsetHeight];\r\n\t},\r\n\r\n\tnoSelect: function () {\r\n\t\tbkLib.noSelect(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tparentTag: function (t) {\r\n\t\tvar elm = this;\r\n\t\tdo {\r\n\t\t\tif (elm && elm.nodeName && elm.nodeName.toUpperCase() == t) {\r\n\t\t\t\treturn elm;\r\n\t\t\t}\r\n\t\t\telm = elm.parentNode;\r\n\t\t} while (elm);\r\n\t\treturn false;\r\n\t},\r\n\r\n\thasClass: function (cls) {\r\n\t\treturn this.className.match(new RegExp('(\\\\s|^)nicEdit-' + cls + '(\\\\s|$)'));\r\n\t},\r\n\r\n\taddClass: function (cls) {\r\n\t\tif (!this.hasClass(cls)) {\r\n\t\t\tthis.className += \" nicEdit-\" + cls\r\n\t\t};\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveClass: function (cls) {\r\n\t\tif (this.hasClass(cls)) {\r\n\t\t\tthis.className = this.className.replace(new RegExp('(\\\\s|^)nicEdit-' + cls + '(\\\\s|$)'), ' ');\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetStyle: function (st) {\r\n\t\tvar elmStyle = this.style;\r\n\t\tfor (var itm in st) {\r\n\t\t\tswitch (itm) {\r\n\t\t\t\tcase 'float':\r\n\t\t\t\t\telmStyle['cssFloat'] = elmStyle['styleFloat'] = st[itm];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'opacity':\r\n\t\t\t\t\telmStyle.opacity = st[itm];\r\n\t\t\t\t\telmStyle.filter = \"alpha(opacity=\" + Math.round(st[itm] * 100) + \")\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'className':\r\n\t\t\t\t\tthis.className = st[itm];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t//if(document.compatMode || itm != \"cursor\") { // Nasty Workaround for IE 5.5\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\telmStyle[itm] = st[itm];\r\n\t\t\t\t\t} catch (e) { }\r\n\t\t\t//}\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetStyle: function (cssRule, d) {\r\n\t\tvar doc = (!d) ? document.defaultView : d;\r\n\t\tif (this.nodeType == 1)\r\n\t\t\treturn (doc && doc.getComputedStyle) ? doc.getComputedStyle(this, null).getPropertyValue(cssRule) : this.currentStyle[bkLib.camelize(cssRule)];\r\n\t},\r\n\r\n\tremove: function () {\r\n\t\tthis.parentNode.removeChild(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetAttributes: function (at) {\r\n\t\tfor (var itm in at) {\r\n\t\t\tthis[itm] = at[itm];\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\nvar bkLib = {\r\n\tisMSIE: (navigator.appVersion.indexOf(\"MSIE\") != -1),\r\n\r\n\taddEvent: function (obj, type, fn) {\r\n\t\t(obj.addEventListener) ? obj.addEventListener(type, fn, false) : obj.attachEvent(\"on\" + type, fn);\r\n\t},\r\n\r\n\ttoArray: function (iterable) {\r\n\t\tvar length = iterable.length, results = new Array(length);\r\n\t\twhile (length--) {\r\n\t\t\tresults[length] = iterable[length]\r\n\t\t};\r\n\t\treturn results;\r\n\t},\r\n\r\n\tnoSelect: function (element) {\r\n\t\tif (element.setAttribute && element.nodeName.toLowerCase() != 'input' && element.nodeName.toLowerCase() != 'textarea') {\r\n\t\t\telement.setAttribute('unselectable', 'on');\r\n\t\t}\r\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\r\n\t\t\tbkLib.noSelect(element.childNodes[i]);\r\n\t\t}\r\n\t},\r\n\tcamelize: function (s) {\r\n\t\treturn s.replace(/\\-(.)/g, function (m, l) {\r\n\t\t\treturn l.toUpperCase()\r\n\t\t});\r\n\t},\r\n\tinArray: function (arr, item) {\r\n\t\treturn (bkLib.search(arr, item) != null);\r\n\t},\r\n\tsearch: function (arr, itm) {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (arr[i] == itm)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tcancelEvent: function (e) {\r\n\t\te = e || window.event;\r\n\t\tif (e.preventDefault && e.stopPropagation) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tdomLoad: [],\r\n\tdomLoaded: function () {\r\n\t\tif (arguments.callee.done) return;\r\n\t\targuments.callee.done = true;\r\n\t\tfor (i = 0; i < bkLib.domLoad.length; i++) bkLib.domLoad[i]();\r\n\t},\r\n\tonDomLoaded: function (fireThis) {\r\n\t\tthis.domLoad.push(fireThis);\r\n\t\tif (document.addEventListener) {\r\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", bkLib.domLoaded, null);\r\n\t\t} else if (bkLib.isMSIE) {\r\n\t\t\tdocument.write(\"<style>.nicEdit-main p { margin: 0; }</style><scr\" + \"ipt id=__ie_onload defer \" + ((location.protocol == \"https:\") ? \"src='javascript:void(0)'\" : \"src=//0\") + \"><\\/scr\" + \"ipt>\");\r\n\t\t\t$BK(\"__ie_onload\").onreadystatechange = function () {\r\n\t\t\t\tif (this.readyState == \"complete\") {\r\n\t\t\t\t\tbkLib.domLoaded();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\twindow.onload = bkLib.domLoaded;\r\n\t}\r\n};\r\n\r\nfunction $BK(elm) {\r\n\tif (typeof (elm) == \"string\") {\r\n\t\telm = document.getElementById(elm);\r\n\t}\r\n\treturn (elm && !elm.appendTo) ? bkExtend(elm, bkElement.prototype) : elm;\r\n}\r\n\r\nvar bkEvent = {\r\n\taddEvent: function (evType, evFunc) {\r\n\t\tif (evFunc) {\r\n\t\t\tthis.eventList = this.eventList || {};\r\n\t\t\tthis.eventList[evType] = this.eventList[evType] || [];\r\n\t\t\tthis.eventList[evType].push(evFunc);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\tfireEvent: function () {\r\n\t\tvar args = bkLib.toArray(arguments), evType = args.shift();\r\n\t\tif (this.eventList && this.eventList[evType]) {\r\n\t\t\tfor (var i = 0; i < this.eventList[evType].length; i++) {\r\n\t\t\t\tthis.eventList[evType][i].apply(this, args);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction __(s) {\r\n\treturn s;\r\n}\r\n\r\nFunction.prototype.closure = function () {\r\n\tvar __method = this, args = bkLib.toArray(arguments), obj = args.shift();\r\n\treturn function () {\r\n\t\tif (typeof (bkLib) != 'undefined') {\r\n\t\t\treturn __method.apply(obj, args.concat(bkLib.toArray(arguments)));\r\n\t\t}\r\n\t};\r\n}\r\n\r\nFunction.prototype.closureListener = function () {\r\n\tvar __method = this, args = bkLib.toArray(arguments), object = args.shift();\r\n\treturn function (e) {\r\n\t\te = e || window.event;\r\n\t\tif (e.target) {\r\n\t\t\tvar target = e.target;\r\n\t\t} else {\r\n\t\t\tvar target = e.srcElement\r\n\t\t};\r\n\t\treturn __method.apply(object, [e, target].concat(args));\r\n\t};\r\n}\r\n\r\n\r\n/* START CONFIG */\r\n\r\nvar nicEditorConfig = bkClass.extend({\r\n\tbuttons: {\r\n\t\t'bold': {\r\n\t\t\tname: __('Click to Bold'), \r\n\t\t\tcommand: 'Bold', \r\n\t\t\ttags: ['B', 'STRONG'], \r\n\t\t\tcss: {\r\n\t\t\t\t'font-weight': 'bold'\r\n\t\t\t}, \r\n\t\t\tkey: 'b'\r\n\t\t},\r\n\t\t'italic': {\r\n\t\t\tname: __('Click to Italic'), \r\n\t\t\tcommand: 'Italic', \r\n\t\t\ttags: ['EM', 'I'], \r\n\t\t\tcss: {\r\n\t\t\t\t'font-style': 'italic'\r\n\t\t\t}, \r\n\t\t\tkey: 'i'\r\n\t\t},\r\n\t\t'underline': {\r\n\t\t\tname: __('Click to Underline'), \r\n\t\t\tcommand: 'Underline', \r\n\t\t\ttags: ['U'], \r\n\t\t\tcss: {\r\n\t\t\t\t'text-decoration': 'underline'\r\n\t\t\t}, \r\n\t\t\tkey: 'u'\r\n\t\t},\r\n\t\t'left': {\r\n\t\t\tname: __('Left Align'), \r\n\t\t\tcommand: 'justifyleft', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'center': {\r\n\t\t\tname: __('Center Align'), \r\n\t\t\tcommand: 'justifycenter', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'right': {\r\n\t\t\tname: __('Right Align'), \r\n\t\t\tcommand: 'justifyright', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'justify': {\r\n\t\t\tname: __('Justify Align'), \r\n\t\t\tcommand: 'justifyfull', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'ol': {\r\n\t\t\tname: __('Insert Ordered List'), \r\n\t\t\tcommand: 'insertorderedlist', \r\n\t\t\ttags: ['OL']\r\n\t\t},\r\n\t\t'ul': {\r\n\t\t\tname: __('Insert Unordered List'), \r\n\t\t\tcommand: 'insertunorderedlist', \r\n\t\t\ttags: ['UL']\r\n\t\t},\r\n\t\t'subscript': {\r\n\t\t\tname: __('Click to Subscript'), \r\n\t\t\tcommand: 'subscript', \r\n\t\t\ttags: ['SUB']\r\n\t\t},\r\n\t\t'superscript': {\r\n\t\t\tname: __('Click to Superscript'), \r\n\t\t\tcommand: 'superscript', \r\n\t\t\ttags: ['SUP']\r\n\t\t},\r\n\t\t'strikethrough': {\r\n\t\t\tname: __('Click to Strike Through'), \r\n\t\t\tcommand: 'strikeThrough', \r\n\t\t\tcss: {\r\n\t\t\t\t'text-decoration': 'line-through'\r\n\t\t\t}\r\n\t\t},\r\n\t\t'removeformat': {\r\n\t\t\tname: __('Remove Formatting'), \r\n\t\t\tcommand: 'removeformat', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'indent': {\r\n\t\t\tname: __('Indent Text'), \r\n\t\t\tcommand: 'indent', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'outdent': {\r\n\t\t\tname: __('Remove Indent'), \r\n\t\t\tcommand: 'outdent', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'hr': {\r\n\t\t\tname: __('Horizontal Rule'), \r\n\t\t\tcommand: 'insertHorizontalRule', \r\n\t\t\tnoActive: true\r\n\t\t}\r\n\t},\r\n\ticonsPath: '../nicEditorIcons.gif',\r\n\tbuttonList: ['save', 'print', 'bold', 'italic', 'underline', 'left', 'center', 'right', 'justify', 'ol', 'ul', 'fontSize', 'fontFamily', 'fontFormat', 'indent', 'outdent', 'image', 'upload', 'link', 'unlink', 'forecolor', 'bgcolor', 'smile'],\r\n\ticonList: {\r\n\t\t\"bgcolor\": 1, \r\n\t\t\"forecolor\": 2, \r\n\t\t\"bold\": 3, \r\n\t\t\"center\": 4, \r\n\t\t\"hr\": 5, \r\n\t\t\"indent\": 6, \r\n\t\t\"italic\": 7, \r\n\t\t\"justify\": 8, \r\n\t\t\"left\": 9, \r\n\t\t\"ol\": 10, \r\n\t\t\"outdent\": 11, \r\n\t\t\"removeformat\": 12, \r\n\t\t\"right\": 13, \r\n\t\t\"save\": 24, \r\n\t\t\"strikethrough\": 15, \r\n\t\t\"subscript\": 16, \r\n\t\t\"superscript\": 17, \r\n\t\t\"ul\": 18, \r\n\t\t\"underline\": 19, \r\n\t\t\"image\": 20, \r\n\t\t\"link\": 21, \r\n\t\t\"unlink\": 22, \r\n\t\t\"close\": 23, \r\n\t\t\"arrow\": 25, \r\n\t\t\"smile\": 26, \r\n\t\t\"print\": 27\r\n\t}\r\n\r\n});\r\n/* END CONFIG */\r\n\r\n\r\nvar nicEditors = {\r\n\tnicPlugins: [],\r\n\teditors: [],\r\n\r\n\tregisterPlugin: function (plugin, options) {\r\n\t\tthis.nicPlugins.push({\r\n\t\t\tp: plugin, \r\n\t\t\to: options\r\n\t\t});\r\n\t},\r\n\r\n\tallTextAreas: function (nicOptions) {\r\n\t\tvar textareas = document.getElementsByTagName(\"textarea\");\r\n\t\tfor (var i = 0; i < textareas.length; i++) {\r\n\t\t\tnicEditors.editors.push(new nicEditor(nicOptions).panelInstance(textareas[i]));\r\n\t\t}\r\n\t\treturn nicEditors.editors;\r\n\t},\r\n\r\n\tfindEditor: function(e){\r\n\t\tvar editors = nicEditors.editors;\r\n\t\tfor (var i = 0; i < editors.length; i++) {\r\n\t\t\tif (editors[i].instanceById(e)) {\r\n\t\t\t\treturn editors[i].instanceById(e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetFirstEditor: function(){\r\n\t\tvar editors = nicEditors.editors;\r\n\t\tif(editors.length >=1){\r\n\t\t\treturn editors[0].instanceById[0];\t\t\t\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nvar nicEditor = bkClass.extend({\r\n\tconstruct: function (o) {\r\n\t\tthis.options = new nicEditorConfig();\r\n\t\tbkExtend(this.options, o);\r\n\t\tthis.nicInstances = new Array();\r\n\t\tthis.loadedPlugins = new Array();\r\n\r\n\t\tvar plugins = nicEditors.nicPlugins;\r\n\t\tfor (var i = 0; i < plugins.length; i++) {\r\n\t\t\t/* DEPL: EDITED TO AVOID PROBLEM WITH CRUNCHING*/\r\n\t\t\tthis.loadedPlugins.push(new (plugins[i]).p(this, plugins[i].o));\r\n\t\t}\r\n\t\tnicEditors.editors.push(this);\r\n\t\tbkLib.addEvent(document.body, 'mousedown', this.selectCheck.closureListener(this));\r\n\t},\r\n\r\n\tpanelInstance: function (e, o) {\r\n\t\te = this.checkReplace($BK(e));\r\n\t\tvar panelElm = new bkElement('DIV').setStyle({\r\n\t\t\twidth: (parseInt(e.getStyle('width')) || e.clientWidth) + 'px'\r\n\t\t}).appendBefore(e);\r\n\t\tthis.setPanel(panelElm);\r\n\t\treturn this.addInstance(e, o);\r\n\t},\r\n\r\n\tcheckReplace: function (e) {\r\n\t\tvar r = nicEditors.findEditor(e);\r\n\t\tif (r) {\r\n\t\t\tr.removeInstance(e);\r\n\t\t\tr.removePanel();\r\n\t\t}\r\n\t\treturn e;\r\n\t},\r\n\r\n\taddInstance: function (e, o) {\r\n\t\te = this.checkReplace($BK(e));\r\n\t\tif (e.contentEditable || !!window.opera) {\r\n\t\t\tvar newInstance = new nicEditorInstance(e, o, this);\r\n\t\t} else {\r\n\t\t\tvar newInstance = new nicEditorIFrameInstance(e, o, this);\r\n\t\t}\r\n\t\tthis.nicInstances.push(newInstance);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveInstance: function (e) {\r\n\t\te = $BK(e);\r\n\t\tvar instances = this.nicInstances;\r\n\t\tfor (var i = 0; i < instances.length; i++) {\r\n\t\t\tif (instances[i].e == e) {\r\n\t\t\t\tinstances[i].remove();\r\n\t\t\t\tthis.nicInstances.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tremovePanel: function (e) {\r\n\t\tif (this.nicPanel) {\r\n\t\t\tthis.nicPanel.remove();\r\n\t\t\tthis.nicPanel = null;\r\n\t\t}\r\n\t},\r\n\r\n\tinstanceById: function (e) {\r\n\t\te = $BK(e);\r\n\t\tvar instances = this.nicInstances;\r\n\t\tfor (var i = 0; i < instances.length; i++) {\r\n\t\t\tif (instances[i].e == e) {\r\n\t\t\t\treturn instances[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetPanel: function (e) {\r\n\t\tthis.nicPanel = new nicEditorPanel($BK(e), this.options, this);\r\n\t\tthis.fireEvent('panel', this.nicPanel);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tnicCommand: function (cmd, args) {\r\n\t\tif (this.selectedInstance) {\r\n\t\t\tthis.selectedInstance.nicCommand(cmd, args);\r\n\t\t}\r\n\t},\r\n\r\n\tgetIcon: function (iconName, options) {\r\n\t\tvar icon = this.options.iconList[iconName];\r\n\t\tvar file = (options.iconFiles) ? options.iconFiles[iconName] : '';\r\n\t\treturn {\r\n\t\t\tbackgroundImage: \"url('\" + ((icon) ? this.options.iconsPath : file) + \"')\", \r\n\t\t\tbackgroundPosition: ((icon) ? ((icon - 1) * -18) : 0) + 'px 0px'\r\n\t\t};\r\n\t},\r\n\r\n\tselectCheck: function (e, t) {\r\n\t\tvar found = false;\r\n\t\tdo {\r\n\t\t\tif (t.className && t.className.indexOf('nicEdit') != -1) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} while (t = t.parentNode);\r\n\t\tthis.fireEvent('blur', this.selectedInstance, t);\r\n\t\tthis.lastSelectedInstance = this.selectedInstance;\r\n\t\tthis.selectedInstance = null;\r\n\t\treturn false;\r\n\t}\r\n\r\n});\r\nnicEditor = nicEditor.extend(bkEvent);\r\n\r\n\r\nvar nicEditorInstance = bkClass.extend({\r\n\tisSelected: false,\r\n\r\n\tconstruct: function (e, options, nicEditor) {\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.elm = this.e = e;\r\n\t\tthis.options = options || {};\r\n\r\n\t\tnewX = parseInt(e.getStyle('width')) || e.clientWidth;\r\n\t\tnewY = parseInt(e.getStyle('height')) || e.clientHeight;\r\n\t\tthis.initialHeight = newY - 8;\r\n\r\n\t\tvar isTextarea = (e.nodeName.toLowerCase() == \"textarea\");\r\n\t\tif (isTextarea || this.options.hasPanel) {\r\n\t\t\tvar ie7s = (bkLib.isMSIE && !((typeof document.body.style.maxHeight != \"undefined\") && document.compatMode == \"CSS1Compat\"))\r\n\t\t\tvar s = {\r\n\t\t\t\twidth: newX + 'px', \r\n\t\t\t\tborder: '1px solid #ccc', \r\n\t\t\t\tborderTop: 0, \r\n\t\t\t\toverflowY: 'auto', \r\n\t\t\t\toverflowX: 'hidden',\r\n\t\t\t\tbackgroundColor: '#ffffff'\r\n\t\t\t};\r\n\t\t\ts[(ie7s) ? 'height' : 'maxHeight'] = (this.ne.options.maxHeight) ? this.ne.options.maxHeight + 'px' : null;\r\n\t\t\tthis.editorContain = new bkElement('DIV').setStyle(s).appendBefore(e);\r\n\t\t\tvar editorElm = new bkElement('DIV').setStyle({\r\n\t\t\t\twidth: (newX - 8) + 'px', \r\n\t\t\t\tmargin: '4px', \r\n\t\t\t\tminHeight: newY + 'px'\t\t\t\t\r\n\t\t\t}).addClass('main').appendTo(this.editorContain);\r\n\r\n\t\t\te.setStyle({\r\n\t\t\t\tdisplay: 'none'\r\n\t\t\t});\r\n\r\n\t\t\teditorElm.innerHTML = e.innerHTML;\r\n\t\t\tif (isTextarea) {\r\n\t\t\t\teditorElm.setContent(e.value);\r\n\t\t\t\tthis.copyElm = e;\r\n\t\t\t\tvar f = e.parentTag('FORM');\r\n\t\t\t\tif (f) {\r\n\t\t\t\t\tbkLib.addEvent(f, 'submit', this.saveContent.closure(this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\teditorElm.setStyle((ie7s) ? {\r\n\t\t\t\theight: newY + 'px'\r\n\t\t\t} : {\r\n\t\t\t\toverflow: 'hidden'\r\n\t\t\t});\r\n\t\t\tthis.elm = editorElm;\r\n\t\t}\r\n\t\tthis.ne.addEvent('blur', this.blur.closure(this));\r\n\r\n\t\tthis.init();\r\n\t\tthis.blur();\r\n\t},\r\n\r\n\tinit: function () {\r\n\t\tthis.elm.setAttribute('contentEditable', 'true');\r\n\t\tif (this.getContent() == \"\") {\r\n\t\t\tthis.setContent('<br />');\r\n\t\t}\r\n\t\tthis.instanceDoc = document.defaultView;\r\n\t\tthis.elm.addEvent('mousedown', this.selected.closureListener(this)).addEvent('keypress', this.keyDown.closureListener(this)).addEvent('focus', this.selected.closure(this)).addEvent('blur', this.blur.closure(this)).addEvent('keyup', this.selected.closure(this));\r\n\t\tthis.ne.fireEvent('add', this);\r\n\t},\r\n\r\n\tremove: function () {\r\n\t\tthis.saveContent();\r\n\t\tif (this.copyElm || this.options.hasPanel) {\r\n\t\t\tthis.editorContain.remove();\r\n\t\t\tthis.e.setStyle({\r\n\t\t\t\t'display': 'block'\r\n\t\t\t});\r\n\t\t\tthis.ne.removePanel();\r\n\t\t}\r\n\t\tthis.disable();\r\n\t\tthis.ne.fireEvent('remove', this);\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis.elm.setAttribute('contentEditable', 'false');\r\n\t},\r\n\r\n\tgetSel: function () {\r\n\t\treturn (window.getSelection) ? window.getSelection() : document.selection;\r\n\t},\r\n\r\n\tgetRng: function () {\r\n\t\tvar s = this.getSel();\r\n\t\tif (!s) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn (s.rangeCount > 0) ? s.getRangeAt(0) : s.createRange();\r\n\t},\r\n\r\n\tselRng: function (rng, s) {\r\n\t\tif (window.getSelection) {\r\n\t\t\ts.removeAllRanges();\r\n\t\t\ts.addRange(rng);\r\n\t\t} else {\r\n\t\t\trng.select();\r\n\t\t}\r\n\t},\r\n\r\n\tselElm: function () {\r\n\t\tvar r = this.getRng();\r\n\t\tif (r.startContainer) {\r\n\t\t\tvar contain = r.startContainer;\r\n\t\t\tif (r.cloneContents().childNodes.length == 1) {\r\n\t\t\t\tfor (var i = 0; i < contain.childNodes.length; i++) {\r\n\t\t\t\t\tvar rng = contain.childNodes[i].ownerDocument.createRange();\r\n\t\t\t\t\trng.selectNode(contain.childNodes[i]);\r\n\t\t\t\t\tif (r.compareBoundaryPoints(Range.START_TO_START, rng) != 1 &&\r\n\t\t\t\t\t\tr.compareBoundaryPoints(Range.END_TO_END, rng) != -1) {\r\n\t\t\t\t\t\treturn $BK(contain.childNodes[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn $BK(contain);\r\n\t\t} else {\r\n\t\t\treturn $BK((this.getSel().type == \"Control\") ? r.item(0) : r.parentElement());\r\n\t\t}\r\n\t},\r\n\r\n\tsaveRng: function () {\r\n\t\tthis.savedRange = this.getRng();\r\n\t\tthis.savedSel = this.getSel();\r\n\t},\r\n\r\n\trestoreRng: function () {\r\n\t\tif (this.savedRange) {\r\n\t\t\tthis.selRng(this.savedRange, this.savedSel);\r\n\t\t}\r\n\t},\r\n\r\n\tkeyDown: function (e, t) {\r\n\t\tif (e.ctrlKey) {\r\n\t\t\tthis.ne.fireEvent('key', this, e);\r\n\t\t}\r\n\t},\r\n\r\n\tselected: function (e, t) {\r\n\t\tif (!t) {\r\n\t\t\tt = this.selElm()\r\n\t\t}\r\n\t\tif (!e.ctrlKey) {\r\n\t\t\tvar selInstance = this.ne.selectedInstance;\r\n\t\t\tif (selInstance != this) {\r\n\t\t\t\tif (selInstance) {\r\n\t\t\t\t\tthis.ne.fireEvent('blur', selInstance, t);\r\n\t\t\t\t}\r\n\t\t\t\tthis.ne.selectedInstance = this;\r\n\t\t\t\tthis.ne.fireEvent('focus', selInstance, t);\r\n\t\t\t}\r\n\t\t\tthis.ne.fireEvent('selected', selInstance, t);\r\n\t\t\tthis.isFocused = true;\r\n\t\t\tthis.elm.addClass('selected');\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tblur: function () {\r\n\t\tthis.isFocused = false;\r\n\t\tthis.elm.removeClass('selected');\r\n\t},\r\n\r\n\tsaveContent: function () {\r\n\t\tif (this.copyElm || this.options.hasPanel) {\r\n\t\t\tthis.ne.fireEvent('save', this);\r\n\t\t\t(this.copyElm) ? this.copyElm.value = this.getContent() : this.e.innerHTML = this.getContent();\r\n\t\t}\r\n\t},\r\n\r\n\tgetElm: function () {\r\n\t\treturn this.elm;\r\n\t},\r\n\r\n\tgetContent: function () {\r\n\t\tthis.content = this.getElm().innerHTML;\r\n\t\tthis.ne.fireEvent('get', this);\r\n\t\treturn this.content;\r\n\t},\r\n\r\n\tsetContent: function (e) {\r\n\t\tthis.content = e;\r\n\t\tthis.ne.fireEvent('set', this);\r\n\t\tthis.elm.innerHTML = this.content;\r\n\t},\r\n\r\n\tnicCommand: function (cmd, args) {\r\n\t\tdocument.execCommand(cmd, false, args);\r\n\t}\r\n});\r\n\r\nvar nicEditorIFrameInstance = nicEditorInstance.extend({\r\n\tsavedStyles: [],\r\n\r\n\tinit: function () {\r\n\t\tvar c = this.elm.innerHTML.replace(/^\\s+|\\s+$/g, '');\r\n\t\tthis.elm.innerHTML = '';\r\n\t\t(!c) ? c = \"<br />\" : c;\r\n\t\tthis.initialContent = c;\r\n\r\n\t\tthis.elmFrame = new bkElement('iframe').setAttributes({\r\n\t\t\t'src': 'javascript:;', \r\n\t\t\t'frameBorder': 0, \r\n\t\t\t'allowTransparency': 'true', \r\n\t\t\t'scrolling': 'no'\r\n\t\t}).setStyle({\r\n\t\t\theight: '100px', \r\n\t\t\twidth: '100%'\r\n\t\t}).addClass('frame').appendTo(this.elm);\r\n\r\n\t\tif (this.copyElm) {\r\n\t\t\tthis.elmFrame.setStyle({\r\n\t\t\t\twidth: (this.elm.offsetWidth - 4) + 'px'\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar styleList = ['font-size', 'font-family', 'font-weight', 'color'];\r\n\t\tfor (itm in styleList) {\r\n\t\t\tthis.savedStyles[bkLib.camelize(itm)] = this.elm.getStyle(itm);\r\n\t\t}\r\n\r\n\t\tsetTimeout(this.initFrame.closure(this), 50);\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis.elm.innerHTML = this.getContent();\r\n\t},\r\n\r\n\tinitFrame: function () {\r\n\t\tvar fd = $BK(this.elmFrame.contentWindow.document);\r\n\t\tfd.designMode = \"on\";\r\n\t\tfd.open();\r\n\t\tvar css = this.ne.options.externalCSS;\r\n\t\tfd.write('<html><head>' + ((css) ? '<link href=\"' + css + '\" rel=\"stylesheet\" type=\"text/css\" />' : '') + '</head><body id=\"nicEditContent\" style=\"margin: 0 !important; background-color: #ffffff !important;\">' + this.initialContent + '</body></html>');\r\n\t\tfd.close();\r\n\t\tthis.frameDoc = fd;\r\n\r\n\t\tthis.frameWin = $BK(this.elmFrame.contentWindow);\r\n\t\tthis.frameContent = $BK(this.frameWin.document.body).setStyle(this.savedStyles);\r\n\t\tthis.instanceDoc = this.frameWin.document.defaultView;\r\n\r\n\t\tthis.heightUpdate();\r\n\t\tthis.frameDoc.addEvent('mousedown', this.selected.closureListener(this)).addEvent('keyup', this.heightUpdate.closureListener(this)).addEvent('keydown', this.keyDown.closureListener(this)).addEvent('keyup', this.selected.closure(this));\r\n\t\tthis.ne.fireEvent('add', this);\r\n\t},\r\n\r\n\tgetElm: function () {\r\n\t\treturn this.frameContent;\r\n\t},\r\n\r\n\tsetContent: function (c) {\r\n\t\tthis.content = c;\r\n\t\tthis.ne.fireEvent('set', this);\r\n\t\tthis.frameContent.innerHTML = this.content;\r\n\t\tthis.heightUpdate();\r\n\t},\r\n\r\n\tgetSel: function () {\r\n\t\treturn (this.frameWin) ? this.frameWin.getSelection() : this.frameDoc.selection;\r\n\t},\r\n\r\n\theightUpdate: function () {\r\n\t\tthis.elmFrame.style.height = Math.max(this.frameContent.offsetHeight, this.initialHeight) + 'px';\r\n\t},\r\n\r\n\tnicCommand: function (cmd, args) {\r\n\t\tthis.frameDoc.execCommand(cmd, false, args);\r\n\t\tsetTimeout(this.heightUpdate.closure(this), 100);\r\n\t}\r\n\r\n\r\n});\r\nvar nicEditorPanel = bkClass.extend({\r\n\tconstruct: function (e, options, nicEditor) {\r\n\t\tthis.elm = e;\r\n\t\tthis.options = options;\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.panelButtons = new Array();\r\n\t\tthis.buttonList = bkExtend([], this.ne.options.buttonList);\r\n\r\n\t\tthis.panelContain = new bkElement('DIV').setStyle({\r\n\t\t\toverflow: 'hidden', \r\n\t\t\twidth: '100%', \r\n\t\t\tborder: '1px solid #cccccc', \r\n\t\t\tbackgroundColor: '#efefef'\r\n\t\t}).addClass('panelContain');\r\n\t\tthis.panelElm = new bkElement('DIV').setStyle({\r\n\t\t\tmargin: '2px', \r\n\t\t\tmarginTop: '0px', \r\n\t\t\tzoom: 1, \r\n\t\t\toverflow: 'hidden'\r\n\t\t}).addClass('panel').appendTo(this.panelContain);\r\n\t\tthis.panelContain.appendTo(e);\r\n\r\n\t\tvar opt = this.ne.options;\r\n\t\tvar buttons = opt.buttons;\r\n\t\tfor (button in buttons) {\r\n\t\t\tthis.addButton(button, opt, true);\r\n\t\t}\r\n\t\tthis.reorder();\r\n\t\te.noSelect();\r\n\t},\r\n\r\n\taddButton: function (buttonName, options, noOrder) {\r\n\t\tvar button = options.buttons[buttonName];\r\n\t\tvar type = (button['type']) ? eval('(typeof(' + button['type'] + ') == \"undefined\") ? null : ' + button['type'] + ';') : nicEditorButton;\r\n\t\tvar hasButton = bkLib.inArray(this.buttonList, buttonName);\r\n\t\tif (type && (hasButton || this.ne.options.fullPanel)) {\r\n\t\t\tthis.panelButtons.push(new type(this.panelElm, buttonName, options, this.ne));\r\n\t\t\tif (!hasButton) {\r\n\t\t\t\tthis.buttonList.push(buttonName);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tfindButton: function (itm) {\r\n\t\tfor (var i = 0; i < this.panelButtons.length; i++) {\r\n\t\t\tif (this.panelButtons[i].name == itm)\r\n\t\t\t\treturn this.panelButtons[i];\r\n\t\t}\r\n\t},\r\n\r\n\treorder: function () {\r\n\t\tvar bl = this.buttonList;\r\n\t\tfor (var i = 0; i < bl.length; i++) {\r\n\t\t\tvar button = this.findButton(bl[i]);\r\n\t\t\tif (button) {\r\n\t\t\t\tthis.panelElm.appendChild(button.margin);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tremove: function () {\r\n\t\tthis.elm.remove();\r\n\t}\r\n});\r\nvar nicEditorButton = bkClass.extend({\r\n\r\n\tconstruct: function (e, buttonName, options, nicEditor) {\r\n\t\tthis.options = options.buttons[buttonName];\r\n\t\tthis.name = buttonName;\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.elm = e;\r\n\r\n\t\tthis.margin = new bkElement('DIV').setStyle({\r\n\t\t\t'float': 'left', \r\n\t\t\tmarginTop: '2px'\r\n\t\t}).appendTo(e);\r\n\t\tthis.contain = new bkElement('DIV').setStyle({\r\n\t\t\twidth: '20px', \r\n\t\t\theight: '20px'\r\n\t\t}).addClass('buttonContain').appendTo(this.margin);\r\n\t\tthis.border = new bkElement('DIV').setStyle({\r\n\t\t\tbackgroundColor: '#efefef', \r\n\t\t\tborder: '1px solid #efefef'\r\n\t\t}).appendTo(this.contain);\r\n\t\tthis.button = new bkElement('DIV').setStyle({\r\n\t\t\twidth: '18px', \r\n\t\t\theight: '18px', \r\n\t\t\toverflow: 'hidden', \r\n\t\t\tzoom: 1, \r\n\t\t\tcursor: 'pointer'\r\n\t\t}).addClass('button').setStyle(this.ne.getIcon(buttonName, options)).appendTo(this.border);\r\n\t\tthis.button.addEvent('mouseover', this.hoverOn.closure(this)).addEvent('mouseout', this.hoverOff.closure(this)).addEvent('mousedown', this.mouseClick.closure(this)).noSelect();\r\n\r\n\t\tif (!window.opera) {\r\n\t\t\tthis.button.onmousedown = this.button.onclick = bkLib.cancelEvent;\r\n\t\t}\r\n\r\n\t\tnicEditor.addEvent('selected', this.enable.closure(this)).addEvent('blur', this.disable.closure(this)).addEvent('key', this.key.closure(this));\r\n\r\n\t\tthis.disable();\r\n\t\tthis.init();\r\n\t},\r\n\r\n\tinit: function () { },\r\n\r\n\thide: function () {\r\n\t\tthis.contain.setStyle({\r\n\t\t\tdisplay: 'none'\r\n\t\t});\r\n\t},\r\n\r\n\tupdateState: function () {\r\n\t\tif (this.isDisabled) {\r\n\t\t\tthis.setBg();\r\n\t\t}\r\n\t\telse if (this.isHover) {\r\n\t\t\tthis.setBg('hover');\r\n\t\t}\r\n\t\telse if (this.isActive) {\r\n\t\t\tthis.setBg('active');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.setBg();\r\n\t\t}\r\n\t},\r\n\r\n\tsetBg: function (state) {\r\n\t\tswitch (state) {\r\n\t\t\tcase 'hover':\r\n\t\t\t\tvar stateStyle = {\r\n\t\t\t\t\tborder: '1px solid #666', \r\n\t\t\t\t\tbackgroundColor: '#ddd'\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'active':\r\n\t\t\t\tvar stateStyle = {\r\n\t\t\t\t\tborder: '1px solid #666', \r\n\t\t\t\t\tbackgroundColor: '#ccc'\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tvar stateStyle = {\r\n\t\t\t\t\tborder: '1px solid #efefef', \r\n\t\t\t\t\tbackgroundColor: '#efefef'\r\n\t\t\t\t};\r\n\t\t}\r\n\t\tthis.border.setStyle(stateStyle).addClass('button-' + state);\r\n\t},\r\n\r\n\tcheckNodes: function (e) {\r\n\t\tvar elm = e;\r\n\t\tdo {\r\n\t\t\tif (this.options.tags && bkLib.inArray(this.options.tags, elm.nodeName)) {\r\n\t\t\t\tthis.activate();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} while (elm = elm.parentNode && elm.className != \"nicEdit\");\r\n\t\telm = $BK(e);\r\n\t\twhile (elm.nodeType == 3) {\r\n\t\t\telm = $BK(elm.parentNode);\r\n\t\t}\r\n\t\tif (this.options.css) {\r\n\t\t\tfor (itm in this.options.css) {\r\n\t\t\t\tif (elm.getStyle(itm, this.ne.selectedInstance.instanceDoc) == this.options.css[itm]) {\r\n\t\t\t\t\tthis.activate();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.deactivate();\r\n\t\treturn false;\r\n\t},\r\n\r\n\tactivate: function () {\r\n\t\tif (!this.isDisabled) {\r\n\t\t\tthis.isActive = true;\r\n\t\t\tthis.updateState();\r\n\t\t\tthis.ne.fireEvent('buttonActivate', this);\r\n\t\t}\r\n\t},\r\n\r\n\tdeactivate: function () {\r\n\t\tthis.isActive = false;\r\n\t\tthis.updateState();\r\n\t\tif (!this.isDisabled) {\r\n\t\t\tthis.ne.fireEvent('buttonDeactivate', this);\r\n\t\t}\r\n\t},\r\n\r\n\tenable: function (ins, t) {\r\n\t\tthis.isDisabled = false;\r\n\t\tthis.contain.setStyle({\r\n\t\t\t'opacity': 1\r\n\t\t}).addClass('buttonEnabled');\r\n\t\tthis.updateState();\r\n\t\tthis.checkNodes(t);\r\n\t},\r\n\r\n\tdisable: function (ins, t) {\r\n\t\tthis.isDisabled = true;\r\n\t\tthis.contain.setStyle({\r\n\t\t\t'opacity': 0.6\r\n\t\t}).removeClass('buttonEnabled');\r\n\t\tthis.updateState();\r\n\t},\r\n\r\n\ttoggleActive: function () {\r\n\t\t(this.isActive) ? this.deactivate() : this.activate();\r\n\t},\r\n\r\n\thoverOn: function () {\r\n\t\tif (!this.isDisabled) {\r\n\t\t\tthis.isHover = true;\r\n\t\t\tthis.updateState();\r\n\t\t\tthis.ne.fireEvent(\"buttonOver\", this);\r\n\t\t}\r\n\t},\r\n\r\n\thoverOff: function () {\r\n\t\tthis.isHover = false;\r\n\t\tthis.updateState();\r\n\t\tthis.ne.fireEvent(\"buttonOut\", this);\r\n\t},\r\n\r\n\tmouseClick: function () {\r\n\t\tif (this.options.command) {\r\n\t\t\tthis.ne.nicCommand(this.options.command, this.options.commandArgs);\r\n\t\t\tif (!this.options.noActive) {\r\n\t\t\t\tthis.toggleActive();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.ne.fireEvent(\"buttonClick\", this);\r\n\t},\r\n\r\n\tkey: function (nicInstance, e) {\r\n\t\tif (this.options.key && e.ctrlKey && String.fromCharCode(e.keyCode || e.charCode).toLowerCase() == this.options.key) {\r\n\t\t\tthis.mouseClick();\r\n\t\t\tif (e.preventDefault) e.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n\r\nvar nicPlugin = bkClass.extend({\r\n\r\n\tconstruct: function (nicEditor, options) {\r\n\t\tthis.options = options;\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.ne.addEvent('panel', this.loadPanel.closure(this));\r\n\r\n\t\tthis.init();\r\n\t},\r\n\r\n\tloadPanel: function (np) {\r\n\t\tvar buttons = this.options.buttons;\r\n\t\tfor (var button in buttons) {\r\n\t\t\tnp.addButton(button, this.options);\r\n\t\t}\r\n\t\tnp.reorder();\r\n\t},\r\n\r\n\tinit: function () { }\r\n});\r\n\r\n\r\n/* START CONFIG */\r\nvar nicPaneOptions = {};\r\n/* END CONFIG */\r\n\r\nvar nicEditorPane = bkClass.extend({\r\n\tconstruct: function (elm, nicEditor, options, openButton) {\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.elm = elm;\r\n\t\tthis.pos = elm.pos();\r\n\r\n\t\tthis.contain = new bkElement('div').setStyle({\r\n\t\t\tzIndex: '99999', \r\n\t\t\toverflow: 'hidden', \r\n\t\t\tposition: 'absolute', \r\n\t\t\tleft: this.pos[0] + 'px', \r\n\t\t\ttop: this.pos[1] + 'px'\r\n\t\t})\r\n\t\tthis.pane = new bkElement('div').setStyle({\r\n\t\t\tfontSize: '12px', \r\n\t\t\tborder: '1px solid #ccc', \r\n\t\t\t'overflow': 'hidden', \r\n\t\t\tpadding: '4px', \r\n\t\t\ttextAlign: 'left', \r\n\t\t\tbackgroundColor: '#ffffc9'\r\n\t\t}).addClass('pane').setStyle(options).appendTo(this.contain);\r\n\r\n\t\tif (openButton && !openButton.options.noClose) {\r\n\t\t\tthis.close = new bkElement('div').setStyle({\r\n\t\t\t\t'float': 'right', \r\n\t\t\t\theight: '16px', \r\n\t\t\t\twidth: '16px', \r\n\t\t\t\tcursor: 'pointer'\r\n\t\t\t}).setStyle(this.ne.getIcon('close', nicPaneOptions)).addEvent('mousedown', openButton.removePane.closure(this)).appendTo(this.pane);\r\n\t\t}\r\n\r\n\t\tthis.contain.noSelect().appendTo(document.body);\r\n\r\n\t\tthis.position();\r\n\t\tthis.init();\r\n\t},\r\n\r\n\tinit: function () { },\r\n\r\n\tposition: function () {\r\n\t\tif (this.ne.nicPanel) {\r\n\t\t\tvar panelElm = this.ne.nicPanel.elm;\r\n\t\t\tvar panelPos = panelElm.pos();\r\n\t\t\tvar newLeft = panelPos[0] + parseInt(panelElm.getStyle('width')) - (parseInt(this.pane.getStyle('width')) + 8);\r\n\t\t\tif (newLeft < this.pos[0]) {\r\n\t\t\t\tthis.contain.setStyle({\r\n\t\t\t\t\tleft: newLeft + 'px'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\ttoggle: function () {\r\n\t\tthis.isVisible = !this.isVisible;\r\n\t\tthis.contain.setStyle({\r\n\t\t\tdisplay: ((this.isVisible) ? 'block' : 'none')\r\n\t\t});\r\n\t},\r\n\r\n\tremove: function () {\r\n\t\tif (this.contain) {\r\n\t\t\tthis.contain.remove();\r\n\t\t\tthis.contain = null;\r\n\t\t}\r\n\t},\r\n\r\n\tappend: function (c) {\r\n\t\tc.appendTo(this.pane);\r\n\t},\r\n\r\n\tsetContent: function (c) {\r\n\t\tthis.pane.setContent(c);\r\n\t}\r\n\r\n});\r\n\r\n\r\n\r\nvar nicEditorAdvancedButton = nicEditorButton.extend({\r\n\r\n\tinit: function () {\r\n\t\tthis.ne.addEvent('selected', this.removePane.closure(this)).addEvent('blur', this.removePane.closure(this));\r\n\t},\r\n\r\n\tmouseClick: function () {\r\n\t\tif (!this.isDisabled) {\r\n\t\t\tif (this.pane && this.pane.pane) {\r\n\t\t\t\tthis.removePane();\r\n\t\t\t} else {\r\n\t\t\t\tthis.pane = new nicEditorPane(this.contain, this.ne, {\r\n\t\t\t\t\twidth: (this.width || '270px'), \r\n\t\t\t\t\tbackgroundColor: '#fff'\r\n\t\t\t\t}, this);\r\n\t\t\t\tthis.addPane();\r\n\t\t\t\tthis.ne.selectedInstance.saveRng();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\taddForm: function (f, elm) {\r\n\t\tthis.form = new bkElement('form').addEvent('submit', this.submit.closureListener(this));\r\n\t\tthis.pane.append(this.form);\r\n\t\tthis.inputs = {};\r\n\r\n\t\tfor (itm in f) {\r\n\t\t\tvar field = f[itm];\r\n\t\t\tvar val = '';\r\n\t\t\tif (elm) {\r\n\t\t\t\tval = elm.getAttribute(itm);\r\n\t\t\t}\r\n\t\t\tif (!val) {\r\n\t\t\t\tval = field['value'] || '';\r\n\t\t\t}\r\n\t\t\tvar type = f[itm].type;\r\n\r\n\t\t\tif (type == 'title') {\r\n\t\t\t\tnew bkElement('div').setContent(field.txt).setStyle({\r\n\t\t\t\t\tfontSize: '14px', \r\n\t\t\t\t\tfontWeight: 'bold', \r\n\t\t\t\t\tpadding: '0px', \r\n\t\t\t\t\tmargin: '2px 0'\r\n\t\t\t\t}).appendTo(this.form);\r\n\t\t\t} else {\r\n\t\t\t\tvar contain = new bkElement('div').setStyle({\r\n\t\t\t\t\toverflow: 'hidden', \r\n\t\t\t\t\tclear: 'both'\r\n\t\t\t\t}).appendTo(this.form);\r\n\t\t\t\tif (field.txt) {\r\n\t\t\t\t\tnew bkElement('label').setAttributes({\r\n\t\t\t\t\t\t'for': itm\r\n\t\t\t\t\t}).setContent(field.txt).setStyle({\r\n\t\t\t\t\t\tmargin: '2px 4px', \r\n\t\t\t\t\t\tfontSize: '13px', \r\n\t\t\t\t\t\twidth: '50px', \r\n\t\t\t\t\t\tlineHeight: '20px', \r\n\t\t\t\t\t\ttextAlign: 'right', \r\n\t\t\t\t\t\t'float': 'left'\r\n\t\t\t\t\t}).appendTo(contain);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\tthis.inputs[itm] = new bkElement('input').setAttributes({\r\n\t\t\t\t\t\t\tid: itm, \r\n\t\t\t\t\t\t\t'value': val, \r\n\t\t\t\t\t\t\t'type': 'text'\r\n\t\t\t\t\t\t}).setStyle({\r\n\t\t\t\t\t\t\tmargin: '2px 0', \r\n\t\t\t\t\t\t\tfontSize: '13px', \r\n\t\t\t\t\t\t\t'float': 'left', \r\n\t\t\t\t\t\t\theight: '20px', \r\n\t\t\t\t\t\t\tborder: '1px solid #ccc', \r\n\t\t\t\t\t\t\toverflow: 'hidden'\r\n\t\t\t\t\t\t}).setStyle(field.style).appendTo(contain);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'select':\r\n\t\t\t\t\t\tthis.inputs[itm] = new bkElement('select').setAttributes({\r\n\t\t\t\t\t\t\tid: itm\r\n\t\t\t\t\t\t}).setStyle({\r\n\t\t\t\t\t\t\tborder: '1px solid #ccc', \r\n\t\t\t\t\t\t\t'float': 'left', \r\n\t\t\t\t\t\t\tmargin: '2px 0'\r\n\t\t\t\t\t\t}).appendTo(contain);\r\n\t\t\t\t\t\tfor (opt in field.options) {\r\n\t\t\t\t\t\t\tvar o = new bkElement('option').setAttributes({\r\n\t\t\t\t\t\t\t\tvalue: opt, \r\n\t\t\t\t\t\t\t\tselected: (opt == val) ? 'selected' : ''\r\n\t\t\t\t\t\t\t}).setContent(field.options[opt]).appendTo(this.inputs[itm]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'content':\r\n\t\t\t\t\t\tthis.inputs[itm] = new bkElement('textarea').setAttributes({\r\n\t\t\t\t\t\t\tid: itm\r\n\t\t\t\t\t\t}).setStyle({\r\n\t\t\t\t\t\t\tborder: '1px solid #ccc', \r\n\t\t\t\t\t\t\t'float': 'left'\r\n\t\t\t\t\t\t}).setStyle(field.style).appendTo(contain);\r\n\t\t\t\t\t\tthis.inputs[itm].value = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tnew bkElement('input').setAttributes({\r\n\t\t\t'type': 'submit'\r\n\t\t}).setStyle({\r\n\t\t\tbackgroundColor: '#efefef', \r\n\t\t\tborder: '1px solid #ccc', \r\n\t\t\tmargin: '3px 0', \r\n\t\t\t'float': 'left', \r\n\t\t\t'clear': 'both'\r\n\t\t}).appendTo(this.form);\r\n\t\tthis.form.onsubmit = bkLib.cancelEvent;\r\n\t},\r\n\r\n\tsubmit: function () { },\r\n\r\n\tfindElm: function (tag, attr, val) {\r\n\t\tvar list = this.ne.selectedInstance.getElm().getElementsByTagName(tag);\r\n\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\tif (list[i].getAttribute(attr) == val) {\r\n\t\t\t\treturn $BK(list[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tremovePane: function () {\r\n\t\tif (this.pane) {\r\n\t\t\tthis.pane.remove();\r\n\t\t\tthis.pane = null;\r\n\t\t\tthis.ne.selectedInstance.restoreRng();\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nvar nicButtonTips = bkClass.extend({\r\n\tconstruct: function (nicEditor) {\r\n\t\tthis.ne = nicEditor;\r\n\t\tnicEditor.addEvent('buttonOver', this.show.closure(this)).addEvent('buttonOut', this.hide.closure(this));\r\n\r\n\t},\r\n\r\n\tshow: function (button) {\r\n\t\tthis.timer = setTimeout(this.create.closure(this, button), 400);\r\n\t},\r\n\r\n\tcreate: function (button) {\r\n\t\tthis.timer = null;\r\n\t\tif (!this.pane) {\r\n\t\t\tthis.pane = new nicEditorPane(button.button, this.ne, {\r\n\t\t\t\tfontSize: '12px', \r\n\t\t\t\tmarginTop: '5px'\r\n\t\t\t});\r\n\t\t\tthis.pane.setContent(button.options.name);\r\n\t\t}\r\n\t},\r\n\r\n\thide: function (button) {\r\n\t\tif (this.timer) {\r\n\t\t\tclearTimeout(this.timer);\r\n\t\t}\r\n\t\tif (this.pane) {\r\n\t\t\tthis.pane = this.pane.remove();\r\n\t\t}\r\n\t}\r\n});\r\nnicEditors.registerPlugin(nicButtonTips);\r\n\r\n/* START CONFIG */\r\nvar nicSelectOptions = {\r\n\tbuttons: {\r\n\t\t'fontSize': {\r\n\t\t\tname: __('Select Font Size'), \r\n\t\t\ttype: 'nicEditorFontSizeSelect', \r\n\t\t\tcommand: 'fontsize'\r\n\t\t},\r\n\t\t'fontFamily': {\r\n\t\t\tname: __('Select Font Family'), \r\n\t\t\ttype: 'nicEditorFontFamilySelect', \r\n\t\t\tcommand: 'fontname'\r\n\t\t},\r\n\t\t'fontFormat': {\r\n\t\t\tname: __('Select Font Format'), \r\n\t\t\ttype: 'nicEditorFontFormatSelect', \r\n\t\t\tcommand: 'formatBlock'\r\n\t\t}\r\n\t}\r\n};\r\n/* END CONFIG */\r\nvar nicEditorSelect = bkClass.extend({\r\n\r\n\tconstruct: function (e, buttonName, options, nicEditor) {\r\n\t\tthis.options = options.buttons[buttonName];\r\n\t\tthis.elm = e;\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.name = buttonName;\r\n\t\tthis.selOptions = new Array();\r\n\r\n\t\tthis.margin = new bkElement('div').setStyle({\r\n\t\t\t'float': 'left', \r\n\t\t\tmargin: '2px 1px 0 1px'\r\n\t\t}).appendTo(this.elm);\r\n\t\tthis.contain = new bkElement('div').setStyle({\r\n\t\t\twidth: '90px', \r\n\t\t\theight: '20px', \r\n\t\t\tcursor: 'pointer', \r\n\t\t\toverflow: 'hidden'\r\n\t\t}).addClass('selectContain').addEvent('click', this.toggle.closure(this)).appendTo(this.margin);\r\n\t\tthis.items = new bkElement('div').setStyle({\r\n\t\t\toverflow: 'hidden', \r\n\t\t\tzoom: 1, \r\n\t\t\tborder: '1px solid #ccc', \r\n\t\t\tpaddingLeft: '3px', \r\n\t\t\tbackgroundColor: '#fff'\r\n\t\t}).appendTo(this.contain);\r\n\t\tthis.control = new bkElement('div').setStyle({\r\n\t\t\toverflow: 'hidden', \r\n\t\t\t'float': 'right', \r\n\t\t\theight: '18px', \r\n\t\t\twidth: '16px'\r\n\t\t}).addClass('selectControl').setStyle(this.ne.getIcon('arrow', options)).appendTo(this.items);\r\n\t\tthis.txt = new bkElement('div').setStyle({\r\n\t\t\toverflow: 'hidden', \r\n\t\t\t'float': 'left', \r\n\t\t\twidth: '66px', \r\n\t\t\theight: '14px', \r\n\t\t\tmarginTop: '1px', \r\n\t\t\tfontFamily: 'sans-serif', \r\n\t\t\ttextAlign: 'center', \r\n\t\t\tfontSize: '12px'\r\n\t\t}).addClass('selectTxt').appendTo(this.items);\r\n\r\n\t\tif (!window.opera) {\r\n\t\t\tthis.contain.onmousedown = this.control.onmousedown = this.txt.onmousedown = bkLib.cancelEvent;\r\n\t\t}\r\n\r\n\t\tthis.margin.noSelect();\r\n\r\n\t\tthis.ne.addEvent('selected', this.enable.closure(this)).addEvent('blur', this.disable.closure(this));\r\n\r\n\t\tthis.disable();\r\n\t\tthis.init();\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis.isDisabled = true;\r\n\t\tthis.close();\r\n\t\tthis.contain.setStyle({\r\n\t\t\topacity: 0.6\r\n\t\t});\r\n\t},\r\n\r\n\tenable: function (t) {\r\n\t\tthis.isDisabled = false;\r\n\t\tthis.close();\r\n\t\tthis.contain.setStyle({\r\n\t\t\topacity: 1\r\n\t\t});\r\n\t},\r\n\r\n\tsetDisplay: function (txt) {\r\n\t\tthis.txt.setContent(txt);\r\n\t},\r\n\r\n\ttoggle: function () {\r\n\t\tif (!this.isDisabled) {\r\n\t\t\t(this.pane) ? this.close() : this.open();\r\n\t\t}\r\n\t},\r\n\r\n\topen: function () {\r\n\t\tthis.pane = new nicEditorPane(this.items, this.ne, {\r\n\t\t\twidth: '88px', \r\n\t\t\tpadding: '0px', \r\n\t\t\tborderTop: 0, \r\n\t\t\tborderLeft: '1px solid #ccc', \r\n\t\t\tborderRight: '1px solid #ccc', \r\n\t\t\tborderBottom: '0px', \r\n\t\t\tbackgroundColor: '#fff'\r\n\t\t});\r\n\r\n\t\tfor (var i = 0; i < this.selOptions.length; i++) {\r\n\t\t\tvar opt = this.selOptions[i];\r\n\t\t\tvar itmContain = new bkElement('div').setStyle({\r\n\t\t\t\toverflow: 'hidden', \r\n\t\t\t\tborderBottom: '1px solid #ccc', \r\n\t\t\t\twidth: '88px', \r\n\t\t\t\ttextAlign: 'left', \r\n\t\t\t\toverflow: 'hidden', \r\n\t\t\t\tcursor: 'pointer'\r\n\t\t\t});\r\n\t\t\tvar itm = new bkElement('div').setStyle({\r\n\t\t\t\tpadding: '0px 4px'\r\n\t\t\t}).setContent(opt[1]).appendTo(itmContain).noSelect();\r\n\t\t\titm.addEvent('click', this.update.closure(this, opt[0])).addEvent('mouseover', this.over.closure(this, itm)).addEvent('mouseout', this.out.closure(this, itm)).setAttributes('id', opt[0]);\r\n\t\t\tthis.pane.append(itmContain);\r\n\t\t\tif (!window.opera) {\r\n\t\t\t\titm.onmousedown = bkLib.cancelEvent;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tclose: function () {\r\n\t\tif (this.pane) {\r\n\t\t\tthis.pane = this.pane.remove();\r\n\t\t}\r\n\t},\r\n\r\n\tover: function (opt) {\r\n\t\topt.setStyle({\r\n\t\t\tbackgroundColor: '#ccc'\r\n\t\t});\r\n\t},\r\n\r\n\tout: function (opt) {\r\n\t\topt.setStyle({\r\n\t\t\tbackgroundColor: '#fff'\r\n\t\t});\r\n\t},\r\n\r\n\r\n\tadd: function (k, v) {\r\n\t\tthis.selOptions.push(new Array(k, v));\r\n\t},\r\n\r\n\tupdate: function (elm) {\r\n\t\tthis.ne.nicCommand(this.options.command, elm);\r\n\t\tthis.close();\r\n\t}\r\n});\r\n\r\nvar nicEditorFontSizeSelect = nicEditorSelect.extend({\r\n\tsel: {\r\n\t\t1: '1&nbsp;(8pt)', \r\n\t\t2: '2&nbsp;(10pt)', \r\n\t\t3: '3&nbsp;(12pt)', \r\n\t\t4: '4&nbsp;(14pt)', \r\n\t\t5: '5&nbsp;(18pt)', \r\n\t\t6: '6&nbsp;(24pt)'\r\n\t},\r\n\tinit: function () {\r\n\t\tthis.setDisplay('Font&nbsp;Size...');\r\n\t\tfor (itm in this.sel) {\r\n\t\t\tthis.add(itm, '<font size=\"' + itm + '\">' + this.sel[itm] + '</font>');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar nicEditorFontFamilySelect = nicEditorSelect.extend({\r\n\tsel: {\r\n\t\t'arial': 'Arial', \r\n\t\t'comic sans ms': 'Comic Sans', \r\n\t\t'courier new': 'Courier New', \r\n\t\t'georgia': 'Georgia', \r\n\t\t'helvetica': 'Helvetica', \r\n\t\t'impact': 'Impact', \r\n\t\t'times new roman': 'Times', \r\n\t\t'trebuchet ms': 'Trebuchet', \r\n\t\t'verdana': 'Verdana'\r\n\t},\r\n\r\n\tinit: function () {\r\n\t\tthis.setDisplay('Font&nbsp;Family...');\r\n\t\tfor (itm in this.sel) {\r\n\t\t\tthis.add(itm, '<font face=\"' + itm + '\">' + this.sel[itm] + '</font>');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar nicEditorFontFormatSelect = nicEditorSelect.extend({\r\n\tsel: {\r\n\t\t'p': 'Paragraph', \r\n\t\t'pre': 'Pre', \r\n\t\t'h6': 'Heading&nbsp;6', \r\n\t\t'h5': 'Heading&nbsp;5', \r\n\t\t'h4': 'Heading&nbsp;4', \r\n\t\t'h3': 'Heading&nbsp;3', \r\n\t\t'h2': 'Heading&nbsp;2', \r\n\t\t'h1': 'Heading&nbsp;1'\r\n\t},\r\n\r\n\tinit: function () {\r\n\t\tthis.setDisplay('Font&nbsp;Format...');\r\n\t\tfor (itm in this.sel) {\r\n\t\t\tvar tag = itm.toUpperCase();\r\n\t\t\tthis.add('<' + tag + '>', '<' + itm + ' style=\"padding: 0px; margin: 0px;\">' + this.sel[itm] + '</' + tag + '>');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nnicEditors.registerPlugin(nicPlugin, nicSelectOptions);\r\n\r\n\r\n\r\n/* START CONFIG */\r\nvar nicLinkOptions = {\r\n\tbuttons: {\r\n\t\t'link': {\r\n\t\t\tname: 'Add Link', \r\n\t\t\ttype: 'nicLinkButton', \r\n\t\t\ttags: ['A']\r\n\t\t},\r\n\t\t'unlink': {\r\n\t\t\tname: 'Remove Link', \r\n\t\t\tcommand: 'unlink', \r\n\t\t\tnoActive: true\r\n\t\t}\r\n\t}\r\n};\r\n/* END CONFIG */\r\n\r\nvar nicLinkButton = nicEditorAdvancedButton.extend({\r\n\taddPane: function () {\r\n\t\tthis.ln = this.ne.selectedInstance.selElm().parentTag('A');\r\n\t\tthis.addForm({\r\n\t\t\t'': {\r\n\t\t\t\ttype: 'title', \r\n\t\t\t\ttxt: 'Add/Edit Link'\r\n\t\t\t},\r\n\t\t\t'href': {\r\n\t\t\t\ttype: 'text', \r\n\t\t\t\ttxt: 'URL', \r\n\t\t\t\tvalue: 'http://', \r\n\t\t\t\tstyle: {\r\n\t\t\t\t\twidth: '150px'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'title': {\r\n\t\t\t\ttype: 'text', \r\n\t\t\t\ttxt: 'Title'\r\n\t\t\t},\r\n\t\t\t'target': {\r\n\t\t\t\ttype: 'select', \r\n\t\t\t\ttxt: 'Open In', \r\n\t\t\t\toptions: {\r\n\t\t\t\t\t'': 'Current Window', \r\n\t\t\t\t\t'_blank': 'New Window'\r\n\t\t\t\t}, \r\n\t\t\t\tstyle: {\r\n\t\t\t\t\twidth: '100px'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this.ln);\r\n\t},\r\n\r\n\tsubmit: function (e) {\r\n\t\tvar url = this.inputs['href'].value;\r\n\t\tif (url == \"http://\" || url == \"\") {\r\n\t\t\talert(\"You must enter a URL to Create a Link\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.removePane();\r\n\r\n\t\tif (!this.ln) {\r\n\t\t\tvar tmp = 'javascript:nicTemp();';\r\n\t\t\tthis.ne.nicCommand(\"createlink\", tmp);\r\n\t\t\tthis.ln = this.findElm('A', 'href', tmp);\r\n\t\t}\r\n\t\tif (this.ln) {\r\n\t\t\tthis.ln.setAttributes({\r\n\t\t\t\thref: this.inputs['href'].value,\r\n\t\t\t\ttitle: this.inputs['title'].value,\r\n\t\t\t\ttarget: this.inputs['target'].options[this.inputs['target'].selectedIndex].value\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n\r\nnicEditors.registerPlugin(nicPlugin, nicLinkOptions);\r\n\r\n\r\n\r\n/* START CONFIG */\r\nvar nicColorOptions = {\r\n\tbuttons: {\r\n\t\t'forecolor': {\r\n\t\t\tname: __('Change Text Color'), \r\n\t\t\ttype: 'nicEditorColorButton', \r\n\t\t\tnoClose: true\r\n\t\t},\r\n\t\t'bgcolor': {\r\n\t\t\tname: __('Change Background Color'), \r\n\t\t\ttype: 'nicEditorBgColorButton', \r\n\t\t\tnoClose: true\r\n\t\t}\r\n\t}\r\n};\r\n/* END CONFIG */\r\n\r\nvar nicEditorColorButton = nicEditorAdvancedButton.extend({\r\n\taddPane: function () {\r\n\t\tvar colorList = {\r\n\t\t\t0: '00', \r\n\t\t\t1: '33', \r\n\t\t\t2: '66', \r\n\t\t\t3: '99', \r\n\t\t\t4: 'CC', \r\n\t\t\t5: 'FF'\r\n\t\t};\r\n\t\tvar colorItems = new bkElement('DIV').setStyle({\r\n\t\t\twidth: '270px'\r\n\t\t});\r\n\r\n\t\tfor (var r in colorList) {\r\n\t\t\tfor (var b in colorList) {\r\n\t\t\t\tfor (var g in colorList) {\r\n\t\t\t\t\tvar colorCode = '#' + colorList[r] + colorList[g] + colorList[b];\r\n\r\n\t\t\t\t\tvar colorSquare = new bkElement('DIV').setStyle({\r\n\t\t\t\t\t\t'cursor': 'pointer', \r\n\t\t\t\t\t\t'height': '15px', \r\n\t\t\t\t\t\t'float': 'left'\r\n\t\t\t\t\t}).appendTo(colorItems);\r\n\t\t\t\t\tvar colorBorder = new bkElement('DIV').setStyle({\r\n\t\t\t\t\t\tborder: '2px solid ' + colorCode\r\n\t\t\t\t\t}).appendTo(colorSquare);\r\n\t\t\t\t\tvar colorInner = new bkElement('DIV').setStyle({\r\n\t\t\t\t\t\tbackgroundColor: colorCode, \r\n\t\t\t\t\t\toverflow: 'hidden', \r\n\t\t\t\t\t\twidth: '11px', \r\n\t\t\t\t\t\theight: '11px'\r\n\t\t\t\t\t}).addEvent('click', this.colorSelect.closure(this, colorCode)).addEvent('mouseover', this.on.closure(this, colorBorder)).addEvent('mouseout', this.off.closure(this, colorBorder, colorCode)).appendTo(colorBorder);\r\n\r\n\t\t\t\t\tif (!window.opera) {\r\n\t\t\t\t\t\tcolorSquare.onmousedown = colorInner.onmousedown = bkLib.cancelEvent;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.pane.append(colorItems.noSelect());\r\n\t},\r\n\r\n\tcolorSelect: function (c) {\r\n\t\tthis.ne.nicCommand('foreColor', c);\r\n\t\tthis.removePane();\r\n\t},\r\n\r\n\ton: function (colorBorder) {\r\n\t\tcolorBorder.setStyle({\r\n\t\t\tborder: '2px solid #000'\r\n\t\t});\r\n\t},\r\n\r\n\toff: function (colorBorder, colorCode) {\r\n\t\tcolorBorder.setStyle({\r\n\t\t\tborder: '2px solid ' + colorCode\r\n\t\t});\r\n\t}\r\n});\r\n\r\nvar nicEditorBgColorButton = nicEditorColorButton.extend({\r\n\tcolorSelect: function (c) {\r\n\t\tthis.ne.nicCommand('hiliteColor', c);\r\n\t\tthis.removePane();\r\n\t}\r\n});\r\n\r\nnicEditors.registerPlugin(nicPlugin, nicColorOptions);\r\n\r\n\r\n\r\n/* START CONFIG */\r\nvar nicImageOptions = {\r\n\tbuttons: {\r\n\t\t'image': {\r\n\t\t\tname: 'Add Image', \r\n\t\t\ttype: 'nicImageButton', \r\n\t\t\ttags: ['IMG']\r\n\t\t}\r\n\t}\r\n\r\n};\r\n/* END CONFIG */\r\n\r\nvar nicImageButton = nicEditorAdvancedButton.extend({\r\n\taddPane: function () {\r\n\t\tthis.im = this.ne.selectedInstance.selElm().parentTag('IMG');\r\n\t\tthis.addForm({\r\n\t\t\t'': {\r\n\t\t\t\ttype: 'title', \r\n\t\t\t\ttxt: 'Add/Edit Image'\r\n\t\t\t},\r\n\t\t\t'src': {\r\n\t\t\t\ttype: 'text', \r\n\t\t\t\ttxt: 'URL', \r\n\t\t\t\t'value': 'http://', \r\n\t\t\t\tstyle: {\r\n\t\t\t\t\twidth: '150px'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'alt': {\r\n\t\t\t\ttype: 'text', \r\n\t\t\t\ttxt: 'Alt Text', \r\n\t\t\t\tstyle: {\r\n\t\t\t\t\twidth: '100px'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'align': {\r\n\t\t\t\ttype: 'select', \r\n\t\t\t\ttxt: 'Align', \r\n\t\t\t\toptions: {\r\n\t\t\t\t\tnone: 'Default', \r\n\t\t\t\t\t'left': 'Left', \r\n\t\t\t\t\t'right': 'Right'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this.im);\r\n\t},\r\n\r\n\tsubmit: function (e) {\r\n\t\tvar src = this.inputs['src'].value;\r\n\t\tif (src == \"\" || src == \"http://\") {\r\n\t\t\talert(\"You must enter a Image URL to insert\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.removePane();\r\n\r\n\t\tif (!this.im) {\r\n\t\t\tvar tmp = 'javascript:nicImTemp();';\r\n\t\t\tthis.ne.nicCommand(\"insertImage\", tmp);\r\n\t\t\tthis.im = this.findElm('IMG', 'src', tmp);\r\n\t\t}\r\n\t\tif (this.im) {\r\n\t\t\tthis.im.setAttributes({\r\n\t\t\t\tsrc: this.inputs['src'].value,\r\n\t\t\t\talt: this.inputs['alt'].value,\r\n\t\t\t\talign: this.inputs['align'].value\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n\r\nnicEditors.registerPlugin(nicPlugin, nicImageOptions);\r\n\r\n\r\n\r\n\r\n/* START CONFIG */\r\nvar nicSaveOptions = {\r\n\tbuttons: {\r\n\t\t'save': {\r\n\t\t\tname: __('Save this content'), \r\n\t\t\ttype: 'nicEditorSaveButton'\r\n\t\t}\r\n\t}\r\n};\r\n/* END CONFIG */\r\n\r\nvar nicEditorSaveButton = nicEditorButton.extend({\r\n\tinit: function () {\r\n\t\tif (!this.ne.options.onSave) {\r\n\t\t\tthis.margin.setStyle({\r\n\t\t\t\t'display': 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tmouseClick: function () {\r\n\t\tvar onSave = this.ne.options.onSave;\r\n\t\tvar selectedInstance = this.ne.selectedInstance;\r\n\t\tonSave(selectedInstance.getContent(), selectedInstance.elm.id, selectedInstance);\r\n\t}\r\n});\r\n\r\nnicEditors.registerPlugin(nicPlugin, nicSaveOptions);\r\n\r\n\r\n/**\r\n* NicEdit Smiles Support\r\n*/\r\n\r\n/* SMILES SUPPPORT*/\r\n/* START CONFIG */\r\nvar smileOptions = {\r\n\tbuttons: {\r\n\t\t'smile': {\r\n\t\t\tname: 'Add Smile', \r\n\t\t\ttype: 'nicEditorSmileButton', \r\n\t\t\tnoClose: true, \r\n\t\t\ttags: ['Sm']\r\n\t\t}\r\n\t}\r\n};\r\n/* END CONFIG */\r\n\r\nvar nicEditorSmileButton = nicEditorAdvancedButton.extend({\r\n\taddPane: function () {\r\n\t\tvar smileList = [3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24];\r\n\t\tvar smileItems = new bkElement('DIV').setStyle({\r\n\t\t\twidth: '270px'\r\n\t\t});\r\n\t\tfor (var g in smileList) {\r\n\t\t\tvar smileClass = 'ui-smile ui-smile-' + smileList[g] + '';\r\n\t\t\tvar smileElement = '<span class=\"' + smileClass + '\" ></span>';\r\n\t\t\tvar smileSquare = new bkElement('DIV').setStyle({\r\n\t\t\t\t'cursor': 'pointer', \r\n\t\t\t\t'height': '17px', \r\n\t\t\t\t'width': '17px', \r\n\t\t\t\t'float': 'left'\r\n\t\t\t}).appendTo(smileItems);\r\n\t\t\tvar smileBorder = new bkElement('DIV').appendTo(smileSquare);\r\n\t\t\tvar smileInner = new bkElement('DIV').setStyle({\r\n\t\t\t\toverflow: 'hidden', \r\n\t\t\t\twidth: '17px', \r\n\t\t\t\theight: '17px'\r\n\t\t\t}).addEvent('click', this.smileSelect.closure(this, smileClass)).addEvent('mouseover', this.on.closure(this, smileBorder)).addEvent('mouseout', this.off.closure(this, smileBorder)).appendTo(smileBorder);\r\n\t\t\tsmileInner.innerHTML = smileElement;\r\n\t\t\tif (!window.opera) {\r\n\t\t\t\tsmileSquare.onmousedown = smileInner.onmousedown = bkLib.cancelEvent;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.pane.append(smileItems.noSelect());\r\n\t},\r\n\r\n\tsmileSelect: function (smileClass) {\r\n\t\tvar sel, range, html; \r\n\t\tif (window.getSelection) { \r\n\t\t\tsel = window.getSelection(); \r\n\t\t\tif (sel.getRangeAt && sel.rangeCount) { \r\n\t\t\t\trange = sel.getRangeAt(0);  \r\n\r\n\t\t\t\tvar span = document.createElement(\"span\");\r\n\t\t\t\tspan.setAttribute(\"class\", smileClass);\r\n\t\t\t\trange.insertNode(span); \r\n\t\t\t} \r\n\t\t} else if (document.selection && document.selection.createRange) { \r\n\t\t\trange = document.selection.createRange();\r\n\t\t\trange.pasteHTML('<span class=\"' + smileClass + '\" />');\r\n\t\t}\r\n\r\n\t\tthis.removePane();\r\n\t},\r\n\r\n\ton: function (smileBorder) {\r\n\t\tsmileBorder.setStyle({\r\n\t\t\tborder: '1px solid #000'\r\n\t\t});\r\n\t},\r\n\r\n\toff: function (smileBorder) {\r\n\t\tsmileBorder.setStyle({\r\n\t\t\tborder: 'none'\r\n\t\t});\r\n\t}\r\n});\r\nnicEditors.registerPlugin(nicPlugin, smileOptions);\r\n\r\n\r\n/* Print plugin  */\r\nvar nicPrintOptions = {\r\n\tbuttons : {\r\n\t\t'print' : {\r\n\t\t\tname : __('Some alt text for the button'), \r\n\t\t\ttype : 'nicEditorPrintButton'\r\n\t\t}\r\n\t}\t\r\n};\r\n\r\nvar nicEditorPrintButton = nicEditorButton.extend({   \r\n\tmouseClick : function(){\r\n\t\tvar container = $(\"<div>\");\r\n\t\tcontainer.append(nicEditors.findEditor('ui-bizagi-rtfeditor').getContent());\r\n\t\tif($.browser.msie){\r\n\t\t\t$(container).printElement({\r\n\t\t\t\tprintMode:'popup'\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$(container).printElement();\r\n\t\t}\r\n\t}\r\n});\r\n \r\nnicEditors.registerPlugin(nicPlugin,nicPrintOptions);\r\n\r\n\r\n\r\n","/*\r\n* jQuery UI SearchList @VERSION\r\n* Author: David Romero\r\n* Copyright (c) 2013 (http://www.bizagi.com)\r\n*\r\n* Depends:\r\n*  ui.core.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.searchList', {\r\n\r\n        options: {\r\n            list: [],\r\n            cases: [],\r\n            SEARCH_MAX_LENGTH: 1\r\n        },\r\n        _create: function () {\r\n\r\n            var self = this;\r\n            var element = self.element;\r\n            var cases = self.options.cases;\r\n            var input = element.find('input[type=text]');\r\n\r\n            input.autocomplete(\r\n            {\r\n                source: self._getLabels(),\r\n                minLength: 0,\r\n                messages:\r\n                {\r\n                    noResults: null\r\n                },\r\n                select: function (event, ui) {\r\n                    var value = $.map(self.options.list, function (obj) {\r\n                        if (obj.displayName == ui.item.value) return obj;\r\n                    });\r\n\r\n                    self._prependCases(value[0]);\r\n                    self._eventRemove();\r\n                },\r\n                close: function () {\r\n                    input.val(\"\");\r\n                }\r\n            });\r\n\r\n            element.on(\"click\", function (event) {\r\n                input.focus();\r\n            });\r\n\r\n            input.on(\"keydown\", function (event) {\r\n\r\n                if (event.keyCode == 8 || event.keyCode == 46) {\r\n\r\n                    var lastElement = element.find('li').not(\":last\").last();\r\n\r\n                    if ($(this).val().length == 0 && lastElement.hasClass('selected')) {\r\n\r\n                        var closeButton = lastElement.find('a.closebutton');\r\n                        closeButton.trigger('click');\r\n                        $(this).blur().focus();\r\n                \r\n                    } else if ($(this).val().length == 0) {\r\n\r\n                        $(lastElement).addClass('selected');\r\n                        $(this).blur().focus();\r\n                    }\r\n                }\r\n\r\n                if (event.keyCode == 13) {\r\n\r\n                    event.preventDefault();\r\n                }\r\n\r\n            })\r\n        },\r\n        _getLabels: function () {\r\n\r\n            var self = this;\r\n            var labels = [];\r\n\r\n            $.each(self.options.list, function (key, value) {\r\n                labels.push(value.displayName);\r\n            });\r\n\r\n            return labels;\r\n        },\r\n        _prependCases: function (value) {\r\n\r\n            var self = this;\r\n            var element = self.element;\r\n            var cases = self.options.cases;\r\n            var input = element.find('input[type=text]');\r\n\r\n            if ($.inArray(value.id, cases) < 0) {\r\n                cases.push(value.id);\r\n                input.parent().before('<li class=\"selected-case\" data-case-value=\"' + value.id + '\"><label>' + value.displayName + '</label><a class=\"closebutton\"></a></li>');\r\n            }\r\n\r\n        },\r\n        _eventRemove: function () {\r\n\r\n            var self = this;\r\n            var element = self.element;\r\n            var cases = self.options.cases;\r\n            var elementRemove = element.find('a.closebutton');\r\n\r\n            elementRemove.off('click').on('click', function (e) {\r\n                e.preventDefault();\r\n\r\n                var value = $(this).parent().data('case-value');\r\n                cases.splice($.inArray(value, cases), 1);\r\n                $(this).parent().remove();\r\n            });\r\n\r\n        }\r\n    });\r\n\r\n})(jQuery);","/**\r\nPlugin to create WorkPortal Tables...\r\n\r\n    var options = {\r\n        data: {},\r\n        css:'customCSS'\r\n    };\r\n\r\n    $('selector').uitable(options);\r\n\r\n    $(document).on(\"tableCompleted\", function(obj){\r\n        //console.log(obj.message, obj.ui);\r\n    });\r\n    \r\n    $(document).on(\"headerClicked\", function(obj){\r\n        //console.log(obj.message, obj.ui);\r\n    });\r\n\r\n@class $.fn.uitable \r\n@constructor uitable\r\n**/\r\n(function ( $ ) {\r\n    \"use strict\";\r\n\r\n    $.fn.uitable = function(options, params) {\r\n\r\n        var plg = this;\r\n        plg.config = {\r\n            namespace:$.bizagi.ui.controls.uitable.namespace,\r\n            cssComponent:$.bizagi.ui.controls.uitable.css,\r\n            availableComponents:$.bizagi.ui.controls.uitable.availableComponents\r\n        };\r\n\r\n        plg.settings = {\r\n            /**\r\n            DataSource to create a checkbox Control\r\n\r\n                var data = [\r\n                            {\r\n                                headers:[\r\n                                            {value:'header1'}\r\n                                        ],\r\n                                rows:   [\r\n                                            {value:'header1'},\r\n                                            {value:{component:'uicombo', data:dataforComponent}\r\n                                        ]\r\n                            }\r\n                        ];\r\n\r\n            @property data \r\n            @type Object\r\n            @default \"{}\"\r\n            **/\r\n            data:{},\r\n            asTable: true,\r\n            nameTemplate: $.bizagi.ui.controls.uitable.tmpl,\r\n            rowTemplate: $.bizagi.ui.controls.uitable.tmpl2,\r\n            /**\r\n            Function to modify cell values\r\n\r\n            @property cellValue \r\n            @type Function\r\n            @default \"null\"\r\n            **/\r\n            cellValue: null,\r\n            /**\r\n            Function to add class in odd rows\r\n\r\n            @property oddClass \r\n            @type String\r\n            @default \"null\"\r\n            **/\r\n            oddClass: null,\r\n            /**\r\n            Function to add a custon CSS Class\r\n\r\n            @property css \r\n            @type String\r\n            @default \"\"\r\n            **/\r\n            css:'',\r\n            getTemplate: function(name){\r\n                return bizagi.getTemplate(name);\r\n            },\r\n            /**\r\n            Function exceute when table is ready\r\n\r\n            @property onComplete \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onComplete: function(){},\r\n            /**\r\n            Function exceute when each header is clicked\r\n\r\n            @property headerClick \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            headerClick: function(){}\r\n        };\r\n\r\n        plg.util = {\r\n            clone:function(arr){\r\n                var arr2  = [];\r\n                for (var i = 0; i < arr.length; i++) {\r\n                    arr2.push(arr[i]);\r\n                }\r\n                return arr2;\r\n            }\r\n        };\r\n\r\n        plg.methods = {\r\n            init:function(op){\r\n                var self = $(this);\r\n                var template = op.getTemplate(op.nameTemplate);\r\n                var rowTemplate = op.getTemplate(op.rowTemplate);\r\n\r\n                self.attr('role', op.namespace);\r\n                self.addClass(op.cssComponent);\r\n                self.addClass(op.css);\r\n\r\n                $.when($.get(template), $.get(rowTemplate)).done(function(a, b){\r\n                    var nData = op.data;\r\n\r\n                    nData = plg.methods.recursiveRows.apply(this, [op]);\r\n\r\n                    var fValue = (op.cellValue) ? op.cellValue : plg.methods.cellValue;\r\n\r\n                    var tmp = $.tmpl(a[0], nData,{\r\n                        testValue: fValue\r\n                    });\r\n\r\n                    op.rowTemplate = b[0];\r\n\r\n\r\n                    self.data('cellValue', fValue);\r\n                    \r\n                    if(op.onComplete){\r\n                        self.data('onComplete', op.onComplete);\r\n                    }\r\n\r\n                    if(plg.settings.oddClass){\r\n                        tmp.find('.biz-wp-table-row:odd').addClass(plg.settings.oddClass);\r\n                    }\r\n\r\n                    self.append(tmp);\r\n                    plg.methods.addHandlers.apply(self, [tmp]);\r\n\r\n                }).fail(function(){\r\n                    $.error('No se pudo cargar el template para generar las tablas');\r\n                });\r\n\r\n            },\r\n            addHandlers: function(tmp){\r\n                var self = $(this);\r\n\r\n                tmp.on('click.table', 'th' ,function(event){\r\n                    plg.settings.headerClick();\r\n\r\n                    /**\r\n                    Fired when header is clicked\r\n\r\n                    @event headerClicked \r\n                    @param {String} type headerClicked\r\n                    @param {String} message\r\n                    @param {Date} time\r\n                    @param {Object} Jquery Object HTML\r\n                    **/\r\n                    $.event.trigger({\r\n                        type: \"headerClicked\",\r\n                        message: \"Header is Clicked\",\r\n                        time: new Date(),\r\n                        ui:$(event.target)\r\n                    });\r\n                });\r\n\r\n                plg.settings.onComplete.apply(self, []);\r\n\r\n\r\n                /**\r\n                Fired when table is ready\r\n\r\n                @event tableCompleted \r\n                @param {String} type tableCompleted\r\n                @param {String} message\r\n                @param {Date} time\r\n                @param {Object} Jquery Object HTML\r\n                **/\r\n                $.event.trigger({\r\n                    type: \"tableCompleted\",\r\n                    message: \"Table is Completed\",\r\n                    time: new Date(),\r\n                    ui:self\r\n                });\r\n\r\n                var components = $('[role^=\"component:\"]');\r\n\r\n                if(components.length > 0){\r\n                    plg.methods.createComponents.apply(self, [components]);\r\n                }\r\n\r\n                self.data('plg', plg);\r\n\r\n            },\r\n            createComponents: function(comps){\r\n                var self = $(this);\r\n\r\n                for(var i=0; i<comps.length; i++){\r\n                    var dataComp, el = $(comps[i]);\r\n                    var type = el.attr('role').toLowerCase().replace('component:', '');\r\n\r\n                    if(plg.methods.validateComponent(type)){\r\n\r\n                        if(plg.settings.data.datasource[el.data('position')]){\r\n                            dataComp = plg.settings.data.datasource[el.data('position')];\r\n                        }else{\r\n                            dataComp = self.data().plg.settings.data.datasource[el.data('position')];\r\n                        }\r\n\r\n\r\n                        el[type]({data:dataComp});\r\n                    }else{\r\n                        $.error('No es un componente valido para tablas');\r\n                    }\r\n                }\r\n\r\n            },\r\n            recursiveRows: function(op){\r\n                var self = this;\r\n                for(var i=0; i<op.data.rows.length; i++){\r\n                   for(var j=0; j<op.data.rows[i].length; j++){\r\n                        op.data.rows[i][j].indexCol = j;\r\n                        op.data.rows[i][j].indexRow = i;\r\n                    }\r\n                }\r\n\r\n                return op.data;\r\n            },\r\n            cellValue : function(obj){\r\n                var val = '';\r\n                if(!this.data.datasource){\r\n                    this.data.datasource = [];\r\n                }\r\n                if(obj.cellValue){\r\n                    val = obj.cellValue(obj);\r\n                    if(typeof val === 'object' && val.jquery){\r\n                        val = val[0].outerHTML;\r\n                    }\r\n                }else{\r\n                    if(typeof obj.value === 'string' || typeof obj.value === 'number'){\r\n                        val = obj.value;\r\n                    } else if(typeof obj.value === 'object' && obj.value.hasOwnProperty('component')){\r\n                        val = '<div role=\"component:'+obj.value.component+'\" data-position=\"'+obj.indexCol+'-'+obj.indexRow+'\"></div>';\r\n                        if(obj.value.data){\r\n                            this.data.datasource[obj.indexCol+'-'+obj.indexRow] = obj.value.data;\r\n                        }else{\r\n                            this.data.datasource[obj.indexCol+'-'+obj.indexRow] = {};\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return val;\r\n            },\r\n            validateComponent: function(comp){\r\n                var self = this;\r\n                var rValue = false;\r\n                for(var i=0; i<plg.config.availableComponents.length; i++){\r\n                    if(comp === plg.config.availableComponents[i]){\r\n                        rValue = true;\r\n                    }\r\n                }\r\n\r\n                return rValue;\r\n\r\n            },\r\n            addRow:function(row, position){\r\n                var self = $(this);\r\n                var plugin = self.data('plg');\r\n\r\n                if(self.attr('role') === plugin.settings.namespace){\r\n                    var nPosition = parseFloat(position) - 1;\r\n                    var elPos = $('.biz-wp-table-body tr:eq( '+nPosition+' )',self);\r\n                    var posLength = $('[data-pos^=\"added-\"]', self).length;\r\n\r\n                    var nPosRow = position + posLength;\r\n                    var tmplRow = self.data('plg').settings.rowTemplate;\r\n                    var countCols = $('td',elPos).length;\r\n\r\n                    if(countCols < row.length){\r\n                        row = row.slice(0, countCols);\r\n\r\n                    }else if(countCols > row.length){\r\n\r\n                        var addCols = countCols - row.length;\r\n                        for(var i=0; i<addCols;i++){\r\n                            row.push({value:''});\r\n                        }\r\n                    }\r\n\r\n                    for(var j=0; j<row.length; j++){\r\n                        row[j].indexCol = j;\r\n                        row[j].indexRow = 'added-' + nPosRow;\r\n                    }\r\n\r\n                    var data = {cols:row, nPosRow:nPosRow};\r\n                    var tmp = $.tmpl(tmplRow, data,{\r\n                            testValue: (self.data('cellValue')) ? self.data('cellValue') : plg.methods.cellValue\r\n                        });\r\n                    var responseTmp = $(tmp);\r\n\r\n\r\n                    responseTmp.insertAfter(elPos);\r\n\r\n                    var completeTask = self.data('onComplete');\r\n                    completeTask.apply(self,[]);\r\n\r\n                                        \r\n                    for(var prop in data.datasource){\r\n                        plugin.settings.data.datasource[prop + ''] =  data.datasource[prop];\r\n                    }\r\n\r\n\r\n                    var components = $('[role^=\"component:\"]', self);\r\n\r\n                    if(components.length > 0){\r\n                        plugin.methods.createComponents.apply(self, [components]);\r\n                    }\r\n                }\r\n\r\n            },\r\n            addColumn:function(){\r\n                var self = this;\r\n            },\r\n            /**\r\n            * Destroy Table\r\n            *\r\n            *   $('selector').uitable('destroy');\r\n            *\r\n            * @method destroy\r\n            * @return {Object} Jquery Empty Object\r\n            */\r\n            destroy:function(op){\r\n                var self = $(this);\r\n                if(self.attr('role') === self.data().plg.settings.namespace){\r\n                    self.attr('role','');\r\n                    self.empty();\r\n\r\n                }else{\r\n                    $.error('No es posible eliminar un control con un namespace diferente: [role: ' + op.namespace+']');\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n        \r\n        if(typeof options != 'object' && options) {\r\n\r\n                var _self = $(this);\r\n                if(_self.attr('role') === $.bizagi.ui.controls.uitable.namespace){\r\n\r\n                    $.extend(plg.settings, params, plg.config);\r\n                    var args = plg.util.clone(arguments);\r\n                    args = args.slice(1,args.length);\r\n                    return plg.methods[arguments[0]].apply(this, args);\r\n\r\n                }else{\r\n                    return false;\r\n                }\r\n\r\n        } else if( typeof options === 'object' || !options || options === undefined) {\r\n\r\n                $.extend(plg.settings, options, plg.config);\r\n                return this.each(function() {\r\n                    plg.methods.init.apply(this, [plg.settings]);\r\n                });\r\n\r\n        } else {\r\n\r\n                $.error('Method ' + options + ' does not exist on jQuery.table');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.bizagi.ui.controls.uitable.plugin = $.fn.uitable;\r\n\r\n}( jQuery ));","/**\r\nPlugin to create WorkPortal Combos...\r\n\r\n    var options = {\r\n        data: {},\r\n        css:'customCSS'\r\n    };\r\n\r\n    $('selector').uicombo(options);\r\n\r\n    $(document).on(\"comboChange\", function(obj){\r\n        console.log(obj.message, obj.ui, obj.ui.val());\r\n    });\r\n\r\n@class $.fn.uicombo \r\n@constructor uicombo\r\n**/\r\n(function ($) {\r\n    \"use strict\";\r\n    $.fn.uicombo = function (options, params) {\r\n\r\n        var plg = this;\r\n\r\n        plg.config = {\r\n            namespace: $.bizagi.ui.controls.uicombo.namespace,\r\n            cssComponent: $.bizagi.ui.controls.uicombo.css,\r\n            internalData: {}\r\n        };\r\n\r\n        plg.settings = {\r\n            /**\r\n            DataSource to create a uiRadio Control\r\n\r\n            var data = [\r\n            {   \r\n            value:value,\r\n            text:'combo'\r\n            }\r\n            ];\r\n\r\n            @property data \r\n            @type Object\r\n            @default \"{}\"\r\n            **/\r\n            data: {},\r\n            ascombo: true,\r\n\r\n            /**\r\n            to disabled combo\r\n\r\n            @property disabled \r\n            @type bool\r\n            @default false\r\n            */\r\n            disabled: false,\r\n\r\n            /**\r\n            Make the combo searchable\r\n\r\n            @property isSearchable \r\n            @type Boolean\r\n            @default \"false\"\r\n            **/\r\n            isSearchable: false,\r\n            /**\r\n            Make the combo editable\r\n\r\n            @property isEditable \r\n            @type Boolean\r\n            @default \"false\"\r\n            **/\r\n            isEditable: false,\r\n            nameTemplate: $.bizagi.ui.controls.uicombo.tmpl,\r\n            nameSubTemplate: $.bizagi.ui.controls.uicombo.tmpl2,\r\n            /**\r\n            Function to set a initial value\r\n                \r\n            {value:1}\r\n\r\n            @property initValue \r\n            @type Object\r\n            @default \"null\"\r\n            **/\r\n            initValue: null,\r\n            /**\r\n            Function to modify values\r\n\r\n            @property itemValue \r\n            @type Function\r\n            @param {Object} Object with value\r\n            @default \"null\"\r\n            **/\r\n            itemValue: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property itemText \r\n            @type Function\r\n            @param {Object} Object with text\r\n            @default \"null\"\r\n            **/\r\n            itemText: null,\r\n            css: '',\r\n            orientation: 'biz-o-left',\r\n            getTemplate: function (name) {\r\n                return bizagi.getTemplate(name);\r\n            },\r\n\r\n            /**\r\n            Function to initialize templates\r\n            @type Function\r\n            @return object\r\n            **/\r\n            initializeTemplates: function () {\r\n\r\n                var self = this;\r\n                var deferred = $.Deferred();\r\n                var tmpl1 = self.nameTemplate;\r\n                var tmpl2 = self.nameSubTemplate;\r\n\r\n                return {\r\n                    \"combo\": (bizagi.getTemplate(tmpl1)),\r\n                    \"list\": (bizagi.getTemplate(tmpl2))\r\n                };\r\n            },\r\n\r\n            /**\r\n            Function exceute when combo is ready\r\n\r\n            @property onComplete \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onComplete: function () { },\r\n            /**\r\n            Function exceute when combo change\r\n\r\n            @property onChange \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onChange: function () { },\r\n            /**\r\n             Function execute when combo DropDown\r\n\r\n             @property onComboDropDown\r\n             @type Function\r\n             @default \"function(){}\"\r\n             **/\r\n            onComboDropDown: function () { }\r\n        };\r\n\r\n        plg.methods = {\r\n            init: function (op) {\r\n\r\n                var self = $(this),\r\n                    template = op.getTemplate(op.nameTemplate),\r\n                    subTemplate = op.getTemplate(op.nameSubTemplate),\r\n                    nData;\r\n\r\n                //Util functions to detect ie browsers accurately                \r\n                var isIE = function () {\r\n                    return (navigator.appName.indexOf(\"Internet Explorer\") > 0);\r\n                };\r\n\r\n                var isIE11 = function () {\r\n                    return !!navigator.userAgent.match(/Trident\\/7.0/) && !navigator.userAgent.match(/MSIE/i);\r\n                };\r\n\r\n                op.IE = isIE() ? true : (isIE11() ? true : undefined);\r\n\r\n                self.attr('role', op.namespace);\r\n                self.addClass(op.cssComponent);\r\n                self.addClass(op.css);\r\n\r\n                self.loader = new bizagi.ui.controls.tmplloader();\r\n\r\n                $.when(self.loader.loadTemplates(op.initializeTemplates())).done(function () {\r\n\r\n                    var a = self.loader.getTemplate(\"combo\");\r\n                    var b = self.loader.getTemplate(\"list\");\r\n\r\n                    plg.config.internalData = nData = op.data;\r\n\r\n                    nData.isEditable = op.isEditable;\r\n                    nData.disabled = op.disabled;\r\n\r\n                    plg.config.subTemplateHTML = b;\r\n\r\n                    var tmp = $.tmpl(a, op.data, {\r\n                        itemValue: (op.itemValue) ? op.itemValue : plg.methods.itemValue,\r\n                        itemText: (op.itemText) ? op.itemText : plg.methods.itemText\r\n                    });\r\n\r\n                    self.append(tmp);\r\n\r\n                    plg.config.inputCombo = $('.biz-wp-combo-input', self);\r\n\r\n                    tmp.find('.biz-wp-combo-option').each(function (index, value) {\r\n                        if (op.data.combo[index].data) {\r\n                            $.extend($(value).data(), op.data.combo[index].data);\r\n                        }\r\n                    });\r\n\r\n                    plg.settings.onComplete.apply(self, []);\r\n\r\n                    self.methods = plg.methods;\r\n                    self.config = plg.config;\r\n                    self.settings = plg.settings;\r\n\r\n                    self.methods.configureHandlers.apply(self, []);\r\n\r\n\r\n                    /**\r\n                    Fired when a combo is created\r\n\r\n                    @event comboCompleted \r\n                    @param {String} type comboCompleted\r\n                    @param {String} message\r\n                    @param {Date} time\r\n                    @param {Object} Jquery Object HTML \r\n                    **/\r\n                    $.event.trigger({\r\n                        type: \"comboCompleted\",\r\n                        message: \"combo is Completed\",\r\n                        time: new Date(),\r\n                        ui: self\r\n                    });\r\n\r\n                    if (plg.settings.initValue) {\r\n                        var value = '',\r\n                                text = '';\r\n\r\n                        if (plg.settings.itemText) {\r\n                            text = plg.settings.itemText(plg.settings.initValue);\r\n                        } else {\r\n                            text = plg.settings.initValue.text;\r\n                        }\r\n\r\n                        if (plg.settings.itemValue) {\r\n                            value = plg.settings.itemValue(plg.settings.initValue);\r\n                        } else {\r\n                            value = plg.settings.initValue.value;\r\n                        }\r\n\r\n                        if (text === \"\") {\r\n                            self.config.inputCombo.val('');\r\n                        } else {\r\n                            self.config.inputCombo.val(text);\r\n                        }\r\n\r\n                        plg.config.inputCombo.data('value', value);\r\n\r\n                    }\r\n\r\n\r\n                    /*     }).fail(function () {\r\n                    $.error('No se pudo cargar el template para generar las tablas');\r\n                    });*/\r\n                });\r\n            },\r\n\r\n            getControl: function () {\r\n                var self = this,\r\n                    $control = $('.biz-wp-combo', self);\r\n\r\n                return $control;\r\n            },\r\n            getData: function () {\r\n                return plg.config.internalData;\r\n            },\r\n            findDataByValue: function (val) {\r\n                var self = this,\r\n                    result = -1,\r\n                    i = 0;\r\n\r\n                if (val !== undefined && val !== null) {\r\n                    var compareValIn = (typeof val === 'object') ? val.join(\" - \") : (typeof val === 'boolean') ? val.toString() : val,\r\n                        compareVal = $.trim(compareValIn).substring(0, compareValIn.length).toLowerCase(),\r\n                        selfData = self.getData();\r\n                }\r\n\r\n                return result;\r\n            },\r\n            /*\r\n            *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n            */\r\n            configureHandlers: function () {\r\n                var self = this,\r\n                    control = self.methods.getControl.apply(self, []);\r\n\r\n                self.config.inputCombo.focus(function () {\r\n                    //$(this).trigger('click');\r\n                });\r\n\r\n                self.config.inputCombo.blur(function () {\r\n                    if (self.settings.isSearchable) {\r\n                        self.methods.validateValueInDatasource();\r\n                    }\r\n                });\r\n\r\n                self.config.inputCombo.click(function () {\r\n                    var idDropdown = \"dd-\" + self.config.inputCombo.attr(\"id\");\r\n                    if ($(\"#\" + idDropdown, control).length === 0) {\r\n                        self.methods.comboDropDown.apply(self, []);\r\n                    } else {\r\n                        // Close combo if clicked twice \r\n                        self.methods.dropDownDestroy.apply(self, [$(idDropdown)]);\r\n                    }\r\n                    self.config.inputCombo.select();\r\n                });\r\n                // Bind clicks to fake UI in order to simulate select clicks\r\n                $(\".biz-wp-combo-btn\", control).bind(\"click.combo\", function () {\r\n                    self.config.inputCombo.trigger(\"click\").focus();\r\n                });\r\n\r\n                self.config.inputCombo.keyup(function (e) {\r\n                    self.methods.keyUpFunction.apply(self, [e]);\r\n                });\r\n\r\n                self.config.inputCombo.keydown(function (e) {\r\n                    self.methods.keyDownFunction.apply(self, [e]);\r\n                });\r\n            },\r\n            /*\r\n            *   Makes the combo drops down, also fetch the data first if the combo is set to load on demand\r\n            */\r\n            comboDropDown: function () {\r\n                var self = this;\r\n\r\n                $.when(self.methods.getData()).done(function (data) {\r\n                    self.methods.internalComboDropDown.apply(self, [data]);\r\n                    plg.settings.onComboDropDown();\r\n                });\r\n\r\n            },\r\n            /*\r\n            *   Draws the mini-popup\r\n            */\r\n            internalComboDropDown: function (data) {\r\n                $(\".ui-select-dropdown.open\").detach();\r\n                var self = this, selectTmp, objSelected = {};\r\n                /** temp templates **/\r\n                var containerDropdown = $(\"<div class='ui-select-dropdown open'></div>\");\r\n                /* control reference */\r\n                var containerControl = self.config.inputCombo.closest('.biz-wp-combo-data-container');\r\n                var containerRender = containerControl.closest('.biz-wp-combo');\r\n                var idDropdown = \"dd-\" + self.config.inputCombo.attr(\"id\");\r\n                var selectedValue = self.methods.findDataByValue(self.config.inputCombo.val());\r\n                var scrollPosition = 0;\r\n\r\n                data = data || self.properties.data;\r\n\r\n                self.repositionInterval;\r\n\r\n                var height = containerRender.css(\"height\"),\r\n                    selfControl = self.methods.getControl.apply(self, []);\r\n\r\n                containerRender.addClass(\"ac-is-visible\");\r\n\r\n                containerRender.css(\"height\", height);\r\n                containerControl.addClass(\"ac-is-visible ac-clear-floats\");\r\n\r\n                containerDropdown.attr(\"id\", idDropdown);\r\n\r\n                selectTmp = $.tmpl(plg.config.subTemplateHTML, data, {\r\n                    itemValue: (self.settings.itemValue) ? self.settings.itemValue : self.methods.itemValue,\r\n                    itemText: (self.settings.itemText) ? self.settings.itemText : self.methods.itemText\r\n                });\r\n                var dropDown = containerDropdown.append(selectTmp);\r\n                containerControl.append(dropDown);\r\n\r\n\r\n                dropDown.position({\r\n                    my: \"left top\",\r\n                    at: \"left bottom\",\r\n                    of: $(\".biz-wp-combo-input\", selfControl),\r\n                    collision: \"none\"\r\n                }).hide();\r\n\r\n                dropDown.fadeIn();\r\n\r\n                dropDown.width(selfControl.width());\r\n\r\n                self.methods.recalculateComboOffset(dropDown, selfControl);\r\n\r\n                dropDown.data('formWidth', containerControl.width());\r\n                dropDown.data('parentCombo', selfControl);\r\n\r\n                dropDown.addClass(self.settings.orientation);\r\n\r\n                if (selectedValue !== -1) {\r\n                    objSelected = $(\"li[data-value='\" + selectedValue.id + \"']\", dropDown);\r\n                    objSelected.addClass('ui-selected');\r\n                    objSelected.addClass(\"active\");\r\n                    scrollPosition = parseInt(objSelected.position().top);\r\n                    dropDown.scrollTop(scrollPosition);\r\n                }\r\n\r\n                dropDown.on(\"mouseup\", \"li\", function (event) {\r\n\r\n                    event.stopPropagation();\r\n\r\n                    var dataValue = $(this).data('value').toString();\r\n\r\n                    var value = (dataValue) ? $(this).data('value') : '';\r\n                    var val = { value: value, text: $(this).text() };\r\n                    self.methods.onComboItemSelected.apply(self, [val]);\r\n                    self.config.inputCombo.focus();\r\n\r\n                    // Animation effect\r\n                    dropDown.fadeOut('slow', function () {\r\n                        self.methods.dropDownDestroy.apply(self, [dropDown]);\r\n                    });\r\n                    $(document).unbind(\"click.closecombo\");\r\n                });\r\n\r\n                // Stop bubbling outside the dropdown\r\n                $.makeArray(dropDown, self.methods.getControl.apply(self, [])).bind('click', function (e) {\r\n                    e.preventDefault();\r\n                    return false;\r\n                });\r\n\r\n                /*fix for IE*/\r\n                dropDown.bind('mousedown.closecombo', function () {\r\n                    dropDown.attr('md', true);\r\n                });\r\n\r\n                // Handle dialog resizes\r\n                // TODO: Change document handlers to \"closest\" ui-dialog -> ui-resizable-handle  handlers\r\n                $(document).bind(\"mousedown.resizecombo\", function (e) {\r\n                    if ($(e.target).hasClass('ui-resizable-handle')) {\r\n                        if (self.repositionInterval) {\r\n                            clearInterval(self.repositionInterval);\r\n                        }\r\n                        self.repositionInterval = setInterval(function () {\r\n                            self.methods.dropDownReposition.apply(self, [dropDown, containerControl]);\r\n                        }, 10);\r\n                    }\r\n                });\r\n                $(document).bind(\"mouseup.resizecombo\", function (e) {\r\n                    clearInterval(self.repositionInterval);\r\n                    var tg = $(e.target);\r\n                    if (!dropDown.attr('md')) { /* <-- fix for IE*/\r\n                        if (!tg.hasClass('ui-select-dropdown')) {\r\n                            self.methods.dropDownValidClose.apply(self, [tg, dropDown]);\r\n                        }\r\n                    } else {\r\n                        dropDown.removeAttr('md');\r\n                    }\r\n                });\r\n\r\n                $(document).on('mouseup.closecombo', function (e) {\r\n                    var etarget;\r\n                    if (self.settings.IE && e.currentTarget.activeElement) {\r\n                        etarget = e.currentTarget.activeElement\r\n                    } else {\r\n                        etarget = e.target;\r\n                    }\r\n\r\n                    var tg = $(etarget);\r\n                    if (!dropDown.attr('md')) {\r\n                        if (!tg.hasClass('ui-select-dropdown')) {\r\n                            self.methods.dropDownValidClose.apply(self, [tg, dropDown]);\r\n                        }\r\n                    } else {\r\n                        dropDown.removeAttr('md');\r\n                    }\r\n                });\r\n\r\n                $(window).bind('resize.resizecombo', function () {\r\n                    if (self.repositionInterval) {\r\n                        clearInterval(self.repositionInterval);\r\n                    }\r\n\r\n                    self.methods.dropDownReposition.apply(self, [dropDown, containerControl]);\r\n                });\r\n\r\n                $(document).one(\"click.closecombo\", function (e) {\r\n                    var tg = $(e.target);\r\n                    if (!dropDown.attr('md')) {\r\n                        self.methods.dropDownValidClose.apply(self, [tg, dropDown]);\r\n                    } else {\r\n                        dropDown.removeAttr('md');\r\n                    }\r\n                });\r\n\r\n            },\r\n            /*\r\n            * validate when fire event form document and window\r\n            */\r\n            dropDownValidClose: function (target, dropDown) {\r\n                var self = this;\r\n                //   if (target.closest(\".biz-wp-combo\", self.element).length === 0) {\r\n                dropDown.fadeOut('slow', function () {\r\n                    self.methods.dropDownDestroy.apply(self, [dropDown]);\r\n                });\r\n                $(document).unbind(\"click.closecombo\");\r\n                //        }\r\n            },\r\n            /*\r\n            * set a new dropdown position\r\n            */\r\n            dropDownReposition: function (dropDown, containerForm) {\r\n                var self = this,\r\n                    selfControl = self.methods.getControl.apply(self, []);\r\n                if ((containerForm.width() != dropDown.data('formWidth'))) {\r\n\r\n                    dropDown.width((selfControl.width() < 100) ? 100 : selfControl.width());\r\n\r\n                    dropDown.position({\r\n                        my: \"left top\",\r\n                        at: \"left bottom\",\r\n                        of: $(\".biz-wp-combo-input\", selfControl),\r\n                        collision: \"none\"\r\n                    });\r\n                    dropDown.data('formWidth', containerForm.width());\r\n                }\r\n            },\r\n            /*\r\n            * destroy dropdown\r\n            */\r\n            dropDownDestroy: function (dropDown) {\r\n                var self = this;\r\n                var containerControl = self.config.inputCombo.closest('.ui-bizagi-control');\r\n                var containerRender = containerControl.closest('.ui-bizagi-render');\r\n\r\n                if (containerControl.hasClass(\"ac-is-visible\")) {\r\n                    containerControl.removeClass(\"ac-is-visible\");\r\n                }\r\n                if (containerControl.hasClass(\"ac-clear-floats\")) {\r\n                    containerControl.removeClass(\"ac-clear-floats\");\r\n                }\r\n                containerRender.css(\"height\", \"auto\");\r\n                if (containerRender.hasClass(\"ac-is-visible\")) {\r\n                    containerRender.removeClass(\"ac-is-visible\");\r\n                }\r\n\r\n                dropDown.remove();\r\n                $(document).unbind(\"mousedown.closecombo\");\r\n                $(document).unbind(\"mouseup.resizecombo\");\r\n                $(window).unbind('resize.resizecombo');\r\n                $(window).unbind('mouseup.closecombo');\r\n                (self.repositionInterval)\r\n                clearInterval(self.repositionInterval);\r\n            },\r\n            validateValueInDatasource: function () {\r\n                var self = this;\r\n                var selected = plg.config.inputCombo.val();\r\n                var valText = '';\r\n                var selectedKey = self.findDataByValue(selected);\r\n\r\n\r\n                if (!self.value) {\r\n                    self.value = { id: '' };\r\n                }\r\n\r\n                if (selectedKey.id > 0) {\r\n                    self.setValue({ id: selectedKey.id }, false);\r\n                    self.setDisplayValue(selectedKey);\r\n                } else if (selectedKey.id == \"\") {\r\n                    if (self.value.id != selectedKey.id) {\r\n                        self.setValue(selectedKey, false);\r\n                    }\r\n                    self.setDisplayValue(selectedKey);\r\n                } else {\r\n                    self.setDisplayValue(self.selectedValue);\r\n                }\r\n            },\r\n            /*\r\n            *   Keydown listener\r\n            */\r\n            keyDownFunction: function (e) {\r\n                var self = this;\r\n                var idDropdown = \"dd-\" + plg.config.inputCombo.attr(\"id\");\r\n                var dropDown = $(\"#\" + idDropdown);\r\n                var active = $(\"li.active\", dropDown);\r\n\r\n                e = e ? e : window.event;\r\n\r\n                // Need to implement hiding select on \"Escape\" and \"Enter\".\r\n                if (e.altKey || e.ctrlKey || e.metaKey) {\r\n                    return 1;\r\n                }\r\n\r\n\r\n                if (dropDown.length === 0) {\r\n                    self.methods.comboDropDown.apply(self, []);\r\n                    dropDown = $(\"#\" + idDropdown);\r\n                }\r\n\r\n                if (e.shiftKey && e.keyCode) {\r\n                    dropDown.remove();\r\n                    return 0;\r\n                }\r\n\r\n                if (27 == e.keyCode) {\r\n                    self.methods.setDisplayValue.apply(self, [self.selectedValue]);\r\n                    dropDown.remove();\r\n                }\r\n\r\n                if (9 == e.keyCode || 13 == e.keyCode) {\r\n                    if (active.length > 0) {\r\n                        self.config.inputCombo.val(active.text());\r\n                    }\r\n                    if (self.settings.isSearchable) {\r\n                        self.methods.validateValueInDatasource();\r\n                    } else {\r\n                        self.methods.setValue.apply(self, [active.data('value')]);\r\n                    }\r\n                    dropDown.remove();\r\n                    return 1;\r\n                }\r\n\r\n                if (e.keyCode == '38' || e.keyCode == '37') {\r\n                    // up arrow\r\n                    self.methods.selectPreviousElement.apply(self, [dropDown]);\r\n                    return 0;\r\n                }\r\n                else if (e.keyCode == '40' || e.keyCode == '39') {\r\n                    // down arrow\r\n                    self.methods.selectNextElement.apply(self, [dropDown]);\r\n                    return 0;\r\n                }\r\n\r\n                if (e.keyCode == 36) {\r\n                    self.methods.selectFirstElement.apply(self, [dropDown]);\r\n                    return 0;\r\n\r\n                } else if (e.keyCode == 35) {\r\n                    self.methods.selectLastElement.apply(self, [dropDown]);\r\n                    return 0;\r\n\r\n                }\r\n\r\n                return 1;\r\n            },\r\n            /*\r\n            *   KeyUp listener\r\n            */\r\n            keyUpFunction: function (e) {\r\n                var self = this;\r\n                var idDropdown = \"dd-\" + plg.config.inputCombo.attr(\"id\");\r\n                var dropDown = $(\"#\" + idDropdown);\r\n\r\n                e = e ? e : window.event;\r\n\r\n                if (e.altKey || e.ctrlKey || e.metaKey || 50 == e.keyCode || 13 == e.keyCode || 9 == e.keyCode || 27 == e.keyCode || e.keyCode == '38' || e.keyCode == '40' || e.shiftKey && e.keyCode || e.keyCode == 36 || e.keyCode == 35 || e.keyCode == 33 || e.keyCode == 34) {\r\n                    return 0;\r\n                }\r\n\r\n                if (dropDown.length === 0) {\r\n                    self.methods.comboDropDown.apply(self, []);\r\n                    dropDown = $(\"#\" + idDropdown);\r\n                }\r\n\r\n                self.methods.selectItemByKeyUp.apply(self, []);\r\n\r\n                return 1;\r\n            },\r\n            /*\r\n            * Select letter by letter\r\n            */\r\n            selectItemByKeyUp: function () {\r\n                var self = this, objSelected;\r\n\r\n                var idDropdown = \"dd-\" + plg.config.inputCombo.attr(\"id\");\r\n                var dropDown = $(\"#\" + idDropdown);\r\n\r\n\r\n                $('.active', dropDown).removeClass('active');\r\n\r\n                var selectedKey = (self.settings.isSearchable) ? self.methods.findDataByValue(plg.config.inputCombo.val()) : -1;\r\n\r\n                if (selectedKey !== -1) {\r\n                    objSelected = $(\"li[data-value='\" + selectedKey.id + \"']\", dropDown);\r\n                    objSelected.addClass(\"active\");\r\n                } else {\r\n                    objSelected = $('li.ui-selected', dropDown);\r\n                }\r\n\r\n                if (dropDown.length > 0 && objSelected.length > 0) {\r\n                    scrollPosition = parseInt(objSelected.position().top);\r\n                    dropDown.scrollTop(scrollPosition);\r\n                } else {\r\n                    self.methods.setValue.apply(self, [self.selectedValue]);\r\n                }\r\n            },\r\n            selectFirstElement: function (dropDown) {\r\n                var self = this;\r\n                var actual = $(\"li:first\", dropDown);\r\n                $('li', dropDown).removeClass(\"active\");\r\n                actual.addClass(\"active\");\r\n                scrollPosition = actual.position().top;\r\n                dropDown.scrollTop(scrollPosition);\r\n\r\n                plg.config.inputCombo.val($(actual).text());\r\n\r\n\r\n            },\r\n            selectLastElement: function (dropDown) {\r\n                var self = this,\r\n                    actual = $(\"li:last\", dropDown);\r\n                $('li', dropDown).removeClass(\"active\");\r\n                actual.addClass(\"active\");\r\n                scrollPosition = actual.position().top;\r\n                dropDown.scrollTop(scrollPosition);\r\n\r\n                plg.config.inputCombo.val($(actual).text());\r\n\r\n            },\r\n            /*\r\n            * Handler key Up\r\n            */\r\n            selectPreviousElement: function (dropDown) {\r\n                var self = this;\r\n                var scrollPosition = 0;\r\n                var actual = $(\"li.active\", dropDown);\r\n\r\n                if (actual.length === 0) {\r\n                    actual = $(\"li:first\", dropDown);\r\n                }\r\n                var previous = actual.prev();\r\n\r\n                if (previous.length != 0) {\r\n                    actual.removeClass(\"active\");\r\n                    $(previous).addClass(\"active\");\r\n                    scrollPosition = $(previous).position().top;\r\n\r\n                    dropDown.scrollTop(scrollPosition);\r\n                    plg.config.inputCombo.val($(previous).text());\r\n                }\r\n\r\n            },\r\n            /*\r\n            *Handler key Down\r\n            */\r\n            selectNextElement: function (dropDown) {\r\n                var self = this;\r\n                var scrollPosition = 0;\r\n                var actual = $(\"li.active\", dropDown);\r\n\r\n                if (actual.length === 0) {\r\n                    actual = $(\"li:first\", dropDown);\r\n                }\r\n                var next = actual.next();\r\n\r\n                if (next.length != 0) {\r\n                    actual.removeClass(\"active\");\r\n                    $(next).addClass(\"active\");\r\n                    scrollPosition = $(next).position().top;\r\n\r\n                    dropDown.scrollTop(scrollPosition);\r\n                    plg.config.inputCombo.val($(next).text());\r\n                }\r\n\r\n            },\r\n            /*\r\n            *   Handler to react when a combo item is selected\r\n            */\r\n            onComboItemSelected: function (val) {\r\n                var self = this;\r\n                var valValue = val.value.toString();\r\n                var selectedLabel = val.text || \"\";\r\n\r\n                if (valValue === \"\") {\r\n                    self.config.inputCombo.val(selectedLabel);\r\n                } else {\r\n                    self.config.inputCombo.val(selectedLabel);\r\n                }\r\n\r\n                self.methods.setValue.apply(self, [valValue]);\r\n            },\r\n            setValue: function (val) {\r\n                var self = this;\r\n                self.config.inputCombo.data('value', val);\r\n                /**\r\n                Fired when a combo change\r\n\r\n                @event comboChange \r\n                @param {String} type comboChange\r\n                @param {String} message \r\n                @param {Date} time \r\n                @param {Object} Jquery Object HTML \r\n                **/\r\n                var control = self.config.inputCombo,\r\n                        controlProperties = {\r\n                            type: \"comboChange\",\r\n                            message: \"combo change\",\r\n                            time: new Date(),\r\n                            ui: control\r\n                        };\r\n\r\n                plg.settings.onChange(controlProperties);\r\n\r\n                $.event.trigger(controlProperties);\r\n            },\r\n            /*\r\n            *   Sets the value in the rendered control\r\n            */\r\n            setDisplayValue: function (value) {\r\n                var self = this;\r\n                var comboValue = '';\r\n                var comboValueValid = true;\r\n\r\n                value = (plg.settings.itemValue) ? plg.settings.itemValue : plg.methods.itemValue;\r\n\r\n                if (value !== null) {\r\n                    plg.config.inputCombo.val(comboValue);\r\n                } else if (value === null) {\r\n                    plg.config.inputCombo.val(comboValue);\r\n                }\r\n\r\n            },\r\n            /*\r\n            *   Sets the value in the rendered control\r\n            */\r\n            clearDisplayValue: function () {\r\n                var self = this;\r\n                plg.config.inputCombo.val('');\r\n                self.value = self.properties.value = self.selectedValue;\r\n            },\r\n            /*\r\n            *   Returns the selected value in the template\r\n            */\r\n            getSelectedValue: function () {\r\n                var self = this;\r\n                return self.selectedValue;\r\n            },\r\n            recalculateComboOffset: function (dropDwn, objParent) {\r\n                if (bizagi.util.isIE() && (bizagi.util.getInternetExplorerVersion() == 9)) {\r\n                    if (dropDwn.width() !== objParent.width()) {\r\n                        var offset = objParent.width() - dropDwn.width();\r\n                        dropDwn.width(objParent.width() + offset);\r\n                    }\r\n                }\r\n            },\r\n            itemValue: function (obj) {\r\n                var val = '';\r\n                if (obj.itemValue) {\r\n                    val = obj.itemValue(obj);\r\n                } else {\r\n                    if (typeof obj.value === 'string' || typeof obj.value === 'number') {\r\n                        val = obj.value;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            itemText: function (obj) {\r\n                var val = '';\r\n                if (obj.itemValue) {\r\n                    val = obj.itemText(obj);\r\n                } else {\r\n                    if (typeof obj.text === 'string') {\r\n                        val = obj.text;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            /**\r\n            * Destroy ComboBox\r\n            *\r\n            *   $('selector').uicombo('destroy');\r\n            *\r\n            * @method destroy\r\n            * @return {Object} Jquery Empty Object\r\n            */\r\n            destroy: function (op) {\r\n                var self = $(this);\r\n                if (self.attr('role') === op.namespace) {\r\n                    self.empty();\r\n                } else {\r\n                    $.error('No es posible eliminar un control con un namespace diferente: [role: ' + op.namespace + ']');\r\n                }\r\n            },\r\n            /*\r\n            *   Select the related item (syntax = {text:\"item1\", value:1})\r\n            */\r\n            selectItem: function (item) {\r\n                var self = this;\r\n                var control = $('.biz-wp-combo-input', self);                \r\n                control.val(item.text);\r\n                control.data('value', item.value);\r\n            },\r\n        };\r\n\r\n\r\n\r\n        if (typeof options != 'object' && options) {\r\n\r\n            $.extend(plg.settings, params, plg.config);\r\n            return plg.methods[options].apply(this, [plg.settings]);\r\n\r\n        } else if (typeof options === 'object' || !options || options === undefined) {\r\n\r\n            $.extend(plg.settings, options, plg.config);\r\n            return this.each(function () {\r\n                plg.methods.init.apply(this, [plg.settings]);\r\n            });\r\n\r\n        } else {\r\n\r\n            $.error('Method ' + options + ' does not exist on jQuery.combo');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.bizagi.ui.controls.uicombo.plugin = $.fn.uicombo;\r\n\r\n} (jQuery));","/**\r\nPlugin to create WorkPortal RadioButtons...\r\n\r\n    var options = {\r\n        data: {},\r\n        css:'customCSS'\r\n    };\r\n\r\n    $('selector').uicheckbox(options);\r\n\r\n    $(document).on(\"checkboxChange\", function(obj){\r\n        console.log(obj.message, obj.ui, obj.ui.val());\r\n    });\r\n\r\n@class $.fn.uicheckbox \r\n@constructor uicheckbox\r\n**/\r\n(function ( $ ) {\r\n    \"use strict\";\r\n\r\n    $.fn.uicheckbox = function(options, params) {\r\n\r\n        var plg = this;\r\n\r\n        plg.config = {\r\n            namespace:$.bizagi.ui.controls.uicheckbox.namespace,\r\n            cssComponent:$.bizagi.ui.controls.uicheckbox.css\r\n        };\r\n\r\n        plg.settings = {\r\n            /**\r\n            DataSource to create a checkbox Control\r\n\r\n                var data = [\r\n                            {   \r\n                                value:value,\r\n                                text:'checkbox'\r\n                            }\r\n                        ];\r\n\r\n            @property data \r\n            @type Object\r\n            @default \"{}\"\r\n            **/\r\n            data:{},\r\n            nameTemplate: $.bizagi.ui.controls.uicheckbox.tmpl,\r\n            /**\r\n            Function to modify values\r\n\r\n            @property itemValue \r\n            @type Function\r\n            @param {Object} Object with value\r\n\r\n                {value:xxx}\r\n\r\n            @default \"null\"\r\n            **/\r\n            itemValue: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property itemText \r\n            @type Function\r\n            @param {Object} Object with text\r\n\r\n                {text:xxx}\r\n            \r\n            @default \"null\"\r\n            **/\r\n            itemText: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property css \r\n            @type String\r\n            @default \"\"\r\n            **/\r\n            css:'',\r\n            itemChecked: 0,\r\n            getTemplate: function(name){\r\n                return bizagi.getTemplate(name);\r\n            },\r\n            /**\r\n            Function exceute when is ready\r\n\r\n            @property onComplete \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onComplete: function(){},\r\n            /**\r\n            Function execute when controls is change\r\n\r\n            @property onChange \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onChange: function(){}\r\n        };\r\n\r\n        plg.methods = {\r\n            init:function(op){\r\n\r\n                var self = $(this);\r\n                var template = op.getTemplate(op.nameTemplate);\r\n\r\n                self.attr('role', op.namespace);\r\n                self.addClass(op.cssComponent);\r\n                self.addClass(op.css);\r\n\r\n                $.when($.get(template)).done(function(a){\r\n\r\n                    var nData = op.data;\r\n\r\n                    op.data.checkboxGroup = (op.checkboxGroup) ? op.checkboxGroup : plg.methods.generateNamecheckboxGroup();\r\n\r\n\r\n                    for(var i=0; i<nData.checkbox.length; i++){\r\n                        nData.checkbox[i].isChecked = false;\r\n                    }\r\n\r\n                    nData.checkbox[op.itemChecked].isChecked = true;\r\n\r\n                   var tmp = $.tmpl(a, nData, {\r\n                        itemValue: (op.itemValue) ? op.itemValue : plg.methods.itemValue,\r\n                        itemText: (op.itemText) ? op.itemText : plg.methods.itemText\r\n                    });\r\n\r\n                    self.append(tmp);\r\n\r\n\r\n                    tmp.find('.biz-wp-option-checkbox').each(function(index, value){\r\n                         if(op.data.checkbox[index].data){\r\n                            $.extend($(value).data(), op.data.checkbox[index].data);\r\n                         }\r\n                    });\r\n\r\n                    plg.settings.onComplete.apply(self, []);\r\n\r\n                    /**\r\n                    Fired when a checkbox change\r\n\r\n                    @event checkboxChange \r\n                    @param {String} type checkboxChange\r\n                    @param {String} message \r\n                    @param {Date} time \r\n                    @param {Object} Jquery Object HTML \r\n                    **/\r\n                    $('input[type=\"checkbox\"]',tmp).on('change', function(){\r\n                        var control = $(this);\r\n                        plg.settings.onChange(control);\r\n                        \r\n                        $.event.trigger({\r\n                            type: \"checkboxChange\",\r\n                            message: \"checkbox change\",\r\n                            time: new Date(),\r\n                            ui:control\r\n                        });\r\n                    });\r\n\r\n                    /**\r\n                    Fired when a checkbox is created\r\n\r\n                    @event checkboxCompleted \r\n                    @param {String} type checkboxCompleted\r\n                    @param {String} message\r\n                    @param {Date} time\r\n                    @param {Object} Jquery Object HTML \r\n                    **/\r\n                    $.event.trigger({\r\n                        type: \"checkboxCompleted\",\r\n                        message: \"checkbox is Completed\",\r\n                        time: new Date(),\r\n                        ui:self\r\n                    });\r\n\r\n                }).fail(function(){\r\n                    $.error('No se pudo cargar el template para generar las tablas');\r\n                });\r\n\r\n            },\r\n            generateNamecheckboxGroup:function(){\r\n                var self = this;\r\n\r\n                var d = new Date().getTime();\r\n                var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n                    var r = (d + Math.random()*16)%16 | 0;\r\n                    d = Math.floor(d/16);\r\n                    return (c=='x' ? r : (r&0x7|0x8)).toString(16);\r\n                });\r\n                return uuid;\r\n            },\r\n\r\n\r\n            itemValue : function(obj){\r\n                var val = '';\r\n                if(obj.itemValue){\r\n                    val = obj.itemValue(obj);\r\n                }else{\r\n                    if(typeof obj.value === 'string' || typeof obj.value === 'number'){\r\n                        val = obj.value;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            itemText : function(obj){\r\n                var val = '';\r\n                if(obj.itemValue){\r\n                    val = obj.itemText(obj);\r\n                }else{\r\n                    if(typeof obj.text === 'string'){\r\n                        val = obj.text;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            /**\r\n            * Destroy Checkboxes\r\n            *\r\n            *   $('selector').uicheckbox('destroy');\r\n            *\r\n            * @method destroy\r\n            * @return {Object} Jquery Empty Object\r\n            */\r\n            destroy:function(op){\r\n                var self = $(this);\r\n                if(self.attr('role') === op.namespace){\r\n                    self.empty();\r\n                }else{\r\n                    $.error('No es posible eliminar un control con un namespace diferente: [role: ' + op.namespace+']');\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n        \r\n        if(typeof options != 'object' && options) {\r\n\r\n                $.extend(plg.settings, params, plg.config);\r\n                return plg.methods[options].apply(this, [plg.settings]);\r\n\r\n        } else if( typeof options === 'object' || !options || options === undefined) {\r\n\r\n                $.extend(plg.settings, options, plg.config);\r\n                return this.each(function() {\r\n                    plg.methods.init.apply(this, [plg.settings]);\r\n                });\r\n\r\n        } else {\r\n\r\n                $.error('Method ' + options + ' does not exist on jQuery.checkbox');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.bizagi.ui.controls.uicheckbox.plugin = $.fn.uicheckbox;\r\n\r\n}( jQuery ));","/**\r\nPlugin to create WorkPortal RadioButtons...\r\n\r\n    var options = {\r\n        data: {},\r\n        css:'customCSS'\r\n    };\r\n\r\n    $('selector').uiradio(options);\r\n\r\n    $(document).on(\"radioChange\", function(obj){\r\n        console.log(obj.message, obj.ui, obj.ui.val());\r\n    });\r\n\r\n@class $.fn.uiradio \r\n@constructor uiradio\r\n**/\r\n(function ( $ ) {\r\n    \"use strict\";\r\n\r\n    \r\n\r\n    $.fn.uiradio = function(options, params) {\r\n\r\n        var plg = this;\r\n\r\n        plg.config = {\r\n            namespace:$.bizagi.ui.controls.uiradio.namespace,\r\n            cssComponent:$.bizagi.ui.controls.uiradio.css\r\n        };\r\n\r\n        plg.settings = {\r\n            /**\r\n            DataSource to create a uiradio Control\r\n\r\n                var data = [\r\n                            {   \r\n                                value:value,\r\n                                text:'radio'\r\n                            }\r\n                        ];\r\n\r\n            @property data \r\n            @type Object\r\n            @default \"{}\"\r\n            **/\r\n            data:{},\r\n            nameTemplate: $.bizagi.ui.controls.uiradio.tmpl,\r\n            /**\r\n            Function to modify values\r\n\r\n            @property itemValue \r\n            @type Function\r\n            @param {Object} Object with value\r\n\r\n                {value:xxx}\r\n\r\n            @default \"null\"\r\n            **/\r\n            itemValue: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property itemText \r\n            @type Function\r\n            @param {Object} Object with text\r\n\r\n                {text:xxx}\r\n            \r\n            @default \"null\"\r\n            **/\r\n            itemText: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property css \r\n            @type String\r\n            @default \"\"\r\n            **/\r\n            css:'',\r\n            getTemplate: function(name){\r\n                return bizagi.getTemplate(name);\r\n            },\r\n            /**\r\n            Function exceute when is ready\r\n\r\n            @property onComplete \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onComplete: function(){},\r\n            /**\r\n            Function execute when controls is change\r\n\r\n            @property onChange \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onChange: function(){}\r\n        };\r\n\r\n        plg.methods = {\r\n            init:function(op){\r\n\r\n                var self = $(this);\r\n                var template = op.getTemplate(op.nameTemplate);\r\n\r\n                self.attr('role', op.namespace);\r\n                self.addClass(op.cssComponent);\r\n                self.addClass(op.css);\r\n\r\n                $.when($.get(template)).done(function(a){\r\n\r\n                    var nData = op.data;\r\n\r\n                    op.data.radioGroup = (op.radioGroup) ? op.radioGroup : plg.methods.generateNameRadioGroup();\r\n\r\n                    var tmp = $.tmpl(a, nData, {\r\n                        itemValue: (op.itemValue) ? op.itemValue : plg.methods.itemValue,\r\n                        itemText: (op.itemText) ? op.itemText : plg.methods.itemText\r\n                    });\r\n\r\n                    self.append(tmp);\r\n\r\n\r\n                    tmp.find('.biz-wp-option-radio').each(function(index, value){\r\n                         if(op.data.radio[index].data){\r\n                            $.extend($(value).data(), op.data.radio[index].data);\r\n                         }\r\n                    });\r\n\r\n                    plg.settings.onComplete.apply(self, []);\r\n\r\n                    $('input[type=\"radio\"]',tmp).on('change', function(){\r\n                        var control = $(this);\r\n                        plg.settings.onChange(control);\r\n                        \r\n\r\n                        /**\r\n                        Fired when a radio change\r\n\r\n                        @event radioChange \r\n                        @param {String} type radioChange ...\r\n                        @param {String} message\r\n                        @param {Date} time\r\n                        @param {Object} Jquery Object HTML\r\n                        **/\r\n                        $.event.trigger({\r\n                            type: \"radioChange\",\r\n                            message: \"radio change\",\r\n                            time: new Date(),\r\n                            ui:control\r\n                        });\r\n                    });\r\n\r\n                    /**\r\n                    Fired when a radio is created\r\n\r\n                    @event radioCompleted \r\n                    @param {String} type radioCompleted\r\n                    @param {String} message\r\n                    @param {Date} time\r\n                    @param {Object} Jquery Object HTML \r\n                    **/\r\n                    $.event.trigger({\r\n                        type: \"radioCompleted\",\r\n                        message: \"radio is Completed\",\r\n                        time: new Date(),\r\n                        ui:self\r\n                    });\r\n\r\n                }).fail(function(){\r\n                    $.error('No se pudo cargar el template para generar las tablas');\r\n                });\r\n\r\n            },\r\n            generateNameRadioGroup:function(){\r\n                var self = this;\r\n\r\n                var d = new Date().getTime();\r\n                var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n                    var r = (d + Math.random()*16)%16 | 0;\r\n                    d = Math.floor(d/16);\r\n                    return (c=='x' ? r : (r&0x7|0x8)).toString(16);\r\n                });\r\n                return uuid;\r\n            },\r\n\r\n\r\n            itemValue : function(obj){\r\n                var val = '';\r\n                if(obj.itemValue){\r\n                    val = obj.itemValue(obj);\r\n                }else{\r\n                    if(typeof obj.value === 'string' || typeof obj.value === 'number'){\r\n                        val = obj.value;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            itemText : function(obj){\r\n                var val = '';\r\n                if(obj.itemValue){\r\n                    val = obj.itemText(obj);\r\n                }else{\r\n                    if(typeof obj.text === 'string'){\r\n                        val = obj.text;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            /**\r\n            * Destroy Radio Buttons\r\n            *\r\n            *   $('selector').uiradio('destroy');\r\n            *\r\n            * @method destroy\r\n            * @return {Object} Jquery Empty Object\r\n            */\r\n            destroy:function(op){\r\n                var self = $(this);\r\n                if(self.attr('role') === op.namespace){\r\n                    self.empty();\r\n                }else{\r\n                    $.error('No es posible eliminar un control con un namespace diferente: [role: ' + op.namespace+']');\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n        \r\n        if(typeof options != 'object' && options) {\r\n\r\n                $.extend(plg.settings, params, plg.config);\r\n                return plg.methods[options].apply(this, [plg.settings]);\r\n\r\n        } else if( typeof options === 'object' || !options || options === undefined) {\r\n\r\n                $.extend(plg.settings, options, plg.config);\r\n                return this.each(function() {\r\n                    plg.methods.init.apply(this, [plg.settings]);\r\n                });\r\n\r\n        } else {\r\n\r\n                $.error('Method ' + options + ' does not exist on jQuery.radio');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.bizagi.ui.controls.uiradio.plugin = $.fn.uiradio;\r\n\r\n}( jQuery ));","\r\n/**\r\nPlugin to create WorkPortal treeviews...\r\n\r\nvar options = {\r\ndata: {},\r\n};\r\n\r\n$('selector').uitreeview(options);\r\n\r\n@class $.fn.uitreeview \r\n@constructor uitreeview\r\n**/\r\n\r\n/*\r\n* jQuery UI MultiSelect @VERSION\r\n* Author: David Romero\r\n* Copyright (c) 2013 (http://www.bizagi.com)\r\n*\r\n* Depends:\r\n*  ui.core.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.treeview', {\r\n        options: {\r\n            list: [],\r\n            defaults: [],\r\n            _dataItems: [],\r\n            _config: {\r\n                _template: $.bizagi.ui.controls.uitreeview.tmpl,\r\n                _cssClass: $.bizagi.ui.controls.uitreeview.css,\r\n                _namespace: $.bizagi.ui.controls.uitreeview.namespace\r\n            },\r\n            SEARCH_MAX_LENGTH: 1\r\n        },\r\n        _create: function () {\r\n\r\n            var self = this;\r\n            var element = self.element;\r\n            var css = self.options._config._cssClass;\r\n\r\n            self.options._dataItems = [];\r\n\r\n            if (self.options.defaults.length) self._setDefaults();\r\n\r\n            element.addClass(css);\r\n\r\n            self.loader = new bizagi.ui.controls.tmplloader();\r\n\r\n            $.when(self.loader.loadTemplates(self._initializeTemplates())).done(function () {\r\n\r\n                element.append(self._renderContent());\r\n                self._eventHandlers();\r\n\r\n            });\r\n        },\r\n        _eventHandlers: function () {\r\n\r\n            var self = this, $items = $(\".biz-ui-controls-tree-item\", self.element);\r\n\r\n            $items.on('click', \".biz-ui-controls-treeview-row:first-child\", function (event) {\r\n\r\n                var $element = $(this);\r\n                var $target = $(event.target);\r\n\r\n                if ($target.is('i.biz-ui-controls-treeview-subitems')) {\r\n\r\n                    self._slideSubItems($element);\r\n\r\n                } else {\r\n\r\n                    if (!$target.is('input[type=checkbox]')) {\r\n\r\n                        var $checkbox = $target.siblings(\"input[type=checkbox]\");\r\n                        ($checkbox.prop('checked')) ? $checkbox.prop('checked', false) : $checkbox.prop('checked', true);\r\n                    }\r\n\r\n                    $element.toggleClass(\"biz-ui-controls-uitreeview-items-active\");\r\n                    self._setValue($element);\r\n                }\r\n\r\n                event.stopPropagation();\r\n            });\r\n        },\r\n        _slideSubItems: function ($element) {\r\n\r\n            var $subitems = $element.siblings(\"ul\");\r\n            $subitems.slideToggle(300);\r\n        },\r\n        _setValue: function ($element) {\r\n\r\n            var self = this;\r\n            var dataItems = self.options._dataItems;\r\n            var value = $element.data(\"value\");\r\n            var text = $element.data(\"text\");\r\n\r\n            if ($element.hasClass(\"biz-ui-controls-uitreeview-items-active\")) {\r\n\r\n                dataItems.push({ text: text, value: value });\r\n            } else {\r\n\r\n                var position = $.map(dataItems, function (obj, i) {\r\n                    if (obj.value == value) { return i; }\r\n                });\r\n\r\n                dataItems.splice(position[0], 1);\r\n            };\r\n\r\n            self._trigger('checkItem');\r\n        },\r\n        getDataItems: function () {\r\n\r\n            var self = this;\r\n            return self.options._dataItems;\r\n        },\r\n        setList: function (list) {\r\n\r\n            var self = this;\r\n            self.options.list = list;\r\n            self.options._dataItems = [];\r\n\r\n            self._refresh();\r\n        },\r\n        getList: function () {\r\n\r\n            var self = this;\r\n            return self.options.list;\r\n        },\r\n        _refresh: function () {\r\n\r\n            var self = this;\r\n\r\n            self.element.empty().append(self._renderContent());\r\n            self._eventHandlers();\r\n        },\r\n        _renderContent: function () {\r\n\r\n            var self = this;\r\n            var list = self.options.list;\r\n            var itemsTemplate = self.loader.getTemplate(\"items\");\r\n\r\n            return $.tmpl(itemsTemplate, { list: list }, {\r\n                itemValue: $.proxy(self._itemValue, self),\r\n                itemText: $.proxy(self._itemText, self),\r\n                renderSubItems: $.proxy(self._renderSubItems, self),\r\n                setDefaults: $.proxy(self._setDefaults, self)\r\n            });\r\n\r\n        },\r\n        _initializeTemplates: function () {\r\n\r\n            var self = this;\r\n            var tmpl = self.options._config._template;\r\n\r\n            return {\r\n                \"items\": (bizagi.getTemplate(tmpl) + \"#bizagi-ui-controls-uitreeview-items\"),\r\n                \"subitems\": (bizagi.getTemplate(tmpl) + \"#bizagi-ui-controls-uitreeview-subitems\")\r\n            };\r\n        },\r\n        _renderSubItems: function (obj) {\r\n\r\n            var self = this;\r\n\r\n            var subItemsTemplate = self.loader.getTemplate(\"subitems\");\r\n\r\n            var tmp = $.tmpl(subItemsTemplate, obj, {\r\n                itemValue: $.proxy(self._itemValue, self),\r\n                itemText: $.proxy(self._itemText, self),\r\n                renderSubItems: $.proxy(self._renderSubItems, self),\r\n                setDefaults: $.proxy(self._setDefaults, self)\r\n            });\r\n\r\n            return tmp.html();\r\n        },\r\n        _destroy: function () {\r\n\r\n            var self = this;\r\n            self.options._dataItems = [];\r\n        },\r\n        _itemValue: function (obj) {\r\n\r\n            var self = this;\r\n            var val = '';\r\n            if (self.options.itemValue) {\r\n                val = self.options.itemValue(obj);\r\n            } else {\r\n                if (typeof obj.value === 'string' || typeof obj.value === 'number') {\r\n                    val = obj.value;\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n        _itemText: function (obj) {\r\n\r\n            var self = this;\r\n            var val = '';\r\n            if (self.options.itemText) {\r\n                val = self.options.itemText(obj);\r\n            } else {\r\n                if (typeof obj.text === 'string') {\r\n                    val = obj.text;\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n        _setDefaults: function (obj) {\r\n\r\n            var self = this;\r\n            var defaults = self.options.defaults;\r\n            var list = self.options.list;\r\n\r\n            var text = self._itemText(obj);\r\n            var value = self._itemValue(obj);\r\n\r\n            self.options._dataItems.push({ text: text, value: value });\r\n\r\n            return \"\";\r\n        }\r\n\r\n    });\r\n\r\n})(jQuery);","/*\r\n* jQuery UI MultiSelect @VERSION\r\n* Author: David Romero\r\n* Copyright (c) 2013 (http://www.bizagi.com)\r\n*\r\n* Depends:\r\n*  ui.core.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.multiSelect', {\r\n        options: {\r\n            list: [],\r\n            label: \"MyLabel\",\r\n            _dataItems: [],\r\n            _config: {\r\n                _template: $.bizagi.ui.controls.uimultiselect.tmpl,\r\n                _cssClass: $.bizagi.ui.controls.uimultiselect.css,\r\n                _namespace: $.bizagi.ui.controls.uimultiselect.namespace\r\n            },\r\n            SEARCH_MIN_LENGTH: 3\r\n        },\r\n        _create: function () {\r\n\r\n            var self = this;\r\n            var $element = self.element;\r\n\r\n            self.options._dataItems = [];\r\n\r\n            $.when(self._renderContent()).done(function (content) {\r\n\r\n                $element.append(content);\r\n                var $input = $element.find('input[type=text]');\r\n\r\n                $input.autocomplete(\r\n                    {\r\n                        source: self._getDataSource(),\r\n                        minLength: self.options.SEARCH_MIN_LENGTH,\r\n                        messages:\r\n                            {\r\n                                noResults: null\r\n                            },\r\n                        select: function (event, ui) {\r\n                            var value = $.grep(self.options.list, function (obj) {\r\n                                return self._itemValue(obj) == ui.item.id;\r\n                            });\r\n\r\n                            self._prependElements(value[0]);\r\n                        },\r\n                        close: function () {\r\n                            $input.val(\"\");\r\n                        }\r\n                    });\r\n\r\n                self._eventHandlers();\r\n            });\r\n\r\n        },\r\n        getDataItems: function () {\r\n\r\n            var self = this;\r\n            return self.options._dataItems;\r\n\r\n        },\r\n        setList: function (list) {\r\n\r\n            var self = this;\r\n            self.options.list = list;\r\n\r\n            self._refresh();\r\n        },\r\n        getList: function () {\r\n\r\n            var self = this;\r\n            return self.options.list;\r\n        },\r\n        _initializeTemplates: function () {\r\n\r\n            var self = this;\r\n            var tmpl = self.options._config._template;\r\n\r\n            return {\r\n                \"multiselect\": (bizagi.getTemplate(tmpl))\r\n            };\r\n        },\r\n        _renderContent: function () {\r\n\r\n            var self = this;\r\n            var $element = self.element;\r\n            var tmpl = self.options._config._template;\r\n            var css = self.options._config._cssClass;\r\n            var label = self.options.label;\r\n\r\n            $element.addClass(css);\r\n            self.loader = new bizagi.ui.controls.tmplloader();\r\n\r\n            return $.when(self.loader.loadTemplates(self._initializeTemplates())).pipe(function () {\r\n                var tmpl = self.loader.getTemplate(\"multiselect\");\r\n                return $.tmpl(tmpl, { label: label });\r\n            });\r\n        },\r\n        _refresh: function () {\r\n\r\n            var self = this;\r\n            var $input = self.element.find('input[type=text]');\r\n\r\n            $input.parent('li').siblings('li').remove();\r\n            self.options._dataItems = [];\r\n            $input.autocomplete(\"option\", \"source\", self._getDataSource());\r\n        },\r\n        _getDataSource: function () {\r\n\r\n            var self = this;\r\n            var data = [];\r\n\r\n            $.each(self.options.list, function (key, val) {\r\n                data.push({ label: self._itemText(val), value: self._itemText(val), id: self._itemValue(val) });\r\n            });\r\n\r\n            return data;\r\n        },\r\n        _prependElements: function (value) {\r\n\r\n            var self = this;\r\n            var $element = self.element;\r\n            var dataItems = self.options._dataItems;\r\n            var $input = $element.find('input[type=text]');\r\n\r\n            var n = $.grep(dataItems, function (obj) {\r\n                return obj.value == self._itemValue(value);\r\n            });\r\n\r\n            if (!n.length) {\r\n                dataItems.push({ text: self._itemText(value), value: self._itemValue(value) });\r\n                $input.parent().before('<li class=\"selected-item\" data-value=\"' + self._itemValue(value) + '\"><label>' + self._itemText(value) + '</label><a class=\"closebutton\"></a></li>');\r\n                self._trigger('addItem');\r\n            }\r\n\r\n        },\r\n        _itemValue: function (obj) {\r\n\r\n            var self = this;\r\n            var val = '';\r\n            if (self.options.itemValue) {\r\n                val = self.options.itemValue(obj);\r\n            } else {\r\n                if (typeof obj.value === 'string' || typeof obj.value === 'number') {\r\n                    val = obj.value;\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n        _itemText: function (obj) {\r\n\r\n            var self = this;\r\n            var val = '';\r\n            if (self.options.itemText) {\r\n                val = self.options.itemText(obj);\r\n            } else {\r\n                if (typeof obj.text === 'string') {\r\n                    val = obj.text;\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n        _destroy: function () {\r\n\r\n            var self = this;\r\n            self.options._dataItems = [];\r\n        },\r\n        _eventHandlers: function () {\r\n\r\n            var self = this;\r\n            var $element = self.element;\r\n            var $input = $element.find('input[type=text]');\r\n            var dataItems = self.options._dataItems;\r\n\r\n            $(\"ul\", $element).on(\"click\", \"a.closebutton\", function (event) {\r\n\r\n                event.preventDefault();\r\n\r\n                var value = $(event.target).closest(\"li\").data('value');\r\n\r\n                var position = $.map(dataItems, function (obj, i) {\r\n                    if (obj.value == value) { return i; }\r\n                });\r\n\r\n                dataItems.splice(position[0], 1);\r\n                $(this).parent().remove();\r\n\r\n                self._trigger('removeItem');\r\n            });\r\n\r\n            $element.on(\"click\", function (event) {\r\n                $input.focus();\r\n            });\r\n\r\n            $input.on(\"keydown\", function (event) {\r\n\r\n                if (event.keyCode == 13) {\r\n\r\n                    event.preventDefault();\r\n                }\r\n\r\n            });\r\n\r\n        }\r\n    });\r\n\r\n})(jQuery);","/**\r\n *   Name: BizAgi Workportal Async controller\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   This script will define a base class to Async Controller\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.async\", {\r\n    ASYNC_CHECK_TIMER: 3000\r\n}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n    },\r\n\r\n    /*\r\n     *   Returns the widget name\r\n     */\r\n    getWidgetName: function() {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC;\r\n    },\r\n    /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\r\n    renderContent: function() {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        // Check the status for the async execution\r\n        self.checkAsycnExecutionState(defer);\r\n\r\n        return defer.promise();\r\n    },\r\n    /**\r\n     *  Check execution state every time is called\r\n     */\r\n    checkAsycnExecutionState: function(defer) {\r\n        var self = this;\r\n\r\n        $.when(self.dataService.getAsynchExecutionState({\r\n            idCase: self.params.idCase\r\n        })).done(function(response) {\r\n            var template = self.getTemplate(\"async\");\r\n            \r\n            // verify errors in response\r\n            if(response.state == \"Error\" && response.errorMessage != undefined){\r\n                // Change default error\r\n                response.errorMessage = bizagi.localization.getResource(\"render-async-error\");\r\n            }\r\n            \r\n            // Render base template\r\n            self.content = $.tmpl(template, response);\r\n\r\n            // Check for finish signal\r\n            if (response.state == \"Processing\") {\r\n                // Check for non-error message\r\n                if (response.errorMessage.length == 0) {\r\n                    setTimeout(function() {\r\n                        // Refresh widget after a timer\r\n                        self.publish(\"changeWidget\", self.params);\r\n\r\n                    }, self.Class.ASYNC_CHECK_TIMER);\r\n                }\r\n\r\n            } else if (response.state == \"Finished\") {\r\n\r\n                // Execute routing\r\n                self.publish(\"executeAction\", {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: self.params.idCase\r\n                });\r\n            }\r\n\r\n            // Resolve main deferred\r\n            defer.resolve(self.content);\r\n        });\r\n    }\r\n\r\n});\r\n\r\n","/**\r\n * Admin module to Asynchronous ECM Upload Jobs\r\n * \r\n * @author David Andrés Niño\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.asyncecm.upload\", {}, {\r\n    /*\r\n     *   Returns the widget name\r\n     */\r\n    getWidgetName: function() {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD;\r\n    },\r\n    /*\r\n     *   Renders the content for the current controller\r\n     */\r\n    renderContent: function() {\r\n        var self = this;\r\n        var template = self.getTemplate(\"async.ecm.upload\");\r\n        var content = self.content = $.tmpl(template);\r\n\r\n        return content;\r\n    }\r\n});","/**\r\n * Admin module to Asynchronous ECM Upload Jobs\r\n * \r\n * @author David Andrés Niño\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.asyncecm.upload.extend(\"bizagi.workportal.widgets.asyncecm.upload\", {}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"async.ecm.upload\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.asyncecm.upload\").concat(\"#ui-bizagi-workportal-widget-async-ecm-upload\"),\r\n            \"async.ecm.pending.jobs\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.asyncecm.upload\").concat(\"#ui-bizagi-workportal-widget-async-ecm-upload-table-pending-jobs\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        self.enableUI = true;\r\n\r\n        self.renderAsyncECMUpload();\r\n\r\n        self.asyncECMUploadTypes = {\r\n            NOT_RUNNED : 1,\r\n            RUNNING : 2,\r\n            RUN_FINNISHED_OK : 3,\r\n            RUN_FINNISHED_WITH_ERROR : 4\r\n        };\r\n    },\r\n\r\n    updateEcmAllScheduledJobs: function () {\r\n        var self = this,\r\n            content = self.getContent();\r\n\r\n        \r\n        $(\"#async-emc-list-content\", content).empty();\r\n        $(\"#async-emc-list-content\", content).loadingMessage();\r\n\r\n\r\n        $.when(self.dataService.getEcmAllScheduledJobs()).done(function (result) {\r\n            self.renderAllScheduledJobs(result);\r\n        }).fail(function (error) {\r\n            //console.log(\"getEcmPendingScheduledJobs error\", error);\r\n        });\r\n        /**/\r\n    },\r\n\r\n    renderAsyncECMUpload:function () {\r\n        console.log(\"renderAsyncECMUpload ready\");\r\n\r\n        var self = this,\r\n            content = self.getContent();\r\n\r\n        self.updateEcmAllScheduledJobs();\r\n    },\r\n\r\n    renderAllScheduledJobs:function (result) {\r\n\r\n        var self = this,\r\n                content = self.getContent();\r\n\r\n        //Template Vars\r\n        var ecmAsyncTemplate = self.getTemplate(\"async.ecm.pending.jobs\");\r\n\r\n        //Clean the content\r\n        $(\"#async-emc-list-content\", content).empty();\r\n\r\n        //Enable UI\r\n        self.enableUI = true;\r\n\r\n        // Render Form\r\n        $.tmpl(ecmAsyncTemplate, {\r\n            jobs: result\r\n            }).appendTo($(\"#async-emc-list-content\", content));\r\n\r\n        // Add class to each even row\r\n        $('#async-emc-list-content tbody tr', content).each(function () {\r\n            if ($(this).index() % 2 < 1)\r\n                $(this).addClass('biz-ui-even');\r\n        });\r\n\r\n        //Add the hover events to the failure message content\r\n        $(\"#table-content .async-emc-item p\", content).hover(self.failureMessageHoverIn);\r\n\r\n        $(\".async-ecm-refresh\", content).click(function(){\r\n            if(self.enableUI) {\r\n                self.enableUI = false;\r\n                self.updateEcmAllScheduledJobs();\r\n            }\r\n                \r\n        });\r\n\r\n        \r\n\r\n        //Bind the click event for those elements wich his jobs status is \"Not Runned\" or \"Run finished with error\"\r\n        $(\"#table-content .async-emc-item .async-ecm-retry\",content).click(\r\n            function(event){\r\n                event.preventDefault();\r\n                self.retryECMPendingScheduledJob($(this).parent().attr(\"data-idjob\"));\r\n            }\r\n        );\r\n    },\r\n\r\n    retryECMPendingScheduledJob: function(idJob) {\r\n        var self = this,\r\n            content = self.getContent();\r\n\r\n        //Clear the content and sets a loading message\r\n        $(\"#async-emc-list-content\", content).empty();\r\n        $(\"#async-emc-list-content\", content).loadingMessage({\"customMessage\":\"Please wait\"});\r\n        \r\n        /**/\r\n        $.when(self.dataService.retryECMPendingScheduledJob(idJob)).done(function () {\r\n            \r\n            //console.log(\"renderAllScheduledJobs\");\r\n            self.updateEcmAllScheduledJobs();\r\n\r\n        }).fail(function (error) {\r\n            console.log(\"retryECMPendingScheduledJob error\");\r\n        });\r\n        /**/\r\n    },\r\n\r\n    failureMessageHoverIn: function(evt) {\r\n        if($(evt.currentTarget).text().length > 0)\r\n        {\r\n            $(evt.currentTarget).attr(\"title\", $(evt.currentTarget).text());\r\n        }\r\n    }\r\n});","/**\r\n * Application / Categories and Process tree\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.processtree\", {}, {\r\n    \r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE;\r\n    },\r\n    \r\n    /*\r\n    *   Renders the content for the current controller\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"processTree.links\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n\r\n        return content;\r\n    },\r\n\r\n    /*\r\n    * childs will implement this method\r\n    */\r\n    loadtemplates: function () { }\r\n});","/**\r\n * Application / Entities tree\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.entitiestree\", {}, {\r\n    \r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE;\r\n    },\r\n    \r\n    /*\r\n    *   Renders the content for the current controller\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"EntitiesTree.wrapper\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n\r\n        return content;\r\n    },\r\n\r\n    /*\r\n    * childs will implement this method\r\n    */\r\n    loadtemplates: function () { }\r\n});","/**\r\n* get users table\r\n* \r\n* @author Christian Collazos\r\n*/\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.userstable\", {}, {\r\n\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE;\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"usersTable.wrapper\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n\r\n        return content;\r\n    },\r\n\r\n    /*\r\n    * childs will implement this method\r\n    */\r\n    loadtemplates: function () { }\r\n});","/**\r\n * Admin / Tree widget\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.tree\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TREE;\r\n    },\r\n    \r\n    /*\r\n    *   Renders the content for the current controller\r\n    */\r\n    renderContent: function () {\r\n\r\n    },\r\n    \r\n    /*\r\n    * this will be implemented on each device\r\n    */\r\n    loadtemplates: function () { }\r\n\r\n});","/**\r\n * Name: BizAgi Desktop Widget Process Tree\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.processtree.extend(\"bizagi.workportal.widgets.processtree\", {}, {\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        self.showTitle = (params.showTitle != undefined) ? params.showTitle:true;\r\n        self.searchKeyResource=params.searchKeyResource || \"workportal-widget-processTree-search-in\";\r\n        self.searchKeyResource=bizagi.localization.getResource(self.searchKeyResource);\r\n        self.svgIconsMode=params.svgIconsMode || false;\r\n\r\n        self.processesTreeNew = params.newDesign;\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"processTree.links\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.processtree\").concat(\"#ui-bizagi-workportal-widget-processTree-links\"),\r\n            \"processTree.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.processtree\").concat(\"#ui-bizagi-workportal-widget-processTree-wrapper\"),\r\n            \"processTree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.processtree\").concat(\"#ui-bizagi-workportal-widget-processTree\"),\r\n            \"processTree.selected\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.processtree\").concat(\"#ui-bizagi-workportal-widget-processTree-selected\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"processTree.links\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, { showTitle: self.showTitle });\r\n\r\n        // Override canvas if it has been defined\r\n        if (self.params.canvas) {\r\n            content = self.content = self.params.canvas.html(content);\r\n        }\r\n\r\n        return content;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        //load templates\r\n        self.loadtemplates();\r\n        //load initial data\r\n        self.setupData();\r\n    },\r\n\r\n    /*\r\n    * Load template vars\r\n    */\r\n    loadtemplates: function () {\r\n        var self = this;\r\n        self.applicationTreeWrapperTmpl = self.getTemplate(\"processTree.wrapper\");\r\n        self.applicationTreeTmpl = self.getTemplate(\"processTree\");\r\n        self.applicationTreeSelectedTmpl = self.getTemplate(\"processTree.selected\");\r\n    },\r\n\r\n    /*\r\n    * Setup form data\r\n    */\r\n    setupData: function () {\r\n        var self = this;\r\n        self.treeRouteSelected = [];\r\n        self.treeRouteText = \"\";\r\n\r\n        $.when(self.setupInitialData()).done(function () {\r\n            self.setupLinks();\r\n        });\r\n    },\r\n\r\n    /*\r\n    * Load form data\r\n    */\r\n    setupInitialData: function () {\r\n        var self = this,\r\n            content = self.getContent(),\r\n            def = $.Deferred();\r\n\r\n        self.treeRouteSelected = [];\r\n\r\n        //append tree to wrapper\r\n        $.when($.tmpl(self.applicationTreeWrapperTmpl, {}), $.tmpl(self.applicationTreeSelectedTmpl, { searchKeyResource: self.searchKeyResource })).done(function (treeWrapper, processSelected) {\r\n            content.append(treeWrapper);\r\n            content.append(processSelected);\r\n            def.resolve();\r\n        });\r\n        return def.promise();\r\n    },\r\n    /*\r\n    * Implement links behaviour\r\n    */\r\n    setupLinks: function () {\r\n        var self = this,\r\n            content = self.getContent();\r\n\r\n        var params = { action: \"Applications\" };\r\n\r\n        if(self.params.userId){\r\n            params.userId = self.params.userId\r\n        }\r\n        self.showSelectedProcessLabelWhenAllApplicationsSelected(); //At the beginning 'all applications' option is selected\r\n        $(\"#allAppsLink\", content).click(function () {\r\n            self.showSelectedProcessLabelWhenAllApplicationsSelected();\r\n            self.selectAllApplications(content);\r\n        });\r\n        $(\"#allAppsLinkSelected\", content).click(function () {\r\n            self.showSelectedProcessLabelWhenAllApplicationsSelected();\r\n            self.selectAllApplications(content);\r\n        });\r\n\r\n        $(\"#selectAppLink\", content).click(function () {\r\n             self.hideSelectedProcessLabelWhenAllApplicationsNotSelected();\r\n             self.selectOneAplication(content, params);  \r\n        });\r\n        $(\"#selectAppLinkSelected\", content).click(function () {\r\n             self.hideSelectedProcessLabelWhenAllApplicationsNotSelected();\r\n             self.selectOneAplication(content, params);  \r\n        });\r\n    },\r\n    showSelectedProcessLabelWhenAllApplicationsSelected: function(){\r\n        var self = this,\r\n        content = self.getContent();\r\n        if(self.processesTreeNew === true){\r\n            $(\"#allAppsLinkSelected\", content).data('allAppSelected', true); //To know when all applications radio button option has been selected\r\n            $(\"#searchInLabel\", content).parent().parent().parent().show(); //To show th label that indicates All applications are selected\r\n        } \r\n    },\r\n    hideSelectedProcessLabelWhenAllApplicationsNotSelected: function(){\r\n        var self = this,\r\n        content = self.getContent();\r\n        if(self.processesTreeNew === true){\r\n            $(\"#allAppsLinkSelected\", content).data('allAppSelected', false);\r\n            $(\"#searchInLabel\", content).parent().parent().parent().hide(); //To hide th label that indicates All applications are selected\r\n        }\r\n    },\r\n    changeRadioIcon: function(param, content){\r\n        if(param == \"all\"){\r\n            $(\"#allAppsLinkSelected\", content).addClass(\"biz-wp-tree-selected-option\");\r\n            $(\"#selectAppLinkSelected\", content).removeClass(\"biz-wp-tree-selected-option\");\r\n            $(\"#selectAppLinkSelected\", content).addClass(\"biz-wp-tree-not-selected-option\");\r\n        }\r\n        else if(param == \"one\"){\r\n            $(\"#selectAppLinkSelected\", content).addClass(\"biz-wp-tree-selected-option\");\r\n            $(\"#allAppsLinkSelected\", content).removeClass(\"biz-wp-tree-selected-option\");\r\n            $(\"#allAppsLinkSelected\", content).addClass(\"biz-wp-tree-not-selected-option\");\r\n        }\r\n    },\r\n    selectAllApplications: function(content){\r\n        var self = this;\r\n        self.changeRadioIcon(\"all\", content);\r\n\r\n        $(\"#applicationsTree\", content).removeClass(\"hidden\");\r\n        $(\"#applicationsTree\", content).css(\"display\", \"none\");\r\n        $(\"#searchInLabel\", content).html(bizagi.localization.getResource(\"workportal-widget-processTree-all-applications\"));\r\n        self.treeRouteSelected = [];\r\n    },\r\n    selectOneAplication: function(content, params){\r\n        var self = this;\r\n        if($(\"#applicationsTree.hidden\", content).length){\r\n            var idSelected = self.getTreeRouteSelected()[0]\r\n            self.changeRadioIcon(\"one\", content);\r\n            \r\n            $(\"#applicationsTree\", content).removeClass(\"hidden\");\r\n            var selector = $('a[data-id='+idSelected+']', content).closest(\"#applicationsTree > .case-search-app-ul > li.biz-wp-tree-node\").siblings();\r\n            \r\n            selector.find(\"svg.bz-icon-arrow-down:not([style='display: none;'])\").each(function() {\r\n                self.expandOrCollapseArrows({\r\n                    expand: false,\r\n                    itemSelected: $(this)[0]\r\n                });\r\n            });\r\n            selector.find(\".biz-wp-tree-list\").empty();\r\n            return false;\r\n        }\r\n        if(self.params.byUser == true && (!self.params.userId || self.params.userId == \"\"))\r\n        {\r\n            $(\"#applicationsTree\", content).html(\"\");\r\n            $(\"#applicationsTree\", content).css(\"display\", \"inline-block\");\r\n            $(\"#applicationsTree\", content).append(\"<strong>Debe Seleccionar un usuario</strong>\");\r\n        }else{\r\n            $.when(self.dataService.getApplicationCategoriesList(params)).done(function (applicationList) {\r\n                self.changeRadioIcon(\"one\", content);\r\n                var appTree = $.tmpl(\r\n                    self.applicationTreeTmpl, \r\n                    { \r\n                        type: applicationList.type, \r\n                        items: applicationList.items, \r\n                        svg: self.svgIconsMode \r\n                    }\r\n                );\r\n                $(\"#applicationsTree\", content).html(\"\");\r\n                $(\"#applicationsTree\", content).css(\"display\", \"inline-block\");\r\n                $(\"#applicationsTree\", content).append(appTree);\r\n\r\n                //manage events\r\n                self.setTreeEvents(null, content);\r\n\r\n            }).fail(function (error) {\r\n                bizagi.log(error);\r\n            });\r\n        }\r\n    },\r\n    /*\r\n    * manage tree behaviour\r\n    */\r\n    setTreeEvents: function (idApp, content) {\r\n        var self = this;\r\n\r\n        //when select a process\r\n        $(\".biz-wp-tree-process\", content).click(function () {\r\n\r\n            var parentType = \"\";\r\n            var selectedRoute = [];\r\n            var selectedRouteText = \"\";\r\n            var item = this;\r\n            self.treeRouteSelected = [];\r\n            self.treeRouteSelected.push($(this)[0].getAttribute(\"data-id\"));\r\n\r\n            //get the route (app / category / process) selected            \r\n            while (parentType != \"app\") {\r\n                item = $(item).closest(\".biz-wp-tree-list\").parent().find(\"label\").first();\r\n                parentType = item[0].getAttribute(\"data-name\");\r\n                selectedRoute.push(item.html());\r\n                self.treeRouteSelected.push(item[0].getAttribute(\"data-id\"));\r\n            }\r\n\r\n            for (var i = selectedRoute.length - 1; i >= 0; i--) {\r\n                selectedRouteText += selectedRoute[i] + \" > \";\r\n            }\r\n\r\n            selectedRouteText += $(this).html();\r\n            self.treeRouteText = selectedRouteText;\r\n            //resolve deferred to let parent do something when user select any process\r\n            if (self.params.parentDef) {\r\n                self.params.parentDef.resolve();\r\n            }\r\n            $(self.params.canvas).trigger(\"processSelected\", 1);\r\n            \r\n            //update search in label with the selection\r\n            \r\n            $(\"#searchInLabel\", self.params.canvas).html(selectedRouteText);\r\n            if(self.processesTreeNew === true){\r\n                $(\"#searchInLabel\", self.params.canvas).parent().parent().parent().show(); //Show only when a process is selected\r\n            }\r\n            $(\"#applicationsTree\", self.params.canvas).addClass(\"hidden\");\r\n        });\r\n\r\n        //when select a category\r\n        $(\".biz-wp-tree-expand-icon\", content).click(function () {\r\n            var itemSelected = this;\r\n            var idItem = Number(itemSelected.getAttribute(\"data-id\"));\r\n            var idParent = \"\";\r\n\r\n            //when click a category remove the content to append the new content again and avoid repetition of data\r\n            $(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\").html(\"\");\r\n\r\n            //when tree item is closed and can be expanded\r\n            if ($(\"<b></b>\").addClass($(itemSelected).attr(\"class\")).hasClass(\"biz-wp-tree-expand-icon\")) {\r\n                \r\n                self.expandOrCollapseArrows({ \r\n                        expand: true, \r\n                        itemSelected: itemSelected \r\n                    });\r\n\r\n                if (idApp == null || itemSelected.getAttribute(\"name\") === \"app\") {\r\n                    idApp = idItem;\r\n                } else {\r\n                    idParent = idItem;\r\n                }\r\n\r\n                var params = {\r\n                    action: \"getCategories\",\r\n                    idApp: idApp,\r\n                    idCategory: idParent,\r\n                    filterStartEvent: false,\r\n                    authorizationContext: self.params.authorizationContext\r\n                };\r\n\r\n                if(self.params.userId){\r\n                    params.userId = self.params.userId\r\n                }\r\n                if(self.params.filterCaseSecurity){\r\n                    params.filterCaseSecurity = self.params.filterCaseSecurity\r\n                }\r\n\r\n                $.when(self.dataService.getApplicationCategoriesList(params)).done(function (categoriesList) {\r\n                    //load children and set events to them\r\n                    var appTree = $.tmpl(\r\n                        self.applicationTreeTmpl, \r\n                        { \r\n                            type: categoriesList.type, \r\n                            items: categoriesList.processes, \r\n                            svg: self.svgIconsMode \r\n                        }\r\n                    );\r\n                    $(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\").append(appTree);\r\n                    self.setTreeEvents(idApp, $(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\"));\r\n\r\n                }).fail(function (error) {\r\n                    bizagi.log(error);\r\n                });\r\n            }\r\n            //when tree item is open and can be closed\r\n            else {\r\n                self.expandOrCollapseArrows({ \r\n                    expand: false, \r\n                    itemSelected: itemSelected \r\n                });\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * let to expand or collapse arrows dending of the svgIconsMode\r\n     * @param {JSON} params expand and itemSelected\r\n     */\r\n    expandOrCollapseArrows: function(params) {\r\n        var self = this;\r\n        var right, down =\"\";\r\n        if (params.expand) {\r\n            right = $(params.itemSelected);\r\n            right.attr(\"class\", $(\"<b></b>\").addClass(right.attr(\"class\")).removeClass(\"biz-wp-tree-expand-icon\").attr(\"class\"));\r\n            right.attr(\"class\", $(\"<b></b>\").addClass(right.attr(\"class\")).addClass(\"biz-wp-tree-collapse-icon\").attr(\"class\"));\r\n            if (self.svgIconsMode) {\r\n                down = $(params.itemSelected).parent().find(\".bz-icon-arrow-down\");\r\n                down.show();\r\n                down.attr(\"class\", $(\"<b></b>\").addClass(down.attr(\"class\")).removeClass(\"biz-wp-tree-expand-icon\").attr(\"class\"));\r\n                down.attr(\"class\", $(\"<b></b>\").addClass(down.attr(\"class\")).addClass(\"biz-wp-tree-collapse-icon\").attr(\"class\"));\r\n                right.hide();\r\n            }\r\n        } else {\r\n            right = self.svgIconsMode?$(params.itemSelected).parent().find(\".bz-icon-arrow-right\"):$(params.itemSelected);\r\n            right.attr(\"class\", $(\"<b></b>\").addClass(right.attr(\"class\")).removeClass(\"biz-wp-tree-collapse-icon\").attr(\"class\"));\r\n            right.attr(\"class\", $(\"<b></b>\").addClass(right.attr(\"class\")).addClass(\"biz-wp-tree-expand-icon\").attr(\"class\"));\r\n            if (self.svgIconsMode) {\r\n                right.show();\r\n                down = $(params.itemSelected);\r\n                down.hide();\r\n                down.attr(\"class\", $(\"<b></b>\").addClass(down.attr(\"class\")).removeClass(\"biz-wp-tree-collapse-icon\").attr(\"class\"));\r\n                down.attr(\"class\", $(\"<b></b>\").addClass(down.attr(\"class\")).addClass(\"biz-wp-tree-expand-icon\").attr(\"class\"));\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Returns the app, category and process selected\r\n    */\r\n    getTreeRouteSelected: function () {\r\n        var self = this;\r\n        return self.treeRouteSelected;\r\n    },\r\n\r\n    /*\r\n    * Returns the app, category and process text selected\r\n    */\r\n    getTreeRouteText: function () {\r\n        var self = this;\r\n        return self.treeRouteText;\r\n    }\r\n\r\n});","/**\r\n * Name: BizAgi Desktop Widget Entities Tree\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.entitiestree.extend(\"bizagi.workportal.widgets.entitiestree\", {}, {\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"EntitiesTree.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.entitiestree\").concat(\"#ui-bizagi-workportal-widget-entitiestree-wrapper\"),\r\n            \"EntitiesTree.tree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.entitiestree\").concat(\"#ui-bizagi-workportal-widget-entitiestree\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var content = \"\";\r\n\r\n        // Override canvas if it has been defined\r\n        if (self.params.canvas) {\r\n            content = self.content = $(self.params.canvas);\r\n        }\r\n\r\n        return content;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        //load templates\r\n        self.loadtemplates();\r\n        //load initial data\r\n        self.setupData();\r\n    },\r\n\r\n    /*\r\n    * Load template vars\r\n    */\r\n    loadtemplates: function () {\r\n        var self = this;\r\n        self.entitiesTreeTmpl = self.getTemplate(\"EntitiesTree.tree\");\r\n    },\r\n\r\n    /*\r\n    * Setup form data\r\n    */\r\n    setupData: function () {\r\n        var self = this;\r\n        self.treeRouteSelected = [];\r\n        self.setupInitialData();\r\n    },\r\n\r\n    /*\r\n    * Load form data\r\n    */\r\n    setupInitialData: function () {\r\n        var self = this,\r\n            content = self.getContent();\r\n        var idWfClass=  $(\"#processTypeList\").val();\r\n\r\n        var pathNodeType = \"\";\r\n        var idNode = \"\";\r\n        var nodeDisplayPath = \"\";\r\n        var nodePath = \"\";\r\n        var params = { pathNodeType: pathNodeType, idNode: idNode, nodeDisplayPath: nodeDisplayPath, nodePath: nodePath, idWfClass:idWfClass };\r\n\r\n        $.when(self.dataService.entityPathChildNodesAction(params)\r\n            ).done(function (result) {\r\n                var entitiesTree = $.tmpl(self.entitiesTreeTmpl, { items: result.nodes });\r\n                content.append(entitiesTree);\r\n                self.setTreeEvents(content);\r\n            });\r\n\r\n    },\r\n\r\n    /*\r\n    * manage tree behaviour\r\n    */\r\n    setTreeEvents: function (content) {\r\n        var self = this;\r\n\r\n        //when select a process\r\n        $(\".selectable\", content).click(function () {\r\n\r\n            var hasParent = true;\r\n            var item = this;\r\n            self.treeRouteSelected = {};\r\n            self.treeRouteSelected.name = ($(item)[0].getAttribute(\"data-name-path\"));\r\n            self.treeRouteSelected.path = ($(item)[0].getAttribute(\"data-path\"));\r\n\r\n            $(\".selectable\").removeClass(\"biz-wp-entities-tree-selected\");\r\n            $(item).addClass(\"biz-wp-entities-tree-selected\");\r\n\r\n\r\n            //get the route selected            \r\n            while (hasParent) {\r\n                item = $(item).closest(\".biz-wp-tree-list\").parent().find(\"a\").first();\r\n\r\n                if (item.length == 0) {\r\n                    hasParent = false;\r\n                } else {\r\n                    if (item[0].getAttribute(\"data-name-path\") != \"\") {\r\n                        self.treeRouteSelected.name = item[0].getAttribute(\"data-name-path\") + \".\" + self.treeRouteSelected.name;\r\n                    }\r\n                    self.treeRouteSelected.path = item[0].getAttribute(\"data-path\") + self.treeRouteSelected.path;\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        //when select a category\r\n        $(\".biz-wp-tree-expand-icon\", content).click(function (e) {\r\n            var itemSelected = this;\r\n            var idItem = Number(itemSelected.getAttribute(\"data-id\"));\r\n\r\n            //when click a category remove the content to append the new content again and avoid repetition of data\r\n            $(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\").html(\"\");\r\n\r\n            //when tree item is closed and can be expanded\r\n            if ($(itemSelected).hasClass(\"biz-wp-tree-expand-icon\")) {\r\n\r\n                $(itemSelected).removeClass(\"biz-wp-tree-expand-icon\");\r\n                $(itemSelected).addClass(\"biz-wp-tree-collapse-icon\");\r\n               \r\n                var nodeType = \"\";\r\n                var nodeDisplayPath = \"\";\r\n                var nodePath = \"\";\r\n                var idWfClass = $(\"#processTypeList\").val();\r\n                var paramsChilds = { nodeType: nodeType, idNode: idItem, nodeDisplayPath: nodeDisplayPath, nodePath: nodePath, idWfClass: idWfClass };\r\n\r\n                $.when(self.dataService.entityPathChildNodesAction(paramsChilds)\r\n                ).done(function (result) {\r\n                    var entitiesTree = $.tmpl(self.entitiesTreeTmpl, { items: result.nodes });\r\n\r\n                    //load children and set events to them\r\n                    $(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\").append(entitiesTree);\r\n                    self.setTreeEvents($(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\"));\r\n                }).fail(function (error) {\r\n                    bizagi.log(error);\r\n                });\r\n            }\r\n            //when tree item is open and can be closed\r\n            else {\r\n                $(itemSelected).removeClass(\"biz-wp-tree-collapse-icon\");\r\n                $(itemSelected).addClass(\"biz-wp-tree-expand-icon\");\r\n            }\r\n        });\r\n    },\r\n\r\n    /*\r\n    * Returns the app, category and process selected\r\n    */\r\n    getTreeRouteSelected: function () {\r\n        var self = this;\r\n        return self.treeRouteSelected;\r\n    }\r\n\r\n});","/**\r\n* Name: BizAgi Desktop Widget Users Table\r\n* \r\n* @author Christian Collazos\r\n*/\r\n\r\n\r\nbizagi.workportal.widgets.userstable.extend(\"bizagi.workportal.widgets.userstable\", {}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        self.filterData = {};\r\n        self.maxRows = 8;\r\n        self.maxPages = 10;\r\n        self.$canvas = params.canvas;\r\n        self.showBackButton = params.showBackButton;\r\n        self.users = [];\r\n        self.totalPages = 0;\r\n        self.currentPage = 1;\r\n        self.orderType = \"ASC\";\r\n        self.orderField = \"\";\r\n        self.tableHeaders = [\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-id\"), \"fieldValue\": \"idUser\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-user\"), \"fieldValue\": \"fullName\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-name\"), \"fieldValue\": \"userName\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-domain\"), \"fieldValue\": \"domain\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-email\"), \"fieldValue\": \"contactEmail\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-active-assign\"), \"fieldValue\": \"enabledForAssignation\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-active\"), \"fieldValue\": \"enabled\" }\r\n        ];\r\n\r\n        self.loadTemplates({\r\n            \"usersTable.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.userstable\").concat(\"#ui-bizagi-workportal-widget-usersTable-wrapper\"),\r\n            \"usersTable.form\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.userstable\").concat(\"#ui-bizagi-workportal-widget-usersTable-form\"),\r\n            \"usersTable.table\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.userstable\").concat(\"#ui-bizagi-workportal-widget-usersTable-table\"),\r\n            \"usersTable.message\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.userstable\").concat(\"#ui-bizagi-workportal-widget-usersTable-message\"),\r\n            useNewEngine: false\r\n        });\r\n\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"usersTable.wrapper\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n\r\n        // Override canvas if it has been defined\r\n        if (self.params.canvas) {\r\n            content = $(self.params.canvas).append(content);\r\n        }\r\n\r\n        return content;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        //load templates\r\n        self.loadtemplates();\r\n\r\n        //load form data\r\n        self.setupData();\r\n    },\r\n\r\n    /*\r\n    * Load template vars\r\n    */\r\n    loadtemplates: function () {\r\n        var self = this;\r\n\r\n        self.usersTableFormTmpl = self.getTemplate(\"usersTable.form\");\r\n        self.usersTableTmpl = self.getTemplate(\"usersTable.table\");\r\n        self.usersTableMessage = self.getTemplate(\"usersTable.message\");\r\n    },\r\n\r\n    /*\r\n    * Setup form data\r\n    */\r\n    setupData: function () {\r\n\r\n        var self = this;\r\n\r\n        $.when(self.dataService.getOrganizationsList()).done(function (rps) {\r\n\r\n            var orgList = rps.response;\r\n\r\n            var resultTemplate = $.tmpl(self.usersTableFormTmpl, { orgList: orgList.length, showBackButton: self.showBackButton });\r\n            $(\"#biz-wp-userstable-wrapperform\", self.content).html(resultTemplate);\r\n\r\n            $(\"#btn-users-table-back\", self.content).click(function (e) {\r\n                if (self.params.parentDef) {\r\n                    self.params.parentDef.resolve();\r\n                }\r\n            });\r\n\r\n            if (orgList.length) {\r\n                orgList.unshift({ displayName: \"----------------\", id: \"\" });\r\n                self.setupOrgCombo(resultTemplate, orgList);\r\n            }\r\n\r\n            self.setupEventsHandler();\r\n            self.$canvas.trigger(\"completeUserForm\");\r\n\r\n        }).fail(function (error) {\r\n            bizagi.log(error);\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    * Setup organization combo\r\n    */\r\n    setupOrgCombo: function ($content, data) {\r\n\r\n        var self = this;\r\n        var $combo = $content.find(\"#biz-wp-usertable-org\");\r\n\r\n        $combo.uicombo({\r\n            data: { combo: data },\r\n            initValue: data[0],\r\n            itemValue: function (item) {\r\n                return item.id;\r\n            },\r\n            itemText: function (item) {\r\n                return item.displayName;\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    * Implement main buttons behaviour\r\n    */\r\n    setupEventsHandler: function () {\r\n        var self = this,\r\n            content = self.getContent();\r\n        var $userForm = $(\"#biz-wp-userstable-wrapperform form\", content);\r\n\r\n        $userForm.on(\"submit\", function (e) {\r\n\r\n            e.preventDefault();\r\n            if (typeof (self.afterSave) == \"undefined\") self.currentPage = 1;\r\n            else {\r\n                delete (self.afterSave);\r\n                self.currentPage = self.currentPage || 1;\r\n            }\r\n            self.orderType = \"ASC\";\r\n            self.orderField = \"\";\r\n\r\n            self.filterData = {\r\n                domain: this.elements[0].value,\r\n                userName: this.elements[1].value,\r\n                fullName: this.elements[2].value,\r\n                organization: $(this.elements[3]).data('value'),\r\n                pag: self.currentPage,\r\n                pagSize: self.maxRows,\r\n                orderField: self.orderField,\r\n                orderType: self.orderType\r\n            };\r\n\r\n            self.getUsersTableData();\r\n\r\n        });\r\n\r\n        $userForm.on(\"reset\", function (event) {\r\n\r\n            event.preventDefault();\r\n\r\n            $(this.elements[3]).data(\"value\", \"\").val(\"----------------\");\r\n            this.elements[0].value = \"\";\r\n            this.elements[1].value = \"\";\r\n            this.elements[2].value = \"\";\r\n\r\n            $(\"#biz-wp-userstable-wrapperlist\", content).empty();\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    * Clean Form\r\n    */\r\n    cleanForm: function () {\r\n\r\n        var self = this,\r\n        content = self.getContent();\r\n        var $userForm = $(\"#biz-wp-userstable-wrapperform form\", content);\r\n\r\n        $userForm.trigger('reset');\r\n    },\r\n\r\n    /*\r\n    * Excecute Query \r\n    */\r\n    excecuteQuery: function () {\r\n\r\n        var self = this;\r\n        content = self.getContent();\r\n        var $userForm = $(\"#biz-wp-userstable-wrapperform form\", content);\r\n\r\n        $userForm.trigger('submit');\r\n    },\r\n\r\n    /*\r\n    * get users table data\r\n    */\r\n    getUsersTableData: function (params) {\r\n        var self = this;\r\n\r\n        var params = params || {};\r\n        self.orderType = params.orderType || self.orderType;\r\n        self.orderField = params.orderField || self.orderField; \r\n        var method = \"getUsersList\";\r\n        if (self.params.widgetName == \"adminCaseSearch\" || self.params.widgetName == \"reassignCase\" || self.params.widgetName == \"userProfiles\"){\r\n            method = \"getUsersForAssignation\";\r\n        }else if(self.params.widgetName == \"defaultsAssignUser\"){\r\n            method = \"getUsersForDefaultAssignation\";\r\n        }\r\n        $.when(self.dataService[method]($.extend(self.filterData, params))).done(function (data) {\r\n            self.fillUserInformation(data);\r\n\r\n        }).fail(function (error) {\r\n            bizagi.log(error);\r\n        });\r\n    },\r\n\r\n    /*\r\n    * if users returned show the table\r\n    */\r\n    showUsersTable: function () {\r\n\r\n        var self = this;\r\n        var $wrapperList = $(\"#biz-wp-userstable-wrapperlist\", self.content);\r\n\r\n        $wrapperList.empty();\r\n\r\n        if (self.users.length > 0) {\r\n\r\n            var pagination = (self.totalPages > 1) ? true : false;\r\n            var pagesArray = self.getPagesArray();\r\n\r\n            var links = self.params.userLinkLabel && Object.prototype.toString.apply(self.params.userLinkLabel) === \"[object Array]\" ? self.params.userLinkLabel : [self.params.userLinkLabel];\r\n\r\n            var usersTableTmpl = $.tmpl(self.usersTableTmpl, { users: self.users, headers: self.tableHeaders, links: links, page: self.currentPage, pagination: pagination, pagesArray: pagesArray, orderField: self.orderField, orderType: self.orderType });\r\n            $wrapperList.html(usersTableTmpl);\r\n\r\n            self.setUpPagination();\r\n            self.setUpSortColumnLinks();\r\n        } else {\r\n\r\n            var msg = bizagi.localization.getResource(\"workportal-widget-usertable-empty\");\r\n            $wrapperList.html($.tmpl(self.usersTableMessage, { message: msg }));\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Get Pages\r\n    */\r\n    getPagesArray: function () {\r\n\r\n        var self = this;\r\n        var pagesToShow = (self.maxPages > self.totalPages) ? self.totalPages : self.maxPages;\r\n        var aux = [];\r\n\r\n        for (var a = 0; a < pagesToShow; a++) {\r\n            aux.push(a + 1);\r\n        }\r\n\r\n        return aux;\r\n    },\r\n\r\n    /*\r\n    * Set pagination\r\n    */\r\n    setUpPagination: function () {\r\n        var self = this;\r\n        var $pager = $(\"#biz-wp-userstable-pager ul\", self.content);\r\n\r\n        $pager.bizagiPagination({\r\n            maxElemShow: self.maxRows,\r\n            totalPages: self.totalPages,\r\n            actualPage: self.currentPage,\r\n            listElement: $pager,\r\n            clickCallBack: function (options) {\r\n                self.filterData.pag = self.currentPage = parseInt(options.page);\r\n                self.getUsersTableData();\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    * assign click event to each column to order\r\n    */\r\n    setUpSortColumnLinks: function () {\r\n        var self = this;\r\n\r\n        $(\".biz-wp-table-head th\", self.content).click(function () {\r\n\r\n            var orderField = $(this).data(\"orderfield\");\r\n            var orderType = $(this).data(\"ordertype\");\r\n\r\n            self.getUsersTableData({ \"orderType\": orderType, \"orderField\": orderField });\r\n            self.assignEventReassign();\r\n        });\r\n\r\n    },\r\n\r\n    assignEventReassign: function () {\r\n        var self = this;\r\n\r\n        $(\".bizagi-wp-userstable-userlink\", self.content).click(function (e) {\r\n            if (self.params.parentDef) {\r\n                self.params.parentDef.resolve(this.id, this.name, this.attributes.guid.value);\r\n                if (self.params.widgetName == \"reassignCase\" && bizagi.workportal.desktop.dialogStack.length > 0)\r\n                    bizagi.workportal.desktop.dialogStack[bizagi.workportal.desktop.dialogStack.length - 1].dialogBox.on(\"dialogbeforeclose\", function (event, ui) {\r\n                        // Next variable specifies if is redirecting to inbox when the result status does not have errors.\r\n                        if (self.resultStatus === true)\r\n                            self.publish(\"changeWidget\", {\r\n                                widgetName: bizagi.workportal.currentInboxView\r\n                            });\r\n                    });\r\n            } else {\r\n                // publish excecutes twice when create a new instance of userstable\r\n                self.$canvas.trigger(\"clickUserLink\", { id: this.id, name: this.name, fullName: this.getAttribute(\"fullname\"), type: $(this).data(\"linkname\") });\r\n            }\r\n        });\r\n    },\r\n\r\n    /*\r\n    * sort table by a given column\r\n    */\r\n    sortUsersTableByColumn: function (data, column, orderType) {\r\n\r\n        return bizagi.util.sortJSON(data, column, orderType);\r\n\r\n    },\r\n    \r\n    fillUserInformation: function(data){\r\n        var self = this;\r\n        self.users = data.users;\r\n        self.totalPages = data.total;\r\n\r\n        self.showUsersTable();\r\n        self.assignEventReassign();\r\n    }\r\n});","/**\r\n* Name: BizAgi Desktop Widget - Tree\r\n* \r\n* @author Christian Collazos\r\n*/\r\n\r\n\r\nbizagi.workportal.widgets.tree.extend(\"bizagi.workportal.widgets.tree\", {}, {\r\n    \r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"tree.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.tree\").concat(\"#ui-bizagi-workportal-widget-tree-wrapper\"),\r\n            \"tree.content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.tree\").concat(\"#ui-bizagi-workportal-widget-tree-content\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"tree.wrapper\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n\r\n        // Override canvas if it has been defined\r\n        if (self.params.canvas) {\r\n            content = $(self.params.canvas).append(content);\r\n        }\r\n\r\n        return content;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        //load templates \r\n        self.loadtemplates();\r\n    },\r\n\r\n    loadtemplates: function () {\r\n        var self = this;\r\n\r\n        //Template vars \r\n        self.decisionTableContent = self.getTemplate(\"tree.content\");\r\n    }\r\n});","/*\r\n*   Name: BizAgi Generic Page Widget Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*/\r\n\r\n\r\n// Extends itself\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.entities\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES;\r\n    },\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"entities\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.entities\").concat(\"#ui-bizagi-workportal-widget-entities\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        \r\n        var deferred = new $.Deferred();\r\n\r\n        var template = self.getTemplate(\"entities\");\r\n        /*\r\n        var data = { entitiesURL: self.dataService.getUrl({ \"endPoint\": \"EntityAdmin\" }) };\r\n        \r\n        var content = $.tmpl(template, data);\r\n        \r\n        var iframe = $(\"#entitiesIFrame\", content);\r\n        \r\n        // Wait until the iframe has been loadedpip\r\n        iframe.load(function(){\r\n            iframe.callInside(function(params){\r\n            alert('1');\r\n                // This script will execute inside the iframe context\r\n                this.newentity = function(idEntity){\r\n                    self.publish(\"showDialogWidget\", {\r\n    \t                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE,\r\n    \t                context: \"entitymanagement\",\r\n                        idForm: idForm,\r\n                        idEntity: idEntity,\r\n    \t\t\t        modalParameters: {\r\n    \t\t\t            title: self.getResource(\"workportal-menu-preferences\"),\r\n    \t\t\t            width:\"1020px\",\r\n    \t\t\t            showCloseButton: false\r\n    \t\t\t        }\r\n                    });\r\n                \r\n                    params.controller.publish(\"closeCurrentDialog\");\r\n                };\r\n            }, { });\r\n        });\r\n*/\r\n        $.when(self.dataService.getAllAdministrableEntities())\r\n           .done(function(data) { \r\n              var content = self.content = $.tmpl(template, data);\r\n              \r\n              $(\".bz-wp-widget-entities li\", content).click(function() {\r\n                 var idEntity = $(this).data(\"entity-id\");\r\n                 var idForm = $(this).data(\"entity-form\");\r\n                 self.renderEntityData(content, idEntity, idForm);\r\n              });\r\n              deferred.resolve(content);\r\n           });\r\n\r\n        // Return content\r\n        return deferred.promise();;\r\n    },\r\n    \r\n    renderStaticForm: function (params) {\r\n        var self = this;\r\n        var canvas = params.content;\r\n        var rendering = new bizagi.rendering.facade(params.context);\r\n\r\n        // Executes rendering into render container\r\n        params = params || {};\r\n    \t$.extend(params, {\r\n    \t    canvas: canvas,\r\n    \t    customHandlers: {\r\n    \t        onGridAdd: function(){\r\n                    self.publish(\"showDialogWidget\", {\r\n    \t                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE,\r\n    \t                context: \"entitymanagement\",\r\n                        idForm: params.idForm,\r\n                        idEntity: params.idEntity,\r\n    \t\t\t        modalParameters: {\r\n    \t\t\t            title: self.getResource(\"workportal-menu-preferences\"),\r\n    \t\t\t            width:\"1020px\",\r\n    \t\t\t            showCloseButton: false\r\n    \t\t\t        },\r\n    \t\t\t        customHandlers: {\r\n    \t                    afterFormButtonClick: function(button){\r\n                                self.publish(\"closeCurrentDialog\");\r\n    \t                    }\r\n    \t\t\t        }\r\n                    });\r\n    \t        },\r\n    \t        onGridEdit: function(surrogateKey){\r\n                    self.publish(\"showDialogWidget\", {\r\n    \t                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE,\r\n    \t                context: \"entitymanagement\",\r\n                        idForm: params.idForm,\r\n                        idEntity: params.idEntity,\r\n                        surrogateKey: surrogateKey,\r\n    \t\t\t        modalParameters: {\r\n    \t\t\t            title: self.getResource(\"workportal-menu-preferences\"),\r\n    \t\t\t            width:\"1020px\",\r\n    \t\t\t            showCloseButton: false\r\n    \t\t\t        },\r\n    \t\t\t        customHandlers: {\r\n    \t                    afterFormButtonClick: function(button){\r\n                                self.publish(\"closeCurrentDialog\");\r\n                                self.renderEntityData(params.content, params.idEntity, params.idForm);\r\n    \t                    }\r\n    \t\t\t        }\r\n                    });\r\n    \t        }\r\n    \t    }\r\n        });\r\n        \r\n        rendering.execute(params);\r\n\r\n        canvas.bind(\"close\", function () {\r\n            self.publish(\"closeCurrentDialog\");            \r\n        });\r\n    },\r\n    \r\n    renderEntityData: function(content, idEntity, idForm) {\r\n        var self = this;\r\n        content.empty();\r\n        $.when(self.dataService.getEntitiesList({ idEntity: idEntity, page: 1}))\r\n         .done(function(data) {\r\n                self.renderStaticForm({context: \"entitymanagement\", content: content, idEntity: idEntity, idForm: idForm, data: data});\r\n               });\r\n                \r\n                /*\r\n                var facade = new bizagi.rendering.facade();\r\n                facade.p\r\n                var renderFactory = facade.renderFactory;\r\n                $.when(renderFactory).done(function(factory) {\r\n                        var grid = factory.getRender('grid', data, content);\r\n                    });\r\n               });\r\n               */\r\n\r\n/*\r\n                    self.publish(\"showDialogWidget\", {\r\n    \t                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE,\r\n    \t                context: \"entitymanagement\",\r\n                        idForm: idForm,\r\n                        idEntity: idEntity,\r\n    \t\t\t        modalParameters: {\r\n    \t\t\t            title: self.getResource(\"workportal-menu-preferences\"),\r\n    \t\t\t            width:\"1020px\",\r\n    \t\t\t            showCloseButton: false\r\n    \t\t\t        }\r\n                    });\r\n*/        \r\n    }\r\n});\r\n\r\n","/*\r\n Document   : bizagi.filterMoney\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andres Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a money control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.money', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpaths) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n            self.numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n\r\n            self.returnObject = [\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@from\",\r\n                        type: \"money\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"from\"\r\n                    }\r\n                },\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@to\",\r\n                        type: \"money\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"to\"\r\n                    }\r\n                }\r\n            ];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._setValue();\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply(self.returnObject, self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {\r\n                        name: options.getResource('workportal-my-search-remove-filter'),\r\n                        className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    min: {\r\n                        name: options.getResource('bz-rp-components-time-from-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-money-filter-min'\r\n                    },\r\n                    max: {\r\n                        name: options.getResource('bz-rp-components-time-to-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-money-filter-max'\r\n                    },\r\n                    notification: {\r\n                        name: options.getResource('workportal-my-search-limit-notification'),\r\n                        className: 'ui-bizagi-money-filter-notification'\r\n                    },\r\n                    buttons: {\r\n                        type: 'contextMenuButtons' // Self structure - see _bindContextMenuButtons\r\n                    }\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        return $.when(self.options.setData()).done(function (data) {\r\n                            var $input = $('<input type=\"text\">');\r\n                            self.options.data = (typeof data !== 'undefined') ? data : self.options.data;\r\n\r\n                            $input.val(self.options.data.min);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-money-filter-min span\", self.$menuContext).html(options.getResource('bz-rp-components-time-from-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            $input.val(self.options.data.max);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-money-filter-max span\", self.$menuContext).html(options.getResource('bz-rp-components-time-to-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            self._enableNotification(false);\r\n\r\n                            var $minValue = $('.ui-bizagi-money-filter-min .select-value', self.$menuContext);\r\n                            var $maxValue = $('.ui-bizagi-money-filter-max .select-value', self.$menuContext);\r\n                            $minValue.on('click', $.proxy(self._onClickMinValue, self));\r\n                            $maxValue.on('click', $.proxy(self._onClickMaxValue, self));\r\n\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                        self.removeHandlersValuesMinMax();\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $opener.contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    return self.filterValue;\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayValue: function (){\r\n            var self = this;\r\n            var min = (typeof(self.returnObject[0].value) === \"undefined\") ? \"\" : self.returnObject[0].value ;\r\n            var max = (typeof(self.returnObject[1].value) === \"undefined\") ? \"\" : self.returnObject[1].value ;\r\n\r\n            $('.ui-bizagi-money-filter-min input', self.$menuContext).val(min);\r\n            $('.ui-bizagi-money-filter-max input', self.$menuContext).val(max);\r\n            $('.ui-bizagi-money-filter-min input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n            $('.ui-bizagi-money-filter-max input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setFormatValue: function($input){\r\n            var self = this;\r\n\r\n            var value = self._getObjectValueByString($input.val());\r\n\r\n            if(value !== 0){\r\n                $input.val(value);\r\n                $input.formatCurrency(self._getFormatOptions());\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param stringValue\r\n         * @return {*}\r\n         * @param asFloatType\r\n         */\r\n        _getObjectValueByString: function(stringValue, asFloatType){\r\n            var self = this;\r\n\r\n            var value = stringValue,\r\n                regexString = \"/[\" + self.numericFormat.symbol + self.numericFormat.digitGroupSymbol + \"]/g\",\r\n                regex = eval(regexString);\r\n\r\n            value = value.replace(regex, \"\");\r\n            if(asFloatType){\r\n                value = value.replace(\",\", \".\");\r\n                value = parseFloat(value);\r\n            }\r\n\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var minVal = $('.ui-bizagi-money-filter-min input', self.$menuContext).val();\r\n            var maxVal = $('.ui-bizagi-money-filter-max input', self.$menuContext).val();\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue =  minVal + ' ' + self.options.getResource('bz-rp-components-time-to-label') + ' ' + maxVal;\r\n            $displayNameControl.text(displayName[0] + ': ' + self.filterValue);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue = \"\";\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValue: function () {\r\n            var self = this;\r\n            var minVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-min input\", self.$menuContext).val(), true);\r\n            var maxVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-max input\", self.$menuContext).val(), true);\r\n\r\n            self.returnObject[0].value = (minVal === '') ? maxVal : minVal;\r\n            self.returnObject[1].value = (maxVal === '') ? minVal : maxVal;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function () {\r\n            var self = this;\r\n\r\n            self._setReturnObject();\r\n            $('.ui-bizagi-money-filter-min input', self.$menuContext).val('');\r\n            $('.ui-bizagi-money-filter-max input', self.$menuContext).val('');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n            var options = self.options;\r\n            var $minControl = $('.ui-bizagi-money-filter-min input', self.$menuContext);\r\n            var $maxControl = $('.ui-bizagi-money-filter-max input', self.$menuContext);\r\n\r\n            $minControl.keyup( function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-max input\", self.$menuContext).val(), true);\r\n                    var minVal = self._getObjectValueByString($(this).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n\r\n            $maxControl.keyup(function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(this).val(), true);\r\n                    var minVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-min input\", self.$menuContext).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param event\r\n         */\r\n        _onClickMinValue: function(event){\r\n            var self = this;\r\n            var $minControl = $('.ui-bizagi-money-filter-min input', self.$menuContext);\r\n            $minControl.val($(event.target).text());\r\n            $minControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param event\r\n         * @private\r\n         */\r\n        _onClickMaxValue: function(event){\r\n            var self = this;\r\n            var $maxControl = $('.ui-bizagi-money-filter-max input', self.$menuContext);\r\n            $maxControl.val($(event.target).text());\r\n            $maxControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param isLowerLimitInvalid\r\n         * @param isUpperLimitInvalid\r\n         * @param isRangeInvalid\r\n         * @private\r\n         */\r\n        _checkNotification: function (isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if ((isRangeInvalid || isLowerLimitInvalid || isUpperLimitInvalid)){\r\n                var notification = options.getResource('workportal-my-search-limit-notification');\r\n                if (isLowerLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-lower-limit-notification');\r\n                }\r\n                else if(isUpperLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-upper-limit-notification');\r\n                }\r\n                else if (isRangeInvalid) {\r\n                    notification = options.getResource('workportal-my-search-max-min-notification');\r\n                }\r\n                self._enableNotification(true, notification);\r\n            }\r\n            else{\r\n                self._disableNotification();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param showLabel\r\n         * @param notification\r\n         * @private\r\n         */\r\n        _enableNotification: function (showLabel, notification) {\r\n            var self = this;\r\n\r\n            if(showLabel){\r\n                $(\".ui-bizagi-money-filter-notification span\", self.$menuContext).text(notification);\r\n                $(\".ui-bizagi-money-filter-notification\", self.$menuContext).show();\r\n            }\r\n            else{\r\n                $(\".ui-bizagi-money-filter-notification\", self.$menuContext).hide();\r\n            }\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).attr(\"disabled\", \"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).addClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableNotification: function () {\r\n            var self = this;\r\n\r\n            $(\".ui-bizagi-money-filter-notification\", self.$menuContext).hide();\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeAttr(\"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{symbol: string, roundToDecimalPlace: number, eventOnDecimalsEntered: boolean}}\r\n         * @private\r\n         */\r\n        _getFormatOptions: function (){\r\n            var self = this;\r\n            return formatOptions = {\r\n                symbol: \"\",\r\n                roundToDecimalPlace: -1,\r\n                eventOnDecimalsEntered: true,\r\n                digitGroupSymbol: self.numericFormat.digitGroupSymbol,\r\n                decimalSymbol: self.numericFormat.decimalSymbol\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self._resetValue();\r\n            self._enableNotification(false);\r\n            self._setDisplayNameToDefault();\r\n            self.options.onClear([self.returnObject[0].properties.xpath, self.returnObject[1].properties.xpath]);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        removeHandlersValuesMinMax: function(){\r\n            var self = this;\r\n            var $minValue = $('.ui-bizagi-money-filter-min .select-value', self.$menuContext);\r\n            var $maxValue = $('.ui-bizagi-money-filter-max .select-value', self.$menuContext);\r\n            $minValue.off('click', $.proxy(self._onClickMinValue, self));\r\n            $maxValue.off('click', $.proxy(self._onClickMaxValue, self));\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            var self = this;\r\n            self.removeHandlersValuesMinMax();\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n Document   : bizagi.filterNumber\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andres Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a number control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.number', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpaths) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n            self.numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n\r\n            self.returnObject = [\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@from\",\r\n                        type: \"number\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"from\"\r\n                    }\r\n                },\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@to\",\r\n                        type: \"number\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"to\"\r\n                    }\r\n                }\r\n            ];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._setValue();\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply(self.returnObject);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {\r\n                        name: options.getResource('workportal-my-search-remove-filter'),\r\n                        className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    min: {\r\n                        name: options.getResource('bz-rp-components-time-from-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-number-filter-min'\r\n                    },\r\n                    max: {\r\n                        name: options.getResource('bz-rp-components-time-to-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-number-filter-max'\r\n                    },\r\n                    notification: {\r\n                        name: options.getResource('workportal-my-search-limit-notification'),\r\n                        className: 'ui-bizagi-number-filter-notification'\r\n                    },\r\n                    buttons: {\r\n                        type: 'contextMenuButtons' // Self structure - see _bindContextMenuButtons\r\n                    }\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        return $.when(self.options.setData()).done(function (data) {\r\n                            var $input = $('<input type=\"text\">');\r\n                            self.options.data = (typeof data !== 'undefined') ? data : self.options.data;\r\n\r\n                            $input.val(self.options.data.min);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-number-filter-min span\", self.$menuContext).html(options.getResource('bz-rp-components-time-from-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            $input.val(self.options.data.max);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-number-filter-max span\", self.$menuContext).html(options.getResource('bz-rp-components-time-to-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            self._enableNotification(false);\r\n\r\n                            var $minValue = $('.ui-bizagi-number-filter-min .select-value', self.$menuContext);\r\n                            var $maxValue = $('.ui-bizagi-number-filter-max .select-value', self.$menuContext);\r\n                            $minValue.on('click', $.proxy(self._onClickMinValue, self));\r\n                            $maxValue.on('click', $.proxy(self._onClickMaxValue, self));\r\n\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                        self.removeHandlersValuesMinMax();\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $opener.contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    return self.filterValue;\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayValue: function (){\r\n            var self = this;\r\n            var min = (typeof(self.returnObject[0].value) === \"undefined\") ? \"\" : self.returnObject[0].value ;\r\n            var max = (typeof(self.returnObject[1].value) === \"undefined\") ? \"\" : self.returnObject[1].value ;\r\n\r\n            $('.ui-bizagi-number-filter-min input', self.$menuContext).val(min);\r\n            $('.ui-bizagi-number-filter-max input', self.$menuContext).val(max);\r\n            $('.ui-bizagi-number-filter-min input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n            $('.ui-bizagi-number-filter-max input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setFormatValue: function($input){\r\n            var self = this;\r\n\r\n            var value = self._getObjectValueByString($input.val());\r\n\r\n            if(value !== 0){\r\n                $input.val(value);\r\n                $input.formatCurrency(self._getFormatOptions());\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param stringValue\r\n         * @return {*}\r\n         * @param asFloatType\r\n         */\r\n        _getObjectValueByString: function(stringValue, asFloatType){\r\n            var self = this;\r\n\r\n            var value = stringValue,\r\n                regexString = \"/[\" + self.numericFormat.symbol + self.numericFormat.digitGroupSymbol + \"]/g\",\r\n                regex = eval(regexString);\r\n\r\n            value = value.replace(regex, \"\");\r\n            if(asFloatType){\r\n                value = value.replace(\",\", \".\");\r\n                value = parseFloat(value);\r\n            }\r\n\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var minVal = $('.ui-bizagi-number-filter-min input', self.$menuContext).val();\r\n            var maxVal = $('.ui-bizagi-number-filter-max input', self.$menuContext).val();\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue =  minVal + ' ' + self.options.getResource('bz-rp-components-time-to-label') + ' ' + maxVal;\r\n            $displayNameControl.text(displayName[0] + ': ' + self.filterValue);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue = \"\";\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValue: function () {\r\n            var self = this;\r\n            var minVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-min input\", self.$menuContext).val(), true);\r\n            var maxVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-max input\", self.$menuContext).val(), true);\r\n\r\n            self.returnObject[0].value = (minVal === '') ? maxVal : minVal;\r\n            self.returnObject[1].value = (maxVal === '') ? minVal : maxVal;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function () {\r\n            var self = this;\r\n\r\n            self._setReturnObject();\r\n            $('.ui-bizagi-number-filter-min input', self.$menuContext).val('');\r\n            $('.ui-bizagi-number-filter-max input', self.$menuContext).val('');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n            var options = self.options;\r\n            var $minControl = $('.ui-bizagi-number-filter-min input', self.$menuContext);\r\n            var $maxControl = $('.ui-bizagi-number-filter-max input', self.$menuContext);\r\n\r\n\r\n            $minControl.keyup(function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-max input\", self.$menuContext).val(), true);\r\n                    var minVal = self._getObjectValueByString($(this).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n\r\n            $maxControl.keyup(function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(this).val(), true);\r\n                    var minVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-min input\", self.$menuContext).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param event\r\n         */\r\n        _onClickMinValue: function(event){\r\n            var self = this;\r\n            var $minControl = $('.ui-bizagi-number-filter-min input', self.$menuContext);\r\n            $minControl.val($(event.target).text());\r\n            $minControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param event\r\n         * @private\r\n         */\r\n        _onClickMaxValue: function(event){\r\n            var self = this;\r\n            var $maxControl = $('.ui-bizagi-number-filter-max input', self.$menuContext);\r\n            $maxControl.val($(event.target).text());\r\n            $maxControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param isLowerLimitInvalid\r\n         * @param isUpperLimitInvalid\r\n         * @param isRangeInvalid\r\n         * @private\r\n         */\r\n        _checkNotification: function (isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if ((isRangeInvalid || isLowerLimitInvalid || isUpperLimitInvalid)){\r\n                var notification = options.getResource('workportal-my-search-limit-notification');\r\n                if (isLowerLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-lower-limit-notification');\r\n                }\r\n                else if(isUpperLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-upper-limit-notification');\r\n                }\r\n                else if (isRangeInvalid) {\r\n                    notification = options.getResource('workportal-my-search-max-min-notification');\r\n                }\r\n                self._enableNotification(true, notification);\r\n            }\r\n            else{\r\n                self._disableNotification();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param showLabel\r\n         * @param notification\r\n         * @private\r\n         */\r\n        _enableNotification: function (showLabel, notification) {\r\n            var self = this;\r\n\r\n            if(showLabel){\r\n                $(\".ui-bizagi-number-filter-notification span\", self.$menuContext).text(notification);\r\n                $(\".ui-bizagi-number-filter-notification\", self.$menuContext).show();\r\n            }\r\n            else{\r\n                $(\".ui-bizagi-number-filter-notification\", self.$menuContext).hide();\r\n            }\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).attr(\"disabled\", \"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).addClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableNotification: function () {\r\n            var self = this;\r\n\r\n            $(\".ui-bizagi-number-filter-notification\", self.$menuContext).hide();\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeAttr(\"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{symbol: string, roundToDecimalPlace: number, eventOnDecimalsEntered: boolean}}\r\n         * @private\r\n         */\r\n        _getFormatOptions: function (){\r\n            var self = this;\r\n            return formatOptions = {\r\n                symbol: '',\r\n                roundToDecimalPlace: -1,\r\n                eventOnDecimalsEntered: true,\r\n                digitGroupSymbol: self.numericFormat.digitGroupSymbol,\r\n                decimalSymbol: self.numericFormat.decimalSymbol\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self._resetValue();\r\n            self._enableNotification(false);\r\n            self._setDisplayNameToDefault();\r\n            self.options.onClear([self.returnObject[0].properties.xpath, self.returnObject[1].properties.xpath]);\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n\r\n        /**\r\n         * Remove min and max handlers\r\n         */\r\n        removeHandlersValuesMinMax: function(){\r\n            var self = this;\r\n            var $minValue = $('.ui-bizagi-number-filter-min .select-value', self.$menuContext);\r\n            var $maxValue = $('.ui-bizagi-number-filter-max .select-value', self.$menuContext);\r\n            $minValue.off('click', $.proxy(self._onClickMinValue, self));\r\n            $maxValue.off('click', $.proxy(self._onClickMaxValue, self));\r\n        },\r\n\r\n        destroy: function() {\r\n            var self = this;\r\n            self.removeHandlersValuesMinMax();\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n Document   : bizagi.filterDate\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andres Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a date control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.dateFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpaths) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            var attribute = self.options.properties.attribute;\r\n\r\n            self.returnObject = [\r\n                {\r\n                    properties: {\r\n                        xpath: attribute + '@from',\r\n                        type: 'date',\r\n                        typeSearch: 'range',\r\n                        rangeQuery: 'from'\r\n                    }\r\n                },\r\n                {\r\n                    properties: {\r\n                        xpath: attribute + '@to',\r\n                        type: 'date',\r\n                        typeSearch: 'range',\r\n                        rangeQuery: 'to'\r\n                    }\r\n                }\r\n            ];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if($(this).text() == options.getResource('workportal-general-button-label-apply')){\r\n                        self._setValuesOfReturnObject();\r\n                        self._setDisplayTitle(false);\r\n                        options.onApply(self.returnObject, self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {\r\n                        name: options.getResource('workportal-my-search-remove-filter'),\r\n                        className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    from: {\r\n                        name: options.getResource('bz-rp-components-time-from-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-date-filter-from'\r\n                    },\r\n                    to: {\r\n                        name: options.getResource('bz-rp-components-time-to-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-date-filter-to'\r\n                    },\r\n                    buttons: {\r\n                        type: 'contextMenuButtons' // Self structure - see _bindContextMenuButtons\r\n                    }\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        self._disableApply();\r\n                        self._setDisplayLabels();\r\n                    },\r\n                    hide: function() {\r\n                        self._getFromControl().datepicker('hide');\r\n                        self._getToControl().datepicker('hide');\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $opener.contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    return self.filterValue;\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n            var $minDate = self._getFromControl();\r\n            var $maxDate = self._getToControl();\r\n            var minDate = new Date(self._getDateFromInvariant(self.options.properties.data.min));\r\n            var maxDate = new Date(self._getDateFromInvariant(self.options.properties.data.max));\r\n            var dateFormat = bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI().toLowerCase();\r\n\r\n            $minDate.datepicker({\r\n                defaultDate: minDate,\r\n                dateFormat: dateFormat,\r\n                changeMonth: true,\r\n                changeYear: true,\r\n                numberOfMonths: 1,\r\n                yearRange: '-100:+0',\r\n                minDate: minDate,\r\n                maxDate: maxDate,\r\n                onClose: function(selectedDate) {\r\n                    if(selectedDate) {\r\n                        $maxDate.datepicker('option', 'minDate', selectedDate);\r\n                        if($maxDate.datepicker(\"getDate\")){\r\n                            self._enableApply();\r\n                        }\r\n                    }\r\n                    else{\r\n                        self._disableApply();\r\n                    }\r\n                }\r\n            });\r\n            $maxDate.datepicker({\r\n                defaultDate: maxDate,\r\n                dateFormat: dateFormat,\r\n                changeMonth: true,\r\n                changeYear: true,\r\n                numberOfMonths: 1,\r\n                yearRange: '-100:+0',\r\n                minDate: minDate,\r\n                maxDate: maxDate,\r\n                onSelect: function(selectedDate) {\r\n                    if(selectedDate) {\r\n                        $minDate.datepicker('option', 'maxDate', selectedDate);\r\n                        if($minDate.datepicker(\"getDate\")){\r\n                            self._enableApply();\r\n                        }\r\n                    }\r\n                    else{\r\n                        self._disableApply();\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValues: function (){\r\n            var self = this;\r\n\r\n            self._getFromControl().datepicker(\"setDate\", null);\r\n            self._getToControl().datepicker(\"setDate\", null);\r\n            self._setReturnObject();\r\n            self._disableApply();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValuesOfReturnObject: function (){\r\n            var self = this;\r\n            var minDate = self._getFromControl().datepicker(\"getDate\"); //returns null when there is no date\r\n            var maxDate = self._getToControl().datepicker(\"getDate\"); //returns null when there is no date\r\n            var dateFormatter = bizagi.util.dateFormatter;\r\n\r\n            self.returnObject[0].value = (minDate !== null) ? dateFormatter.formatInvariant(minDate, false) : dateFormatter.formatInvariant(maxDate, false);\r\n            self.returnObject[1].value = (maxDate !== null) ? dateFormatter.formatInvariant(maxDate, false) : dateFormatter.formatInvariant(minDate, false);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param toDefault\r\n         * @private\r\n         */\r\n        _setDisplayTitle: function (toDefault) {\r\n            var self = this;\r\n            var $displayTitleControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayTitle = $displayTitleControl.text().split(':');\r\n\r\n            if (toDefault) {\r\n                self.filterValue = \"\";\r\n                $displayTitleControl.text(displayTitle[0]);\r\n            }\r\n            else {\r\n                var options = self.options;\r\n                var minDateObj = self._getDateFromInvariant(self.returnObject[0].value);\r\n                var maxDateObj = self._getDateFromInvariant(self.returnObject[1].value);\r\n\r\n                self.filterValue =\r\n                    self._formatDate(minDateObj, options.getResource(\"dateFormat\")) + ' ' +\r\n                    options.getResource('bz-rp-components-time-to-label') + ' ' +\r\n                    self._formatDate(maxDateObj, options.getResource(\"dateFormat\"));\r\n                $displayTitleControl.text(displayTitle[0] + ': ' + self.filterValue);\r\n            }\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayLabels: function (){\r\n            var self = this;\r\n            var options = self.options;\r\n            var minDateObj = self._getDateFromInvariant(self.options.properties.data.min);\r\n            var maxDateObj = self._getDateFromInvariant(self.options.properties.data.max);\r\n\r\n            $('.ui-bizagi-date-filter-from span', self.$menuContext).text(\r\n                options.getResource('bz-rp-components-time-from-label') + ' (' + self._formatDate(minDateObj, options.getResource(\"dateFormat\")) + '):'\r\n            );\r\n            $('.ui-bizagi-date-filter-to span',  self.$menuContext).text(\r\n                options.getResource('bz-rp-components-time-to-label') + ' (' + self._formatDate(maxDateObj, options.getResource(\"dateFormat\")) + '):'\r\n            );\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.removeAttr('disabled');\r\n            $applyControl.removeClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.attr('disabled', 'disabled');\r\n            $applyControl.addClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param dateObj\r\n         * @param dateFormat\r\n         * @private\r\n         */\r\n        _formatDate: function (dateObj, dateFormat) {\r\n            return bizagi.util.dateFormatter.formatDate(dateObj, dateFormat);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {*|HTMLElement}\r\n         * @private\r\n         */\r\n        _getFromControl: function () {\r\n            var self = this;\r\n            return $('.ui-bizagi-date-filter-from input', self.$menuContext);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {*|HTMLElement}\r\n         * @private\r\n         */\r\n        _getToControl: function () {\r\n            var self = this;\r\n            return $('.ui-bizagi-date-filter-to input', self.$menuContext);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param date\r\n         * @param date\r\n         * @private\r\n         */\r\n        _getDateFromInvariant: function (date) {\r\n            return bizagi.util.dateFormatter.getDateFromInvariant(date);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self.options.onClear([self.returnObject[0].properties.xpath, self.returnObject[1].properties.xpath]);\r\n            self._setDisplayTitle(true);\r\n            self._resetValues();\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n            self.options.properties.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.properties.data : data;\r\n\r\n            var $minDate = self._getFromControl();\r\n            var $maxDate = self._getToControl();\r\n            var minDate = new Date(self._getDateFromInvariant(self.options.properties.data.min));\r\n            var maxDate = new Date(self._getDateFromInvariant(self.options.properties.data.max));\r\n\r\n            $minDate.datepicker('option', 'minDate', minDate);\r\n            $minDate.datepicker('option', 'maxDate', maxDate);\r\n            $maxDate.datepicker('option', 'minDate', minDate);\r\n            $maxDate.datepicker('option', 'maxDate', maxDate);\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n Document   : bizagi.filterMoney\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andr�s Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a money control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.textFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpath) {}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if($(this).text() == options.getResource('workportal-general-button-label-apply')){\r\n                        self._setValue();\r\n                        self._setFilterToDisplayName();\r\n                        options.onApply(self.returnObject, self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $('.wgd-my-search-filter-pluggin', self.element);\r\n            var id = '#' + $opener.attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {name: options.getResource('workportal-my-search-remove-filter'), className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    min: {name: options.getResource('workportal-my-search-text'), type: 'text', className: 'ui-bizagi-text-filter'},\r\n                    buttons: {type: 'contextMenuButtons'}\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        self._disableApply();\r\n                    },\r\n                    hide: function() {\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $(self.element).contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {*|HTMLElement}\r\n         * @private\r\n         */\r\n        _getTextControl: function () {\r\n            var self = this;\r\n\r\n            return $('.ui-bizagi-text-filter input', self.$menuContext);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n\r\n            self._getTextControl().keyup( function () {\r\n                if($(this).val() && $(this).val().indexOf(' ') != 0)\r\n                    self._enableApply();\r\n                else\r\n                    self._disableApply();\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            self.returnObject = {\r\n                'properties': {\r\n                    'xpath': self.options.properties.attribute,\r\n                    'type': 'text',\r\n                    'typeSearch': 'approx'\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function (){\r\n            var self = this;\r\n\r\n            self._setReturnObject();\r\n            self._disableApply();\r\n            self._getTextControl().val('');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValue: function (){\r\n            var self = this;\r\n            var textValue = self._getTextControl().val();\r\n\r\n            if (textValue){\r\n                self.returnObject.value = textValue;\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.removeAttr('disabled');\r\n            $applyControl.removeClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.attr('disabled', 'disabled');\r\n            $applyControl.addClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setFilterToDisplayName: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            $displayNameControl.text(displayName[0] + ': ' + self.returnObject.value);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self._resetValue();\r\n            var xpaths = [self.returnObject.properties.xpath];\r\n            self._setDisplayNameToDefault();\r\n            self.options.onClear(xpaths);\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            console.log(data);\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function () {\r\n            $(this.element).contextMenu( 'destroy' );\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/**\r\n * Filter multiple plugin creates a tooltip control to show related entity information and select multiple values\r\n *\r\n * @author Andrés Fernando Muñoz\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.multiple', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpath) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n            self.isDefaultFilter = false;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindDefaultFilter();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindDefaultFilter: function () {\r\n            var self = this;\r\n            var data = self.options.data || [];\r\n            var filtersText = ': ';\r\n            var a, i = -1;\r\n\r\n            while (a = data.defaultValues[++i]) {\r\n                if (a.applied) {\r\n                    self.isDefaultFilter = true;\r\n                    self.returnObject.value.push({\"id\": a.id});\r\n                    filtersText += a.displayName;\r\n                }\r\n            }\r\n\r\n            if (self.isDefaultFilter) {\r\n                var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n                var displayText = $displayNameControl.text().split(':');\r\n\r\n                $displayNameControl.text(displayText[0] + filtersText);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            self.returnObject = {\r\n                properties: {\r\n                    xpath: self.options.properties.attribute,\r\n                    type: \"entity\",\r\n                    typeSearch: \"exact\"\r\n                },\r\n                value: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.container = function (item, opt, root) {\r\n                $('<div id=\"'+item.id+'\" class=\"menu-container\"></div>').appendTo(this);\r\n            };\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\" disabled>' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply([self.returnObject]);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _buildContextMenuItems: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var items = {};\r\n\r\n            if(self.options.showButtonClearFilter !== true) {\r\n                items[\"key\"] = {\r\n                    name: options.getResource(\"workportal-my-search-remove-filter\"),\r\n                    className: \"ui-bizagi-clear-filters\",\r\n                    callback: function () {\r\n                        self._removeFilter();\r\n                        return true;// False -> To keep the context menu open\r\n                    }\r\n                };\r\n            }\r\n            items[\"container\"] = {\r\n                id: \"checks_container_\" + options.properties.attribute.replaceAll(\".\", \"_\"),\r\n                type: \"container\"\r\n            };\r\n            items[\"buttons\"] = {\r\n               type: \"contextMenuButtons\"\r\n            };\r\n\r\n            return items;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = \"#\" + $(\".wgd-my-search-filter-pluggin\", $opener).attr(\"id\");\r\n            var items = self._buildContextMenuItems();\r\n\r\n            $opener.click(function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            $opener.contextMenu({\r\n                selector: id,\r\n                trigger: \"none\",\r\n                items: items,\r\n                events: {\r\n                    show: function() {\r\n                        var div = $(\"#checks_container_\" + options.properties.attribute.replaceAll(\".\", \"_\"), self.$menuContext);\r\n\r\n                        self._disableApply();\r\n                        div.empty();\r\n\r\n                        return $.when(options.setData()).done(function (data) {\r\n                            var data = typeof data !== 'undefined' ? data.defaultValues : options.data.defaultValues;\r\n                            var i = -1, a;\r\n\r\n                            while (a = data[++i]) {\r\n                                var id = self.returnObject.value.find(function (el) { return el.id == a.id; });\r\n                                var checked = (id || a.applied ? \"checked\" : \"\");\r\n                                if (a.id != '' && a.displayName != '' && (!self.isDefaultFilter || (self.isDefaultFilter && checked === \"checked\"))) {\r\n                                    var checkbox = \"<li>\";\r\n                                    checkbox += \"<input data-displayname='\" + a.displayName + \"' type='checkbox' value='\" + a.id + \"'\" + \" \" + checked + \">\";\r\n                                    checkbox += \"<span class='context-menu-item-label-check'>\" + a.displayName + \"</span>\";\r\n                                    checkbox += \"</li>\";\r\n\r\n                                    div.append(checkbox);\r\n                                }\r\n                            }\r\n                            self._bindHandlers();\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            self.filterValue = self.filterValue || [];\r\n\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    if(self.filterValue.length !== 0){\r\n                        var $container = $(\"<div>\");\r\n                        $.each(self.filterValue, function( index, value ) {\r\n                            $container.append($(\"<div><label>\" + value + \"</label></div>\"));\r\n                        });\r\n                        return $container;\r\n                    }\r\n                    else {\r\n                        return \"\";\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function () {\r\n            var self = this;\r\n\r\n            $(\"input:checkbox\", self.$menuContext).on(\"click\", function (ev){\r\n                ev.stopImmediatePropagation(); //stopping jquery click event handler to be call twice for a checkbox\r\n                var $target = $(ev.target);\r\n                var id = $target.attr(\"value\");\r\n                var isChecked = $target.is(':checked');\r\n\r\n                if (isChecked) {\r\n                    self.returnObject.value.push({\"id\": id});\r\n                    self._enableApply();\r\n                }\r\n                else {\r\n                    var val = self.returnObject.value.find(function (el) {return el.id == id;});\r\n                    if (val) {\r\n                        self.returnObject.value.splice(self.returnObject.value.indexOf(val), 1);\r\n                    }\r\n                    if (self.returnObject.value.length === 0) {\r\n                        self._disableApply();\r\n                    }\r\n                    else {\r\n                        self._enableApply();\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function (){\r\n            var self = this;\r\n            self.returnObject.value = [];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var $displayNameControl = $(\".wgd-my-search-filter-pluggin span\", self.element);\r\n            var displayText = $displayNameControl.text().split(\":\");\r\n            var filtersText = displayText[0] + \": \";\r\n            var cont = self.returnObject.value.length;\r\n            self.filterValue = [];\r\n\r\n            $(\"input:checked\", self.$menuContext).each(function () {\r\n                cont--;\r\n                self.filterValue.push($(this).data(\"displayname\"));\r\n                filtersText = filtersText + $(this).data(\"displayname\") + (cont == 0 ? '' : \", \");\r\n            });\r\n\r\n            $displayNameControl.text(filtersText);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $(\".wgd-my-search-filter-pluggin span\", self.element);\r\n            var displayName = $displayNameControl.text().split(\":\");\r\n\r\n            self.isDefaultFilter = false;\r\n            self.filterValue = [];\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $(\"#ui-bizagi-apply-filter\", self.$menuContext);\r\n\r\n            $applyControl.removeAttr(\"disabled\");\r\n            $applyControl.removeClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $(\"#ui-bizagi-apply-filter\", self.$menuContext);\r\n\r\n            $applyControl.attr(\"disabled\", \"disabled\");\r\n            $applyControl.addClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self.options.onClear([self.returnObject.properties.xpath]);\r\n            self._setDisplayNameToDefault();\r\n            self._resetValue();\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param filterData\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/**\r\n * Filter multiple plugin creates a tooltip control to show related entity information and select multiple values\r\n *\r\n * @author Andr�s Fernando Mu�oz\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.booleanFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpath) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            self.returnObject =\r\n            {\r\n                properties: {\r\n                    xpath: self.options.properties.attribute,\r\n                    type: \"boolean\",\r\n                    typeSearch: \"exact\"\r\n                },\r\n                value: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.container = function (item, opt, root) {\r\n                $('<div id=\"'+item.id+'\" class=\"menu-container\"></div>').appendTo(this);\r\n            };\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\" disabled>' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply([self.returnObject], self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _buildContextMenuItems: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var items = {};\r\n\r\n            if(self.options.showButtonClearFilter !== true){\r\n                items['key'] = {\r\n                    name: options.getResource('workportal-my-search-remove-filter'),\r\n                    className: 'ui-bizagi-clear-filters',\r\n                    callback: function() {\r\n                        self._removeFilter();\r\n                        return true;// False -> To keep the context menu open\r\n                    }};\r\n            }\r\n            items['container'] = {\r\n                'id': 'checks_container',\r\n                type: 'container'\r\n            };\r\n            items['buttons'] = {\r\n                type: \"contextMenuButtons\"\r\n            };\r\n\r\n            return items;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n            var items = self._buildContextMenuItems();\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            $opener.contextMenu({\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: items,\r\n                events: {\r\n                    show: function() {\r\n                        self._disableApply();\r\n                        var div = $('#checks_container', self.$menuContext);\r\n                        div.empty();\r\n                        return $.when(self.options.setData()).done(function (data) {\r\n                            var data = typeof data !== 'undefined' ? data.defaultValues : self.options.data.defaultValues;\r\n                            var i = -1, a;\r\n\r\n                            while(a = data[++i]){\r\n                                var id = (self.returnObject.value === a.id);\r\n                                if(a.id != '' && a.displayName != '') {\r\n                                    div.append('<li><input data-displayname=\"' + a.displayName + '\" type=\"radio\" name=\"boolFilter\" value=\"' + a.id + '\" ' + (id ? 'checked' : '') + '><span class=\"context-menu-item-label-check\">' + self.parseBoolean(a.displayName) + '</span></li>');\r\n                                }\r\n                            }\r\n                            self._bindHandlers();\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            self.filterValue = self.filterValue || [];\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    if(self.filterValue.length !== 0){\r\n                        var $container = $(\"<div>\");\r\n                        $.each(self.filterValue, function( index, value ) {\r\n                            $container.append($('<div><label>' + self.parseBoolean(value) + '</label></div>'));\r\n                        });\r\n                        return $container;\r\n                    }\r\n                    else{\r\n                        return \"\";\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        parseBoolean: function(value){\r\n            var valueToLocalize = bizagi.clone(value);\r\n\r\n            if(valueToLocalize === 0){\r\n                valueToLocalize = \"0\";\r\n            }\r\n            if(valueToLocalize === 1){\r\n                valueToLocalize = \"1\";\r\n            }\r\n\r\n            if(!valueToLocalize.toLowerCase){\r\n                valueToLocalize = valueToLocalize.toString();\r\n            }\r\n\r\n            switch(valueToLocalize.toLowerCase()){\r\n                case \"not specified\":\r\n                    valueToLocalize = bizagi.localization.getResource(\"workportal-general-value-undefined\");\r\n                    break;\r\n                default:\r\n                    valueToLocalize = bizagi.util.formatBoolean(valueToLocalize);\r\n                    break;\r\n            }\r\n            return valueToLocalize;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function () {\r\n            var self = this;\r\n\r\n            $('input:radio', self.$menuContext).on('click', function (ev){\r\n                ev.stopImmediatePropagation(); //stopping jquery click event handler to be call twice for a checkbox\r\n                var $target = $(ev.target);\r\n\r\n                self.returnObject.value = $target.attr(\"value\");\r\n                self._enableApply();\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function (){\r\n            var self = this;\r\n            self.returnObject.value = [];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayText = $displayNameControl.text().split(':');\r\n            var filtersText = displayText[0] + ': ';\r\n            self.filterValue = [];\r\n\r\n            $(\"input:checked\", self.$menuContext).each(function () {\r\n                self.filterValue.push($(this).data(\"displayname\"));\r\n                filtersText = filtersText + self.parseBoolean($(this).data('displayname'));\r\n            });\r\n\r\n            $displayNameControl.text(filtersText);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue = [];\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.removeAttr('disabled');\r\n            $applyControl.removeClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.attr('disabled', 'disabled');\r\n            $applyControl.addClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            var xpath = self.returnObject.properties.xpath;\r\n            self.options.onClear([xpath]);\r\n            self._setDisplayNameToDefault();\r\n            self._resetValue();\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/**\r\n*   Name: BizAgi Workportal Desktop Async Widget Controller\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define a asyncronous activities\r\n*/\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.async.extend(\"bizagi.workportal.widgets.async\", {}, {\r\n    init: function(workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"async\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.async\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /**\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n    postRender: function() {\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        // Bind inbox click link\r\n        $(\".ui-bizagi-wp-async-goToInbox a\", content).click(function() {\r\n            self.publish(\"changeWidget\", {\r\n                widgetName: bizagi.workportal.currentInboxView\r\n            });\r\n        });\r\n    }\r\n});\r\n"]}