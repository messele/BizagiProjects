{"version":3,"sources":["jquery/common/bizagi.ui.controls/combo/js/jquery.ui.combo.js"],"names":["$","fn","uicombo","options","params","plg","this","config","namespace","bizagi","ui","controls","cssComponent","css","internalData","settings","data","ascombo","disabled","isSearchable","isEditable","nameTemplate","tmpl","nameSubTemplate","tmpl2","initValue","itemValue","itemText","orientation","getTemplate","name","initializeTemplates","Deferred","tmpl1","combo","list","onComplete","onChange","onComboDropDown","methods","init","op","nData","self","IE","navigator","appName","indexOf","userAgent","match","undefined","attr","addClass","loader","tmplloader","when","loadTemplates","done","a","b","subTemplateHTML","tmp","append","inputCombo","find","each","index","value","extend","apply","configureHandlers","event","trigger","type","message","time","Date","text","val","getControl","getData","findDataByValue","compareValIn","join","toString","trim","substring","length","toLowerCase","control","focus","blur","validateValueInDatasource","click","idDropdown","comboDropDown","dropDownDestroy","select","bind","keyup","e","keyUpFunction","keydown","keyDownFunction","internalComboDropDown","detach","selectTmp","objSelected","containerDropdown","containerControl","closest","containerRender","selectedValue","scrollPosition","properties","repositionInterval","height","selfControl","dropDown","position","my","at","of","collision","hide","fadeIn","width","recalculateComboOffset","id","parseInt","top","scrollTop","on","stopPropagation","onComboItemSelected","fadeOut","document","unbind","makeArray","preventDefault","target","hasClass","clearInterval","setInterval","dropDownReposition","tg","removeAttr","dropDownValidClose","etarget","currentTarget","activeElement","window","one","containerForm","removeClass","remove","selected","selectedKey","setValue","setDisplayValue","active","altKey","ctrlKey","metaKey","shiftKey","keyCode","selectPreviousElement","selectNextElement","selectFirstElement","selectLastElement","selectItemByKeyUp","actual","previous","prev","next","valValue","selectedLabel","controlProperties","clearDisplayValue","getSelectedValue","dropDwn","objParent","util","isIE","getInternetExplorerVersion","offset","obj","destroy","empty","error","selectItem","item","plugin","jQuery"],"mappings":"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","sourcesContent":["/**\r\nPlugin to create WorkPortal Combos...\r\n\r\n    var options = {\r\n        data: {},\r\n        css:'customCSS'\r\n    };\r\n\r\n    $('selector').uicombo(options);\r\n\r\n    $(document).on(\"comboChange\", function(obj){\r\n        console.log(obj.message, obj.ui, obj.ui.val());\r\n    });\r\n\r\n@class $.fn.uicombo \r\n@constructor uicombo\r\n**/\r\n(function ($) {\r\n    \"use strict\";\r\n    $.fn.uicombo = function (options, params) {\r\n\r\n        var plg = this;\r\n\r\n        plg.config = {\r\n            namespace: $.bizagi.ui.controls.uicombo.namespace,\r\n            cssComponent: $.bizagi.ui.controls.uicombo.css,\r\n            internalData: {}\r\n        };\r\n\r\n        plg.settings = {\r\n            /**\r\n            DataSource to create a uiRadio Control\r\n\r\n            var data = [\r\n            {   \r\n            value:value,\r\n            text:'combo'\r\n            }\r\n            ];\r\n\r\n            @property data \r\n            @type Object\r\n            @default \"{}\"\r\n            **/\r\n            data: {},\r\n            ascombo: true,\r\n\r\n            /**\r\n            to disabled combo\r\n\r\n            @property disabled \r\n            @type bool\r\n            @default false\r\n            */\r\n            disabled: false,\r\n\r\n            /**\r\n            Make the combo searchable\r\n\r\n            @property isSearchable \r\n            @type Boolean\r\n            @default \"false\"\r\n            **/\r\n            isSearchable: false,\r\n            /**\r\n            Make the combo editable\r\n\r\n            @property isEditable \r\n            @type Boolean\r\n            @default \"false\"\r\n            **/\r\n            isEditable: false,\r\n            nameTemplate: $.bizagi.ui.controls.uicombo.tmpl,\r\n            nameSubTemplate: $.bizagi.ui.controls.uicombo.tmpl2,\r\n            /**\r\n            Function to set a initial value\r\n                \r\n            {value:1}\r\n\r\n            @property initValue \r\n            @type Object\r\n            @default \"null\"\r\n            **/\r\n            initValue: null,\r\n            /**\r\n            Function to modify values\r\n\r\n            @property itemValue \r\n            @type Function\r\n            @param {Object} Object with value\r\n            @default \"null\"\r\n            **/\r\n            itemValue: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property itemText \r\n            @type Function\r\n            @param {Object} Object with text\r\n            @default \"null\"\r\n            **/\r\n            itemText: null,\r\n            css: '',\r\n            orientation: 'biz-o-left',\r\n            getTemplate: function (name) {\r\n                return bizagi.getTemplate(name);\r\n            },\r\n\r\n            /**\r\n            Function to initialize templates\r\n            @type Function\r\n            @return object\r\n            **/\r\n            initializeTemplates: function () {\r\n\r\n                var self = this;\r\n                var deferred = $.Deferred();\r\n                var tmpl1 = self.nameTemplate;\r\n                var tmpl2 = self.nameSubTemplate;\r\n\r\n                return {\r\n                    \"combo\": (bizagi.getTemplate(tmpl1)),\r\n                    \"list\": (bizagi.getTemplate(tmpl2))\r\n                };\r\n            },\r\n\r\n            /**\r\n            Function exceute when combo is ready\r\n\r\n            @property onComplete \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onComplete: function () { },\r\n            /**\r\n            Function exceute when combo change\r\n\r\n            @property onChange \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onChange: function () { },\r\n            /**\r\n             Function execute when combo DropDown\r\n\r\n             @property onComboDropDown\r\n             @type Function\r\n             @default \"function(){}\"\r\n             **/\r\n            onComboDropDown: function () { }\r\n        };\r\n\r\n        plg.methods = {\r\n            init: function (op) {\r\n\r\n                var self = $(this),\r\n                    template = op.getTemplate(op.nameTemplate),\r\n                    subTemplate = op.getTemplate(op.nameSubTemplate),\r\n                    nData;\r\n\r\n                //Util functions to detect ie browsers accurately                \r\n                var isIE = function () {\r\n                    return (navigator.appName.indexOf(\"Internet Explorer\") > 0);\r\n                };\r\n\r\n                var isIE11 = function () {\r\n                    return !!navigator.userAgent.match(/Trident\\/7.0/) && !navigator.userAgent.match(/MSIE/i);\r\n                };\r\n\r\n                op.IE = isIE() ? true : (isIE11() ? true : undefined);\r\n\r\n                self.attr('role', op.namespace);\r\n                self.addClass(op.cssComponent);\r\n                self.addClass(op.css);\r\n\r\n                self.loader = new bizagi.ui.controls.tmplloader();\r\n\r\n                $.when(self.loader.loadTemplates(op.initializeTemplates())).done(function () {\r\n\r\n                    var a = self.loader.getTemplate(\"combo\");\r\n                    var b = self.loader.getTemplate(\"list\");\r\n\r\n                    plg.config.internalData = nData = op.data;\r\n\r\n                    nData.isEditable = op.isEditable;\r\n                    nData.disabled = op.disabled;\r\n\r\n                    plg.config.subTemplateHTML = b;\r\n\r\n                    var tmp = $.tmpl(a, op.data, {\r\n                        itemValue: (op.itemValue) ? op.itemValue : plg.methods.itemValue,\r\n                        itemText: (op.itemText) ? op.itemText : plg.methods.itemText\r\n                    });\r\n\r\n                    self.append(tmp);\r\n\r\n                    plg.config.inputCombo = $('.biz-wp-combo-input', self);\r\n\r\n                    tmp.find('.biz-wp-combo-option').each(function (index, value) {\r\n                        if (op.data.combo[index].data) {\r\n                            $.extend($(value).data(), op.data.combo[index].data);\r\n                        }\r\n                    });\r\n\r\n                    plg.settings.onComplete.apply(self, []);\r\n\r\n                    self.methods = plg.methods;\r\n                    self.config = plg.config;\r\n                    self.settings = plg.settings;\r\n\r\n                    self.methods.configureHandlers.apply(self, []);\r\n\r\n\r\n                    /**\r\n                    Fired when a combo is created\r\n\r\n                    @event comboCompleted \r\n                    @param {String} type comboCompleted\r\n                    @param {String} message\r\n                    @param {Date} time\r\n                    @param {Object} Jquery Object HTML \r\n                    **/\r\n                    $.event.trigger({\r\n                        type: \"comboCompleted\",\r\n                        message: \"combo is Completed\",\r\n                        time: new Date(),\r\n                        ui: self\r\n                    });\r\n\r\n                    if (plg.settings.initValue) {\r\n                        var value = '',\r\n                                text = '';\r\n\r\n                        if (plg.settings.itemText) {\r\n                            text = plg.settings.itemText(plg.settings.initValue);\r\n                        } else {\r\n                            text = plg.settings.initValue.text;\r\n                        }\r\n\r\n                        if (plg.settings.itemValue) {\r\n                            value = plg.settings.itemValue(plg.settings.initValue);\r\n                        } else {\r\n                            value = plg.settings.initValue.value;\r\n                        }\r\n\r\n                        if (text === \"\") {\r\n                            self.config.inputCombo.val('');\r\n                        } else {\r\n                            self.config.inputCombo.val(text);\r\n                        }\r\n\r\n                        plg.config.inputCombo.data('value', value);\r\n\r\n                    }\r\n\r\n\r\n                    /*     }).fail(function () {\r\n                    $.error('No se pudo cargar el template para generar las tablas');\r\n                    });*/\r\n                });\r\n            },\r\n\r\n            getControl: function () {\r\n                var self = this,\r\n                    $control = $('.biz-wp-combo', self);\r\n\r\n                return $control;\r\n            },\r\n            getData: function () {\r\n                return plg.config.internalData;\r\n            },\r\n            findDataByValue: function (val) {\r\n                var self = this,\r\n                    result = -1,\r\n                    i = 0;\r\n\r\n                if (val !== undefined && val !== null) {\r\n                    var compareValIn = (typeof val === 'object') ? val.join(\" - \") : (typeof val === 'boolean') ? val.toString() : val,\r\n                        compareVal = $.trim(compareValIn).substring(0, compareValIn.length).toLowerCase(),\r\n                        selfData = self.getData();\r\n                }\r\n\r\n                return result;\r\n            },\r\n            /*\r\n            *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n            */\r\n            configureHandlers: function () {\r\n                var self = this,\r\n                    control = self.methods.getControl.apply(self, []);\r\n\r\n                self.config.inputCombo.focus(function () {\r\n                    //$(this).trigger('click');\r\n                });\r\n\r\n                self.config.inputCombo.blur(function () {\r\n                    if (self.settings.isSearchable) {\r\n                        self.methods.validateValueInDatasource();\r\n                    }\r\n                });\r\n\r\n                self.config.inputCombo.click(function () {\r\n                    var idDropdown = \"dd-\" + self.config.inputCombo.attr(\"id\");\r\n                    if ($(\"#\" + idDropdown, control).length === 0) {\r\n                        self.methods.comboDropDown.apply(self, []);\r\n                    } else {\r\n                        // Close combo if clicked twice \r\n                        self.methods.dropDownDestroy.apply(self, [$(idDropdown)]);\r\n                    }\r\n                    self.config.inputCombo.select();\r\n                });\r\n                // Bind clicks to fake UI in order to simulate select clicks\r\n                $(\".biz-wp-combo-btn\", control).bind(\"click.combo\", function () {\r\n                    self.config.inputCombo.trigger(\"click\").focus();\r\n                });\r\n\r\n                self.config.inputCombo.keyup(function (e) {\r\n                    self.methods.keyUpFunction.apply(self, [e]);\r\n                });\r\n\r\n                self.config.inputCombo.keydown(function (e) {\r\n                    self.methods.keyDownFunction.apply(self, [e]);\r\n                });\r\n            },\r\n            /*\r\n            *   Makes the combo drops down, also fetch the data first if the combo is set to load on demand\r\n            */\r\n            comboDropDown: function () {\r\n                var self = this;\r\n\r\n                $.when(self.methods.getData()).done(function (data) {\r\n                    self.methods.internalComboDropDown.apply(self, [data]);\r\n                    plg.settings.onComboDropDown();\r\n                });\r\n\r\n            },\r\n            /*\r\n            *   Draws the mini-popup\r\n            */\r\n            internalComboDropDown: function (data) {\r\n                $(\".ui-select-dropdown.open\").detach();\r\n                var self = this, selectTmp, objSelected = {};\r\n                /** temp templates **/\r\n                var containerDropdown = $(\"<div class='ui-select-dropdown open'></div>\");\r\n                /* control reference */\r\n                var containerControl = self.config.inputCombo.closest('.biz-wp-combo-data-container');\r\n                var containerRender = containerControl.closest('.biz-wp-combo');\r\n                var idDropdown = \"dd-\" + self.config.inputCombo.attr(\"id\");\r\n                var selectedValue = self.methods.findDataByValue(self.config.inputCombo.val());\r\n                var scrollPosition = 0;\r\n\r\n                data = data || self.properties.data;\r\n\r\n                self.repositionInterval;\r\n\r\n                var height = containerRender.css(\"height\"),\r\n                    selfControl = self.methods.getControl.apply(self, []);\r\n\r\n                containerRender.addClass(\"ac-is-visible\");\r\n\r\n                containerRender.css(\"height\", height);\r\n                containerControl.addClass(\"ac-is-visible ac-clear-floats\");\r\n\r\n                containerDropdown.attr(\"id\", idDropdown);\r\n\r\n                selectTmp = $.tmpl(plg.config.subTemplateHTML, data, {\r\n                    itemValue: (self.settings.itemValue) ? self.settings.itemValue : self.methods.itemValue,\r\n                    itemText: (self.settings.itemText) ? self.settings.itemText : self.methods.itemText\r\n                });\r\n                var dropDown = containerDropdown.append(selectTmp);\r\n                containerControl.append(dropDown);\r\n\r\n\r\n                dropDown.position({\r\n                    my: \"left top\",\r\n                    at: \"left bottom\",\r\n                    of: $(\".biz-wp-combo-input\", selfControl),\r\n                    collision: \"none\"\r\n                }).hide();\r\n\r\n                dropDown.fadeIn();\r\n\r\n                dropDown.width(selfControl.width());\r\n\r\n                self.methods.recalculateComboOffset(dropDown, selfControl);\r\n\r\n                dropDown.data('formWidth', containerControl.width());\r\n                dropDown.data('parentCombo', selfControl);\r\n\r\n                dropDown.addClass(self.settings.orientation);\r\n\r\n                if (selectedValue !== -1) {\r\n                    objSelected = $(\"li[data-value='\" + selectedValue.id + \"']\", dropDown);\r\n                    objSelected.addClass('ui-selected');\r\n                    objSelected.addClass(\"active\");\r\n                    scrollPosition = parseInt(objSelected.position().top);\r\n                    dropDown.scrollTop(scrollPosition);\r\n                }\r\n\r\n                dropDown.on(\"mouseup\", \"li\", function (event) {\r\n\r\n                    event.stopPropagation();\r\n\r\n                    var dataValue = $(this).data('value').toString();\r\n\r\n                    var value = (dataValue) ? $(this).data('value') : '';\r\n                    var val = { value: value, text: $(this).text() };\r\n                    self.methods.onComboItemSelected.apply(self, [val]);\r\n                    self.config.inputCombo.focus();\r\n\r\n                    // Animation effect\r\n                    dropDown.fadeOut('slow', function () {\r\n                        self.methods.dropDownDestroy.apply(self, [dropDown]);\r\n                    });\r\n                    $(document).unbind(\"click.closecombo\");\r\n                });\r\n\r\n                // Stop bubbling outside the dropdown\r\n                $.makeArray(dropDown, self.methods.getControl.apply(self, [])).bind('click', function (e) {\r\n                    e.preventDefault();\r\n                    return false;\r\n                });\r\n\r\n                /*fix for IE*/\r\n                dropDown.bind('mousedown.closecombo', function () {\r\n                    dropDown.attr('md', true);\r\n                });\r\n\r\n                // Handle dialog resizes\r\n                // TODO: Change document handlers to \"closest\" ui-dialog -> ui-resizable-handle  handlers\r\n                $(document).bind(\"mousedown.resizecombo\", function (e) {\r\n                    if ($(e.target).hasClass('ui-resizable-handle')) {\r\n                        if (self.repositionInterval) {\r\n                            clearInterval(self.repositionInterval);\r\n                        }\r\n                        self.repositionInterval = setInterval(function () {\r\n                            self.methods.dropDownReposition.apply(self, [dropDown, containerControl]);\r\n                        }, 10);\r\n                    }\r\n                });\r\n                $(document).bind(\"mouseup.resizecombo\", function (e) {\r\n                    clearInterval(self.repositionInterval);\r\n                    var tg = $(e.target);\r\n                    if (!dropDown.attr('md')) { /* <-- fix for IE*/\r\n                        if (!tg.hasClass('ui-select-dropdown')) {\r\n                            self.methods.dropDownValidClose.apply(self, [tg, dropDown]);\r\n                        }\r\n                    } else {\r\n                        dropDown.removeAttr('md');\r\n                    }\r\n                });\r\n\r\n                $(document).on('mouseup.closecombo', function (e) {\r\n                    var etarget;\r\n                    if (self.settings.IE && e.currentTarget.activeElement) {\r\n                        etarget = e.currentTarget.activeElement\r\n                    } else {\r\n                        etarget = e.target;\r\n                    }\r\n\r\n                    var tg = $(etarget);\r\n                    if (!dropDown.attr('md')) {\r\n                        if (!tg.hasClass('ui-select-dropdown')) {\r\n                            self.methods.dropDownValidClose.apply(self, [tg, dropDown]);\r\n                        }\r\n                    } else {\r\n                        dropDown.removeAttr('md');\r\n                    }\r\n                });\r\n\r\n                $(window).bind('resize.resizecombo', function () {\r\n                    if (self.repositionInterval) {\r\n                        clearInterval(self.repositionInterval);\r\n                    }\r\n\r\n                    self.methods.dropDownReposition.apply(self, [dropDown, containerControl]);\r\n                });\r\n\r\n                $(document).one(\"click.closecombo\", function (e) {\r\n                    var tg = $(e.target);\r\n                    if (!dropDown.attr('md')) {\r\n                        self.methods.dropDownValidClose.apply(self, [tg, dropDown]);\r\n                    } else {\r\n                        dropDown.removeAttr('md');\r\n                    }\r\n                });\r\n\r\n            },\r\n            /*\r\n            * validate when fire event form document and window\r\n            */\r\n            dropDownValidClose: function (target, dropDown) {\r\n                var self = this;\r\n                //   if (target.closest(\".biz-wp-combo\", self.element).length === 0) {\r\n                dropDown.fadeOut('slow', function () {\r\n                    self.methods.dropDownDestroy.apply(self, [dropDown]);\r\n                });\r\n                $(document).unbind(\"click.closecombo\");\r\n                //        }\r\n            },\r\n            /*\r\n            * set a new dropdown position\r\n            */\r\n            dropDownReposition: function (dropDown, containerForm) {\r\n                var self = this,\r\n                    selfControl = self.methods.getControl.apply(self, []);\r\n                if ((containerForm.width() != dropDown.data('formWidth'))) {\r\n\r\n                    dropDown.width((selfControl.width() < 100) ? 100 : selfControl.width());\r\n\r\n                    dropDown.position({\r\n                        my: \"left top\",\r\n                        at: \"left bottom\",\r\n                        of: $(\".biz-wp-combo-input\", selfControl),\r\n                        collision: \"none\"\r\n                    });\r\n                    dropDown.data('formWidth', containerForm.width());\r\n                }\r\n            },\r\n            /*\r\n            * destroy dropdown\r\n            */\r\n            dropDownDestroy: function (dropDown) {\r\n                var self = this;\r\n                var containerControl = self.config.inputCombo.closest('.ui-bizagi-control');\r\n                var containerRender = containerControl.closest('.ui-bizagi-render');\r\n\r\n                if (containerControl.hasClass(\"ac-is-visible\")) {\r\n                    containerControl.removeClass(\"ac-is-visible\");\r\n                }\r\n                if (containerControl.hasClass(\"ac-clear-floats\")) {\r\n                    containerControl.removeClass(\"ac-clear-floats\");\r\n                }\r\n                containerRender.css(\"height\", \"auto\");\r\n                if (containerRender.hasClass(\"ac-is-visible\")) {\r\n                    containerRender.removeClass(\"ac-is-visible\");\r\n                }\r\n\r\n                dropDown.remove();\r\n                $(document).unbind(\"mousedown.closecombo\");\r\n                $(document).unbind(\"mouseup.resizecombo\");\r\n                $(window).unbind('resize.resizecombo');\r\n                $(window).unbind('mouseup.closecombo');\r\n                (self.repositionInterval)\r\n                clearInterval(self.repositionInterval);\r\n            },\r\n            validateValueInDatasource: function () {\r\n                var self = this;\r\n                var selected = plg.config.inputCombo.val();\r\n                var valText = '';\r\n                var selectedKey = self.findDataByValue(selected);\r\n\r\n\r\n                if (!self.value) {\r\n                    self.value = { id: '' };\r\n                }\r\n\r\n                if (selectedKey.id > 0) {\r\n                    self.setValue({ id: selectedKey.id }, false);\r\n                    self.setDisplayValue(selectedKey);\r\n                } else if (selectedKey.id == \"\") {\r\n                    if (self.value.id != selectedKey.id) {\r\n                        self.setValue(selectedKey, false);\r\n                    }\r\n                    self.setDisplayValue(selectedKey);\r\n                } else {\r\n                    self.setDisplayValue(self.selectedValue);\r\n                }\r\n            },\r\n            /*\r\n            *   Keydown listener\r\n            */\r\n            keyDownFunction: function (e) {\r\n                var self = this;\r\n                var idDropdown = \"dd-\" + plg.config.inputCombo.attr(\"id\");\r\n                var dropDown = $(\"#\" + idDropdown);\r\n                var active = $(\"li.active\", dropDown);\r\n\r\n                e = e ? e : window.event;\r\n\r\n                // Need to implement hiding select on \"Escape\" and \"Enter\".\r\n                if (e.altKey || e.ctrlKey || e.metaKey) {\r\n                    return 1;\r\n                }\r\n\r\n\r\n                if (dropDown.length === 0) {\r\n                    self.methods.comboDropDown.apply(self, []);\r\n                    dropDown = $(\"#\" + idDropdown);\r\n                }\r\n\r\n                if (e.shiftKey && e.keyCode) {\r\n                    dropDown.remove();\r\n                    return 0;\r\n                }\r\n\r\n                if (27 == e.keyCode) {\r\n                    self.methods.setDisplayValue.apply(self, [self.selectedValue]);\r\n                    dropDown.remove();\r\n                }\r\n\r\n                if (9 == e.keyCode || 13 == e.keyCode) {\r\n                    if (active.length > 0) {\r\n                        self.config.inputCombo.val(active.text());\r\n                    }\r\n                    if (self.settings.isSearchable) {\r\n                        self.methods.validateValueInDatasource();\r\n                    } else {\r\n                        self.methods.setValue.apply(self, [active.data('value')]);\r\n                    }\r\n                    dropDown.remove();\r\n                    return 1;\r\n                }\r\n\r\n                if (e.keyCode == '38' || e.keyCode == '37') {\r\n                    // up arrow\r\n                    self.methods.selectPreviousElement.apply(self, [dropDown]);\r\n                    return 0;\r\n                }\r\n                else if (e.keyCode == '40' || e.keyCode == '39') {\r\n                    // down arrow\r\n                    self.methods.selectNextElement.apply(self, [dropDown]);\r\n                    return 0;\r\n                }\r\n\r\n                if (e.keyCode == 36) {\r\n                    self.methods.selectFirstElement.apply(self, [dropDown]);\r\n                    return 0;\r\n\r\n                } else if (e.keyCode == 35) {\r\n                    self.methods.selectLastElement.apply(self, [dropDown]);\r\n                    return 0;\r\n\r\n                }\r\n\r\n                return 1;\r\n            },\r\n            /*\r\n            *   KeyUp listener\r\n            */\r\n            keyUpFunction: function (e) {\r\n                var self = this;\r\n                var idDropdown = \"dd-\" + plg.config.inputCombo.attr(\"id\");\r\n                var dropDown = $(\"#\" + idDropdown);\r\n\r\n                e = e ? e : window.event;\r\n\r\n                if (e.altKey || e.ctrlKey || e.metaKey || 50 == e.keyCode || 13 == e.keyCode || 9 == e.keyCode || 27 == e.keyCode || e.keyCode == '38' || e.keyCode == '40' || e.shiftKey && e.keyCode || e.keyCode == 36 || e.keyCode == 35 || e.keyCode == 33 || e.keyCode == 34) {\r\n                    return 0;\r\n                }\r\n\r\n                if (dropDown.length === 0) {\r\n                    self.methods.comboDropDown.apply(self, []);\r\n                    dropDown = $(\"#\" + idDropdown);\r\n                }\r\n\r\n                self.methods.selectItemByKeyUp.apply(self, []);\r\n\r\n                return 1;\r\n            },\r\n            /*\r\n            * Select letter by letter\r\n            */\r\n            selectItemByKeyUp: function () {\r\n                var self = this, objSelected;\r\n\r\n                var idDropdown = \"dd-\" + plg.config.inputCombo.attr(\"id\");\r\n                var dropDown = $(\"#\" + idDropdown);\r\n\r\n\r\n                $('.active', dropDown).removeClass('active');\r\n\r\n                var selectedKey = (self.settings.isSearchable) ? self.methods.findDataByValue(plg.config.inputCombo.val()) : -1;\r\n\r\n                if (selectedKey !== -1) {\r\n                    objSelected = $(\"li[data-value='\" + selectedKey.id + \"']\", dropDown);\r\n                    objSelected.addClass(\"active\");\r\n                } else {\r\n                    objSelected = $('li.ui-selected', dropDown);\r\n                }\r\n\r\n                if (dropDown.length > 0 && objSelected.length > 0) {\r\n                    scrollPosition = parseInt(objSelected.position().top);\r\n                    dropDown.scrollTop(scrollPosition);\r\n                } else {\r\n                    self.methods.setValue.apply(self, [self.selectedValue]);\r\n                }\r\n            },\r\n            selectFirstElement: function (dropDown) {\r\n                var self = this;\r\n                var actual = $(\"li:first\", dropDown);\r\n                $('li', dropDown).removeClass(\"active\");\r\n                actual.addClass(\"active\");\r\n                scrollPosition = actual.position().top;\r\n                dropDown.scrollTop(scrollPosition);\r\n\r\n                plg.config.inputCombo.val($(actual).text());\r\n\r\n\r\n            },\r\n            selectLastElement: function (dropDown) {\r\n                var self = this,\r\n                    actual = $(\"li:last\", dropDown);\r\n                $('li', dropDown).removeClass(\"active\");\r\n                actual.addClass(\"active\");\r\n                scrollPosition = actual.position().top;\r\n                dropDown.scrollTop(scrollPosition);\r\n\r\n                plg.config.inputCombo.val($(actual).text());\r\n\r\n            },\r\n            /*\r\n            * Handler key Up\r\n            */\r\n            selectPreviousElement: function (dropDown) {\r\n                var self = this;\r\n                var scrollPosition = 0;\r\n                var actual = $(\"li.active\", dropDown);\r\n\r\n                if (actual.length === 0) {\r\n                    actual = $(\"li:first\", dropDown);\r\n                }\r\n                var previous = actual.prev();\r\n\r\n                if (previous.length != 0) {\r\n                    actual.removeClass(\"active\");\r\n                    $(previous).addClass(\"active\");\r\n                    scrollPosition = $(previous).position().top;\r\n\r\n                    dropDown.scrollTop(scrollPosition);\r\n                    plg.config.inputCombo.val($(previous).text());\r\n                }\r\n\r\n            },\r\n            /*\r\n            *Handler key Down\r\n            */\r\n            selectNextElement: function (dropDown) {\r\n                var self = this;\r\n                var scrollPosition = 0;\r\n                var actual = $(\"li.active\", dropDown);\r\n\r\n                if (actual.length === 0) {\r\n                    actual = $(\"li:first\", dropDown);\r\n                }\r\n                var next = actual.next();\r\n\r\n                if (next.length != 0) {\r\n                    actual.removeClass(\"active\");\r\n                    $(next).addClass(\"active\");\r\n                    scrollPosition = $(next).position().top;\r\n\r\n                    dropDown.scrollTop(scrollPosition);\r\n                    plg.config.inputCombo.val($(next).text());\r\n                }\r\n\r\n            },\r\n            /*\r\n            *   Handler to react when a combo item is selected\r\n            */\r\n            onComboItemSelected: function (val) {\r\n                var self = this;\r\n                var valValue = val.value.toString();\r\n                var selectedLabel = val.text || \"\";\r\n\r\n                if (valValue === \"\") {\r\n                    self.config.inputCombo.val(selectedLabel);\r\n                } else {\r\n                    self.config.inputCombo.val(selectedLabel);\r\n                }\r\n\r\n                self.methods.setValue.apply(self, [valValue]);\r\n            },\r\n            setValue: function (val) {\r\n                var self = this;\r\n                self.config.inputCombo.data('value', val);\r\n                /**\r\n                Fired when a combo change\r\n\r\n                @event comboChange \r\n                @param {String} type comboChange\r\n                @param {String} message \r\n                @param {Date} time \r\n                @param {Object} Jquery Object HTML \r\n                **/\r\n                var control = self.config.inputCombo,\r\n                        controlProperties = {\r\n                            type: \"comboChange\",\r\n                            message: \"combo change\",\r\n                            time: new Date(),\r\n                            ui: control\r\n                        };\r\n\r\n                plg.settings.onChange(controlProperties);\r\n\r\n                $.event.trigger(controlProperties);\r\n            },\r\n            /*\r\n            *   Sets the value in the rendered control\r\n            */\r\n            setDisplayValue: function (value) {\r\n                var self = this;\r\n                var comboValue = '';\r\n                var comboValueValid = true;\r\n\r\n                value = (plg.settings.itemValue) ? plg.settings.itemValue : plg.methods.itemValue;\r\n\r\n                if (value !== null) {\r\n                    plg.config.inputCombo.val(comboValue);\r\n                } else if (value === null) {\r\n                    plg.config.inputCombo.val(comboValue);\r\n                }\r\n\r\n            },\r\n            /*\r\n            *   Sets the value in the rendered control\r\n            */\r\n            clearDisplayValue: function () {\r\n                var self = this;\r\n                plg.config.inputCombo.val('');\r\n                self.value = self.properties.value = self.selectedValue;\r\n            },\r\n            /*\r\n            *   Returns the selected value in the template\r\n            */\r\n            getSelectedValue: function () {\r\n                var self = this;\r\n                return self.selectedValue;\r\n            },\r\n            recalculateComboOffset: function (dropDwn, objParent) {\r\n                if (bizagi.util.isIE() && (bizagi.util.getInternetExplorerVersion() == 9)) {\r\n                    if (dropDwn.width() !== objParent.width()) {\r\n                        var offset = objParent.width() - dropDwn.width();\r\n                        dropDwn.width(objParent.width() + offset);\r\n                    }\r\n                }\r\n            },\r\n            itemValue: function (obj) {\r\n                var val = '';\r\n                if (obj.itemValue) {\r\n                    val = obj.itemValue(obj);\r\n                } else {\r\n                    if (typeof obj.value === 'string' || typeof obj.value === 'number') {\r\n                        val = obj.value;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            itemText: function (obj) {\r\n                var val = '';\r\n                if (obj.itemValue) {\r\n                    val = obj.itemText(obj);\r\n                } else {\r\n                    if (typeof obj.text === 'string') {\r\n                        val = obj.text;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            /**\r\n            * Destroy ComboBox\r\n            *\r\n            *   $('selector').uicombo('destroy');\r\n            *\r\n            * @method destroy\r\n            * @return {Object} Jquery Empty Object\r\n            */\r\n            destroy: function (op) {\r\n                var self = $(this);\r\n                if (self.attr('role') === op.namespace) {\r\n                    self.empty();\r\n                } else {\r\n                    $.error('No es posible eliminar un control con un namespace diferente: [role: ' + op.namespace + ']');\r\n                }\r\n            },\r\n            /*\r\n            *   Select the related item (syntax = {text:\"item1\", value:1})\r\n            */\r\n            selectItem: function (item) {\r\n                var self = this;\r\n                var control = $('.biz-wp-combo-input', self);                \r\n                control.val(item.text);\r\n                control.data('value', item.value);\r\n            },\r\n        };\r\n\r\n\r\n\r\n        if (typeof options != 'object' && options) {\r\n\r\n            $.extend(plg.settings, params, plg.config);\r\n            return plg.methods[options].apply(this, [plg.settings]);\r\n\r\n        } else if (typeof options === 'object' || !options || options === undefined) {\r\n\r\n            $.extend(plg.settings, options, plg.config);\r\n            return this.each(function () {\r\n                plg.methods.init.apply(this, [plg.settings]);\r\n            });\r\n\r\n        } else {\r\n\r\n            $.error('Method ' + options + ' does not exist on jQuery.combo');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.bizagi.ui.controls.uicombo.plugin = $.fn.uicombo;\r\n\r\n} (jQuery));"]}