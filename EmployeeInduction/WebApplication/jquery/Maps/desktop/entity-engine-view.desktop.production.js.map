{"version":3,"sources":["jquery/workportal/desktop/widget/paginator/bizagi.workportal.desktop.widgets.paginator.js","jquery/workportal/desktop/widget/sortbar/bizagi.workportal.desktop.widgets.sortbar.js","jquery/workportal/desktop/widget/mysearchfilter/bizagi.workportal.desktop.widgets.mysearchfilter.js"],"names":["bizagi","workportal","widgets","widget","extend","init","workportalFacade","dataService","params","this","_super","loadTemplates","paginator","getTemplate","concat","content","renderContent","self","hide","referenceType","template","getSuffixWidget","render","postRender","sub","$","proxy","updateView","configureHandlers","ev","args","$content","getContent","renderTemplate","totalRecords","totalPages","displayName","currentPage","appendTo","setModel","empty","fromActionLauncher","clean","histName","action","reference","surrogateKey","event","guidSearch","getModel","page","stopNavigation","on","onPageBreak","$target","target","hasClass","type","data","disabledPaginatorButtonsByLimits","find","text","pub","$buttonFastRewind","$buttonRewind","$buttonFordward","$buttonFastFordward","addClass","removeClass","injector","register","processActionService","accumulatedcontext","sortbar","right-content","addButton","sortMenu","actions","recordsPerPage","recordsMenu","enableFilter","$checkAll","append","configureAfterPaintHandlers","initializeAndProcessFilterButton","setFiltersSortData","hideFilterButtonAndBar","hideSortButtons","enableBatchActions","updateCounterByFilterApplied","showingFiltering","setVisibleCheckAll","behaviorVisibleSortbar","validActions","actionsData","tooltip","onCheckUncheck","showSortMenu","showRecordsMenu","sortSelection","attribute","setIconSortType","_sortType","properties","xpath","orderType","typeSearch","onRemoveSelectedItemsCollections","showingSorting","showingCheckAll","_haveAddButton","setVisibleSortbar","visible","show","closest","showSelectedItems","numberCheckedItems","keywordSelected","getResource","button","sortTypeBeforeChanged","onClickBatchAction","$buttonLI","guidAction","getAction","requestsInProgressActionGuid","addLoadingButtonAction","when","executeBatchAction","commonActionsmodel","always","remove","undefined","$button","prepend","commonActions","value","$parent","filters","_filters","displayValue","val","length","click","e","stopPropagation","document","one","currentTarget","index","display","split","pop","pageSize","Number","util","trim","textContent","restoreOrderSelected","processAddButton","$buttonContainer","_lastReferenceEntity","children","startLoading","delay","overlay","getProcessAddAction","done","referenceEntity","Object","getOwnPropertyNames","guidEntity","id","renderButton","endLoading","$addButton","clickAddButton","getMapping","accumulatedContext","getContext","xpathContext","mappingData","onExecuteProcess","onExecuteForm","isChecked","is","commonActionsModel","showBatchActions","checkAll","prop","typeActions","keys","itemsSelected","moreActions","slice","$actions","off","tooltipClass","items","html","open","ui","uiTooltip","$id","attr","keyActionGuid","not","$buttonAction","close","hover","stop","fadeTo","fadeOut","filtersAppliedCounter","calculateFilters","a","i","filterCounter","sortCounter","defaultValues","min","max","showFilterButton","hideFilterButton","showSortButtons","updateCounter","$sortbarIcon","filtersApplied","counter","$counter","showingFilter","startForm","hasStartForm","executeProcessAction","refreshTemplateData","loadTemplateData","isRefresh","executeFormAction","refresh","filter","grep","multiplicity","mode","isEvent","unsub","mysearchfilter","mysearchfilter-item","filterItem","initializeMySearchFilter","criteriaSearchApplied","clone","filterControlArray","orderBy","toggleWidget","openCloseWidget","setFiltersData","setOrderBy","setRecordsPerPage","defaultFilterApplied","filtersAppliedWithProperties","$listContent","replaceAll","defaultFilter","toLowerCase","tmplid","filterApplied","buildFilter","el","setFilterData","status","$element","buildFilterMultiple","buildFilterNumber","buildFilterMoney","buildFilterDate","buildFilterBoolean","filterData","multiple","number","money","dateFilter","booleanFilter","moneyFilter","showButtonClearFilter","numericFormat","onApply","element","addFilterSelection","triggerFilter","onClear","removeFilterApplied","key","localization","push","numberFilter","xpaths","multipleFilter","len","splice","indexOf","filtersToSend","filterBarFilters","defineFilterObject","filterParams","level"],"mappings":"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","sourcesContent":["/**\r\n * Name: Bizagi Workportal Desktop Paginator Controller\r\n * Author: Mauricio SÃ¡nchez\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.paginator\", {}, {\r\n\r\n    /**\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"paginator\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.paginator\").concat(\"#paginator-wrapper\"),\r\n            \"content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.paginator\").concat(\"#paginator-content\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var hide = self.params.referenceType === \"ENTITY\";\r\n        var template = self.getTemplate(\"paginator\" + self.getSuffixWidget());\r\n        self.content = template.render({hide:hide});\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        self.sub(\"PAGINATOR-UPDATE\", $.proxy(self.updateView, self));\r\n        self.configureHandlers();\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @returns {string}\r\n     */\r\n    getSuffixWidget: function(){\r\n        return \"\";\r\n    },\r\n\r\n    /**\r\n     * Updates la view with the data related to entity:\r\n     * Name entity\r\n     * Number of records\r\n     * Number of pages\r\n     * */\r\n    updateView: function (ev, params) {\r\n        var self = this;\r\n        var args = params.args;\r\n        var hide = args.referenceType === \"ENTITY\";\r\n        var $content = self.getContent();\r\n\r\n        self.setModel(args);\r\n        $content.empty();\r\n\r\n        if (args.fromActionLauncher){\r\n            if (self.totalRecords > 1) {\r\n                renderTemplate();\r\n            }\r\n            else {\r\n                self.clean();\r\n            }\r\n        }\r\n        else {\r\n            renderTemplate();\r\n        }\r\n\r\n        /**\r\n         *\r\n         */\r\n        function renderTemplate( ){\r\n            var contentTemplate = self.getTemplate(\"content\" + self.getSuffixWidget());\r\n\r\n            contentTemplate.render({\r\n                totalRecords: self.totalRecords,\r\n                totalPages: self.totalPages,\r\n                displayName: self.displayName,\r\n                currentPage: self.currentPage,\r\n                hide: hide\r\n            }).appendTo($content);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Builds the navigation model\r\n     */\r\n    setModel: function (args) {\r\n        var self = this;\r\n\r\n        self.totalRecords = typeof(args.totalRecords) == \"undefined\" ?  self.totalRecords : args.totalRecords;\r\n        self.totalPages = args.totalPages || self.totalPages;\r\n        self.displayName = args.histName || self.displayName;\r\n        self.currentPage = args.currentPage || self.currentPage;\r\n        self.action = args.action;\r\n        self.reference = args.reference || self.reference;\r\n        self.surrogateKey = args.surrogateKey || self.surrogateKey;\r\n        self.referenceType = args.referenceType;\r\n        self.event = args.event;\r\n        self.guidSearch = args.guidSearch;\r\n    },\r\n\r\n    /**\r\n     *  Gets the current model\r\n     */\r\n    getModel: function () {\r\n        var self = this;\r\n\r\n        return {\r\n            page: self.currentPage,\r\n            totalRecords: self.totalRecords,\r\n            action: self.action,\r\n            reference: self.reference,\r\n            surrogateKey: self.surrogateKey,\r\n            referenceType: self.referenceType,\r\n            stopNavigation : true,\r\n            guidSearch: self.guidSearch\r\n        };\r\n    },\r\n\r\n    /**\r\n     *  Binds events to handles\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this,\r\n            $content = self.getContent();\r\n\r\n        $content.on(\"click\", $.proxy(self.onPageBreak, self));\r\n    },\r\n\r\n    /**\r\n     * This event get a new page\r\n     */\r\n    onPageBreak: function (ev) {\r\n        var self = this,\r\n            $target = $(ev.target),\r\n            $content = self.getContent();\r\n\r\n        if ($target.hasClass(\"control-icon\") && !$target.hasClass(\"ui-state-disabled\")) {\r\n            var type = $target.data(\"type\");\r\n\r\n            if (type == \"forward\") {\r\n                self.currentPage += 1;\r\n            }\r\n            else if (type == \"rewind\") {\r\n                self.currentPage -= 1;\r\n            }\r\n            else if (type == \"fastrewind\") {\r\n                self.currentPage = 1;\r\n            }\r\n            else {\r\n                self.currentPage = self.totalPages;\r\n            }\r\n\r\n            self.disabledPaginatorButtonsByLimits();\r\n            $content.find(\".paginator-controls__currentPage\").text(self.currentPage);\r\n\r\n            self.pub(\"notify\", { type: \"UPDATE-DATATEMPLATE-VIEW\", args: self.getModel() });\r\n        }\r\n    },\r\n\r\n    disabledPaginatorButtonsByLimits: function (){\r\n        var self = this;\r\n        var $buttonFastRewind = $(\"[data-type='fastrewind']\", self.content);\r\n        var $buttonRewind = $(\"[data-type='rewind']\", self.content);\r\n        var $buttonFordward = $(\"[data-type='forward']\", self.content);\r\n        var $buttonFastFordward = $(\"[data-type='fastforward']\", self.content);\r\n\r\n        if(self.totalPages === 1){\r\n            $buttonFastRewind.addClass(\"ui-state-disabled\");\r\n            $buttonRewind.addClass(\"ui-state-disabled\");\r\n            $buttonFordward.addClass(\"ui-state-disabled\");\r\n            $buttonFastFordward.addClass(\"ui-state-disabled\");\r\n        }else{\r\n            // The first page\r\n            if(self.currentPage === 1){\r\n                $buttonFastRewind.addClass(\"ui-state-disabled\");\r\n                $buttonRewind.addClass(\"ui-state-disabled\");\r\n                $buttonFordward.removeClass(\"ui-state-disabled\");\r\n                $buttonFastFordward.removeClass(\"ui-state-disabled\");\r\n            }\r\n            // the last page\r\n            else if(self.currentPage === self.totalPages){\r\n                $buttonFastRewind.removeClass(\"ui-state-disabled\");\r\n                $buttonRewind.removeClass(\"ui-state-disabled\");\r\n                $buttonFordward.addClass(\"ui-state-disabled\");\r\n                $buttonFastFordward.addClass(\"ui-state-disabled\");\r\n            }\r\n            // other page\r\n            else{\r\n                $buttonFastRewind.removeClass(\"ui-state-disabled\");\r\n                $buttonRewind.removeClass(\"ui-state-disabled\");\r\n                $buttonFordward.removeClass(\"ui-state-disabled\");\r\n                $buttonFastFordward.removeClass(\"ui-state-disabled\");\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    clean: function(){\r\n        var self = this;\r\n        var $content = self.getContent();\r\n\r\n        if($content){\r\n            $content.empty();\r\n        }\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.paginator\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.paginator]);","/**\r\n * Name: Bizagi Workportal Desktop Sort Bar Controller\r\n * Author: Danny Gonzalez\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sortbar\", {}, {\r\n    /**\r\n     * Constructor\r\n     * @param workportalFacade\r\n     * @param dataService\r\n     * @param processActionService\r\n     * @param accumulatedcontext\r\n     * @param params\r\n     */\r\n    init: function (workportalFacade, dataService, processActionService, accumulatedcontext, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"sortbar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-wrapper\"),\r\n            \"content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-content\"),\r\n            \"right-content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-right\"),\r\n            \"addButton\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-content-add-button\"),\r\n            \"sortMenu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-sort-menu\"),\r\n            \"actions\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-content-actions\"),\r\n            \"recordsPerPage\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-records-per-page\"),\r\n            \"recordsMenu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sortbar\").concat(\"#sortbar-records-menu\")\r\n        });\r\n\r\n        self.processActionService = processActionService;\r\n        self.accumulatedcontext = accumulatedcontext;\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"sortbar\");\r\n        self.content = template.render({ enableFilter: true });\r\n        self.$checkAll = self.content.find(\".sortbar-left-check-uncheck input\");\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        var template = self.getTemplate(\"right-content\");\r\n        self.configureHandlers();\r\n        $(\".sortbar-right\", self.content).append(template.render());\r\n        self.configureAfterPaintHandlers();\r\n    },\r\n\r\n    /**\r\n     * Binds events to handles\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this,\r\n            $content = self.getContent();\r\n\r\n        self.sub(\"TEMPLATEENGINE-VIEW\", $.proxy(self.initializeAndProcessFilterButton, self));\r\n        self.sub(\"SEARCH-ENGINE-VIEW\", $.proxy(self.initializeAndProcessFilterButton, self));\r\n        self.sub(\"SET-FILTERS-DATA\", $.proxy(self.setFiltersSortData, self));\r\n        self.sub(\"HIDE-FILTER-BUTTONANDBAR\", $.proxy(self.hideFilterButtonAndBar, self));\r\n        self.sub(\"HIDE-SORT-BUTTONS\", $.proxy(self.hideSortButtons, self));\r\n        self.sub(\"ENABLE-BATCHS-ACTIONS\", function(ev, args) { return self.enableBatchActions(args);});\r\n        self.sub(\"UPDATE-COUNTER-FILTERS-APPLIED\", function(ev, args) { return self.updateCounterByFilterApplied(args); });\r\n        self.sub(\"CASES-TEMPLATE-VIEW\", function(ev, args){ self.showingFiltering = false; self.setVisibleCheckAll(false);self.behaviorVisibleSortbar(); });\r\n        self.sub(\"SOME-ITEM-ALLOW-SELECT\", function(ev, args){ self.setVisibleCheckAll(true);self.behaviorVisibleSortbar(); });\r\n        self.sub(\"HIDE-CHECK-ALL\", function(ev, args){ self.setVisibleCheckAll(false); });\r\n        self.sub(\"BATCH-ACTIONS\", function(ev, args){ return self.validActions(args.args.actionsData); });\r\n\r\n        $content.find(\".wgd-sortbar-add-button\").tooltip();\r\n        self.$checkAll.on(\"click\", $.proxy(self.onCheckUncheck, self));\r\n    },\r\n\r\n    /**\r\n     * Configure Handlers\r\n     */\r\n    configureAfterPaintHandlers: function () {\r\n        var self = this,\r\n            $content = self.getContent();\r\n\r\n        // Show sort menu\r\n        $content.find(\".right-menu\").on(\"click\", function (ev) {\r\n            self.showSortMenu(ev, $(this));\r\n        });\r\n\r\n        // Show records menu\r\n        $content.find(\".records-menu\").on(\"click\", function (ev) {\r\n            self.showRecordsMenu(ev, $(this));\r\n        });\r\n\r\n        // Change sort type\r\n        $content.find(\".sortbar-az\").on(\"click\", function () {\r\n            if(self.sortSelection.attribute) {\r\n                self.setIconSortType($(this), self._sortType);\r\n\r\n                self.pub(\"notify\", { type: \"SET-ORDERBY\", args: {\r\n                    properties:{\r\n                        xpath: self.sortSelection.attribute,\r\n                        orderType: self._sortType,\r\n                        typeSearch: \"none\"\r\n                    }\r\n                }});\r\n            }\r\n        });\r\n        // Show filter bar\r\n        $content.find(\".filter-icon\").on(\"click\", function () {\r\n            self.pub(\"notify\", { type: \"OPENCLOSE-MYSEARCHFILTER\", args: {guidSearch: self.params.guidSearch, target: $(this) }});\r\n        });\r\n\r\n        $(\".remove-selected-items-collections\", $content).on(\"click\", $.proxy(self.onRemoveSelectedItemsCollections, self));\r\n    },\r\n\r\n    /**\r\n     * Behavior visible sortbar\r\n     */\r\n    behaviorVisibleSortbar: function(){\r\n        var self = this;\r\n        if(self.showingFiltering || self.showingSorting || self.showingCheckAll || self._haveAddButton){\r\n            self.setVisibleSortbar(true);\r\n        }\r\n        else{\r\n            self.setVisibleSortbar(false);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Shor or hide sortbar\r\n     * @param visible\r\n     */\r\n    setVisibleSortbar: function(visible){\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        if(visible){\r\n            $content.show();\r\n        }\r\n        else{\r\n            $content.hide();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show or hide check input (select all)\r\n     * @param visible\r\n     */\r\n    setVisibleCheckAll: function(visible){\r\n        var self = this;\r\n        if(visible){\r\n            self.$checkAll.closest(\".border-check-uncheck\").show();\r\n            self.showingCheckAll = true;\r\n        }\r\n        else{\r\n            self.$checkAll.closest(\".border-check-uncheck\").hide();\r\n            self.showingCheckAll = false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show number items selected from data items (from casetemplate or entityTemplates)\r\n     * @param numberCheckedItems\r\n     */\r\n    showSelectedItems: function(numberCheckedItems){\r\n        var self = this;\r\n        if(numberCheckedItems && numberCheckedItems > 0){\r\n            self.content.addClass(\"there-are-actions\");\r\n\r\n            var keywordSelected = self.getResource(\"workportal-general-word-selected-singular\");\r\n            if(numberCheckedItems > 1){\r\n                keywordSelected = self.getResource(\"workportal-general-word-selected-plural\");\r\n            }\r\n            $(\".actions-count-selected\", self.content).text(numberCheckedItems + \" \" + keywordSelected + \" \");\r\n        }\r\n        else{\r\n            self.content.removeClass(\"there-are-actions\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set icon descending or ascending\r\n     * @param button represents icon ascending or descending\r\n     * @param sortTypeBeforeChanged\r\n     */\r\n    setIconSortType: function(button, sortTypeBeforeChanged){\r\n        var self = this;\r\n        if (sortTypeBeforeChanged === \"asc\") {\r\n            self._sortType =\"desc\";\r\n            button.removeClass(\"bz-icon-order-ascendant-outline\").addClass(\"bz-icon-order-descendant-outline\");\r\n        }\r\n        else {\r\n            self._sortType =\"asc\";\r\n            button.removeClass(\"bz-icon-order-descendant-outline\").addClass(\"bz-icon-order-ascendant-outline\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param event\r\n     */\r\n    onClickBatchAction: function(event){\r\n        var self = this;\r\n        var $buttonLI = $(event.target).closest(\"li\");\r\n        var guidAction = $buttonLI.data(\"guid\");\r\n        var action = self.getAction(guidAction);\r\n\r\n        if(!self.requestsInProgressActionGuid[guidAction]){\r\n            self.requestsInProgressActionGuid[guidAction] = true;\r\n\r\n            self.addLoadingButtonAction($buttonLI);\r\n\r\n            $.when(self.processActionService.executeBatchAction({\r\n                action: action,\r\n                commonActionsmodel: self.commonActionsmodel\r\n            })).always(function(){\r\n                $buttonLI.find(\".wdg-tple-button\").removeClass(\"state-loading\");\r\n                $buttonLI.find(\".ui-bizagi-loading-button\").remove();\r\n                $buttonLI.find(\"i\").show();\r\n\r\n                self.requestsInProgressActionGuid[guidAction] = undefined;\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Add loading to button\r\n     */\r\n    addLoadingButtonAction: function($button){\r\n        $button.find(\".wdg-tple-button\").addClass(\"state-loading\");\r\n        $button.find(\".wdg-tple-button\").prepend(\"<div class=\\\"ui-bizagi-loading-icon ui-bizagi-loading-button\\\"></div>\").find(\"i\").hide();\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    onRemoveSelectedItemsCollections: function(){\r\n        var self = this;\r\n        var commonActions = self.pub(\"notify\", {type: \"SET-VALUES\", args: {value: false}})[0];\r\n        self.enableBatchActions({ args: { commonActions: commonActions } });\r\n    },\r\n\r\n    /**\r\n     * Show the sort menu\r\n     * @param ev\r\n     * @param $parent\r\n     */\r\n    showSortMenu: function (ev, $parent) {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var template = self.getTemplate(\"sortMenu\");\r\n        var tooltip = template.render({filters: self._filters}, {\r\n            displayValue: function (val) {\r\n                return val;\r\n            }});\r\n\r\n        if ($(\".sortbar-box-menu\", $parent).length) {\r\n            $(\".sortbar-box-menu\", $parent).remove();\r\n        }\r\n\r\n        $parent.append(tooltip);\r\n        tooltip.show(\"fast\", function () {\r\n            tooltip.click(function (e) {\r\n                e.stopPropagation();\r\n            });\r\n            $(document).one(\"click\", function () {\r\n                tooltip.hide(\"fast\");\r\n                tooltip.remove();\r\n            });\r\n        });\r\n\r\n        //Configure handler to each action\r\n        $content.find(\".sortbar-option\").on(\"click\", function (ev) {\r\n            var data = $(ev.currentTarget).data();\r\n            var sortSelection = self._filters[data.index];\r\n            $content.find(\".sortbar-az\").removeClass(\"disabled\");\r\n\r\n            if(self.sortSelection != sortSelection) {\r\n                self.sortSelection = sortSelection;\r\n                $(\".sortbar-selected\", $parent).text(self.sortSelection.display.split(\".\").pop());\r\n                self.pub(\"notify\", { type: \"SET-ORDERBY\", args: {\r\n                    properties:{\r\n                        xpath: sortSelection.attribute,\r\n                        orderType: self._sortType,\r\n                        typeSearch: \"none\"\r\n                    }\r\n                }});\r\n            }\r\n            tooltip.hide(\"fast\");\r\n        });\r\n    },\r\n\r\n    showRecordsMenu: function (ev, $parent) {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var template = self.getTemplate(\"recordsMenu\");\r\n        var tooltip = template.render({});\r\n\r\n        if ($(\".sortbar-records-box-menu\", $parent).length) {\r\n            $(\".sortbar-records-box-menu\", $parent).remove();\r\n        }\r\n\r\n        $parent.append(tooltip);\r\n        tooltip.show(\"fast\", function () {\r\n            tooltip.click(function (e) {\r\n                e.stopPropagation();\r\n            });\r\n            $(document).one(\"click\", function () {\r\n                tooltip.hide(\"fast\");\r\n                tooltip.remove();\r\n            });\r\n        });\r\n\r\n        //Configure handler to each action\r\n        $content.find(\".sortbar-records-option\").on(\"click\", function (ev) {\r\n\r\n            var pageSize = Number(bizagi.util.trim(this.textContent));\r\n\r\n            $(\".sortbar-records-selected\", $parent).text(pageSize);\r\n\r\n            self.pub(\"notify\", {\r\n                type: \"SET-RECORDS\", args: {\r\n                    pageSize: pageSize\r\n                }\r\n            });\r\n\r\n            tooltip.hide(\"fast\");\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Asigna los parametros iniciales de la busqueda e inicializa los objetos\r\n     * @param e\r\n     * @param params\r\n     */\r\n    initializeAndProcessFilterButton: function (e, params) {\r\n        var self = this;\r\n\r\n        self.showingFiltering = false;\r\n        self.setVisibleCheckAll(false);\r\n        self.behaviorVisibleSortbar();\r\n\r\n        self.restoreOrderSelected();\r\n        self.setIconSortType($(\".sortbar-az\", self.content), \"desc\");\r\n        self.params = params.args;\r\n        self.sortSelection = {};\r\n\r\n        self.processAddButton(e, params);\r\n    },\r\n\r\n    /**\r\n     *  Checks if the add button should be displayed\r\n     */\r\n    processAddButton: function (ev, params) {\r\n        var self = this,\r\n            $content = self.getContent(),\r\n            args = params.args,\r\n            action = args.action,\r\n            $buttonContainer = $content.find(\".sortbar-left .add-button\");\r\n        self._lastReferenceEntity = args.reference;\r\n        $buttonContainer.children().remove();\r\n        $(\".wrapper-sortbar-actions\", $content).remove();//Remove same time buttons batch actions\r\n        self._haveAddButton = false;\r\n        if (args.reference && args.referenceType !== \"ENTITY\") {\r\n            $buttonContainer.startLoading({ delay: 0, overlay: true });\r\n            self.dataService.getProcessAddAction(params).done(function (data) {\r\n                if(self._lastReferenceEntity === data.referenceEntity){\r\n                    if (typeof data !== \"undefined\" && Object.getOwnPropertyNames(data).length > 1 && data.guidEntity && data.id) {\r\n                        self.renderButton($buttonContainer, data);\r\n                    }\r\n                }\r\n            }).always(function () {\r\n                $buttonContainer.endLoading();\r\n            });\r\n        }\r\n        else if (action) {\r\n            self.renderButton($buttonContainer, action);\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    renderButton: function ($buttonContainer, action) {\r\n        var self = this,\r\n            template = self.getTemplate(\"addButton\"),\r\n            $addButton = template.render({ action: action });\r\n\r\n        $buttonContainer.empty();\r\n        $addButton.appendTo($buttonContainer);\r\n        self._haveAddButton = true;\r\n        self.behaviorVisibleSortbar();\r\n        $addButton.on(\"click\", function () { self.clickAddButton(action); });\r\n    },\r\n\r\n    /**\r\n     * Click on add Proccess btn\r\n     */\r\n    clickAddButton: function (action) {\r\n        var self = this;\r\n\r\n        $.when(self.dataService.getMapping({\r\n            guidEntity: action.guidEntity,\r\n            accumulatedContext: self.accumulatedcontext.getContext({}),\r\n            xpathContext: (action.type === \"Process\") ? action.xpathContext : \"\"\r\n        })).done(function (mappingData) {\r\n            if (action.type === \"Process\") {\r\n                self.onExecuteProcess(action, mappingData);\r\n            }\r\n            else {\r\n                self.onExecuteForm(action, mappingData);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Check or uncheck all registers related, could be cases or data\r\n     */\r\n    onCheckUncheck: function(ev){\r\n        var self = this;\r\n        var $target = $(ev.target);\r\n        var isChecked = $target.is(\":checked\");\r\n        var commonActions = self.pub(\"notify\", {type: \"SET-VALUES\", args: {value: isChecked}})[0];\r\n\r\n        self.enableBatchActions({ args: { commonActions: commonActions } });\r\n    },\r\n\r\n    /**\r\n     * Enabled / disables the batch actions. This method is called always update data\r\n     */\r\n    enableBatchActions: function (params) {\r\n        var self = this;\r\n        var args = params.args;\r\n        var commonActionsModel = self.commonActionsmodel = args.commonActions;\r\n        var actions = self.validActions(commonActionsModel.actions);\r\n        if(actions.length > 0 || self._haveAddButton ){\r\n            $(self.getContent()).show();\r\n        }\r\n        self.showBatchActions(actions, commonActionsModel, \"batchAction\");\r\n\r\n        if (commonActionsModel.checkAll !== undefined) {\r\n            self.$checkAll.prop(\"checked\", commonActionsModel.checkAll);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show batch actions\r\n     * @param actions\r\n     * @param commonActionsModel\r\n     * @param typeActions\r\n     */\r\n    showBatchActions: function (actions, commonActionsModel, typeActions){\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var template = self.getTemplate(\"actions\");\r\n\r\n        self.showSelectedItems(Object.keys(commonActionsModel.itemsSelected).length);\r\n\r\n        var moreActions = actions.slice(3, 9999);\r\n\r\n        var $actions = template.render({actions: actions.slice(0, 3), moreActions: moreActions, typeActions: typeActions});\r\n\r\n        $(\".wdg-tple-button.batchAction\", self.content).off(\"click\", $.proxy(self.onClickBatchAction, self));\r\n\r\n        $(\".wrapper-sortbar-actions\", $content).remove();\r\n        $(\".sortbar-left .sortbar-menu\", $content).append($actions);\r\n\r\n        $(\".wdg-tple-button.batchAction\", self.content).on(\"click\", $.proxy(self.onClickBatchAction, self));\r\n\r\n        if(moreActions.length > 0){\r\n            if(self.content.data('ui-tooltip')) {\r\n                $(self.content).tooltip(\"destroy\");\r\n            }\r\n\r\n            $(self.content).tooltip({\r\n                tooltipClass: \"sortbar-tooltip-more-actions\",\r\n                items: \".bz-actions-showmore\",\r\n                content: $(\".template-box-tooltip\", self.content).html(),\r\n                open: function(event, ui)\r\n                {\r\n                    $(\".wdg-tple-button.batchAction\", ui.tooltip).on(\"click\", $.proxy(self.onClickBatchAction, self));\r\n\r\n                    var uiTooltip = $('div.ui-tooltip');\r\n\r\n                    if (typeof(event.originalEvent) === 'undefined')\r\n                    {\r\n                        uiTooltip.remove();\r\n                        return false;\r\n                    }\r\n                    var $id = $(ui.tooltip).attr('id');\r\n                    // close any lingering tooltips\r\n                    uiTooltip.not('#' + $id).remove();\r\n                    // ajax function to pull in data and add it to the tooltip goes here\r\n\r\n                    for(var keyActionGuid in self.requestsInProgressActionGuid){\r\n                        if(self.requestsInProgressActionGuid[keyActionGuid]){\r\n                            var $buttonAction = $(\"li[data-guid='\" + keyActionGuid + \"']\", ui.tooltip);\r\n                            self.addLoadingButtonAction($buttonAction);\r\n                        }\r\n                    }\r\n                },\r\n                close: function(event, ui)\r\n                {\r\n                    ui.tooltip.hover(function()\r\n                        {\r\n                            $(this).stop(true).fadeTo(400, 1);\r\n                        },\r\n                        function()\r\n                        {\r\n                            $(this).fadeOut('400', function()\r\n                            {\r\n                                $(\".wdg-tple-button.batchAction\", this).off(\"click\", $.proxy(self.onClickBatchAction, self));\r\n                                $(this).remove();\r\n                            });\r\n                        });\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Define the data on order to show the sort options\r\n     * @param ev\r\n     * @param params\r\n     */\r\n    setFiltersSortData: function (ev, params) {\r\n        var self = this;\r\n        var filtersAppliedCounter = params.args.filtersAppliedCounter;\r\n        var totalRecords = params.args.totalRecords;\r\n        self._filters = params.args.calculateFilters ? params.args.filters : self._filters;\r\n\r\n        if (params.args.calculateFilters) {\r\n            var i = -1, a, filterCounter = 0, sortCounter = 0;\r\n            while (a = self._filters[++i]) {\r\n                if (a.type != \"Text\" && a.type !== \"Link\" && a.data && ((a.data.defaultValues && a.data.defaultValues.length > 0) || (a.data.min && a.data.max))) {\r\n                    filterCounter++;\r\n                }\r\n                if (a.display !== \"\") {\r\n                    sortCounter++;\r\n                }\r\n            }\r\n\r\n            if (totalRecords > 0) {\r\n                // Si existen filtros, muestre el boton\r\n                if (filterCounter > 0) {\r\n                    self.showFilterButton();\r\n                }\r\n                else {\r\n                    self.hideFilterButton();\r\n                }\r\n                // Si existen filtros que tienen display name, muestre los botones de sort\r\n                if (sortCounter > 0) {\r\n                    self.showSortButtons();\r\n                }\r\n                else {\r\n                    self.hideSortButtons();\r\n                }\r\n            }\r\n            // Si no hay registros y ni se ha aplicado ningun filtro ocultar\r\n            // los botones del sortbar\r\n            else if (filtersAppliedCounter === 0) {\r\n                self.hideFilterButton();\r\n                self.hideSortButtons();\r\n            }\r\n        }\r\n        self.updateCounter(filtersAppliedCounter);\r\n    },\r\n\r\n    /**\r\n     * Show Filter Button\r\n     */\r\n    showFilterButton: function () {\r\n        var self = this;\r\n        $(\".filter-icon\", self.getContent()).show();\r\n    },\r\n\r\n    /**\r\n     * Hide Filter Button\r\n     */\r\n    hideFilterButton: function () {\r\n        var self = this;\r\n        $(\".filter-icon\", self.getContent()).hide();\r\n        self.showingFiltering = false;\r\n        self.behaviorVisibleSortbar();\r\n    },\r\n\r\n    /**\r\n     * Show Sort Buttons\r\n     */\r\n    showSortButtons: function () {\r\n        var self = this;\r\n        $(\".sortbar-text\", self.getContent()).show();\r\n        $(\".sortbar-icon\", self.getContent()).show();\r\n        $(\".sortbar-az\", self.getContent()).show();\r\n\r\n        self.showingSorting = true;\r\n        self.showingFiltering = true;\r\n        self.behaviorVisibleSortbar();\r\n    },\r\n\r\n    /**\r\n     * Hide Sort Buttons\r\n     */\r\n    hideSortButtons: function () {\r\n        var self = this;\r\n        var $sortbarIcon = $(\".sortbar-az\", self.getContent());\r\n\r\n        // Restore initial settings\r\n        $(\".sortbar-text\", self.getContent()).hide();\r\n\r\n        $sortbarIcon.addClass(\"disabled\");\r\n        $sortbarIcon.removeClass(\"bz-icon-order-ascendant-outline\");\r\n        $sortbarIcon.removeClass(\"bz-icon-order-descendant-outline\");\r\n        $sortbarIcon.addClass(\"bz-icon-order-ascendant-outline\");\r\n        $sortbarIcon.hide();\r\n\r\n        self.showingSorting = false;\r\n        self.behaviorVisibleSortbar();\r\n    },\r\n\r\n    /**\r\n     * Restore Order by Option\r\n     */\r\n    restoreOrderSelected: function(){\r\n        var self = this;\r\n        $(\".sortbar-selected\", self.getContent()).text(self.getResource(\"workportal-my-search-order-by\"));\r\n    },\r\n\r\n    /**\r\n     * Set number filters\r\n     * @param params\r\n     */\r\n    updateCounterByFilterApplied: function(params){\r\n        var self = this;\r\n        if(params.args.filtersApplied){\r\n            self.updateCounter(params.args.filtersApplied.length);\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param counter\r\n     */\r\n    updateCounter: function (counter) {\r\n        var self = this,\r\n            $content = self.getContent(),\r\n            $counter = $(\".counter-filters-applied\", $content);\r\n\r\n        if (counter > 0) {\r\n            $counter.html(counter);\r\n            $counter.show();\r\n        }\r\n        else {\r\n            $counter.hide();\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    hideFilterButtonAndBar: function () {\r\n        var self = this;\r\n        self.showingFilter = false;\r\n        $(\".filter-icon\", self.getContent()).hide();\r\n        self.pub(\"notify\", { type: \"CLOSE-MYSEARCHFILTER\", args: {\"show\": false, \"$target\": null}});\r\n    },\r\n\r\n    /**\r\n     * Creates a new case, it could has start form or not\r\n     */\r\n    onExecuteProcess: function (action, mappingData) {\r\n        var self = this;\r\n\r\n        if (action.startForm) {\r\n            action.hasStartForm = action.startForm;\r\n        }\r\n\r\n        $.when(self.processActionService.executeProcessAction({\r\n            action: action,\r\n            mappingData: mappingData\r\n        })).done( function (params) {\r\n            var params = params || {};\r\n\r\n            if(!!params && params.refreshTemplateData !== false){\r\n                self.loadTemplateData(action);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param action\r\n     */\r\n    loadTemplateData: function (action) {\r\n        var self = this;\r\n        self.pub(\"notify\", { type: \"TEMPLATEENGINE-VIEW\", args: {action: action, isRefresh: true}});\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    onExecuteForm: function (action, mappingData) {\r\n        var self = this;\r\n\r\n        $.when(self.processActionService.executeFormAction({\r\n            action: action,\r\n            mappingData: mappingData\r\n        })).done(function (data) {\r\n            if (data.refresh) {\r\n                self.pub(\"notify\", { type: \"UPDATE-DATATEMPLATE-VIEW\", args: { action: action, isRefresh: true, calculateFilters: true }});\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Returns the action required\r\n     */\r\n    getAction: function (guidAction) {\r\n        var self = this;\r\n        return self.commonActionsmodel.actions.filter( function (action) {\r\n            return action.id == guidAction;\r\n        })[0];\r\n    },\r\n\r\n    /**\r\n     * Returns an array with the valid actions\r\n     * @param actions\r\n     * @return {*}\r\n     */\r\n    validActions: function (actions) {\r\n        return $.grep(actions, function (action) {\r\n            if (action.multiplicity == 2) { return true; }\r\n            if (action.mode == \"Collection\") { return false; }\r\n            if (action.type == \"Form\") { return false; }\r\n            if (action.isEvent) { return false; }\r\n            if (action.type == \"Process\" && action.hasStartForm) { return false; }\r\n            return true;\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Detach handlers\r\n     */\r\n    clean: function () {\r\n        var self = this,\r\n            $content = self.getContent();\r\n        self.requestsInProgressActionGuid = {};\r\n\r\n        if ($content) {\r\n            self.unsub(\"TEMPLATEENGINE-VIEW\");\r\n            self.unsub(\"ENABLE-BATCHS-ACTIONS\");\r\n            self.unsub(\"SEARCH-ENGINE-VIEW\");\r\n            self.unsub(\"SET-FILTERS-DATA\");\r\n            self.unsub(\"HIDE-FILTER-BUTTONANDBAR\");\r\n            self.unsub(\"HIDE-SORT-BUTTONS\");\r\n\r\n            self.$checkAll.off(\"click\");\r\n            $content.find(\".right-menu\").off(\"click\");\r\n            $content.find(\".sortbar-az\").off(\"click\");\r\n            $content.find(\".filter-icon\").off(\"click\");\r\n            $content.find(\".sortbar-action\").off(\"click\");\r\n            $(\".wdg-tple-button.batchAction\", $content).off(\"click\", $.proxy(self.onClickBatchAction, self));\r\n            $(\".remove-selected-items-collections\", $content).off(\"click\", $.proxy(self.onRemoveSelectedItemsCollections, self));\r\n        }\r\n    }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.sortbar\", [\"workportalFacade\", \"dataService\", \"processActionService\", \"accumulatedcontext\", bizagi.workportal.widgets.sortbar]);\r\n","/**\r\n * Document   : Bizagi Workportal Desktop My Search Filter Controller\r\n * Created on : May 20, 2015, 11:24:00 AM\r\n * Author     : AndrÃ©s Felipe Arenas Vargas\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.mysearchfilter\", {\r\n\r\n    /**\r\n     *\r\n     * @param workportalFacade\r\n     * @param dataService\r\n     * @param processActionService\r\n     * @param params\r\n     */\r\n    init: function(workportalFacade, dataService, processActionService, params) {\r\n        var self = this;\r\n        self.params = {};\r\n        self._super(workportalFacade, dataService, params);\r\n        self.loadTemplates({\r\n            \"mysearchfilter\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mysearchfilter\").concat(\"#mysearchfilter-wrapper\"),\r\n            \"mysearchfilter-item\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mysearchfilter\").concat(\"#mysearchfilter-item\")\r\n        }).done(function () {\r\n            self.filterItem = self.getTemplate(\"mysearchfilter-item\");\r\n        });\r\n\r\n        self.processActionService = processActionService;\r\n        self.filtersApplied = [];\r\n        self.filters = [];\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        self.content = self.getTemplate(\"mysearchfilter\").render({});\r\n        self.content.hide();\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        self.configureHandlers();\r\n    },\r\n\r\n    /**\r\n     * Asigna los parametros iniciales de la busqueda e inicializa los objetos\r\n     * @param e\r\n     * @param params\r\n     */\r\n    initializeMySearchFilter: function (e, params) {\r\n        var self = this,\r\n            $content = self.getContent();\r\n\r\n        self.criteriaSearchApplied = (params.args.filters) ? bizagi.clone(params.args.filters) : [];\r\n        self.filtersApplied = [];\r\n        self.filterControlArray = [];\r\n        self.orderBy = {};\r\n        $(\".mysearchfilter-list\", $content).empty();\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        self.sub(\"TEMPLATEENGINE-VIEW\", $.proxy(self.initializeMySearchFilter, self));\r\n        self.sub(\"SEARCH-ENGINE-VIEW\", $.proxy(self.initializeMySearchFilter, self));\r\n        self.sub(\"OPENCLOSE-MYSEARCHFILTER\", $.proxy(self.toggleWidget, self));\r\n        self.sub(\"CLOSE-MYSEARCHFILTER\", $.proxy(self.openCloseWidget, self));\r\n        self.sub(\"SET-FILTERS-DATA\", $.proxy(self.setFiltersData, self));\r\n        self.sub(\"SET-ORDERBY\", $.proxy(self.setOrderBy, self));\r\n        self.sub(\"SET-RECORDS\", $.proxy(self.setRecordsPerPage, self));\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param ev\r\n     * @param params\r\n     */\r\n    setFiltersData: function (ev, params) {\r\n        var self = this;\r\n\r\n        if (params.args.defaultFilterApplied) {\r\n            params.args.filtersApplied = params.args.filtersApplied || [];\r\n            var filtersAppliedWithProperties = params.args.filtersApplied.filter(function(filter){\r\n                return typeof filter.properties !== \"undefined\";\r\n            });\r\n            self.filtersApplied = filtersAppliedWithProperties;\r\n        }\r\n\r\n        if (params.args.calculateFilters) {\r\n            var $content = self.getContent();\r\n            var $listContent = $(\".mysearchfilter-list\", $content);\r\n            var filters = params.args.filters;\r\n            var filtersAppliedCounter = params.args.filtersAppliedCounter;\r\n\r\n            var i = -1, a, counter = 0;\r\n            while (a = filters[++i]) {\r\n                if (a.type != \"Text\" && a.type !== \"Link\" && a.data && ((a.data.defaultValues && a.data.defaultValues.length > 0) || (a.data.min && a.data.max))) {\r\n                    counter++;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            //Si no hay registros y no hay filtros oculta\r\n            if (params.args.totalRecords === 0 && filtersAppliedCounter === 0) {\r\n                self.openCloseWidget({show: false});\r\n            }\r\n            else if (counter === 0) {\r\n                self.openCloseWidget({show: false});\r\n            }\r\n            else {\r\n                self.openCloseWidget({show: true});\r\n            }\r\n\r\n\r\n            if (self.filterControlArray && self.filterControlArray.length === 0) {\r\n                var i = -1, a;\r\n\r\n                while (a = filters[++i]) {\r\n                    a[\"tmplid\"] = a.attribute.replaceAll(\".\", \"-\"); //used in mysearchfilter.tmpl.html\r\n\r\n                    var foundDefaultFilter = self.filtersApplied.filter(function(defaultFilter){\r\n                        return defaultFilter.properties.type === a.type.toLowerCase() && defaultFilter.properties.xpath === a.tmplid\r\n                    });\r\n\r\n                    if(foundDefaultFilter.length > 0){\r\n                        a.filterApplied = \"filter-applied\";\r\n                    }\r\n                    else{\r\n                        a.filterApplied = \"\";\r\n                    }\r\n                    var filterItem = self.filterItem.render(a);\r\n\r\n                    if (a.type !== \"Text\" && a.type !== \"Link\" && a.data && ((a.data.defaultValues && a.data.defaultValues.length > 0) || (a.data.min && a.data.max))) {\r\n                        $listContent.append(filterItem);\r\n                        self.buildFilter(filterItem, a);\r\n                        if(a.filterApplied === \"filter-applied\"){\r\n                            $(\".remove-filter\", filterItem).show();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (self.filterControlArray && self.filterControlArray.length > 0) {\r\n                var i = -1, a;\r\n                while (a = self.filterControlArray[++i]) {\r\n                    var filter = filters.find(function (el) {\r\n                        return el.attribute === a.xpath;\r\n                    });\r\n                    if (filter) {\r\n                        self.setFilterData(a, filter);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        $(\".filters-loading\", self.content).hide();\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param e\r\n     * @param params\r\n     */\r\n    toggleWidget: function (e, params) {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var status = $content.is(\":visible\");\r\n\r\n        self.openCloseWidget({show: !status, $target:  params.args.target});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param params\r\n     */\r\n    openCloseWidget: function (params) {\r\n        var self = this,\r\n            $content = self.getContent(),\r\n            $target = params.$target || $(\"<div>\");\r\n\r\n        if (params.show){\r\n            $target.addClass(\"opened\");\r\n            $content.show();\r\n        }\r\n        else{\r\n            $target.removeClass(\"opened\");\r\n            $content.hide();\r\n            $(\"button#ui-bizagi-cancel-filter\").click();\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilter: function ($element, filter) {\r\n        var self = this;\r\n        switch (filter.type) {\r\n            case \"Entity\":\r\n                self.buildFilterMultiple($element, filter);\r\n                break;\r\n            case \"Number\":\r\n                self.buildFilterNumber($element, filter);\r\n                break;\r\n            case \"Money\":\r\n                self.buildFilterMoney($element, filter);\r\n                break;\r\n            case \"Datetime\":\r\n                self.buildFilterDate($element, filter);\r\n                break;\r\n            /*case \"Text\":\r\n                self.buildFilterText($element, filter);\r\n                break;*/\r\n            case \"Boolean\":\r\n                self.buildFilterBoolean($element, filter);\r\n                break;\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param filter\r\n     * @param data\r\n     */\r\n    setFilterData: function (filter, filterData) {\r\n        switch (filter.type) {\r\n            case \"Entity\":\r\n                filter.widget.multiple(\"setData\", filterData.data);\r\n                break;\r\n            case \"Number\":\r\n                filter.widget.number(\"setData\", filterData.data);\r\n                break;\r\n            case \"Money\":\r\n                filter.widget.money(\"setData\", filterData.data);\r\n                break;\r\n            case \"Datetime\":\r\n                filter.widget.dateFilter(\"setData\", filterData.data);\r\n                break;\r\n            /*case \"Text\":\r\n                filter.widget.textFilter(\"setData\", data);\r\n                break;*/\r\n            case \"Boolean\":\r\n                filter.widget.booleanFilter(\"setData\", filterData.data);\r\n                break;\r\n\r\n        }\r\n    },\r\n\r\n    /*buildFilterText: function ($element, filter) {\r\n        var self = this;\r\n        var textFilter = $element.textFilter({\r\n            properties: filter,\r\n            onApply: function (data) {\r\n                if (data.length !== 0) {\r\n                    self.addFilterSelection(data);\r\n                    self.triggerFilter({calculateFilters: true});\r\n                }\r\n            },\r\n            onClear: function (xpaths) {\r\n                self.removeFilterApplied(xpaths);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return bizagi.localization.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget: textFilter});\r\n    },*/\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilterMoney: function ($element, filter) {\r\n        var self = this;\r\n\r\n        var moneyFilter = $element.money({\r\n            showButtonClearFilter: true,\r\n            numericFormat: self.getResource(\"numericFormat\"),\r\n            properties: filter,\r\n            data: filter.data,\r\n            onApply: function (data, element) {\r\n                self.addFilterSelection(data);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            onClear: function (xpath) {\r\n                self.removeFilterApplied(xpath);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return bizagi.localization.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget: moneyFilter});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilterNumber: function ($element, filter) {\r\n        var self = this;\r\n        var numberFilter = $element.number({\r\n            showButtonClearFilter: true,\r\n            numericFormat: self.getResource(\"numericFormat\"),\r\n            properties: filter,\r\n            data: filter.data,\r\n            onApply: function (data, element) {\r\n                if (data.length !== 0) {\r\n                    self.addFilterSelection(data);\r\n                    self.triggerFilter({calculateFilters: true});\r\n                }\r\n            },\r\n            onClear: function (xpath) {\r\n                self.removeFilterApplied(xpath);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return bizagi.localization.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget: numberFilter});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilterDate: function ($element, filter) {\r\n        var self = this;\r\n        var dateFilter = $element.dateFilter({\r\n            showButtonClearFilter: true,\r\n            properties: filter,\r\n            onApply: function (data, element) {\r\n                self.addFilterSelection(data);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            onClear: function (xpaths) {\r\n                self.removeFilterApplied(xpaths);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return self.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget: dateFilter});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilterMultiple: function ($element, filter) {\r\n        var self = this;\r\n        var multipleFilter = $element.multiple({\r\n            showButtonClearFilter: true,\r\n            properties: filter,\r\n            data: filter.data,\r\n            onApply: function (data, element) {\r\n                self.addFilterSelection(data);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            onClear: function (xpath) {\r\n                self.removeFilterApplied(xpath);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return bizagi.localization.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget:multipleFilter});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param $element\r\n     * @param filter\r\n     */\r\n    buildFilterBoolean: function ($element, filter) {\r\n        var self = this;\r\n        var booleanFilter = $element.booleanFilter({\r\n            showButtonClearFilter: true,\r\n            properties: filter,\r\n            data: filter.data,\r\n            onApply: function (data, element) {\r\n                self.addFilterSelection(data);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            onClear: function (xpath) {\r\n                self.removeFilterApplied(xpath);\r\n                self.triggerFilter({calculateFilters: true});\r\n            },\r\n            getResource: function (key) {\r\n                return bizagi.localization.getResource(key);\r\n            }\r\n        });\r\n\r\n        self.filterControlArray.push({type: filter.type, xpath: filter.attribute, widget: booleanFilter});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param data\r\n     */\r\n    addFilterSelection: function (data) {\r\n        var self = this;\r\n        $(\".filters-loading\", self.content).show();\r\n        for (var i = 0, len = data.length ; i < len; i++) {\r\n            self.removeFilterApplied([data[i].properties.xpath]);\r\n            self.filtersApplied.push(data[i]);\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param xpaths\r\n     */\r\n    removeFilterApplied: function (xpaths) {\r\n        var self = this;\r\n\r\n        $(\".filters-loading\", self.content).show();\r\n\r\n        var i = -1, a;\r\n        while(a = xpaths[++i]){\r\n            var filter = self.filtersApplied.find(function (el) {\r\n                return el.properties.xpath === a;\r\n            });\r\n            if (filter){\r\n                self.filtersApplied.splice(self.filtersApplied.indexOf(filter), 1);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param ev\r\n     * @param params\r\n     */\r\n    setOrderBy: function (ev, params) {\r\n        var self = this;\r\n        self.orderBy = params.args;\r\n        self.triggerFilter({calculateFilters: false});\r\n    },\r\n\r\n    setRecordsPerPage: function (ev, params) {\r\n        var self = this;\r\n        self.triggerFilter({ calculateFilters: false, pageSize: params.args && params.args.pageSize });\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param params\r\n     */\r\n    triggerFilter: function (params) {\r\n        var self = this;\r\n        var filtersToSend = self.criteriaSearchApplied ?  bizagi.clone(self.criteriaSearchApplied) : [];\r\n        var filtersApplied = self.filtersApplied.slice();\r\n        var filterBarFilters = [];\r\n\r\n        var i = -1, a;\r\n        while(a = filtersApplied[++i]){\r\n            self.dataService.defineFilterObject(a, filtersToSend);\r\n            self.dataService.defineFilterObject(a, filterBarFilters);\r\n        }\r\n\r\n        var filtersAppliedCounter = filterBarFilters.length;\r\n\r\n        //Set sort in json to send\r\n        if(self.orderBy.properties){\r\n            self.dataService.defineFilterObject(self.orderBy, filtersToSend);\r\n        }\r\n\r\n        var filterParams = {\r\n            type: \"UPDATE-DATATEMPLATE-VIEW\",\r\n            args: {\r\n                filters: filtersToSend,\r\n                page: 1,\r\n                level: 1,\r\n                calculateFilters: params.calculateFilters || false,\r\n                defaultFilterApplied: false,\r\n                typeSearch: \"filter\",\r\n                filtersAppliedCounter: filtersAppliedCounter,\r\n                pageSize: params.pageSize || 10\r\n            }\r\n        };\r\n\r\n        self.pub(\"notify\", filterParams);\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.mysearchfilter\", [\"workportalFacade\", \"dataService\", \"processActionService\", bizagi.workportal.widgets.mysearchfilter], false);"]}